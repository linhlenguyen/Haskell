%!PS-Adobe-2.0
%%Creator: dvipsk 5.58c Copyright 1986, 1994 Radical Eye Software
%%Title: body.dvi
%%Pages: 14
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -f body.dvi
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1997.11.10:1413
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (body.dvi)
@start /Fa 56 125 df<EA4040EAE0E0A7EA40400B097D9312>34
D<EA0E38A4EAFFFEA2127FEA1C70A5EA7FFE12FFA2EA38E0A50F147F9312>I<EA3018EA
783812FC1370A313E0A21278EA31C01201A2EA0380A2EA0700A3EA0E18133C137E121CA3
1238133CEA18180F1A7F9612>37 D<EA01801203EA06005A5A123812301270A25AA71270
A21230123812187E7EEA0380120109197B9612>40 D<128012C0126012301218121C120C
120EA21207A7120EA2120C121C12181230126012C0128008197C9612>I<1207A3EAE738
EAFFF8EA7FF0EA1FC0A2EA7FF0EAFFF8EAE738EA0700A30D0E7E9012>I<EA0380A6EAFF
FEA3EA0380A60F0F7F9112>I<126012F012F8127812181230A212E012C00509798312>I<
EA07C0EA0FE0EA1C70EA3838EA701CA2EAE00EA7131EEA701CA2EA3838EA1C70EA0FE0EA
07C00F147F9312>48 D<1206A2120E121E12FE12EE120EACEAFFE0A20B147D9312>I<EA
0F80EA3FC0EA70E0EAE0701338A2124012001330137013E013C0EA0180EA030012065AEA
18381230EA7FF8A20D147E9312>I<EA0FC0EA3FF0EA7838EA701C1220120013381370EA
07E013F0EA0038131C130EA2124012E0131CEA7838EA3FF0EA0FC00F147F9312>I<13F0
1201EA0370A21206120E120C121C1238A2127012E0EAFFFEA2EA0070A4EA03FEA20F147F
9312>I<EA7FF0A2EA7000A6EA7F8013E0EA607012001338124012E0A21370EA70E0EA3F
C0EA1F000D147E9312>I<EA01F0EA07F8EA0E1C12181238EA7000A2EAE7C0EAEFF0EAF8
38EAF01CEAE00EA31270A2EA301CEA3838EA1FF0EA07C00F147F9312>I<EA07C0EA1FF0
EA3C78EA783CEA701CA3EA3838EA0FE0EA07C0EA3C78EA701CEAE00EA4EA701CEA783CEA
1FF0EA0FE00F147F9312>56 D<EA07C0EA1FF0EA3838EA7018EAE01C130C130EA2EA701E
EA383EEA1FEEEA0FCEEA000E131CA2EA7018133813F0EA3FC0EA0F800F147F9312>I<12
6012F0A212601200A6126012F0A212701230A2126012C012800413798D12>59
D<EAFFFEA2127FC7FCA3EA7FFE12FFA20F097F8E12>61 D<124012E07E127C7EEA0F80EA
07C0EA01E0EA00F8137813F8EA01E0EA07C0EA0F80EA3E005A12F05A12400D137E9312>
I<EA03E6EA0FFEEA1C3EEA381EEA700EA21260EAE000A6EA600E1270A2EA381CEA1C38EA
0FF0EA03E00F147F9312>67 D<EAFFE0A2EA0E00B0EAFFE0A20B147D9312>73
D<EA07F8A2EA00E0AD124012E0EAE1C0EA7F80EA3F000D147E9312>I<EAFC7EA2EA7C7C
EA745CEA76DCA61277EA739CA2EA701CA5EAF83EA20F147F9312>77
D<EAFEFEA2EA3E38123A123BA6EA39B8A6123813F812FEA20F147F9312>I<EA3FE0EA7F
F0EA7070EAE038AEEA7070EA7FF0EA3FE00D147E9312>I<EA7FFE12FFEAE38EA3EA0380
ADEA0FE0A20F147F9312>84 D<EAFC7EA2EA783CEA3838A4EA1C70A4EA0C60EA0EE0A3EA
06C0A21207A2EA03800F147F9312>86 D<EAFFC0A2EAE000B3A4EAFFC0A20A1A7A9612>
91 D<EAFFC0A21201B3A412FFA20A1A7F9612>93 D<EAFFF8A30D037E7F12>95
D<EA1FC0EA3FF0EA3838EA101C1200EA07FC123FEA781C12E0A3EA703C383FFF80EA1FCF
110E7F8D12>97 D<12F8A21238A4EA3BE0EA3FF0EA3C38EA381C130C130EA4130C131CEA
3C38EA3FF0EA1BC00F147F9312>I<EA07F0EA1FF8EA3838EA7010EA600012E0A41260EA
70381238EA1FF0EA07E00D0E7E8D12>I<13F8A21338A4EA07B8EA1FF8EA3878EA703812
6012E0A41260EA70781238EA1FFEEA0FBE0F147F9312>I<EA0780EA1FE0EA38701270EA
603812E0EAFFF8A2EAE0001260EA70381238EA1FF0EA07C00D0E7E8D12>I<137E13FFEA
01C7EA03821380A2EA7FFE12FFEA0380AAEA3FF8A21014809312>I<EA0F9EEA1FFFEA38
E7EA7070A4EA38E0EA3FC01380EA7000EA3FE013F813FCEA701EEAE00EA3EA600CEA783C
EA1FF0EA0FE010167F8D12>I<12F8A21238A4EA39E0EA3FF0EA3E38123C1238A8EAFE3E
A20F147F9312>I<1206120FA21206C7FCA3127FA21207AAEAFFF0A20C157D9412>I<B4FC
A21207B0EAFFF8A20D147E9312>108 D<EAF71CEAFFBEEA79E7A2EA71C7A838F9E780EA
F8E3110E808D12>I<EAF9E0EAFFF0EA3E38123C1238A8EAFE3EA20F0E7F8D12>I<EA0F80
EA3FE01238EA7070EAE038A5EAF078EA7070EA38E0123FEA0F800D0E7E8D12>I<EAFBE0
EAFFF0EA3C38EA381C130C130EA4130C131CEA3C38EA3FF0EA3BC0EA3800A512FEA20F15
7F8D12>I<EA079CEA1FFCEA387CEA703CEA601C12E0A41260EA703CEA387CEA1FFCEA07
9CEA001CA5137FA210157F8D12>I<EAFC78EAFDFCEA1F9CEA1E081300121CA7EAFFC0A2
0E0E7E8D12>I<EA1FF0123FEA607012C0EAE000127FEA3FE0EA0FF0EA0078EA601812E0
EAF030EAFFE0EADFC00D0E7E8D12>I<1206120EA3EA7FF812FFEA0E00A7131CA3EA07F8
EA01E00E127F9112>I<EAF8F8A2EA3838A91378EA1FFEEA0FBE0F0E7F8D12>I<EAFC7EA2
EA3838A2EA1C70A3EA0EE0A4EA07C0A2EA03800F0E7F8D12>I<EAFEFEA2EA701CA3EA30
18EA3BB8EA3FF8A2EA3AB81238EA1CF0A30F0E7F8D12>I<EA7C7CA2EA1CF0EA0EE0EA0F
C01207EA0380120713C0EA0EE0EA1EF0EA1C70EAFC7EA20F0E7F8D12>I<EAFC7EA2EA38
38121C1370A2120E136013E01206A2EA07C01203A21380A3EA7700127F127E12380F157F
8D12>I<EA3FFC127FEA70381370EA00E0EA01C0EA0380EA0700120EEA1C1C12381270EA
FFFCA20E0E7F8D12>I<12E0B3A8031A799612>124 D E /Fb 40
122 df<EB7FF0EA01E0EA0781EA0F01A21300A4B5FCA2EA0F00AD383FC3FCA2161A8099
19>13 D<13F0EA038CEA07041306120FA21304130C5B90381007F8EA07A09038C00180A2
0003EB03003807E006EA0DF000185B3838F81838787C3038F83E606D5A6D5A39FC07C018
397E1FF030393FF8FFF0390FE01FC01D1A7E9922>38 D<127812FC12FEA3127A1202A212
04A2120812101260070D7D990C>I<127012F812FCA3127C1204A21208A2121012201240
060D7D850C>44 D<127812FCA4127806067D850C>46 D<1303497EA2497EA3EB1BE0A2EB
3BF01331A2EB60F8A2EBE0FCEBC07CA248487EEBFFFE487FEB001F4814800006130FA248
EB07C039FF803FFCA21E1A7F9921>65 D<90381FE0209038FFFCE03803F80F3807C00338
1F800190C7FC123E007E1460127C00FC1400A8007C1460127E123E6C14C07F3907C00380
3903F80F003800FFFCEB1FF01B1A7E9920>67 D<B512F014FC380F803FEC0F80EC07C0EC
03E0A2EC01F0A215F8A815F0A2140315E0EC07C0EC0F80EC3F00B512FC14F01D1A7E9922
>I<B512FEA2380F803E140E1406140780EB8183A21480138313FFA213831381A2EC8180
EB8001EC0300A35C5C143EB512FEA2191A7E991D>I<B512FCA2380F803C141C140C140E
1406A2EB81861480A2138313FFA213831381A3EB8000A6EAFFFCA2171A7E991C>I<EAFF
F8A2EA0F80B3A4EAFFF8A20D1A7E9911>73 D<EAFFFCA2EA0F80AE140CA3141CA2143814
7814F8B5FCA2161A7E991B>76 D<B46CEB0FF86D131F000F1580D80DE01337A3D80CF013
67A2017813C7A290383C0187A290381E0307A3EB0F06A2EB078CA2EB03D8A2EB01F0A33A
FFC0E07FF8A2251A7E992A>I<B512E014F8380F807E80801580A51500143E5CEBFFF801
80C7FCAAEAFFF8A2191A7E991E>80 D<B512C014F8380F807E80801580A41500143E14FC
EBFFE01381EB80F01478147CA3147EA3150C143F39FFF81F18EC07F01E1A7E9921>82
D<3807F040381FFDC0EA3C0FEA7803EA700112F01300A26C1300B4FCEA7FF86CB4FC6C13
806C13C0000113E0EA000FEB03F01301EAC000A36C13E0EAF00138FC03C038EFFF803883
FE00141A7E9919>I<007FB51280A238781F07007013030060130100E014C000C01300A3
00001400AF3807FFFCA21A1A7E991F>I<39FFF007FCA2390F8000C0A2EBC00100071480
13E00003EB0300A23801F006A26C6C5AA2EBFC1CEB7C18A26D5AA26D5AA214E06D5AA26D
5AA26DC7FC1E1A7F9921>86 D<EA1FF0EA383CEA7C1E7FA21238120013FFEA0FCFEA3E0F
127C12F8A31317387C27E0EA1FC313117F9015>97 D<12FCA2123CA713FE383F8780383E
01C0003C13E0EB00F0A214F8A514F0A2EB01E0003E13C0383B07803830FE00151A7E9919
>I<EA03FCEA0F0EEA1C1F123C1278130E00F8C7FCA51278A2383C0180381C0300EA0F06
EA03FC11117F9014>I<EB07E0A21301A7EA03F9EA0F07EA1C03EA3C011278A212F8A512
78A2123CEA1C03380F0DF8EA03F9151A7F9919>I<EA03F0EA0E1C487EEA3C0712781480
12F8A2B5FC00F8C7FCA21278A2383C0180381C0300EA0E06EA03FC11117F9014>I<13FE
EA03C738078F80EA0F0FA2EB070090C7FCA3EAFFF0A2000FC7FCADEA3FE0A2111A80990E
>I<3807F1C0381C1EE0EA380E38780FC01400A4EA380E6C5AEA37F00020C7FC1230A2EA
3FFE381FFF8014C0EA700338E000E0A4387001C0383C07803807FC0013197F9016>I<12
FCA2123CA7133EEBC780EA3D03003E13C0A2123CAA38FF0FF0A2141A7E9919>I<123C12
7EA4123C1200A412FCA2123CAD12FFA2081B7E9A0D>I<12FCA2123CB3A412FFA2081A7E
990D>108 D<39FC3E03E09038C78C78393D039038003EEBE03CA2003C13C0AA39FF0FF0
FFA220117E9025>I<EAFC3EEBC780EA3D03003E13C0A2123CAA38FF0FF0A214117E9019>
I<EA03F8EA0E0E383C0780EA3803007813C0A200F813E0A6007813C0EA7C07003C138038
0E0E00EA03F813117F9016>I<EAFCFE38FF8780383E03C0383C01E014F0130014F8A514
F0130114E0383E03C0383F0780383CFE0090C7FCA5B4FCA215187E9019>I<EAF8F0EAF9
38EA3A7CA2123C13381300A9EAFF80A20E117E9012>114 D<EA1FD8EA2078EA401812C0
A2EAF000EAFF80EA7FE0EA3FF0EA07F8EA003CEAC00CA212E01308EAF830EACFE00E117F
9011>I<1206A4120EA2121EEA3FF012FFEA1E00A81318A5EA0F30EA03E00D187F9711>I<
38FC0FC0A2EA3C03AB1307A2381E0BF0EA07F314117E9019>I<38FF03F0A2383E01C000
1E1380EA1F03000F1300A2EA0786A2EA03CCA213FC6C5AA26C5AA2136014117F9017>I<
39FF1FE1F8A2393C078060001E14C014C0EB0DC1000F1480EB1DE1390798E30014F3EBB0
733803F076147EEBE03E0001133CA23800C0181D117F9020>I<38FF07F0A2001E1300EA
0F06EA078CEA03DC13F86C5A1200487E13BCEA031E1207EA0E0F381C078038FE0FF0A214
117F9017>I<38FF03F0A2383E01C0001E1380EA1F03000F1300A2EA0786A2EA03CCA213
FC6C5AA26C5AA21360A2EA70C012F812F95B0077C7FC123C14187F9017>I
E /Fc 3 119 df<120FEA1F80EA30C01260EAC060A2EAFFE0A2EAC000EA60601230EA1F
C0EA0F800B0D7F8C0F>101 D<12081218A2EA7FC012FFEA1800A61360A3EA0FC0EA0780
0B107F8F0F>116 D<EAF9F0A2EA30C0A31239EA1980A3EA0F00A312060C0D7F8C0F>118
D E /Fd 17 123 df<EB03C0EB0C301310EB203813401380EA0100A2000213701460EB1F
C0131138041F60EB0070A35AA31460001813E014C0EB018038140300EA230EEA20F890C7
FCA25AA45A1521809916>12 D<EA703EEA58C7389D0380129E129CA238380700A4EA700E
A4485A12601200A25BA4133011177E8F13>17 D<120FEA03807F1201A27F1200A27F1370
A213781338A2133C137C13DEEA018EEA030EEA060F487E121C00381380EA700312E038C0
01C0121A7E9916>21 D<126012F0A2126004047D830B>58 D<0003B512C0380070011400
15405BA43901C02000A3146048B45A13801440A248485A91C7FCA3120EA4121EEAFFE01A
1A7E9919>70 D<EA01F0EA0608EA1C04123812701308EAFFF0EAE000A41304EA60081310
EA3060EA0F800E107F8F12>101 D<EB07C0EB0C60EB1CE0EB18C0EB3800A45BA2EA07FF
EA0070A25BA5485AA6485AA390C7FCA2126712E65A127813217E9913>I<EA1F801203A3
48C7FCA4120EA2133E13C7381D0380121E121CA238380700A3130E00701340A2131C1480
EAE00C38600700121A7F9916>104 D<120313801300C7FCA7123C124EA2128EA2129C12
1CA25AA212391271A21272A2123C091A7E990D>I<123F1207A3120EA4121CA41238A412
70A412E2A312E412641238081A7F990B>108 D<EA30F0EA5918EA9E38EA9C181300A25A
A45AA45A12600D107E8F11>114 D<EA03E0EA06181208EA18381330EA1C00EA1FC0EA0F
E0EA07F0EA0070133012E0A2EA8060EA40C0EA3F000D107E8F12>I<1206120EA45AA2EA
FFE0EA1C005AA45AA4EAE080A2EAE100A2126612380B177E960E>I<EA380CEA4C0E124E
EA8E06129CA2EA1C041238A213081270A2EA3010EA3820EA1840EA0F800F107E8F13>
118 D<380787803808C8C0EA10F1EA20E01400A2EA01C0A4EA0381A212C3EAE582EAC584
EA787812107F8F16>120 D<EA3803004C1380384E0700128E129CA2EA1C0E1238A3485A
A3EA303C6C5AEA0FB8EA00385B1260EAE0E0485AEA4380003EC7FC11177E8F13>I<EA03
81EA07C2EA0FFCEA10041308EA003013401380EA01001202EA0C041210EA200CEA3FF8EA
41F0EA80E010107F8F12>I E /Fe 4 53 df<121812F81218AA12FF080D7D8C0E>49
D<123EEA4180EA80C012C01200A2EA0180EA03001204EA08401230EA7F8012FF0A0D7E8C
0E>I<123E1241EA61801201EA0300121EEA0180EA00C0A212C0A2EA4180EA3E000A0D7E
8C0E>I<12035AA2120B12131223126312C3EAFFC0EA0300A3EA0FC00A0D7E8C0E>I
E /Ff 65 125 df<EAC060EAE0E0A4EAC060A5EA40400B0B7C9614>34
D<126012F012F812781218A31230A2126012C01280050C789614>39
D<EA01801203EA06005A121C121812385AA35AA91270A37E1218121C120C7EEA03801201
091D799914>I<128012C01260123012381218121C120EA31207A9120EA3121C12181238
1230126012C01280081D7C9914>I<EA0380A3EA638CEAF39EEA7FFCEA3FF8EA0FE0A2EA
3FF8EA7FFCEAF39EEA638CEA0380A30F107E9214>I<EA01C0A7B51280A33801C000A711
117F9314>I<127012F812FCA2127C120C1218123012E012C0060A798414>I<EAFFFEA30F
037E8C14>I<127012F8A312700505798414>I<EA07C0EA0FE0EA1C70EA3838EA3018EA70
1CA2EAE00EA9EA701CA2EA3838A2EA1C70EA0FE0EA07C00F177E9614>48
D<1203A25A5A123F12F712471207AEEA7FF0A20C177C9614>I<EA0FC0EA1FF0EA3838EA
701CEAE00EA312401200131CA213381330137013E0EA01C0EA030012065AEA180E1230EA
7FFEA20F177E9614>I<EA0FC0EA1FF0EA3838EA701CA212201200131813381370EA0FE0
13F0EA0038131C130EA2124012E0A2EA701CEA7838EA3FF0EA0FC00F177E9614>I<1378
13F8EA01B8A2EA0338A21206120E120C121C12381230127012E0B51280A238003800A548
B4FCA211177F9614>I<EA7FFCA2EA7000A7EA77C0EA7FF0EA7838EA601CEA000C130EA2
124012E0131C1260EA7878EA3FF0EA0FC00F177E9614>I<EA01F0EA07F8EA0E1C121C12
38EA30001270A25AEAE7C0EAEFF0EAF838EAF01C130CEAE00EA212601270130CEA381CEA
1C38EA0FF0EA07C00F177E9614>I<127012F8A312701200A6127012F8A312700510798F
14>58 D<127012F8A312701200A6126012F012F8A2127812181230127012E01280051579
8F14>I<B51280A27EC8FCA3387FFF80B5FCA211097F8F14>61 D<124012E012F8127C12
1EEA0F80EA07C0EA01F0EA00F8133E131E133E13F8EA01F0EA07C0EA0F80EA1E00127C5A
12E012400F157E9514>I<EA01C0487EA21360A2EA0770A4EA0630EA0E38A4487EEA1FFC
A2EA1C1CA2487EA238FE3F80A211177F9614>65 D<EAFFF013FCEA381E130E1307A4130E
131EEA3FFCA2EA381E130E1307A5130E131EEAFFFC13F810177F9614>I<3801F180EA07
FFEA0E1FEA1C071238EA7003A348C7FCA738700380A338380700121CEA0E0EEA07FCEA01
F011177F9614>I<EAFFE013F8EA383C7F130E7FA3EB0380A8EB0700A2130E131E5BEAFF
F813E011177F9614>I<B5FCA2EA3807A490C7FCA21338A2EA3FF8A2EA3838A290C7FCA3
EB0380A4B5FCA211177F9614>I<B51280A2EA3803A490C7FCA21338A2EA3FF8A2EA3838
A290C7FCA7B4FCA211177F9614>I<EA03C6EA0FFEEA1C3EEA181E1238EA700EA21260EA
E000A4137FA2130E12601270A2EA381E1218EA1C3EEA0FFEEA03CE10177F9614>I<EAFF
F8A2EA0700B3EAFFF8A20D177D9614>73 D<B4FCA21238AF1307A4B5FCA210177E9614>
76 D<38FC1F80A2007C1300EA7637A4EA7777A2EA7367A313E7EA71C7A2EA7007A638F8
0F80A211177F9614>I<38FE3F80A2383E0E00123BA4138E1239A213CEA31238A213EE13
6EA4133E12FEA211177F9614>I<EA1FF0EA7FFCEA783CEA701CEAE00EADEAE38EEAE1CE
EA71DCEA78FC127FEA1FF0EA00781338133C131C131E0F1C7E9614>81
D<387FFF80B5FCEAE1C3A43801C000AFEA0FF8A211177F9614>84
D<38FC1F80A238380E00A3EA3C1EEA1C1CA46C5AA4EA0630EA0770A3EA0360A213E0A26C
5A11177F9614>86 D<38FC1F80A238380E00EA3C1EEA1C1CEA1E3CEA0E38A26C5AA2EA03
6013E0A26C5AA8EA07F0A211177F9614>89 D<EAFFE0A2EAE000B3A7EAFFE0A20B1D7999
14>91 D<EAFFE0A21200B3A712FFA20B1D7F9914>93 D<EAFFFEA30F037E7E14>95
D<EA1FC0EA7FF0EA7078EA2018EA001CA2EA07FC121FEA3C1C127012E0A3EA707C383FFF
80EA0F8F11107E8F14>97 D<12FCA2121CA513F8EA1DFEEA1F07EA1E03001C1380EB01C0
A6EB0380001E1300EA1F0EEA1DFCEA0CF81217809614>I<EA03F8EA0FFEEA1C0EEA3804
EA7000126012E0A412601270EA380EEA1C1EEA0FFCEA03F00F107E8F14>I<137EA2130E
A5EA07CEEA0FFEEA1C3EEA301EEA700E12E0A61270EA301EEA383E381FEFC0EA07CF1217
7F9614>I<EA07E0EA0FF0EA1C38EA301CEA700CEAE00EA2EAFFFEA2EAE00012601270EA
380EEA1C1EEA0FFCEA03F00F107E8F14>I<13FCEA01FEEA038EEA07041300A3EA7FFE12
FFEA0700ACEAFFF8A20F177F9614>I<EA07CF381FFF80EA383B38301800EA701CA3EA30
18EA3838EA3FF0EA37C00070C7FCA2EA3FF86C7E487EEA700F38E00380A438700700EA3C
1EEA1FFCEA07F011197F8F14>I<12FCA2121CA51378EA1DFEEA1F86EA1E07121CAA38FF
8FE0A21317809614>I<1206120FA21206C7FCA4B4FCA21207ACEAFFF8A20D187C9714>I<
136013F0A213601300A4EA1FF0A2EA0070B2EA40E0EAE0C0EA7F80EA3F000C207E9714>
I<12FCA2121CA5EBFF80A2EB1C005B5B5BEA1DC0EA1FE0A2EA1E70EA1C38133C131C7F38
FF1F80A21117809614>I<EAFF80A21203B3EAFFFEA20F177E9614>I<EAFB8EEAFFDF383C
F380A2EA38E3AA38FEFBE013791310808F14>I<EAFC78EAFDFEEA1F86EA1E07121CAA38
FF8FE0A21310808F14>I<EA07C0EA1FF0EA3C78EA701CA2EAE00EA6EA701CEA783CEA3C
78EA1FF0EA07C00F107E8F14>I<EAFCF8EAFDFEEA1F07EA1E03001C1380EB01C0A6EB03
80001E1300EA1F0EEA1DFCEA1CF890C7FCA6B47EA21218808F14>I<EA03E7EA0FF7EA1C
1FEA300F1270487EA6EA700F1230EA1C3FEA0FF7EA07C7EA0007A6EB3FE0A213187F8F14
>I<EAFE1FEB7F80EA0EE3380F810090C7FCA2120EA8EAFFF0A211107F8F14>I<EA0FD8EA
3FF8EA603812C0A2EAF000EA7F80EA3FF0EA07F8EA001CEA600612E012F0EAF81CEAFFF8
EACFE00F107E8F14>I<1206120EA4EA7FFC12FFEA0E00A8130EA3131CEA07F8EA01F00F
157F9414>I<EAFC3FA2EA1C07AB131F380FFFE0EA03E71310808F14>I<38FE3F80A2383C
1E00EA1C1CA36C5AA3EA0630EA0770A36C5AA311107F8F14>I<38FE3F80A238700700EA
380EA3EA39CEA3EA1B6C121AA3EA1E7CA2EA0E3811107F8F14>I<EA7E3FA2EA1E3CEA0E
78EA07705B12036C5A12037FEA0770EA0E781338487E38FE3F80A211107F8F14>I<38FE
3F80A2381C0E005BA2120E5BA212071330A2EA0370A25B1201A25BA3485A12730077C7FC
127E123C11187F8F14>I<EA3FFF5AEA700E131C1338EA007013E0EA01C0EA0380EA0700
120EEA1C0712381270B5FCA210107F8F14>I<12E0B3AB031D789914>124
D E /Fg 4 53 df<1218127812981218AC12FF08107D8F0F>49 D<121FEA6180EA40C0EA
806012C01200A213C0EA0180EA030012065AEA10201220EA7FC012FF0B107F8F0F>I<12
1FEA2180EA60C0A212001380EA0100121FEA00801340136012C0A2EA8040EA6080EA1F00
0B107F8F0F>I<EA0180A212031205120D121912111221124112C1EAFFE0EA0180A4EA0F
E00B107F8F0F>I E /Fh 18 122 df<EA0180120F12FF12F71207ADEA7FF8A20D137D92
13>49 D<1260EA7FFFA213FE13FCEAE018EAC0301360EA00C0120113801203EA0700A35A
A4120610147E9313>55 D<EA07E0EA1FF8EA383CEA701EEAF00E130FA31270131FEA382F
EA0FCFEA000FEA300EEA781E131CEA7078EA3FF0EA0FC010137F9213>57
D<EBFF0C000313DC380FC07C381F003C003C131C007C130C127800F81300A60078130C12
7C003C131C001F1318380FC0703803FFE0C6130016147E931B>67
D<387FFFFCA238703C1C0060130C00E0130E00C01306A200001300AB3803FFC0A217147F
931A>84 D<EA1FE0EA78707F133C1230EA01FCEA1F3C127812F0A338785F80EA3F8F110D
7F8C12>97 D<133FA2130FA5EA07EFEA1C1F487E127012F0A512701238381C3FC0EA07EF
12147F9315>100 D<EA0FC0EA1C70EA3838EA7018EAF01CA2EAFFFCEAF000A21270EA38
0CEA1C18EA07F00E0D7F8C11>I<EA0FCF38387380EA703BEB3800A36C5AEA2FC00020C7
FC1260EA3FF013FC7FEA700F487EA3EA700E6C5AEA0FF011147F8C13>103
D<12FCA2123CA5137CEA3D8EEA3E0F123CA838FF3FC0A212147F9315>I<1238127CA312
381200A312FCA2123CA912FFA208157F940B>I<EAFC7CEAFD8EEA3E0F123CA838FF3FC0
A2120D7F8C15>110 D<EA07E0EA1C38EA781EEA700EEAF00FA5EA700EEA781EEA3C3CEA
07E0100D7F8C13>I<EAFDF8EAFF0EEA3C07EB038014C0A5EB07801400EA3E0EEA3DF800
3CC7FCA4B4FCA212137F8C15>I<EAF8E0EAF978123AA2EA3C301300A6B4FCA20D0D7F8C
10>114 D<EA1FE01260EAC060A2EAFE00EA7FC0EA3FE0EA1FF0EA0070EAC030A2EAF060
EADF800C0D7F8C0F>I<120CA3121CA2EA3FC012FFEA3C00A61360A3EA1C40EA0F800B12
7F910F>I<38FE0F80A2383C06006C5AA26C5AA2EA07B0A2EA03E0A26C5AA25B126112F3
90C7FC12E6127811137F8C14>121 D E /Fi 63 122 df<EA01F8EA0604EA0C0E121890
C7FCA3EAFFFEEA1806AB387E1F801114809313>12 D<EB3060A3EB60C0A4EBC180387FFF
F8B512FC38018300A3EA0306A3B512FC6C13F838060C00485AA4485AA3161A7E931B>35
D<120212041208121812101230122012601240A212C0AA1240A212601220123012101218
120812041202071E7D950D>40 D<1280124012201230121012181208120C1204A21206AA
1204A2120C1208121812101230122012401280071E7E950D>I<1360AAB512F0A2380060
00AA14167E9119>43 D<124012E012601220A31240A2128003097D8209>I<12FFA20802
80860B>I<124012E0124003037D8209>I<131013301360A313C0A3EA0180A2EA0300A312
06A35AA35AA25AA35AA35AA20C1D7E9511>I<120FEA30C0EA6060A2EA4020EAC030A9EA
4020EA6060A2EA30C0EA0F000C137E9211>I<120C121C12EC120CAFEAFFC00A137D9211>
I<121FEA60C01360EAF07013301260EA0070A2136013C012011380EA02005AEA08101210
EA2020EA7FE012FF0C137E9211>I<EA0FC0EA3070EA7038A31200133013E0EA0FC0EA00
7013381318131C126012F01318EAE038EA6070EA1FC00E137F9211>I<136013E0A2EA01
6012021206120C120812101220126012C0EAFFFCEA0060A5EA03FC0E137F9211>I<EA60
60EA7FC01380EA44001240A3124FEA70C0EA40E0EA00601370A212E0A21360EA40E0EA21
C0EA1F000C137E9211>I<EA07C0EA0C20EA10701220EA6000A25A12CFEAD0C0EAE060EA
C0201330A31240EA6020EA2060EA10C0EA0F000C137E9211>I<1240EA7FFC13F8EA4010
EA80301320EA00401380EA0100A25A12021206A2120EA512040E147E9311>I<EA0FC0EA
1070EA20181260A21270EA3C30EA3F60EA0F8013E0EA31F0EA6078EAC01C130CA3EA6018
EA3030EA0FC00E137F9211>I<120FEA3080EA6040EA4060EAC0201330A31240EA6070EA
30B0EA0F30120013201360EAE0401380EA4100123E0C137E9211>I<124012E012401200
A7124012E01240030D7D8C09>I<EA01F8EA0606EA0801381000803820F04038430820EA
460738840310128CA41284EA460738430B203820F1C06CC7FC7E000613F03801FF801414
7E9319>64 D<1330A21378A3139CA2EA019E130EA2EA0207A200061380EA07FFEA040338
0801C0A2001813E0EA380038FE07FC16147F9319>I<EAFFFCEA1C07EB0380EB01C0A4EB
0380EB0700EA1FFE381C0380EB01C0EB00E0A5EB01C0EB038038FFFE0013147F9317>I<
EBFC2038070360380C00E04813605A00701320126000E01300A600601320127012306C13
406C138038070300EA00FC13147E9318>I<EAFFFCEA1C07EB01C0EB00E0146014701430
1438A614301470146014E0EB01C0EB038038FFFC0015147F9319>I<B51280EA1C031300
A21440A2130814001318EA1FF8EA1C18130814201300A21460144014C01301B5FC13147F
9316>I<B51280EA1C031300A21440A2130814001318EA1FF8EA1C181308A290C7FCA6EA
FFC012147F9315>I<EBFC2038070360380C00E04813605A00701320126000E01300A4EB
0FF8EB00E01260127012307E7E380703603800FC2015147E931A>I<EAFF80EA1C00B2EA
FF8009147F930C>73 D<EA0FF8EA00E0AE126012F013C0EA6180EA3F000D147F9311>I<
EAFFC0001CC7FCAB1440A314C0148013011303B5FC12147F9315>76
D<00FEEB0FE0001E140000171317A338138027A23811C047A23810E087A3EB7107A2133A
A2131CA2123839FE083FE01B147F931E>I<38FC01FC381E00700017132013801213EA11
C0EA10E01370A21338131C130E130F1307EB03A0EB01E01300A20038136000FE13201614
7F9319>I<EAFFFCEA1C07EB0380EB01C0A5EB0380EB0700EA1FFC001CC7FCA8B47E1214
7F9316>80 D<EAFFF8EA1C07EB0380EB01C0A4EB0380EB0700EA1FF8EA1C0E7FEB0380A4
1484A2EB01CC38FF80F816147F9318>82 D<EA1F10EA30F0EA603012C01310A2EAE00012
70127FEA3FC0EA0FE0EA00F0133813181280A3EAC030EAF060EA8FC00D147E9312>I<38
7FFFF03860703000401310A200801308A300001300ACEA07FF15147F9318>I<38FF81FC
381C00701420AD120C000E13400006138038038300EA00FC16147F9319>I<39FF0FF0FC
3938038030A2001CEBC020A2001E1460390E04E040A200071480EB0870A23903887900EB
9039A23801F03EEBE01EA23800C00CA31E147F9321>87 D<127FEAE1C0EAE040EA406012
00EA07E0EA3860126012C01364A2EA61E4EA3E380E0D7E8C11>97
D<12F01230A6EA33E0EA3430EA3808EA300C1306A5130CEA3808EA3430EA23E00F147F93
12>I<EA0FE0EA18701220EA6020EAC000A51260EA2010EA1820EA0FC00C0D7F8C0F>I<13
781318A6EA0F98EA1878EA2038EA601812C0A51260EA2038EA1858EA0F9E0F147F9312>
I<EA0F80EA1040EA2020EA6030EAC010EAFFF0EAC000A31260EA2010EA1820EA0FC00C0D
7F8C0F>I<EA03C0EA0CE0121813401300A3B4FC1218AB127F0B1480930A>I<EA0F3CEA30
E6EA2040EA6060A3EA2040EA30C0EA2F001260A2EA3FE013F0EA6018EAC00CA3EA6018EA
3030EA0FC00F147F8C11>I<12F01230A6EA33E0EA3430EA38181230A9EAFC7E0F147F93
12>I<1220127012201200A512F01230AB12FC06157F9409>I<12F01230A6137C13301360
1380EA31001233EA3F801231EA30C0136013701330EAFC7C0E147F9311>107
D<12F01230B212FC06147F9309>I<38F3E1F03834321838381C0CEA3018A938FC7E3F18
0D7F8C1B>I<EAF3E0EA3430EA38181230A9EAFC7E0F0D7F8C12>I<EA0FC0EA1860EA2010
EA6018EAC00CA5EA6018A2EA3870EA0FC00E0D7F8C11>I<EAF3E0EA3430EA3808EA300C
1306A5130CEA3808EA3430EA33E0EA3000A512FC0F137F8C12>I<EA0F88EA1848EA2038
EA601812C0A51260EA2038EA1858EA0F98EA0018A5137E0F137F8C11>I<EAF3C0EA34E0
1238EA30401300A812FE0B0D7F8C0D>I<EA3E80126112C0A2EAE000127EEA3F80EA03C0
1280A212C0EAE180EA9F000A0D7F8C0D>I<1210A312301270EAFF80EA3000A71380A3EA
1100120E09127F910D>I<EAF078EA3018A91338EA1858EA0F9E0F0D7F8C12>I<EAF83CEA
30181310EA3830EA1820A2EA0C40A2EA0680A3EA0300A20E0D7F8C11>I<38F87CF83870
703038305820A238188840138CA2380D04801306A238060300A3150D7F8C18>I<EAF87C
EA3030EA1860EA0C401380EA07007EEA0780EA0CC0EA08601210EA3030EAF07C0E0D7F8C
11>I<EAF83CEA30181310EA3830EA1820A2EA0C40A2EA0680A3EA0300A21202A212E4A2
12E812700E137F8C11>I E /Fj 1 4 df<1218A212DB12FF121812FF12DB1218A208097D
890F>3 D E /Fk 57 122 df<903803F0F090380E19989038183B38EC33309038380700
A3EB700EA30007B512E03900700E0013E05CA4EA01C05CA4EA03805CA3130048136014E0
386630C038E67180D8CC63C7FCEA783E1D21819918>11 D<EB03FEEB0E03EB1C07EB1806
EB3800A35BA33807FFFC3800701CEBE038A41470EA01C0A314E4A2EA0380A21468143090
C7FC5AA2126612E65A12781821819916>I<1218123CA2121C1208A31210122012401280
060B78990C>39 D<130413181330136013C013801201EA0300A21206120E120C121C1218
A212381230A21270A21260A312E0A35AA51260A31220123012107E0E267B9B10>I<1340
13601320133013101318AB1338A21330A21370A2136013E013C0A2120113801203130012
06A25A5A12105A5A5A0D267F9B10>I<121812381278123812081210A21220A212401280
050B7D830C>44 D<EAFF80A2130009037D880E>I<1230127812F0126005047C830C>I<13
7CEA0186EA03031206000C1380121CA21238A338700700A4EAE00EA35BA213185BEA6060
6C5A001FC7FC11187C9714>48 D<1308131813301370EA01F0EA0E70EA00E0A4EA01C0A4
EA0380A4EA0700A45AEAFFE00D187C9714>I<137CEA0186EA0203000413801383120812
10A3381107001212EA0C0EC65A13305BEA01800002C7FC120CEA10011220EA3C06EA67FE
EAC1FCEA80F011187D9714>I<133E13C3380101801202380481C0134138088380120438
070300EA00065BEA01F0EA00187FA2130EA21260EAE01CA2EA8038EA4030EA20E0EA1F80
12187D9714>I<13031480EB0700A3130EA35BA213185BA25B5B13C6EA018EEA030EEA02
1C120412081210EA7FB838807F8038003800A25BA41360111F7F9714>I<38030180EBFF
0013FCEA022048C7FCA45AEA0BE0EA0C181208EA001CA412201270485AEA8030EA40705B
EA2180001EC7FC11187C9714>I<131EEB6180EA0180EA03031206000EC7FC5A12181238
EA39F0EA7218EA740CEA780E127012F012E0A35BA2EA60385BEA30C0EA1F8011187C9714
>I<137CEA0186EA0703120E000C1380121C1238A3130714005BEA1817EA0C27EA07CEEA
000E130C131C1318EAE0305BEA80C0EAC380003EC7FC11187C9714>57
D<1206120F121E120C1200A81230127812F0126008107C8F0C>I<1420146014E0A21301
14F0EB0270A213041308A21310A213201340A2EB8038EBFFF8380100381202A25AA25A12
1838FE01FF181A7E991D>65 D<EB0F82EB7062EBC0163803801E3807000C120E5A121800
381308123000701300A25AA41420A314401260148038300100EA1006EA0C18EA03E0171A
7A991B>67 D<3803FFF83800700E80809038E00180A315C0EA01C0A43903800380A31500
48485AA2140E140C000E131C5C5C5C381C0380D8FFFEC7FC1A1A7D991D>I<0003B5FC38
0070071403140113E0A43801C080A313C13803FF001381A3EA0702EB0004A21408120E14
18141014304813E0B5FC181A7D991A>I<0003B5FC380070071403140113E0A43801C080
A313C13803FF001381A3EA070290C7FCA3120EA4121EEAFFC0181A7D9919>I<EB0FC1EB
3021EBC0133801800F38070006120E120C5A00381304123000701300A25AA3EB07FEEB00
70A4006013E0A27EEA1801380C0640EA03F8181A7A991E>I<EA03FFEA0070A313E0A4EA
01C0A4EA0380A4EA0700A4120EA45AEAFF80101A7D990F>73 D<EBFFC0EB0E00A35BA45B
A45BA45BA4EA61C012E15B12830047C7FC123C121A7C9914>I<EA03FFEA0070A35BA448
5AA4485AA448C7FC1410A21420120E1460144014C0381C0380B5FC141A7D9918>76
D<D803F8EB1FC0D80078EB3C00A2155C01B85BA290389C0138A239011C0270A214041408
00025C1410A214200004EB41C0A21481A239080F0380A2130EEA180C4AC7FC39FE083FE0
221A7D9922>I<3903F007F839007800C01580A290389C0100A3138E38010E0213061307
A238020384A3EB01C4000413C8A2EB00E8A24813F01470A21218142012FE1D1A7D991D>
I<EB1F80EB70603801C030380300180006131C000E130C5A0018130E123812301270A248
131CA31438A21430147014E014C03860018038700300EA3806EA1C1CEA07E0171A7A991D
>I<3803FFF83800701C1406140713E0A43801C00EA2141C143838038060EBFF80EB8000
A248C7FCA4120EA45AB47E181A7D991A>I<3803FFF03800701C140E140713E0A43801C0
0E141C143814E03803FF80EB80C014601470EA0700A4000E13E0A214E114E248136238FF
803C181A7D991C>82 D<EB3F10EB60903801807013004813201206A31400120713C0EA03
F8EA01FEEA007FEB0F8013031301A21220A238600300A21306EA700CEAC818EA87E0141A
7D9916>I<383FFFFC38381C0C00201304124013381280A338007000A45BA4485AA4485A
A41207EAFFF8161A79991B>I<39FF803F80391C000C0014085CA25C14601440001E5B12
0E49C7FC1302A25BA25B5B120F6C5A136013405BA290C8FC1206A2191A78991D>86
D<39FF803F80391C000C001408001E5B000E5B1460000F13406C5B49C7FC1382EA038613
C4EA01C813D013E01200485AA4485AA448C8FCEA3FE0191A78991D>89
D<EA03CCEA0E2EEA181C123812301270EAE038A4EAC072A3EA60F2EA6134EA1E180F107C
8F14>97 D<127E120EA35AA45AA2EA3BC0EA3C301278EA7018A3EAE038A4EAC070136013
E0EA60C0EA6380EA1E000D1A7C9912>I<EA01E0EA0618120CEA1838EA3010EA70001260
12E0A413081310EA6020EA30C0EA1F000D107C8F12>I<EB1F801303A3EB0700A4130EA2
EA03CEEA0E2EEA181C123812301270485AA4EAC072A3EA60F2EA6134EA1E18111A7C9914
>I<EA01E0EA0E18EA1C08123812701310EAFFE0EAE000A41308EA60101320EA30C0EA1F
000D107C8F12>I<1307EB0980131BEB3B00133813301370A4EA07FFEA00E0A5485AA548
5AA490C7FC5AA21206126612E412CC1270112181990C>I<13F338038B8038060700120E
120C121CEA380EA4EA301CA3EA183C5BEA07B8EA0038A25B1260EAE0E0EAC1C0007FC7FC
11177E8F12>I<EA1F801203A348C7FCA4120EA2137CEA0F86EA1E07A2121CA2EA380EA3
5B00701380A21338EB3900EAE019EA600E111A7E9914>I<1203120712061200A6123812
4C124E128E129CA2121C1238A212701272A212E212E41264123808197C980C>I<EA1F80
1203A3EA0700A4120EA2130E1313EA1C2713431380EA1F00123CEA3F80EA39C0EA38E0EA
70E2A313E4EAE064EA6038101A7E9912>107 D<121F1207A3120EA4121CA41238A41270
A412E4A412E81230081A7D990A>I<38307C1E38598663399E0783801403129CA239380E
0700A3140ED8701C1340A2141C158038E0380C39601807001A107C8F1F>I<EA307CEA59
86EA9E07A2129CA2EA380EA35B00701380A21338EB3900EAE019EA600E11107C8F16>I<
EA01F0EA0618EA0C0CEA180E12301270126012E0A2130C131C13181330EA6060EA30C0EA
1F000F107C8F14>I<EA030F380590C0EA09E0EBC060A3380380E0A4380701C014801303
1400EA0E8E137890C7FCA25AA4B4FC1317808F14>I<EA30F0EA5D18EA9E38EA9C181300
A25AA45AA45A12600D107C8F10>114 D<EA03E0EA04301208EA18701360EA1C00EA1F80
13C0EA0FE01200136012E0A2EA80C0EA4180EA3E000C107D8F10>I<1206120EA45AA2EA
FFC0EA1C005AA45AA412E1A312E212E412380A177C960D>I<EA3806EA4C07EA4E0E128E
129CA2EA1C1C1238A3EA7039A3EA3079EA389AEA0F0C10107C8F15>I<EA3818EA4C1C12
4EEA8E0C129CA2EA1C081238A213101270A21320EA3040EA18C0EA0F000E107C8F12>I<
EA078F3808D180EA10F3EA20E1EBE000A2EA01C0A4EA0382A212C3EAE784EAC588EA78F0
11107E8F12>120 D<EA3806EA4C07EA4E0E128E129CA2EA1C1C1238A3EA7038A3EA3078
EA38F0EA0F7012001360EA60E0EAE1C0EAC180EA4700123C10177C8F13>I
E /Fl 5 121 df<4A7EA26E7EA21560A2818181B71280A2C8EA0C005D5D5DA25DA24A5A
A221147E9226>33 D<141880A280140780B612C081C81238151EED0780ED0E0015385DB6
12C05DC70003C7FC1406A25CA25C21167E9326>41 D<0040131000C0133000601360A36C
13C0A338180180EA1FFF6C1300EA0C03A2EA0606A36C5AA2EA0198A3EA00F0A31360A214
1A809915>56 D<EB03F8EB1FFCEB307CEB603CEA01C0143000031300A27F7FEA01FC6CB4
FCEB3F80EB0FC0EB07E0EB03F0EA0801EA3000127000F013E0A238F801C000FC1300EA7F
06EA3FF8EA0FE0161A7F9917>83 D<120FEA30C0EA7040EAE06013E013401300A2127012
30120C121FEA3180EA70C0EAE0601370A31260EA30E0EA18C0EA0F80EA0300EA00C013E0
1370A2122012701260EA20E0EA30C0EA0F000C217E9911>120 D
E /Fm 83 128 df<EBFE7C380381C6380603CE000E1384001C1380A6B512F0381C0380AE
38FF8FF0171A809916>11 D<13FEEA038138060180EA0E03381C010090C7FCA5B51280EA
1C03AE38FF8FF0141A809915>I<EBFF80EA0383EA0603120E121CA6B5FCEA1C03AE38FF
9FF0141A809915>I<90387E1F803901C17040390703C0600006EB80E0000E14401500A5
B612E0380E0380AE397F8FE3FC1E1A809920>I<383F81F03870E70CEB7C0638203C0238
003803A20003B5FC381E38001238127012E0133C1401EB3E023870E306381F80F818107E
8F1C>26 D<EA60C0EAF1E0EAF9F0EA68D0EA0810A3EA1020A2EA2040EA40800C0B7F9913
>34 D<126012F012F812681208A31210A212201240050B7D990B>39
D<1380EA010012025A120C120812185AA35AA412E0AA1260A47EA37E1208120C12047E7E
EA008009267D9B0F>I<7E12407E7E12181208120C7EA37EA41380AA1300A41206A35A12
08121812105A5A5A09267E9B0F>I<130CACB61280A2D8000CC7FCAC191A7E951E>43
D<126012F0A212701210A31220A21240A2040B7D830B>I<EAFFC0A20A0280880D>I<1260
12F0A2126004047D830B>I<1304130C1318A31330A31360A313C0A3EA0180A3EA0300A3
1206A35AA35AA35AA35AA35AA20E257E9B13>I<EA07E0EA1C38EA381CEA300CEA700EEA
6006A2EAE007AAEA6006A2EA700EEA300CEA381CEA1C38EA07E010187F9713>I<12035A
B4FC1207B3A2EA7FF80D187D9713>I<EA0F80EA1060EA2030EA4038EA803CEAC01C12E0
1240EA003C1338A21370136013C0EA018013001202EA040412081210EA3008EA3FF8127F
12FF0E187E9713>I<EA07E0EA1838EA201CEA601EEA700EEA201E1200131CA213381370
EA07E0EA0038131C130E130FA212E0A212C0EA400EEA601CEA1838EA07E010187F9713>
I<1318A21338137813F813B8EA01381202A212041208121812101220124012C0B5FCEA00
38A6EA03FF10187F9713>I<EA3018EA3FF013E01380EA2000A5EA2FC0EA3060EA2030EA
00381318131CA2124012E0A2EA8018EA40381330EA30E0EA0F800E187E9713>I<EA01F8
EA0704EA0C06EA180E123013001270126012E0EAE3E0EAE418EAE80CEAF00EEAE0061307
A31260A2EA7006EA300EEA180CEA0C38EA07E010187F9713>I<1240EA7FFF13FEA2EA40
04EA80081310A2EA00201340A21380120113005AA25A1206A2120EA5120410197E9813>
I<EA07E0EA1818EA300CEA20061260A21270EA780CEA3E18EA1F30EA07C0EA03E0EA0CF8
EA307CEA601E130FEAC0071303A3EA6002EA2004EA1818EA07E010187F9713>I<EA07E0
EA1C30EA3018EA700CEA600EEAE006A21307A31260EA700FEA3017EA1827EA07C7EA0007
1306130E130C12701318EA6030EA3060EA0F8010187F9713>I<126012F0A212601200A8
126012F0A2126004107D8F0B>I<126012F0A212601200A8126012F0A212701210A31220
A21240A204177D8F0B>I<B61280A2C9FCA6B61280A2190A7E8D1E>61
D<EA1FC0EA2060EA4030EAC03812E0A21200137013E0EA018013005A1202A6C7FCA41206
120FA212060D1A7E9912>63 D<130CA3131EA2132F1327A2EB4380A3EB81C0A200017F13
00A248B47E38020070A2487FA3487FA2003C131EB4EBFFC01A1A7F991D>65
D<B51280380E00E014701438143CA514781470EB01E0380FFFC0380E00F01478143C141C
141EA4141C143C147814F0B512C0171A7F991B>I<EB3F023801C0C63803002E000E131E
48130E14065A007813021270A200F01300A600701302A21278003813047E14087E000313
303801C0C038003F00171A7E991C>I<B57E380E00E01470808080A280A21580A81500A2
5C140E5CA2147814E0B51280191A7F991D>I<B512F8380E003814181408140C1404A3EB
0100A35BEA0FFFEA0E037FA3EB0002A314061404A2140C143CB512FC171A7F991A>I<B5
12F8380E003814181408140C1404A3EB0100A35BEA0FFFEA0E037FA390C7FCA8EAFFE016
1A7F9919>I<EB3F023801C0C63803002E000E131E48130E14065A007813021270A200F0
90C7FCA5903801FFC03970000E00A2127812387EA27E000313163801C06638003F821A1A
7E991E>I<39FFE1FFC0390E001C00AB380FFFFC380E001CAC39FFE1FFC01A1A7F991D>I<
EAFF80EA1C00B3A6EAFF80091A7E990E>I<EA0FFEEA0070B3124012E0A2EA40E0EA61C0
EA1F000F1A7E9914>I<39FFE01FC0390E000F00140C14085C5C5C495A0102C7FC5B130C
131C132E1347EB8380EA0F03380E01C06D7EA2147080A280141E141F39FFE07FC01A1A7F
991E>I<EAFFE0000EC7FCB01408A3141814101430147014F0B5FC151A7F9918>I<B414FF
000F14F0A2390B800170A23809C002A33808E004A2EB7008A3EB3810A3EB1C20A2EB0E40
A3EB0780A2EB0300121C39FF8307FF201A7F9923>I<00FEEB7FC0000FEB0E001404EA0B
80EA09C0A2EA08E01370A21338131CA2130E1307EB0384A2EB01C4EB00E4A21474143CA2
141C140C121C38FF80041A1A7F991D>I<137F3801C1C038070070000E7F487F003C131E
0038130E0078130F00707F00F01480A80078EB0F00A20038130E003C131E001C131C6C5B
6C5B3801C1C0D8007FC7FC191A7E991E>I<B51280380E01E0EB007014781438143CA414
3814781470EB01E0380FFF80000EC7FCABEAFFE0161A7F991A>I<B5FC380E01C0EB0070
147880A55C1470EB01C0D80FFFC7FC380E0380EB00C0801470A31478A31540143CEC1C80
39FFE00F001A1A7F991C>82 D<EA0FC2EA1836EA200EEA600612C01302A3EAE000127012
7EEA3FE0EA1FF8EA03FCEA007E130E130713031280A3EAC0021306EAE004EAD818EA87E0
101A7E9915>I<007FB5FC38701C0700401301A200C0148000801300A300001400B13803
FFE0191A7F991C>I<39FFE07FC0390E000E001404B200065B12076C5B6C6C5A3800E0C0
013FC7FC1A1A7F991D>I<39FF801FC0391C00070014066C1304A36C5BA26C6C5AA36C6C
5AA26C6C5AA3EB7080A213790139C7FCA2131EA3130CA21A1A7F991D>I<3AFF81FF07F0
3A3C007801C0001CEC0080A36C90389C0100A33907010E02A33903830F04EB8207A2150C
3901C40388A33900E801D0A390387000E0A301305B01201340241A7F9927>I<39FF801F
E0391E00070014066C13046C130CEB800800035BEA01C06D5A00001360EB7040EB788013
38011DC7FC131F130EAAEBFFC01B1A7F991D>89 D<B512C038F8038012E038C00700A2EA
800E5BA2485AA25B5BA2485AA2485A38070040A2120EA24813C04813801301EA70031307
B5FC121A7E9917>I<12FEA212C0B3AF12FEA207257D9B0B>I<EA2040A2EA4080A2EA8100
A3EAE1C0EAF1E0A2EA60C00B0B7A9913>I<12FEA21206B3AF12FEA20725809B0B>I<EA1F
C0EA38707FEA101C1200A2EA03FCEA1E1C1238127012E01480A2133CEA705F381F8F0011
107F8F13>97 D<12FC121CA913FCEA1D07381E0380381C01C0130014E0A6EB01C0148038
1E0300EA1906EA10F8131A809915>I<EA07F8EA1C1C1238EA700813005AA612701304EA
3808EA1C18EA07E00E107F8F11>I<133F1307A9EA03E7EA0C17EA180F487E127012E0A6
126012706C5AEA1C373807C7E0131A7F9915>I<EA07C0EA1C30EA30181270EA600C12E0
EAFFFCEAE000A41260EA7004EA3808EA1C18EA07E00E107F8F11>I<EA01F0EA0718EA0E
38EA1C101300A6EAFFC0EA1C00AEEAFF800D1A80990C>I<EA0FCF3818718038303000EA
7038A4EA30306C5AEA2FC00060C7FCA21270EA3FF013FC6C7EEA600FEAC003A4EA6006EA
381CEA07E011187F8F13>I<12FC121CA9137CEA1D87381E0380A2121CAB38FF9FF0141A
809915>I<1218123CA212181200A612FC121CAE12FF081A80990A>I<EA0180EA03C0A2EA
0180C7FCA6EA0FC01201B21241EAE180EAE300127E0A2182990C>I<12FC121CA9EB1FC0
EB0F00130C5B13205B13E0121DEA1E70EA1C7813387F131E7F148038FF9FE0131A809914
>I<12FC121CB3A6EAFF80091A80990A>I<38FC7C1F391D8E6380391E0781C0A2001C1301
AB39FF9FE7F81D107F8F20>I<EAFC7CEA1D87381E0380A2121CAB38FF9FF01410808F15>
I<EA07E0EA1C38EA300CEA700EEA6006EAE007A6EA6006EA700EEA381CEA1C38EA07E010
107F8F13>I<EAFCFCEA1D07381E0380381C01C0A2EB00E0A6EB01C01480381E0300EA1D
06EA1CF890C7FCA6B47E1317808F15>I<EA03E1EA0C13EA180BEA300FEA700712E0A612
70A26C5AEA1C37EA07C7EA0007A6EB3FE013177F8F14>I<EAFC78EA1D9CEA1E1C1308EA
1C00ABEAFF800E10808F0F>I<EA1F20EA60E0EA402012C0A2EAF000127FEA3FC0EA1FE0
EA00F0EA8070133012C01320EAF040EA8F800C107F8F0F>I<1208A41218A21238EAFFC0
EA3800A81320A41218EA1C40EA07800B177F960F>I<38FC1F80EA1C03AB1307120CEA0E
0B3803F3F01410808F15>I<38FF0F80383C0700EA1C061304A26C5AA26C5AA3EA03A0A2
EA01C0A36C5A11107F8F14>I<39FE7F1F8039381C0700003C1306381C0C04130E380E16
081317A238072310149013A33803C1A014E0380180C0A319107F8F1C>I<38FE3F80383C
1E00EA1C086C5AEA0F306C5A6C5A12017F1203EA0270487E1208EA181CEA381E38FC3FC0
12107F8F14>I<38FF0F80383C0700EA1C061304A26C5AA26C5AA3EA03A0A2EA01C0A36C
5AA248C7FCA212E112E212E4127811177F8F14>I<EAFFF8EAE07012C0EA80E0EA81C0A2
EA0380EA0700A2EA0E04121CA2EA380812701338EAFFF80E107F8F11>I<B512C0120180
8913>I<EAE1C0A40A047C9913>127 D E /Fn 56 123 df<EB03C03803F7E01207120F38
1F13C090C7FCA5387FF3E012FFA2EA1F03AD120F131B809A16>12
D<3803F3E01207120FEA1F131303A5EA7FF312FFA2EA1F03AD120F131A809916>I<EAFF
E0A30B0380890E>45 D<12F8A505057D840B>I<EA07E0EA1FF8EA3FFCEA3E7CEA7C3EEA
781EEAF81FAEEA781EEA7C3EEA3E7CEA3FFCEA1FF8EA07E0101A7E9915>48
D<EA01C01203121F12FFA212671207B1EA7FFC12FF127F0E1A7D9915>I<EA07E0EA1FF0
EA3FFCEA7FFEEAF87EEAF03F1260EA201F1200133FA2133E137CA213F8EA01F0EA03E0EA
0780EA0F00120E5A5AEA7FFFB5FCA27E101A7E9915>I<EA0FE0EA3FF8EA7FFC12FFEA70
7E1240EA003E137EA213FCEA07F813F013F8EA007C133E133FA412401260EAF87EEAFFFE
EA7FFCEA3FF8EA0FE0101A7E9915>I<13FCA21201A2EA03BC1207133C120FA2121EA212
3CA21278A212F0B512C0A438003C00A6121A7F9915>I<EA1FFF5AA3003EC7FCA6EA3FF8
7F7FEA3E1F001C13801200A312201260127038F83F00EA7FFF6C5A6C5AEA07F0111A7F99
15>I<EA01F0EA07F8121FA2EA3F08EA7C00A2127812F813F0EAFBFCEAFFFEEAFE3EEAFC
1F12F8A51278127C133EEA3FFEEA1FFCEA0FF8EA07E0101A7E9915>I<B5FCA4EA001E13
3C137C13F8A2EA01F0A2EA03E0A2120713C0120FA31380121FA7101A7E9915>I<EA0FF0
EA3FFCEA7FFEA2EAFC3FEAF81FA4EA781EEA7FFEEA1FF8A2EA7E7EEA7C3EEAF81FA6EA7C
3EEA7FFEEA3FFCEA1FF8EA07E0101A7E9915>I<EA07E0EA1FF0EA3FFC127FEA7C3E12F8
131E131FA5133FEA7C7FEA7FFFEA3FDFEA0F1F1200131E133EA2EA307CEA3FFCEA7FF8EA
3FF0EA0FC0101A7E9915>I<EA1FC0EA7FF0EAFFF8EAF07C12601240120013FCEA01F813
F0EA03E0EA07C01380A51300C7FCA3EA0F80A412070E1A7E9913>63
D<13FC487EA2487EA213DFA200071380139F138F000F13C0A2130F381F07E0A2121E383E
03F0EA3FFFA24813F8EA7C01127838F800FCA348137C161A7E991B>65
D<EA7FFEB5128014C038FC0FE0EB03F0A514E0130FB512C0148014E038FC07F01303EB01
F8A51303EB07F0B512E014C06C1300151A7D991B>I<EB7FC03803FFF8120F5A383FC070
EB0010007E1300A35AA8127EA36C1308EBC078381FFFF87E000313F038007F80151A7E99
1A>I<EA7FFFB512E014F038FC07F8EB01FC1300147EA2143FAA143E147EA214FCEB03F8
B512F014E06C1300181A7D991E>I<387FFFC0B5FCA300FCC7FCA7B51280A400FCC7FCA7
B512C0A37E121A7D9918>I<387FFF80B5FCA300FCC7FCA7B5FCA400FCC7FCAA127C111A
7D9917>I<007C137E12FCA9B512FEA438FC007EAB127C171A7D991E>72
D<127C12FCB3A6127C061A7D990C>I<127C12FCB3A3B5FCA37E101A7D9916>76
D<007EEB01FCB41303A3EB800700F7147CEBC00F00F3130EA2EBE01E00F1131CEBF03CA2
00F01338EBF878A2EB7870EB7CF0A2EB3CE0A2EB1FC0A3EB0F80387007001E1A7D9925>
I<007E131EB4FCA21380A2EAF7C0EAF3E0A2EAF1F0A2EAF0F8A2137CA2133EA2131FA2EB
0F9EA2EB07DEEB03FEA21301A2EA7000171A7D991E>I<EA7FFEB5128014C038FC0FE013
0314F0A614E0130FB512C01480EBFE0000FCC7FCA9127C141A7D991A>80
D<EA7FFEB5128014C038FC07E0EB03F0A6EB07E0B512C01480EBFE00EAFC7E7FA2EB1F80
A2EB0FC0A2EB07E0A2EB03F0A2EA7C01141A7D991A>82 D<EA07F8EA1FFE487E5AEA7C0F
EAF80290C7FCA27EB47EEA7FF87F6CB4FC120F6C138038007FC0130F1307A2124012F038
FC0F80B5FC6C1300EA1FFEEA07F8121A7E9917>I<007FB5FCB6FCA338007E00B3A3133E
181A7F991B>I<00FC130F141F7E007E133EA2007F137E6C137CA2EB80FC001F13F8A238
0FC1F0A33807E1E013E3A2000313C013F313F70001138013FFA26C1300A2137E181A7F99
1B>86 D<00F001F813706C486C13F0A2007C15E0903803FE0114BE149E003EEC03C0EB07
9FA2140FD81F0FEB07801587A2260F0E071300018E138F019E13CF139C0007EB03CEA201
DC13DE01F813FE00036D5AA36C486C5A241A7F9927>I<EA0FF0EA3FFC13FEEA381F1220
120013FF120FEA3F1F127C12F8A3EAFC7FEA7FFFEA3FDFEA1F1F10117F9014>97
D<127812F8A813F8EAFBFE12FFEAFC1F00F81380130FA7EB1F006C5AEAFFFEEAFBFCEA79
F0111A7E9915>I<EA07F8EA1FFE123FEA7C0E13005AA7EA7C02130EEA3FFE121FEA07F8
0F117F9012>I<EB0F80A9EA0FCFEA1FFF5AEA7E1FEA7C0F12F8A7127C131FEA3FFFEA1F
EFEA0FCF111A7F9915>I<EA07F0EA1FFCEA3FFEEA7C1EEA780F12F8A2B5FCA2EAF800A3
1278EA7C03EA3FFF7EEA03FC10117F9013>I<EA01FC1207120FEA1F041300A5EA7FE012
FFA2EA1F00AD7E0E1A80990D>I<380FE1C0EA3FFFEA7FFD387C7C00487EA5EA7C7CEA7F
FC6C5AEA6FE00060C7FCEA7FFC13FF6C13804813C0EAF0071303A2EAF807387FFF806C13
00EA0FFC12197F9015>I<127812F8A813FCEAF9FEEAFBFFEAFE1F12FC12F8AB1278101A
7E9915>I<127C12FCA51200A4123C127CAF123C061B7F9A0A>I<127012F0A8137C13F812
F1EAF3F0EAF7E0EAFFC01380A313C0EAFBE012F113F0EAF0F8137C133C12700E1A7D9914
>107 D<127812F8B3A61278051A7E990A>I<3978FC1F8039F9FE3FC039FBFF7FE038FE1F
C300FC138300F81303AB38780F011B117E9020>I<EA78FCEAF9FEEAFBFFEAFE1F12FC12
F8AB127810117E9015>I<EA07F8EA1FFE487E387E1F80EA7C0F38F807C0A7387C0F80EA
7E1F383FFF006C5AEA07F812117F9015>I<EA78F8EAFBFE12FFEAFC3F38F81F80130FA7
EB1F006C5AEAFFFEEAFBFCEAF9F000F8C7FCA6127811187E9015>I<EA78C012FB12FFA2
EAFE005A5AAA12780A117E900E>114 D<EA1FC0EA3FF0127FEAF0701300A2B4FCEA7FE0
EA3FF0121FEA03F8EA007812C012F0EAFFF0EA7FE0EA1FC00D117F9010>I<121E123EA4
EA7FE012FFA2EA3E00AA1320EA3FF0121FEA0FC00C167F950F>I<EA781F12F8AC137FB5
FCEA7F9FEA3F1F10117E9015>I<EAE007EAF00FA2EA781EA3EA3C3CA3EA1E78A3EA0FF0
A3EA07E0A210117F9013>I<39E03E038038F07F07A33978F70F00EBE78FA3383CE39E38
3DC3DEA3381FC1DC14FC1381A26CC65A19117F901C>I<EAF00EEAF81EEA7C3CEA3E78EA
1EF8EA0FF0EA07E013C01203EA07E0EA0FF0EA1E701378EA3C3CEA781EEAF81FEAF00F10
117F9013>I<EAF007EAF80F1278131E123CA2EA3E3C121EA2EA0F381378EA077013F012
0313E01201A213C0A21203EA878012FF130012FC10187F9013>I<EA3FFC127FA2EA00F8
EA01F0A2EA03E0EA07C01380120FEA1F00123EA25AEAFFFCA30E117F9012>I
E /Fo 1 4 df<1202A3EAC218EAF278EA3AE0EA0F80A2EA3AE0EAF278EAC218EA0200A3
0D0E7E8E12>3 D E /Fp 13 118 df<1230127812FCA2127812300606778518>46
D<137CEA01FEEA07FF380F8780381E03C0EA3C1DEA387F3870FFE0EA71E313C112E1EAE3
80A638E1C1C0127113E33870FF8038387F00EA3C1C381E00E0EA0F833807FFC000011380
38007E00131C7E9B18>64 D<EA0FF0EA1FFC487EEA3C0FEA180738000380A213FF120712
1FEA7F03127812E0A3EAF007EA780F383FFFF8EA1FFDEA07F015147E9318>97
D<EA01FEEA07FF001F1380EA3E073838030048C7FCA25AA61270EB01C01238EA3E03381F
FF8000071300EA01FC12147D9318>99 D<EB1F80133F131F1303A5EA03E3EA0FFBEA1FFF
EA3C1FEA380FEA7007130312E0A6EA7007A2EA380FEA3C1F381FFFF0380FFBF83803E3F0
151C7E9B18>I<EA01F0EA07FCEA1FFEEA3E0F38380780EA7003A238E001C0A2B5FCA300
E0C7FC1270EB01C01238EA3E07381FFF8000071300EA01F812147D9318>I<3801E1F038
07FFF85A381E1E30381C0E00487EA5EA1C0EEA1E1EEA1FFC5BEA39E00038C7FC7EEA1FFE
EBFFC04813E0387801F038700070481338A4007813F0EA7E03381FFFC06C13803801FC00
151F7F9318>103 D<127E12FE127E120EA5133EEBFF80000F13C013C1EB80E01300120E
AB387FC7FC38FFE7FE387FC7FC171C809B18>I<EA0380EA07C0A3EA0380C7FCA4EA7FC0
12FF127F1201AEB5FCA3101D7C9C18>I<EA01F0EA0FFE487E383E0F80EA3803387001C0
A238E000E0A5EAF001007013C0EA7803383C0780EA3E0F381FFF006C5AEA01F013147E93
18>111 D<38FF0FC0EB3FE0EB7FF0EA07F0EBE060EBC0005BA290C7FCA9EAFFFC7F5B14
147E9318>114 D<EA07F7EA3FFF5AEA780FEAE007A3007CC7FCEA7FE0EA1FFCEA03FEEA
001F38600780EAE003A212F038F80F00B5FC13FCEAE7F011147D9318>I<387E07E0EAFE
0FEA7E07EA0E00AC1301EA0F033807FFFC6C13FE3801FCFC1714809318>117
D E /Fq 37 122 df<137813841201EA03021207A45BA25BA2EA03909038A00FFC9038C0
01E0EC00C000011480EC0100EA02E000041302EA08703818780438303808EA703CEB1C10
EAF00EEB0F20EB07C09038038004387001C0397802E0083938047018391C183C303907E0
0FC01E227EA023>38 D<127012F012F8A212781208A31210A31220A21240050E7C840D>
44 D<EAFFF0A20C02808A0F>I<127012F8A3127005057C840D>I<EA03F0EA0E1C487EEA
1806EA380738700380A400F013C0AD00701380A3EA780700381300EA1806EA1C0E6C5AEA
03F0121F7E9D17>48 D<13801203120F12F31203B3A6EA07C0EAFFFE0F1E7C9D17>I<EA
03F0EA0C1CEA100E487E00401380128000F013C0EAF803A3EA200712001480A2EB0F0013
0E5B5B5B13605B485A48C7FC000613405A5A00101380EA3FFF5AB5FC121E7E9D17>I<12
40387FFFE014C0A23840008038800100A21302485AA25B5BA25BA21360A213E05B1201A4
1203A76C5A131F7E9D17>55 D<EA03F0EA0E18487E487E13071270EB038012F0A214C0A5
EA7007A21238EA180BEA0E13EA03E338000380A3EB07001230EA7806130EEA700CEA2018
EA1070EA0FC0121F7E9D17>57 D<5B497EA3497EA3EB09E0A3EB10F0A3EB2078A3497EA2
EBC03EEB801EA248B5FCEB000FA20002EB0780A348EB03C0A2120C001E14E039FF801FFE
1F207F9F22>65 D<B512E0380F0078141EA2801580A515005C141E147CEBFFF0EB007C14
1FEC0F80EC07C0140315E0A515C014071580EC0F00143EB512F01B1F7E9E20>I<90380F
E0109038381C309038E002703803C00139078000F048C71270121E15305A1510127C1278
00F81400A7EC3FFEEC01F000781300127C123CA27EA27E6C7E3903C001703900E0023090
38380C1090380FF0001F217E9F24>71 D<EAFFF0EA0F00B3ABEAFFF00C1F7E9E10>73
D<EB1FE0EB70383801C00E48487E39070003804814C0001EEB01E048EB00F0A2007C14F8
A20078147800F8147CA900781478007C14F8A2003C14F0003E1301001E14E06CEB03C06C
148039038007003801E01E38007038EB1FE01E217E9F23>79 D<B512E0380F007C141E80
EC0780A215C0A41580A2EC0F00141E147CEBFFE090C8FCAEEAFFF01A1F7E9E1F>I<B57E
380F00F0143C8080A21580A41500A2141E5C14F0EBFF80EB01C0EB0070A280143CA3143E
A31504143F141FEC0F0839FFF00788C7EA01F01E207E9E21>82 D<3803F040380C0CC0EA
1803EA3001EA6000A212E01440A36C13007E127CEA7F80EA3FF86CB4FC00071380C613C0
EB1FE013031301EB00F014707EA46C136014E06C13C038F8018038C60300EA81FC14217E
9F19>I<007FB512E038780F010060EB006000401420A200C0143000801410A400001400
B3497E3803FFFC1C1F7E9E21>I<39FFF00FF8390F0003E0EC0080B3A46CEB0100138012
0314026C6C5A6C6C5AEB3830EB0FC01D207E9E22>I<EA1FE0EA3030EA7818131CEA300E
1200A313FEEA078EEA1E0E1238127800F01310A3131E127838386720380F83C014147E93
17>97 D<EA01FCEA0706EA1C0F123813060078C7FC127012F0A61270127800381380A238
1C0100EA0706EA01F811147F9314>99 D<EB01C0130F1301AAEA01F1EA070DEA0C03EA18
0112381278127012F0A61270A21238EA1803120CEA070D3801F1F815207F9F19>I<EA03
F0EA0E1C487E487EA21270EB038012F0A2B5FC00F0C7FCA31270A26C1380A2381C0100EA
0706EA01F811147F9314>I<137CEA01C6EA030F1207EA0E061300A7EAFFF0EA0E00B2EA
7FE01020809F0E>I<14E03803E330EA0E3CEA1C1C38380E00EA780FA5EA380E6C5AEA1E
38EA33E00020C7FCA21230A2EA3FFE381FFF8014C0383001E038600070481330A4006013
606C13C0381C03803803FC00141F7F9417>I<121C12FC121CAA137C1386EA1D03001E13
80A2121CAE38FF8FF014207E9F19>I<1238127CA31238C7FCA6121C12FC121CB1EAFF80
091F7F9E0C>I<121C12FC121CB3ABEAFF8009207F9F0C>108 D<391C3E03E039FCC30C30
391D039038391E01E01CA2001C13C0AE3AFF8FF8FF8021147E9326>I<EA1C7CEAFC86EA
1D03001E1380A2121CAE38FF8FF014147E9319>I<EA01F8EA070E381C0380383801C0A2
387000E0A200F013F0A6007013E0A2383801C0A2381C038038070E00EA01F814147F9317
>I<EA1CF0EAFD18EA1E3CA21318EA1C00AEEAFFC00E147E9312>114
D<EA0FC8EA3038EA6018EAC008A3EAE000127CEA3FE0EA1FF0EA07F8EA003CEA800E1306
12C0A21304EAE00CEAD818EA87E00F147F9312>I<1202A31206A2120EA2123EEAFFF8EA
0E00AB1304A5EA07081203EA01F00E1C7F9B12>I<381C0380EAFC1FEA1C03AE1307120C
EA061B3803E3F014147E9319>I<38FF87F8381E03C0380E0180EB0300EA0702EA0384EA
01C813D8EA00F01370137813F8139CEA010E1202EA060738040380000C13C0003C13E038
FE07FC16147F9318>120 D<38FF83F8383E00E0001C13C06C1380A338070100A21383EA
0382A2EA01C4A213E4EA00E8A21370A31320A25BA3EAF080A200F1C7FC1262123C151D7F
9318>I E /Fr 26 122 df<127812FCA212FEA2127A1202A41204A31208A21210122012
4007127B8510>44 D<EAFFFEA30F037F8E14>I<14101438A3147CA314BEA3EB011FA390
38020F80A201047F1407A201087F1403A2496C7EA3496C7EA390387FFFFCA29038C0007E
49133EA248C7123F81A20002EC0F80A21206ED07C0001FEC0FE0D8FFE0EBFFFEA2272A7E
A92C>65 D<B7FCA23907E0003F00031407ED03801501A21500A416405CA21600A25CA214
0F90B5FCA2EBE00F1403A2801620A391C7FC1640A416C0A215011503ED07800007143FB7
FCA223297EA828>69 D<B512C0A2D807F0C7FC6C5AB3A41501A41502A41506A2150E151E
157C0007EB01FCB6FCA220297EA825>76 D<49B4FC90380F01E090383C0078497F01E013
0E0001140F4848EB07804848EB03C0000F15E048C7EA01F0A2003EEC00F8A2007E15FCA2
007C157CA200FC157EA9007C157C007E15FCA3003E15F8003F14016C15F0A26C6CEB03E0
000715C06D13076C6CEB0F80C66CEB1E0001785B6D5B90380F01E0D901FFC7FC272B7DA9
2E>79 D<B6FC15E03907E001F80003EB007C81811680150F16C0A61680151F1600153E5D
EC01F090B512C001E0C8FCB1487EB57EA222297EA828>I<007FB612F0A2397C00F80100
70EC00700060153000401510A200C01518A2481508A5C71400B3A6497E90B512F8A22529
7EA82A>84 D<EA03FCEA0C0738100380383C01C0003E7F6D7E121C1208C7FCA3137FEA03
E0EA0F80EA1E005A127C0078144012F8A31301127C393C027880381E0C7F3907F01E001A
1A7E991D>97 D<137F3801C0E038070010000E1378001E13F85A1470007C132000781300
12F8A81278127C003C1308A26C1310000E13206C13603801C18038007E00151A7E991A>
99 D<140F14FFA2141F80AC133F3801C0CF3803802F380F001F121E001C7F123C127C12
78A212F8A71278A27EA26C5B000E132F6CEB4F803901C18FF038007E0F1C2A7EA921>I<
13FC38038780380701C0000E13E0EA1C00003C13F0A2481378A212F8A2B512F800F8C7FC
A51278A26C1308A26C1310000E13206C13403801C18038007E00151A7E991A>I<131FEB
70C0EBE1E0EA01C31203EB81C0380780801400A9EAFFFEA2EA0780B3A37FEA7FFCA2132A
7FA912>I<140F3901FC308038070743380E03C3001EEBC100486C7EA2007C7FA5003C5B
A26C485A000E5BD81707C7FCEA11FC0030C8FCA47E381FFF806C13F06C7F3818007C4813
1E0070130E00607F12E0A40070130EA26C5B6C5B380781E0C6B4C7FC19287E9A1D>I<12
0FB4FCA2121F7EACEB07F0EB1838EB201C497E140F1380A21300B139FFF0FFF0A21C2A7E
A921>I<121E123FA4121EC7FCA9120FB4FCA2121F7EB3A2EAFFF0A20C297EA811>I<120F
B4FCA2121F7EB3B2EAFFF0A20C2A7EA911>108 D<3A0F07F007F03AFF18381838903920
1C201C3A1F400E400E000F010F130F01801380A201001300B13BFFF0FFF0FFF0A22C1A7E
9931>I<380F07F038FF1838EB201C381F400E000F130F1380A21300B139FFF0FFF0A21C
1A7E9921>I<137E3803C3C0380700E0000E1370481338003C133CA248131EA200F8131F
A80078131EA26C133CA2001C13386C13706C13E03803C3C038007E00181A7E991D>I<38
0F07E038FF1838EB601E380F800FEC0780010013C0140315E0A2EC01F0A715E01403A215
C0EC07801380EC0F00EB401CEB3078EB0FC090C8FCAAEAFFF0A21C267E9921>I<380F0F
8038FF11C0EB23E0EA1F43EA0F83EB81C0EB800090C7FCB07FEAFFFCA2131A7E9917>
114 D<7FA41201A31203A21207120F381FFF80B5FC38078000AD1440A73803C080120138
00E100133E12257FA417>116 D<000F130FB413FFA2001F131F6C7FB05CA26C132F3903
804F803901C08FF038007F0F1C1A7E9921>I<39FFF01FF0A2390F8007800007EB030014
02A26C6C5AA2EBE00C00011308A26C6C5AA2EBF830EB7820A26D5AA2EB3EC0EB1E80A26D
C7FCA31306A21C1A7F991F>I<39FFF01FF0A2390F8007800007EB03001402A26C6C5AA2
EBE00C00011308A26C6C5AA2EBF830EB7820A26D5AA2EB3EC0EB1E80A26DC7FCA31306A2
1304A2130C1308A2EA701012F85BA2485AEA6180001FC8FC1C267F991F>121
D E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 36 42 a Fr(A)20 b(T)n(yp)r(e-directed,)c(On-line,)h(P)n(artial)
h(Ev)m(aluator)g(for)i(a)f(P)n(olymorphic)f(Language)853
157 y Fq(Tim)d(Sheard)454 213 y(Oregon)g(Graduate)g(Institute)h(of)e
(Science)j(&)f(T)l(ec)o(hnology)495 269 y(P)l(.O.)f(Bo)o(x)g(91000,)e
(P)o(ortland,)h(OR)i(97291-1000)d(USA)748 326 y Fp(sheard@cse.ogi.edu)
1193 309 y Fo(\003)-76 638 y Fn(Abstract)-76 717 y Fm(Recen)o(tly)m(,)
18 b(Olivier)f(Dan)o(vy)g(in)o(tro)q(duced)h(a)e(new,)g(simple)h(metho)
q(d)-76 758 y(for)d(implemen)o(ting)i(p)q(o)o(w)o(erful)f(partial)h(ev)
n(aluators,)f(namely)g(t)o(yp)q(e-)-76 800 y(directed)g(partial)f(ev)n
(aluation[9)s(].)j(He)12 b(in)o(tro)q(duced)k(a)d(partial)i(ev)n(al-)
-76 841 y(uator)c(for)f(the)g(simply-t)o(yp)q(ed)j(lam)o(b)q(da)f
(calculus)h(\()p Fl(x)p Fm(2\).)i(This)c(pap)q(er)-76
883 y(explores)k(the)f(p)q(ossibilit)o(y)j(of)c(using)h(the)g(same)f
(tec)o(hniques)j(o)o(v)o(er)d(a)-76 924 y(lam)o(b)q(da)k(calculus)i
(with)d(a)g(ric)o(her)g(t)o(yp)q(e)g(system.)26 b(W)m(e)16
b(generalize)-76 966 y(and)e(extend)g(Dan)o(vy's)g(w)o(ork)f(in)g(four)
g(w)o(a)o(ys:)-31 1037 y(1.)19 b(Our)12 b(system)h(handles)h(a)e(m)o
(uc)o(h)h(ric)o(her)h(language)g(than)f(that)18 1079
y(presen)o(ted)f(b)o(y)g(Dan)o(vy)m(,)h(including)i(all)e(of)e(the)h
(features)g(func-)18 1120 y(tional)f(programmers)g(ha)o(v)o(e)g(come)f
(to)g(exp)q(ect,)g(suc)o(h)h(as)f(p)q(oly-)18 1162 y(morphism)15
b(\()p Fl(x)p Fm(5\),)g(inductiv)o(e)i(datat)o(yp)q(es)e(\()p
Fl(x)p Fm(10\),)g(and)g(recur-)18 1203 y(sion)f(\()p
Fl(x)p Fm(9\).)-31 1275 y(2.)19 b(Our)f(system)h(includes)i(a)e(new)g
(systematic)h(treatmen)o(t)e(of)18 1316 y(primitiv)o(e)d(op)q(erators)f
(\()p Fl(x)p Fm(7\))f(and)g(the)g(propagation)j(of)c(resid-)18
1358 y(ualized)k(co)q(de)e(\()p Fl(x)p Fm(7.1\).)20 b(This)14
b(question)i(has)e(either)h(b)q(een)g(ig-)18 1399 y(nored)9
b(or)h(treated)f(in)h(an)g(ad-ho)q(c)g(manner)g(in)g(previous)h(w)o
(ork.)-31 1470 y(3.)19 b(Our)9 b(system)h(handles)i(non-closed)f(terms)
f(\()p Fl(x)p Fm(6\).)16 b(This)10 b(mak)o(es)18 1512
y(t)o(yp)q(e-directed)i(partial)g(ev)n(aluation)g(m)o(uc)o(h)f(more)f
(practically)18 1554 y(useful,)g(and)g(can)g(easily)h(b)q(e)f(extended)
g(to)g(w)o(ork)f(in)h(languages)18 1595 y(with)j(parameterized)i(mo)q
(dule)f(systems.)-31 1666 y(4.)19 b(Our)f(system)g(mak)o(es)h(the)f
(whole)h(pro)q(cess)g(more)g(e\016cien)o(t,)18 1708 y(b)o(y)12
b(using)i(a)f(lazy)m(,)g(on-demand)h(implemen)o(tation)i(\()p
Fl(x)p Fm(8\).)g(The)18 1749 y(laziness)k(of)f(our)g(implemen)o(tation)
j(also)e(causes)g(the)f(co)q(de)18 1791 y(pro)q(duced)11
b(to)f(b)q(e)g(more)g(abstract)g(and)h(compact.)17 b(Using)10
b(this)18 1832 y(lazy)k(implemen)o(tation)j(w)o(e)c(ha)o(v)o(e)h
(observ)o(ed)g(sp)q(eedup)h(ratios)18 1874 y(in)10 b(the)f(range)h
(2-10,)g(and)g(co)q(de)g(compactness)h(impro)o(v)o(emen)o(ts)18
1915 y(of)h(more)h(than)h(10)f(in)h(some)f(cases.)-20
1987 y(All)f(these)f(extensions)i(are)e(made)g(p)q(ossible)i(b)o(y)e(a)
g(k)o(ey)g(tec)o(hnical)-76 2028 y(inno)o(v)n(ation,)16
b(namely)m(,)d Fk(emb)n(e)n(dding)f(typ)n(es)g(in)h(values)p
Fm(.)p -76 2058 399 2 v -34 2080 a Fj(\003)-16 2093 y
Fi(The)d(researc)o(h)h(rep)q(orted)f(in)i(this)g(pap)q(er)f(w)o(as)f
(supp)q(orted)i(b)o(y)g(the)f(USAF)-76 2126 y(Air)19
b(Materiel)g(Command,)i(con)o(tract)d(#)i(F19628-93-C-00)o(69)o(,)f
(and)g(NSF)-76 2159 y(Gran)o(t)13 b(IRI-9625462.)20 b
Fh(This)14 b(pap)q(er)h(app)q(eared)h(in)d Fi(The)g(Pro)q(ceedings)h
(of)-76 2192 y(the)9 b(A)o(CM)f(SIGPLAN)g(Symp)q(osium)i(on)f(P)o
(artial)g(Ev)n(aluation)h(and)f(Seman)o(tics)-76 2225
y(Based)14 b(Program)f(Manipulation.)24 b(pp)14 b(22-35.)22
b(Amsterdam,)14 b(The)g(Nether-)-76 2259 y(lands,)k(June)d(12-13,)g
(1997.)26 b Fh(Cop)o(yrigh)o(t)15 b(1997)g Fi(b)o(y)h(the)f(Asso)q
(ciation)g(for)-76 2292 y(Computing)10 b(Mac)o(hinery)m(,)g(Inc.)15
b(P)o(ermission)10 b(to)e(mak)o(e)h(digital)h(or)e(hard)h(copies)-76
2325 y(of)f(part)f(or)g(all)h(of)g(this)h(w)o(ork)e(for)h(p)q(ersonal)f
(or)g(classro)q(om)g(use)h(is)h(gran)o(ted)e(with-)-76
2358 y(out)k(fee)f(pro)o(vided)i(that)f(copies)g(are)f(not)g(made)h(or)
f(distributed)j(for)e(pro\014t)f(or)-76 2391 y(direct)15
b(commercial)g(adv)n(an)o(tage,)h(and)f(that)g(copies)g(b)q(ear)g(this)
g(notice)g(and)-76 2425 y(the)c(full)g(citation)g(on)f(the)h(\014rst)f
(page.)k(Cop)o(yrigh)o(ts,)e(for)e(comp)q(onen)o(ts)g(of)h(this)-76
2458 y(w)o(ork)f(b)o(y)g(others)g(than)g(A)o(CM,)f(m)o(ust)i(b)q(e)e
(honored.)15 b(Abstracting)9 b(with)h(credit)-76 2491
y(is)j(p)q(ermitted.)18 b(T)m(o)11 b(cop)o(y)h(otherwise,)g(to)g
(republish,)i(to)e(p)q(ost)f(on)h(serv)o(ers,)h(or)-76
2524 y(to)f(redistribute)h(to)f(lists,)i(requires)f(prior)f(sp)q
(eci\014c)g(p)q(ermission)i(and/or)d(fee.)-76 2557 y(Request)i(p)q
(ermissions)g(from)f(Publications)h(Departmen)o(t,)g(A)o(CM)e(INC.,)h
(fax)-76 2591 y(+1)f(\(212\))f(869-0481,)f(or)h(\(p)q
(ermission@acm.org\))1020 638 y Fn(1)41 b(Intro)q(duction)1020
717 y Fm(Simple)20 b(implemen)o(tations)i(of)c(e\013ectiv)o(e)h
(partial)h(ev)n(aluators)g(are)1020 758 y(imp)q(ortan)o(t)g(b)q(ecause)
f(man)o(y)f(systems)h(with)g(\\small")h(em)o(b)q(edded)1020
800 y(languages)f(could)f(b)q(ene\014t)g(from)e(the)h(use)g(of)f
(partial)j(ev)n(aluation)1020 841 y(tec)o(hnology)m(.)28
b(Un)o(til)17 b(no)o(w,)g(the)f Fk(e\013e)n(ctive)d Fm(use)k(partial)h
(ev)n(aluation)1020 883 y(tec)o(hnology)f(mean)o(t)f(in)o(tegrating)h
(a)f(sophisticated,)i(o\013-the-shelf,)1020 924 y(partial)11
b(ev)n(aluator)g(with)f(the)g(em)o(b)q(edded)h(language,)h(b)q(ecause)e
(writ-)1020 966 y(ing)16 b(an)e(e\013ectiv)o(e)i(partial)g(ev)n
(aluator)g(for)f(ev)o(en)g(a)f(small)i(language)1020
1007 y(w)o(as)i(b)q(ey)o(ond)h(the)f(reac)o(h)g(of)f(most)h(em)o(b)q
(edded)h(language)h(imple-)1020 1049 y(men)o(tors.)d(This)d(no)f
(longer)i(need)e(b)q(e)h(the)f(case.)1076 1090 y(T)o(yp)q(e-directed)22
b(partial)g(ev)n(aluation)i(uses)d(a)f(simpler)i(strat-)1020
1132 y(egy)e(than)f(earlier)i(partial)g(ev)n(aluation)h(systems,)f(y)o
(et)e(still)i(pro-)1020 1173 y(vides)c(m)o(uc)o(h)f(of)f(the)h(same)g
(p)q(o)o(w)o(er;)h(including)i(a)d(simple)h(form)e(of)1020
1215 y(p)q(olyv)n(arian)o(t)i(sp)q(ecializa)q(tion)q(,)g(higher)f
(order)f(functions,)h(partially)1020 1256 y(static)f(data)g
(structures,)h(and)f Fk(automatic)d Fm(propagation)17
b(of)d(static)1020 1298 y(con)o(texts)g(o)o(v)o(er)f(dynamic)i(branc)o
(hes)1554 1282 y Fg(1)1572 1298 y Fm(.)1076 1339 y(P)o(artial)d(ev)n
(aluation)h(is)d(a)h(transformation)g(that)g(tak)o(es)f(as)h(input)1020
1381 y(a)h(\(source\))g(program)h(plus)g(some)f(of)f(that)h(program's)g
(inputs,)h(and)1020 1422 y(pro)q(duces)e(another)f(\(residual\))i
(program)e(sp)q(ecialized)j(to)c(the)h(giv)o(en)1020
1464 y(inputs.)36 b(This)19 b(transformation)i(is)e(traditionall)q(y)j
(implemen)o(ted)1020 1505 y(b)o(y)e(enco)q(ding)h(the)e(source)h
(program)g(and)g(its)g(input)g(in)g(a)g(data)1020 1547
y(structure,)11 b(and)h(p)q(erforming)g(a)e(sym)o(b)q(olic)j(ev)n
(aluation)g(of)d(this)i(data)1020 1588 y(structure)i(taking)h(adv)n(an)
o(tage)f(of)f(the)h(kno)o(wn)g(inputs)h(to)e(pro)q(duce)1020
1630 y(the)g(residual)i(program.)1076 1671 y(T)o(yp)q(e-directed)e
(partial)g(ev)n(aluation)g(ac)o(hiev)o(es)g(similar)g(results,)1020
1713 y(only)20 b(in)f(new)f(and)h(no)o(v)o(el)g(w)o(a)o(ys.)33
b(T)o(yp)q(e)19 b(directed)g(partial)h(ev)n(al-)1020
1754 y(uators)d(can)g(b)q(e)g(implemen)o(ted)i(b)o(y)d
Fk(r)n(ei\014c)n(ation)p Fm(.)25 b(Rei\014cation)19 b(can)1020
1796 y(b)q(e)c(explained)i(informally)g(as)d(follo)o(ws.)22
b(A)14 b(seman)o(tics)i(pro)o(vides)g(a)1020 1837 y Fk(me)n(aning)f
Fm(to)i(a)g(syn)o(tactic)i(program.)30 b(Rei\014cation)19
b(pro)o(vides)g(the)1020 1879 y(rev)o(erse,)f(translating)i(from)c(the)
i(seman)o(tic)g(domain)g(bac)o(k)g(to)f(an)1020 1920
y(equiv)n(alen)o(t)h(expression)f(in)f(the)f(syn)o(tactic)i(domain.)25
b(A)14 b(p)q(o)o(w)o(erful)1020 1962 y(prop)q(ert)o(y)i(of)g(the)f
(rei\014cation)j(pro)q(cess)e(is)g(that)g(the)g(returned)g(ex-)1020
2003 y(pression)j(is)e(in)h(a)f(normal)i(form.)28 b(Th)o(us,)18
b(rei\014cation)i(supplies)f(a)1020 2045 y(mec)o(hanism)d(for)e(an)h
(imp)q(ortan)o(t)h(feature)e(of)g(a)h(partial)h(ev)n(aluator,)1020
2087 y(carrying)d(out)g(static)f(computations)i(at)e(partial)h(ev)n
(aluation-ti)q(me.)1076 2128 y(An)o(y)j(curried)g(function)h(of)e(t)o
(w)o(o)g(or)g(more)h(argumen)o(ts)g(can)g(b)q(e)1020
2170 y(partially)f(ev)n(aluated)f(b)o(y)f(applying)i(it)e(to)f(its)h
(kno)o(wn)g(argumen)o(t\(s\))1020 2211 y(then)j(reifying)h(the)f
(resultan)o(t)g(seman)o(tic)h(v)n(alue)g(to)e(get)g(a)h(syn)o(tac-)1020
2253 y(tic)d(represen)o(tation)h(of)e(the)h(sp)q(ecialized)i(function)f
(as)e(the)h(residual)1020 2294 y(program.)22 b(If)14
b(the)h(curried)h(functions)g(argumen)o(ts)f(app)q(ear)h(in)f(the)1020
2336 y(wrong)c(order,)g(then)h(a)e(lam)o(b)q(da)j(expression)f(can)f(b)
q(e)g(built)i(and)e(this)1020 2377 y(can)k(b)q(e)f(rei\014ed)i
(instead.)22 b(F)m(or)14 b(example)i(a)f(function)g Ff(f)f
Fm(with)h(t)o(yp)q(e)1020 2419 y Ff(int)k(->)f(string)g(->)g(int)c
Fm(can)i(b)q(e)g(partially)i(ev)n(aluated)f(with)f(its)1020
2460 y(string)h(v)n(alued)g(argumen)o(t)f(as)g(a)g(static)g(input)h(as)
f(follo)o(ws.)26 b(Let)16 b Ff(s)p 1020 2490 V 1063 2514
a Fe(1)1080 2527 y Fi(No)d(man)o(ual)i(binding)h(time)f(impro)o(v)o
(emen)o(ts)g(are)f(necessary)g(to)g(enable)1020 2560
y(partial)i(ev)n(aluation.)30 b(This)17 b(is)g(a)e(mixed)i(blessing)g
(though,)h(since)f(it)f(ma)o(y)1020 2593 y(duplicate)c(co)q(de)f
(unnecessarily)m(.)p eop
%%Page: 2 2
2 1 bop -76 -34 a Fm(b)q(e)15 b(the)f(string)i(w)o(e)e(wish)h(to)f(use)
g(as)h(the)f(static)h(input.)23 b(Build)16 b(the)-76
7 y(function)e Ff(fn)19 b(n)g(=>)g(f)g(n)h(s)12 b Fm(and)h(reify)h(it.)
j(F)m(or)c(a)f(\015a)o(v)o(or)i(of)e(ho)o(w)h(to)-76
49 y(use)h(suc)o(h)f(a)g(system)g(see)h(App)q(endix)h(A.)-20
90 y(Our)e(system)g(can)f(b)q(e)h(explained)i(as)e(an)g
(expansion{reducti)q(on)-76 132 y(system.)34 b(Informally)m(,)21
b(reduction)g(tak)o(es)e(a)f(term)h(to)f(a)h(smaller,)-76
173 y(simpler)f(form.)28 b(Expansion)19 b(tak)o(es)e(a)f(term)h(to)f(a)
h(larger,)h(p)q(oten-)-76 215 y(tially)i(more)e(complex)h(term.)30
b(The)18 b(utilit)o(y)i(of)d(suc)o(h)h(systems)h(is)-76
256 y(that)13 b(sometimes,)h(a)g(tin)o(y)g(amoun)o(t)f(of)g(expansion)j
(will)e(mak)o(e)g(p)q(os-)-76 298 y(sible)j(a)f(m)o(uc)o(h)g(larger)h
(reduction,)g(driving)h(the)e(term)f(to)h(a)f Fk(much)-76
339 y(simpler)g Fm(form.)24 b(One)15 b(m)o(ust)h(b)q(e)g(careful)g(b)q
(ecause)h(unfettered)f(ex-)-76 381 y(pansion)h(can)f(lead)g(to)e
(non-termination,)k(so)e(determining)h(when)-76 422 y(to)g(expand)h(is)
f(the)f(k)o(ey)h(to)g(implemen)o(ting)i(e\013ectiv)o(e)f(expansion-)-76
464 y(reduction)d(systems.)-20 505 y(A)c(con)o(tribution)i(of)e(this)h
(pap)q(er)g(is)f(that)h(e\013ectiv)o(e)g(partial)h(ev)n(al-)-76
547 y(uators,)18 b(for)f(realistic)i(languages,)h(can)e(b)q(e)f(built)i
(as)e(expansion{)-76 588 y(reduction)j(systems,)f(and)f(that)h(the)f(t)
o(yp)q(e-directed)h(strategy)f(of)-76 630 y(Dan)o(vy)i([9])e(is)h
(exactly)h(the)f(mec)o(hanism)h(needed)f(to)g(determine)-76
671 y(when)13 b(expansion)j(is)d(necessary)m(.)-20 713
y(In)j(this)h(pap)q(er)f(w)o(e)g(pro)o(vide)h(the)f(details)i(of)d
(implemen)o(ting)k(a)-76 754 y(rei\014cation)11 b(based)f(partial)h(ev)
n(aluator)f(as)f(an)h(expansion{reducti)q(on)-76 796
y(system.)17 b(W)m(e)11 b(use)h(an)g(algebraic)i(datat)o(yp)q(e)e(w)o
(e)f(call)i Ff(exp)d Fm(to)h(enco)q(de)-76 837 y(the)j(syn)o(tactic)h
(domain,)g(and)f(another)h(w)o(e)e(call)i Ff(value)d
Fm(to)h(enco)q(de)-76 879 y(the)k(seman)o(tic)h(domain.)29
b Ff(Both)14 b Fm(expansion)19 b(and)f(reduction)g(map)-76
920 y Ff(exp')p Fm(s)c(to)h Ff(value)p Fm('s.)22 b(It)15
b(is)h(in)g(the)g(size)g(and)g(structure)g(of)f(the)h(re-)-76
962 y(sulting)g Ff(value)11 b Fm(that)j(they)g(di\013er.)19
b(Reduction)d(constructs)e(a)g(sim-)-76 1003 y(pler,)e(smaller)h
Ff(value)c Fm(than)i(its)h(input,)g(and)g(expansion)h(constructs)-76
1045 y(a)g(larger)h Ff(value)d Fm(with)i(more)h(eviden)o(t)g
(structure.)-20 1086 y(W)m(e)k(implemen)o(t)i(the)e(reduction)i(mec)o
(hanism)f(as)f(a)g(function)-76 1128 y(\()p Ff(eval)p
Fm(\).)d(W)m(e)e(implemen)o(t)h(the)f(expansion)i(mec)o(hanism)g(as)d
(a)h(t)o(yp)q(e-)-76 1169 y(directed)k(function)g(\()p
Ff(reflect)p Fm(\).)22 b(The)15 b(b)q(eaut)o(y)i(of)e(this)i(system)f
(is)-76 1211 y(that)c(the)g(op)q(erational)j(seman)o(tics)e(of)f(the)g
(language)i Fk(is)d Fm(the)h(reduc-)-76 1253 y(tion)i(part)f(of)f(the)h
(expansion{reduc)q(tion)j(system.)h(This)d(mak)o(es)f(it)-76
1294 y(easy)j(to)f(sho)o(w)g(that)h(the)f(op)q(erational)j(seman)o
(tics)f(of)d(the)i(system)-76 1336 y(coincide)f(with)f(the)f(sym)o(b)q
(olic)i(ev)n(aluation)g(of)e(the)g(partial)i(ev)n(alua-)-76
1377 y(tor.)-20 1419 y(P)o(artial)f(ev)n(aluation)h(is)e(implemen)o
(ted,)i(in)e(part,)g(as)f(a)h(function)-76 1460 y(\()p
Ff(reify)p Fm(\))j(that)j(tak)o(es)g(a)g Ff(value)d Fm(bac)o(k)j(to)f
(an)h(equiv)n(alen)o(t)i Ff(exp)c Fm(in)-76 1502 y(normal)d(form.)-20
1543 y(Because)c(the)f(t)o(yp)q(e-directed)h(algorithms)h(for)e(the)f
(simply-t)o(yp)q(ed)-76 1585 y(lam)o(b)q(da)i(calculus)h(translate)f
(almost)g(directly)h(in)o(to)e(Sc)o(heme,)h(Dan)o(vy)-76
1626 y(built)15 b(a)f(rather)g(p)q(o)o(w)o(erful)g(partial)i(ev)n
(aluator)f(with)f(v)o(ery)g(little)h(ef-)-76 1668 y(fort)10
b(b)o(y)g(using)h(the)g(Sc)o(heme)f(compiler)i(as)e(a)g(reduction)i
(engine)f(that)-76 1709 y(driv)o(es)16 b(the)f(partial)h(ev)n(aluation)
i(pro)q(cess.)23 b(W)m(e)14 b(found)i(that)f(using)-76
1751 y(the)d(Sc)o(heme)g(compiler)h(as)e(an)h(o\013)f(the)h(shelf)g
(comp)q(onen)o(t)g(of)g(a)f(t)o(yp)q(e)-76 1792 y(directed)h(partial)g
(ev)n(aluator)f(for)f(a)g(language)j(with)d(p)q(olymorphism)-76
1834 y(and)18 b(recursion)g(is)f(no)g(longer)h(simple)h(and)e(direct.)
29 b(Instead,)18 b(w)o(e)-76 1875 y(constructed)f(an)f(implemen)o
(tation)i(for)d(a)h(full)h(language,)g(includ-)-76 1917
y(ing)e(a)f(parser,)h(a)f(t)o(yp)q(e)g(inference)h(mec)o(hanism,)h(a)e
(read-ev)n(al-prin)o(t)-76 1958 y(lo)q(op,)20 b(as)d(w)o(ell)i(as)e(a)h
(t)o(yp)q(e-directed)h(partial)g(ev)n(aluation)h(mec)o(ha-)-76
2000 y(nism.)-20 2041 y(W)m(e)13 b(use)h(an)f(implemen)o(tation)j(tec)o
(hnique)f(in)f(whic)o(h)g(t)o(yp)q(es)f(are)-76 2083
y(em)o(b)q(edded)21 b(in)f Ff(value)p Fm(s)d(as)j(w)o(ell)g(as)g(in)g
(expressions.)38 b(A)19 b(disad-)-76 2124 y(v)n(an)o(tage)g(of)g(this)g
(tec)o(hnique)h(is)g(that)e(t)o(yp)q(e)h(information)i(in)e(the)-76
2166 y(form)g(of)g(t)o(yp)q(e)h(tags)f(m)o(ust)h(con)o(tin)o(ually)j(b)
q(e)c(passed)h(around)h(b)o(y)-76 2207 y(the)d(implemen)o(tation)k
(\(but)c(only)i(at)e(partial)i(ev)n(aluation-time\).)-76
2249 y(An)15 b(adv)n(an)o(tage)h(of)e(this)i(tec)o(hnique)g(is)g(that)e
Fk(every)g Fm(v)n(alue)h(em)o(b)q(eds)-76 2290 y(its)j(o)o(wn)f(t)o(yp)
q(e,)g(and)h(this)g(enables)g(the)f(extension)i(listed)g(ab)q(o)o(v)o
(e.)-76 2332 y(In)13 b(summary)m(,)h(this)g(pap)q(er)f(illustrates)j(a)
d(new,)g(simple)i(metho)q(d)e(of)-76 2373 y(implemen)o(ting)h(p)q(o)o
(w)o(erful)d(partial)i(ev)n(aluators)f(for)f(ric)o(h)g(languages.)-76
2471 y Fn(2)41 b(T)m(yp)q(e)13 b(Based)h(Rei\014cation)-76
2550 y Fm(This)e(pap)q(er)g(explains)i(t)o(yp)q(e-directed)f(partial)g
(ev)n(aluation)h(b)o(y)e(pro-)-76 2591 y(viding)19 b(implemen)o(tation)
q(s)h(for)c(a)h(sequence)i(of)d(lam)o(b)q(da)j(calculus)1020
-34 y(v)n(arian)o(ts)f(of)f(increasing)j(complexit)o(y)m(.)30
b(In)17 b(eac)o(h)h(v)n(arian)o(t)g(w)o(e)f(will)1020
7 y(construct)11 b(a)e(domain)j(of)d(t)o(yp)q(es)h(\()p
Ff(typ)p Fm(\),)f(a)h(syn)o(tactic)h(domain)g(\()p Ff(exp)p
Fm(\),)1020 49 y(and)j(a)f(seman)o(tic)h(domain)g(\()p
Ff(value)p Fm(\))1552 33 y Fg(2)1568 49 y Fm(.)1076 90
y(The)g(meaning)h(function,)g Ff(eval)p Fm(,)d(pro)o(vides)j(the)f
(reduction)h(en-)1020 132 y(gine)g(of)f(the)g(expansion{reducti)q(on)j
(system,)d(as)g(w)o(ell)h(as)f(de\014ning)1020 173 y(the)i(op)q
(erational)j(seman)o(tics)f(of)d(eac)o(h)i(calculus.)28
b(Tw)o(o)16 b(m)o(utually)1020 215 y(recursiv)o(e)d(functions)f
Ff(reify)d Fm(and)j Ff(reflect)c Fm(aid)k(in)g(the)f(implemen-)1020
256 y(tation)f(of)f(partial)h(ev)n(aluation.)18 b(As)9
b(w)o(e)f(increase)i(the)f(complexit)o(y)i(of)1020 298
y(our)f(system)g(it)f(will)i(b)q(ecome)f(p)q(ossible)i(remo)o(v)o(e)e
(the)f Ff(typ)f Fm(parameter)1020 339 y(to)15 b Ff(reify)p
Fm(.)23 b(W)m(e)15 b(will)i(do)f(this)h(b)o(y)e(em)o(b)q(edding)j(t)o
(yp)q(e)e(information)1020 381 y(in)o(to)f(v)n(alues.)23
b(In)14 b(our)h(initial)i(implemen)o(tation)g(the)e Ff(typ)e
Fm(parame-)1020 422 y(ters)i(to)f Ff(reify)f Fm(and)i
Ff(reflect)d Fm(mak)o(e)j(the)g(system)g(t)o(yp)q(e-directed.)1020
464 y(The)e(initial)j(t)o(yp)q(es)d(of)g(all)i(three)e(functions)h(are)
f(giv)o(en)i(b)q(elo)o(w.)1020 531 y Ff(eval)77 b(:)19
b(env)g(->)f(exp)h(->)g(value)1020 572 y(reflect)e(:)i(typ)g(->)f(exp)h
(->)g(value)1020 614 y(reify)57 b(:)19 b(typ)g(->)f(value)g(->)h(exp)
1076 681 y Fm(The)10 b(function)i Ff(reify)p Fm(,)d(giv)o(en)i(a)g(t)o
(yp)q(e,)g(maps)g(from)f(v)n(alues)i(bac)o(k)1020 722
y(to)d(equiv)n(alen)o(t)j(expressions.)18 b(The)10 b(function)h
Ff(reflect)6 b Fm(implemen)o(ts)1020 764 y(the)19 b(expansion)h(p)q
(ortion)g(of)e(the)h(expansion-reductio)q(n)i(system,)1020
805 y(giv)o(en)e(a)f(t)o(yp)q(e)h(it)f(maps)h(from)e(simple)j
Ff(exp)p Fm('s)d(to)h(more)g(complex)1020 847 y Ff(value)p
Fm(s.)1076 888 y(W)m(e)9 b(could)i(ha)o(v)o(e)f(view)o(ed)g(partial)h
(ev)n(aluation)h(as)d(an)h(expansion-)1020 930 y(reduction)k(system)f
(p)q(erforming)i(normalization)h(in)d(the)g(syn)o(tactic)1020
971 y(domain)d(alone,)h(using)f(sym)o(b)q(olic)h(ev)n(aluation)g
(\\under)f(the)f(lam)o(b)q(da")1020 1013 y(to)18 b(reac)o(h)g(normal)h
(forms.)32 b(The)18 b(expansion{redu)q(ction)j(prop)q(er-)1020
1054 y(ties)d(b)q(ecome)h(clearly)g(eviden)o(t)g(in)f(suc)o(h)h(a)e
(view.)31 b(Expansion)21 b(is)1020 1096 y(necessary)14
b(whenev)o(er)g Fd(\014)g Fm(reduction)h(cannot)f(pro)q(ceed)g(b)q
(ecause)g(an)1020 1137 y(abstraction)h(is)e(applied)j(to)d(expression)i
(of)e(the)g(wrong)g(shap)q(e.)1076 1179 y(The)h(most)f(imp)q(ortan)o(t)
i(reason)f(not)g(to)f(base)h(an)g(implemen)o(ta-)1020
1220 y(tion)h(on)f(this)h(view)g(is)g(that)f(it)h(requires)g
(complicated)h(mac)o(hinery)1020 1262 y(to)i(deal)g(with)h(en)o
(vironmen)o(ts,)h(b)q(ound)f(v)n(ariables)h(and)f(substitu-)1020
1303 y(tions.)e(The)11 b(b)q(eaut)o(y)i(of)d(our)i(implemen)o(tation)i
(strategy)e(is)f(that)h(all)1020 1345 y(these)17 b(problems)h(are)e
(encapsulated)j(in)e(the)f Ff(eval)f Fm(function)i(and)1020
1386 y(are)f(handled)i(in)f(a)g(completely)h(standard)f(and)g(elegan)o
(t)g(manner)1020 1428 y(and)d(nev)o(er)f(need)h(b)q(e)f(considered)i
(again.)1076 1469 y(Our)c(\014rst)g(calculus)i(is)e(a)g(simply)h(t)o
(yp)q(ed)g(lam)o(b)q(da)g(calculus)h(with)1020 1511 y(in)o(teger)k
(constan)o(ts.)26 b(Dan)o(vy)17 b(describ)q(es)g(a)f(t)o(yp)q
(e-directed)h(partial)1020 1552 y(ev)n(aluator)d(for)f(a)g(similar)i
(calculus)g(where)e(the)g(domain)i(of)d(syn)o(tax)1020
1594 y(is)e(Sc)o(heme,)g(the)g(meaning)h(function)g(is)e(the)h(Sc)o
(heme)g(compiler,)h(and)1020 1635 y(the)h(rei\014cation)j(algorithm)f
(is)f(t)o(yp)q(e)f(directed,)h(ha)o(ving)h(an)f(explicit)1020
1677 y(t)o(yp)q(e)i(parameter.)23 b(In)15 b(Figure)h(1)f(is)g(an)g(SML)
g(implemen)o(tation)j(of)1020 1718 y(Dan)o(vy's)c(calculus.)1076
1760 y(In)h(this)g(calculus)i(there)e(are)f(only)i(in)o(teger)g(t)o(yp)
q(es)f(\()p Ff(tint)p Fm(\))d(and)1020 1801 y(function)19
b(t)o(yp)q(es)g(\()p Ff(tarrow)p Fm(\))c(\(although)20
b(other)e(base)g(t)o(yp)q(es)h(other)1020 1843 y(than)12
b(in)o(teger)h(could)g(easily)h(b)q(e)e(added\).)18 b(There)11
b(are)h(four)g(kinds)h(of)1020 1884 y(elemen)o(ts)h(in)f(the)g(syn)o
(tactic)h(domain:)19 b(in)o(teger)14 b(constan)o(ts)f(\()p
Ff(eint)p Fm(\),)1020 1926 y(function)20 b(application)h(\()p
Ff(eapp)p Fm(\),)c(abstractions)j(or)e(function)i(con-)1020
1967 y(struction)14 b(\()p Ff(eabs)p Fm(\),)d(and)j(v)n(ariables)h(\()p
Ff(evar)p Fm(\).)1076 2009 y(The)f(domain)i(of)e(v)n(alues)i(con)o
(tains)g(constructors)g(for)e(in)o(tegers)1020 2050 y(\()p
Ff(vint)p Fm(\))8 b(and)i(functions)i(\()p Ff(vfun)p
Fm(\))7 b(corresp)q(onding)13 b(to)d(the)g(t)o(yp)q(es)g
Ff(tint)1020 2092 y Fm(and)18 b Ff(tarrow)p Fm(.)26 b(In)18
b(addition,)i(the)d(domain)i(of)d(v)n(alues)j(m)o(ust)e(also)1020
2133 y(con)o(tain)c(the)f(co)q(ercion[12)r(])f Ff(vdyn)p
Fm(.)k(This)d(constructor)h(is)g(crucial)g(to)1020 2175
y(implemen)o(ting)18 b(rei\014cation,)f(it)f(allo)o(ws)g(the)f(syn)o
(tactic)i(domain)f(to)1020 2216 y(b)q(e)f(em)o(b)q(edded)g(in)g(the)g
(seman)o(tic)g(domain.)22 b(Dynamic)16 b(v)n(alues)g(are)1020
2258 y(transparen)o(t)f(at)e(the)g(programmer)h(lev)o(el)h(in)o
(terface)f(and)g(are)f(used)1020 2299 y(only)h(b)o(y)g(the)f
(rei\014cation)i(pro)q(cess.)1076 2341 y(The)f(ev)n(aluation)j
(function)e(is)g(completely)h(standard.)21 b(It)14 b(uses)1020
2382 y(an)k(en)o(vironmen)o(t,)j Ff(env)p Fm(,)c(to)h(map)g(v)n
(ariables)i(to)e(v)n(alues)h(and)g(has)1020 2424 y(t)o(yp)q(e:)d
Ff(env)i(->)h(exp)g(->)g(value)p Fm(.)13 b(It)d(uses)h(t)o(w)o(o)e
(auxiliary)14 b(functions)p 1020 2453 399 2 v 1063 2477
a Fe(2)1080 2490 y Fi(W)m(e)f(adhere)g(to)g(the)g(con)o(v)o(en)o(tion)h
(that)e(the)i(initial)g(letter)f(of)g(eac)o(h)f(con-)1020
2523 y(structor)g(function)h(is)g(one)f(of)g(the)h(letters:)k
Fc(t)p Fi(,)d Fc(e)p Fi(,)f(or)f Fc(v)h Fi(indicating)g(to)f(whic)o(h)
1020 2556 y(one)k(of)g(these)g(domains)h(the)f(constructors)g(b)q
(elongs:)25 b Fc(t)17 b Fi(for)f(t)o(yp)q(es,)j Fc(e)e
Fi(for)1020 2589 y(expressions)f(\(the)f(syn)o(tactic)g(domain\),)i
(and)e Fc(v)h Fi(for)e(v)n(alues)i(\(the)f(seman)o(tic)1020
2622 y(domain\).)961 2747 y Fm(2)p eop
%%Page: 3 3
3 2 bop -76 -74 1005 2 v -77 1532 2 1607 v -53 -4 a Ff(datatype)16
b(typ)j(=)176 b(\(*)38 b(domain)17 b(of)i(types)f(*\))-14
38 y(tint)-53 79 y(|)h(tarrow)e(of)i(typ)f(*)i(typ;)-53
162 y(datatype)c(exp)j(=)176 b(\(*)19 b(syntacti)o(c)e(domain)g(*\))-14
204 y(eint)h(of)h(int)195 b(\(*)19 b(e.g.)f(5)215 b(*\))-53
245 y(|)19 b(eapp)f(of)h(exp)f(*)h(exp)78 b(\(*)117 b(f)19
b(5)176 b(*\))-53 287 y(|)19 b(eabs)f(of)h(string)e(*)i(exp)g(\(*)117
b(fn)18 b(x)i(=>)f(x)58 b(*\))-53 328 y(|)19 b(evar)f(of)h(string;)115
b(\(*)i(x)215 b(*\))-53 411 y(datatype)16 b(value)i(=)137
b(\(*)19 b(domain)e(of)i(values)e(*\))-14 453 y(vint)h(of)h(int)-53
495 y(|)g(vfun)f(of)h(\(value)e(->)i(value\))-53 536
y(|)g(vdyn)f(of)h(exp;)-53 619 y(fun)f(eval)g(env)h(e)g(=)137
b(\(*)19 b(the)f(interprete)o(r)36 b(*\))-53 661 y(case)18
b(e)h(of)-14 702 y(\(eint)e(n\))i(=>)g(vint)f(n)-53 744
y(|)h(\(eapp\(x,y)o(\)\))d(=>)45 785 y(\(case)h(\(eval)h(env)g(x\))h
(of)103 827 y(vfun)g(f)g(=>)g(f\(eval)e(env)h(y\)\))-53
868 y(|)h(\(eabs\(x,b)o(ody)o(\)\))d(=>)45 910 y(let)i(fun)h(F)g(v)g(=)
g(eval)f(\(extV)g(x)h(v)g(env\))g(body)45 951 y(in)f(vfun\(F\))f(end)
-53 993 y(|)i(\(evar)e(s\))i(=>)g(\(getV)f(s)h(env\))-53
1076 y(fun)f(reify)g(tint)g(\(vint)f(n\))i(=)h(eint)e(n)-14
1117 y(|)h(reify)f(\(tarrow\(t)o(1,)o(t2\))o(\))f(\(vfun)g(f\))i(=)25
1159 y(let)f(val)h(s)g(=)g(gensym)f("x")103 1200 y(val)h(g)g(=)g
(\(reify)f(t2\))g(o)h(f)h(o)f(\(reflect)d(t1\))25 1242
y(in)j(eabs\(s,g)d(\(evar)i(s\)\))h(end)-14 1283 y(|)g(reify)f(_)h
(\(vdyn)f(e\))g(=)i(e)-53 1366 y(and)e(reflect)f(\(tarrow\(t)o(1,t)o
(2\)\))f(e)j(=)64 1408 y(vfun\(fn)e(v)i(=>)g(reflect)e(t2)358
1449 y(\(eapp\(e,rei)o(fy)f(t1)j(v\)\)\))-14 1491 y(|)g(reflect)e
(\(tint\))g(e)i(=)h(vdyn)e(e)p 928 1532 V -76 1534 1005
2 v -66 1606 a Fm(Figure)c(1:)j Fb(SML)d(implemen)o(tation)e(of)j(Dan)o
(vy's)g(calculus.)-76 1729 y Ff(getV)g Fm(to)h(apply)h(the)f(en)o
(vironmen)o(t)i(to)e(a)h(v)n(ariable,)h(and)f Ff(extV)d
Fm(to)-76 1771 y(extend)20 b(an)f(en)o(vironmen)o(t)i(at)d(a)h
(particular)i(v)n(ariable)g(to)e(a)f(new)-76 1812 y(v)n(alue.)-20
1854 y(In)11 b(this)g(calculus)h(rei\014cation)h(w)o(orks)e(o)o(v)o(er)
f(v)n(alues)i(pro)q(duced)g(b)o(y)-76 1895 y Ff(eval)c
Fm(from)i(closed)i(terms,)e(and)h(is)f(implemen)o(ted)j(b)o(y)d(the)g
(m)o(utually)-76 1937 y(recursiv)o(e)15 b(functions)f
Ff(reify)d Fm(and)j Ff(reflect)p Fm(.)-76 2030 y Fn(2.1)41
b(Ho)o(w)12 b(do)q(es)i(Rei\014cation)e(W)o(o)o(rk?)-76
2096 y Fm(The)k(functions)i Ff(reify)d Fm(and)i Ff(reflect)c
Fm(are)k(used)g(to)f(map)h(v)n(alues)-76 2138 y(bac)o(k)j(to)f
(expressions.)38 b(Reifying)21 b(an)f(in)o(teger)g(v)n(alue)h(is)e
(trivial.)-76 2179 y(Reifying)d(a)f(function)g(\()p Ff(reify)j
(\(tarrow\(t)o(1,t)o(2\))o(\))f(\(vfun)g(f\))p Fm(\))d(is)-76
2221 y(more)f(di\016cult.)19 b(W)m(e)13 b(m)o(ust)g(someho)o(w)g(build)
i(an)f Ff(exp)d Fm(when)i(all)i(w)o(e)-76 2262 y(ha)o(v)o(e)i(is)f(a)g
(function)h(from)f Ff(value)e Fm(to)i Ff(value)d Fm(whic)o(h)k
(implemen)o(ts)-76 2304 y(its)d(b)q(eha)o(vior.)-20 2345
y(Dan)o(vy's)f(brilliant)h(insigh)o(t)g(w)o(as)e(that)g(correctly)h
(reifying)h(suc)o(h)-76 2387 y(a)i(function)h(can)f(b)q(e)g(done)g(if)g
(one)g(kno)o(ws)g(the)g(t)o(yp)q(e)g(of)f(the)h(func-)-76
2428 y(tion;)21 b(this)e(is)f(wh)o(y)g(b)q(oth)h Ff(reify)d
Fm(and)i Ff(reflect)d Fm(tak)o(e)j(an)g(initial)-76 2470
y Ff(typ)11 b Fm(parameter.)18 b(Dan)o(vy)13 b(p)q(oin)o(ts)h(out)f
(sev)o(eral)h(other)e(examples)i(in)-76 2511 y(the)g(literature)h
(where)e(the)h(same)f(strategy)h(\(using)h(t)o(yp)q(es)f(to)f(turn)-76
2553 y(functions)i(pro)q(duced)g(from)f(a)f(closed)i
Fd(\025)f Fm(expressions)i(in)o(to)e(terms\))-76 2594
y(is)g(used[8)q(,)e(2].)1076 -34 y(The)18 b(k)o(ey)f(to)h(this)g(pro)q
(cess)h(is)f(the)g Ff(reflect)c Fm(function.)32 b(The)1020
7 y(function)13 b Ff(f)p Fm(,)d(exp)q(ects)i(an)g(argumen)o(t)g(\(of)f
(t)o(yp)q(e)g Ff(value)p Fm(\))e(with)j(a)f(par-)1020
49 y(ticular)17 b(shap)q(e;)g(that)f(is)g(to)f(sa)o(y)h(an)f(argumen)o
(t)h(constructed)h(in)f(a)1020 90 y(particular)h(w)o(a)o(y)e(from)g
(the)g(constructors)h Ff(vint)d Fm(and)j Ff(vfun)p Fm(.)k(This)1020
132 y(pattern)13 b(of)f(construction)i(can)f(b)q(e)g(captured)g
(precisely)i(b)o(y)d(the)h(al-)1020 173 y(gebra)d(of)e(t)o(yp)q(es,)i
(and)g(is)f(formalized)i(b)o(y)e(the)g(binary)h(shap)q(e)g(relation)
1020 215 y Fl(S)16 b Fm(b)q(et)o(w)o(een)d(t)o(yp)q(es)h(and)f(v)n
(alues:)1128 278 y Fk(int)90 b Fl(S)40 b Ff(\(vint)18
b(n\))36 b Fm(=)h Fk(true)1075 320 y Fm(\()p Fd(t)1104
324 y Fg(1)1132 320 y Fl(!)11 b Fd(t)1195 324 y Fg(2)1212
320 y Fm(\))38 b Fl(S)45 b Fm(\()p Ff(vfun)18 b(f)o Fm(\))42
b(=)37 b Fl(8)p Fd(v)q(:)11 b(t)1666 324 y Fg(1)1694
320 y Fl(S)j Fd(v)d Fl(\))g Fd(t)1824 324 y Fg(2)1852
320 y Fl(S)j Fm(\(f)c Fd(v)q Fm(\))1128 361 y Fk(int)90
b Fl(S)45 b Fm(\()p Ff(vdyn)18 b(e)o Fm(\))42 b(=)37
b Fk(true)1076 427 y Fm(This)13 b(is)g(wh)o(y)g Ff(reflect)d
Fm(tak)o(es)j(a)f Ff(typ)f Fm(as)i(an)g(input.)18 b(The)13
b(t)o(yp)q(es)1020 469 y(indicate)i(exactly)f(ho)o(w)f(the)h(expansion)
h(is)e(to)g(pro)q(ceed.)1076 510 y(In)c(the)h(ML)f(in)o(terpretor)i
(giv)o(en,)g(if)e Ff(f)g Fm(is)h(applied)i(to)d(a)g(v)n(alue)i(with)
1020 552 y(the)16 b(wrong)f(shap)q(e)i(an)f(ML)f Fk(match)f
Fm(error)i(will)h(o)q(ccur.)25 b(Normally)1020 593 y(t)o(yp)q(e)10
b(correctness)h(of)e(the)h(in)o(terpreted)h(programs)g(\014lters)g(out)
f(those)1020 635 y(programs)k(in)f(whic)o(h)h(suc)o(h)f(errors)g(ma)o
(y)g(o)q(ccur,)g(but)g(in)h(rei\014cation)1020 676 y(w)o(e)e(ma)o(y)h
(also)h(apply)g Ff(f)e Fm(to)g(a)h Ff(vdyn)e Fm(v)n(alue.)18
b(W)m(e)13 b(m)o(ust)f Fk(exp)n(and)f Fm(suc)o(h)1020
718 y(a)k(dynamic)h(v)n(alue)g(to)e(ha)o(v)o(e)h(the)30
b(additional)18 b(shap)q(e)d Ff(f)f Fm(demands.)1020
759 y(Without)d(this)f(expansion)h(w)o(e)e(cannot)h(pro)q(ceed,)h
(since)f(application)1020 801 y(of)g(the)f(function)j
Ff(f)d Fm(could)i(fail.)17 b(Expansion)12 b(at)e(precisely)h(this)g
(place)1020 842 y(is)j(the)f(k)o(ey)g(to)g(making)i(this)e(strategy)h
(w)o(ork.)1076 884 y(In)f Ff(reflect)c Fm(\(in)14 b(Figure)f(1\),)f
(the)h(prop)q(er)g(shap)q(e)h(of)e(an)h(in)o(teger)1020
925 y(\(or)18 b(an)o(y)g(other)g(base)h(t)o(yp)q(e\))f(is)g(obtained)i
(simply)g(b)o(y)e(using)h(the)1020 967 y Ff(vdyn)c Fm(injection.)31
b(The)17 b(prop)q(er)h(shap)q(e)g(of)f(a)g(function)h(is)g(a)f
Ff(vfun)1020 1008 y Fm(v)n(alue)d(whose)f(b)q(o)q(dy)h(is)f
(constructed)h(b)o(y)f(fully)i(eta-expanding)g(the)1020
1050 y(argumen)o(t)f Ff(e)e Fm(according)j(to)e(its)h(t)o(yp)q(e.)1076
1091 y(T)m(o)e(reify)h Ff(vfun\(f\))p Fm(,)c(with)k(t)o(yp)q(e)f
Ff(tarrow\(t1,)o(t2\))o Fm(,)d(an)k(abstrac-)1020 1133
y(tion)i(whose)g(b)q(ound)g(v)n(ariable)i(is)d(a)h(new)f(fresh)g(v)n
(ariable)i Ff(s)e Fm(is)h(con-)1020 1174 y(structed.)i(This)11
b(v)n(ariable)h(is)f(expanded)h(b)o(y)f Ff(reflect)d
Fm(in)o(to)j(a)f Ff(value)1020 1216 y Fm(with)h(the)f(prop)q(er)h(shap)
q(e.)17 b(The)11 b(\\seman)o(tic")g(function)h Ff(f)e
Fm(is)h(applied)1020 1257 y(to)i(this)h(dynamic)g Ff(value)d
Fm(and)j(the)f(function)h Ff(reify)d Fm(is)j(applied)h(to)1020
1299 y(the)e(result)h(to)f(obtain)i(the)e(b)q(o)q(dy)h(of)e(the)i
(abstraction.)1076 1336 y(If)h Ff(vfun\(f\))e Fm(w)o(as)j(constructed)g
(b)o(y)h(ev)n(al)f(from)g(a)f(closed)i(term)1020 1374
y(then)f Ff(f)f Fm(will)j(not)e(examine)h(the)f(structure)g(of)g(its)g
(argumen)o(t)h(but)1020 1411 y(only)d(manipulate)h(it)e(in)g(an)g
(abstract)g(w)o(a)o(y)m(.)j(Th)o(us)d(if)g(the)f(dynamic)1020
1448 y(v)n(alue)g(constructed)g(has)g(the)f(correct)g(shap)q(e)h(then)g
(nothing)h(can)e(go)1020 1486 y(wrong.)29 b(F)m(or)17
b(example)h(consider)g(the)f(iden)o(tit)o(y)i(function)f(at)f(the)1020
1523 y(t)o(yp)q(e)c Ff(tarrow\(tint)o(,t)o(int)o(\))p
Fm(:)1055 1578 y Fa(reify)j(\(tarrow\(tin)o(t,t)o(in)o(t\)\))1161
1615 y(\(eval)g(sigma)g(\(eabs\("x",)o(eva)o(r\(")o(x")o(\)\)\))o(\))
1020 1652 y(=)h(reify)f(\(tarrow\(tin)o(t,t)o(in)o(t\)\))1161
1690 y(\(vfun\(fn)f(v=>eval)g(\(extV)h("x")h(v)g(sigma\))e(\(evar)h
("x"\)\)\))1020 1727 y(=)h(reify)f(\(tarrow\(tin)o(t,t)o(in)o(t\)\))
1161 1765 y(\(vfun\(fn)f(v=>v\)\))1020 1802 y(=)i(eabs)g(\("d1",rei)o
(fy)d(tint)1249 1839 y(\(\(fn)j(v=>v\))e(\(reflect)g(tint)h(\(evar)g
("d1"\)\)\)\))1020 1877 y(=)h(eabs)g(\("d1",rei)o(fy)d(tint)i(\(\(fn)h
(v=>v\))f(\(vdyn)f(\(evar)h("d1"\)\)\)\))1020 1914 y(=)h(eabs)g
(\("d1",rei)o(fy)d(tint)i(\(vdyn)g(\(evar)g("d1"\)\)\))1020
1951 y(=)h(eabs)g(\("d1",\(ev)o(ar)d("d1"\)\))1076 2010
y Fm(Of)k(course)i(if)f Ff(f)f Fm(is)i(not)f(a)g(closed)h(term,)g(or)e
(uses)i(primitiv)o(e)1020 2052 y(op)q(erators)13 b(that)f(examine)h
(the)f(structure)h(of)f(its)g(parameters)h(then)1020
2093 y(a)e(more)g(elab)q(orate)i(mec)o(hanism)g(will)f(b)q(e)g(needed.)
17 b(This)12 b(is)f(co)o(v)o(ered)1020 2135 y(in)j(Sections)g(6)f(and)h
(7.)1076 2176 y(As)h(w)o(e)g(progress)h(through)g(our)g(sequence)g(of)f
(lam)o(b)q(da)i(calculi)1020 2218 y(the)g(tric)o(k)h(will)h(b)q(e)f(to)
f(adjust)h Ff(reify)d Fm(to)i(construct)h(expressions)1020
2259 y(from)e(v)n(alues)i(with)f(ev)o(er)g(ric)o(her)h(structure)f(and)
g(for)f Ff(reflect)e Fm(to)1020 2301 y(construct)g Fk(exp)n(ande)n(d)c
Fm(v)n(alues)15 b(from)e(expressions)j(whic)o(h)e(main)o(tain)1020
2342 y(the)f(shap)q(e)h(relation)h(in)o(v)n(arian)o(t:)1293
2407 y Ff(e)10 b Fm(:)g Fd(t)h Fl(\))32 b Fd(t)21 b Fl(S)k
Fm(\()p Ff(reflect)8 b Fd(t)i Ff(e)p Fm(\))1020 2502
y Fn(3)41 b(Emb)q(edded)14 b(T)m(yp)q(es)f(in)g(V)o(alues)1020
2581 y Fm(An)i(in)o(teresting)h(observ)n(ation)h(ab)q(out)f(the)e(b)q
(eha)o(vior)j(of)d(the)h(func-)1020 2622 y(tion)e Ff(reify)c
Fm(led)k(us)f(to)g(a)g(signi\014can)o(t)i(impro)o(v)o(emen)o(t)f(in)g
(the)f(imple-)961 2747 y(3)p eop
%%Page: 4 4
4 3 bop -76 -34 a Fm(men)o(tation)12 b(of)e(rei\014cation)i(based)f
(partial-ev)n(alu)q(ators)i(b)o(y)e(enabling)-76 7 y(extensions)k(to)e
(Dan)o(vy's)h(original)i(pap)q(er.)-20 49 y(Note)e(that)f(the)h
(structure)g(of)g(v)n(alues)g(\(i.e.)19 b(the)14 b(di\013eren)o(t)h
(con-)-76 90 y(structors)f Ff(vint)d Fm(and)i Ff(vfun)p
Fm(\))e(con)o(tain)k(partial)f(information)h(ab)q(out)-76
132 y(the)20 b(t)o(yp)q(es)g(of)f(a)g(v)n(alue.)38 b(By)20
b(em)o(b)q(edding)h(a)f(small,)i(additional)-76 173 y(amoun)o(t)e(of)g
(t)o(yp)q(e)g(information)h(in)g Ff(vfun)d Fm(v)n(alues)j(it)f(is)g(p)q
(ossible)-76 215 y(to)13 b(pro)o(vide)i Fk(al)r(l)e Fm(the)g(t)o(yp)q
(e)h(information)h(necessary)g(for)e(rei\014cation)-76
256 y(completely)e(in)o(ternal)g(to)e(a)h(v)n(alue.)16
b(This)10 b(c)o(hange)g(in)g(the)f(implemen-)-76 298
y(tation)i(allo)o(ws)g(the)e(function)i Ff(reify)d Fm(to)h(no)h(longer)
h(need)f(a)f(separate)-76 339 y Ff(typ)i Fm(input,)j(and)f(directly)i
(supp)q(orts)f(the)e(extensions)j(that)e(follo)o(w.)p
-76 393 1005 2 v -77 1418 2 1026 v -53 463 a Ff(datatype)j(exp)j(=)38
b(...)-53 505 y(|)19 b(eabs)f(of)h(typ)f(*)h(string)f(*)h(exp)-53
588 y(datatype)d(value)i(=)39 b(...)-53 629 y(|)19 b(vfun)f(of)h(typ)f
(*)h(\(value)f(->)h(value\))-53 712 y(fun)f(eval)g(env)h(e)g(=)-53
754 y(case)f(e)h(of)38 b(...)-53 795 y(|)19 b(\(eabs\(t,x)o(,bo)o(dy)o
(\)\))d(=>)45 837 y(let)i(fun)h(F)g(v)g(=)g(eval)f(\(extV)g(x)h(v)g
(env\))g(body)45 878 y(in)f(vfun\(t,F\))f(end)-53 961
y(fun)h(reify)g(\(vint)f(n\))i(=)g(eint)g(n)-14 1003
y(|)g(reify)f(\(vfun\(t,f)o(\)\))e(=)45 1044 y(let)i(val)h(s)g(=)g
(gensym)e("x")123 1086 y(val)i(g)g(=)g(reify)f(o)h(f)g(o)g(\(reflect)e
(t\))45 1127 y(in)h(eabs\(t,s,g)e(\(evar)i(s\)\))g(end)-14
1169 y(|)h(reify)f(\(vdyn)f(e\))i(=)g(e)-53 1252 y(and)f(reflect)f
(\(tarrow\(t)o(1,t)o(2\)\))f(e)j(=)64 1293 y(vfun\(t1,fn)d(v)j(=>)202
1335 y(reflect)d(t1)j(\(eapp\(e,re)o(ify)d(v\)\)\))-14
1376 y(|)j(reflect)e(\(tint\))g(e)i(=)h(vdyn)e(e)p 928
1418 V -76 1420 1005 2 v 40 1491 a Fm(Figure)d(2:)h Fb(V)l(ersion)g
(with)d(Em)o(b)q(edded)h(T)o(yp)q(es)-20 1575 y Fm(The)i(extra)h
(information)h(necessary)g(is)f(the)f(t)o(yp)q(e)h(of)f(the)g(do-)-76
1617 y(main)j(of)f(a)g Ff(vfun)e Fm(v)n(alue.)33 b(Since)19
b Ff(vfun)e Fm(v)n(alues)i(are)f(constructed)-76 1658
y(from)g Ff(eabs)e Fm(expressions)k(b)o(y)f Ff(eval)p
Fm(,)e(w)o(e)g(will)j(need)e(to)g(annotate)-76 1700 y
Ff(eabs)p Fm(,)13 b(with)j(t)o(yp)q(e)f(information)i(as)e(w)o(ell.)23
b(This)15 b(is)h(not)f(an)g(undue)-76 1741 y(burden)c(to)f(the)g
(programmer)h(b)q(ecause)g(the)f(concrete)h(syn)o(tax)g(need)-76
1783 y(not)16 b(carry)g(this)h(information;)h(instead)g(it)e(can)g(b)q
(e)g(added)g(to)g(the)-76 1824 y(abstract)d(syn)o(tax)f(b)o(y)h(a)e(t)o
(yp)q(e)i(inference)g(mec)o(hanism.)18 b(In)12 b(addition)-76
1866 y(when)d(w)o(e)f(mo)o(v)o(e)h(from)g(the)g(simply-t)o(yp)q(ed)i
(to)e(the)g(p)q(olymorphical)q(ly)q(-)-76 1907 y(t)o(yp)q(ed)i(lam)o(b)
q(da)g(calculus)h(w)o(e)d(will)i(need)f(this)g(information)i(an)o(yw)o
(a)o(y)m(.)-20 1949 y(These)17 b(c)o(hanges)h(are)g(outlined)h(in)f
(Figure)g(2.)29 b(In)17 b(this)g(\014gure)-76 1990 y(the)d(dots)g(\()p
Ff(...)p Fm(\))j(indicate)f(elided)f(segmen)o(ts)g(whic)o(h)f(are)g
(iden)o(tical)-76 2032 y(to)j(those)g(in)g(Figure)h(1.)28
b(Note)17 b(the)g(additional)j Ff(typ)15 b Fm(comp)q(onen)o(t)-76
2073 y(of)k(the)f(constructors)i Ff(eabs)d Fm(and)j Ff(vfun)p
Fm(,)e(and)h(ho)o(w)g(this)g(t)o(yp)q(e)h(is)-76 2115
y(propagated)15 b(in)o(to)f Ff(vfun)d Fm(v)n(alues)k(b)o(y)e(the)h
Ff(eval)d Fm(function)k(and)f(used)-76 2156 y(b)o(y)e
Ff(reify)d Fm(to)j(direct)g(the)g(expansion)i(pro)q(cess)e(b)o(y)g(b)q
(eing)h(passed)f(as)-76 2198 y(the)h(parameter)h(to)f
Ff(reflect)p Fm(.)-20 2239 y(Note)f(that)g(rei\014cation)i(is)e(still)i
(t)o(yp)q(e-directed,)f(ev)o(en)f(though)h(a)-76 2281
y Ff(typ)f Fm(is)h(no)h(longer)g(an)f(explicit)j(parameter)d(to)g
Ff(reify)p Fm(.)-76 2378 y Fn(4)41 b(Adding)13 b(Pro)q(ducts)g(and)h
(Sums)-76 2456 y Fm(Pro)q(ducts)20 b(and)g(sums)f(are)h(also)g(handled)
h(b)o(y)e(Dan)o(vy's)h(system.)-76 2498 y(Incorp)q(orating)15
b(them)e(in)o(to)g(our)g(implemen)o(tation)j(is)d(straigh)o(t)h(for-)
-76 2539 y(w)o(ard.)j(W)m(e)12 b(need)h(only)h(to)e(ensure)h(that)g
(our)f(extensions)j(for)d(pro)q(d-)-76 2581 y(ucts)j(and)h(sums)f
(enforce)g(the)g(in)o(v)n(arian)o(ts)i(b)q(et)o(w)o(een)f(the)f(shap)q
(e)g(of)-76 2622 y(v)n(alues)g(and)e(t)o(yp)q(es,)g(and)h(that)f(v)n
(alues)i(em)o(b)q(ed)e(their)h(o)o(wn)f(t)o(yp)q(es.)p
1020 -74 V 1019 619 2 694 v 1042 -4 a Ff(datatype)k(typ)h(=)39
b(...)1042 38 y(|)20 b(tpair)d(of)i(typ)g(*)g(typ)1042
79 y(|)h(tsum)e(of)h(typ)f(*)h(typ;)1042 162 y(datatype)e(tag)h(=)i
(left)e(|)h(right;)1042 245 y(datatype)e(exp)h(=)39 b(...)1042
287 y(|)20 b(epair)d(of)i(exp)g(*)g(exp)1042 328 y(|)h(epabs)d(of)i
(string)f(*)h(string)e(*)i(typ)g(*)g(exp)1042 370 y(|)h(esum)e(of)h
(tag)f(*)h(exp)1042 411 y(|)h(esabs)d(of)i(typ)g(*)g(string)e(*)i(exp)g
(*)g(string)e(*)j(exp;)1042 495 y(datatype)d(value)h(=)39
b(...)1042 536 y(|)20 b(vpair)d(of)i(value)f(*)h(value)1042
578 y(|)h(vsum)e(of)h(tag)f(*)h(value;)p 2024 619 V 1020
621 1005 2 v 1070 692 a Fm(Figure)14 b(3:)j Fb(T)o(yp)q(e)e(Additions)e
(for)i(Sums)f(&)h(Pro)q(ducts)1076 816 y Fm(In)j(Figure)g(3)g(w)o(e)f
(pro)o(vide)i(the)f(datat)o(yp)q(e)h(declarations)h(nec-)1020
857 y(essary)c(for)e(adding)j(sums)e(and)h(pro)q(ducts.)24
b(Pro)q(ducts)16 b(are)f(imple-)1020 899 y(men)o(ted)g(as)f(a)h(pair)g
(of)f(v)n(alues.)23 b(Sums)14 b(are)h(implemen)o(ted)i(b)o(y)d(tag-)
1020 940 y(ging)i(a)e(v)n(alue)i(with)f(one)g(of)f(the)g(constructors)i
Ff(left)d Fm(or)h Ff(right)e Fm(of)1020 982 y(the)h Ff(tag)f
Fm(datat)o(yp)q(e.)1076 1023 y(In)k(the)f(syn)o(tactic)i(domain)g(w)o
(e)e(m)o(ust)h(pro)o(vide)h(abstract)f(syn-)1020 1065
y(tax)h(for)f(b)q(oth)h(the)g(in)o(tro)q(duction)i(and)f(elimination)i
(of)c(pro)q(ducts)1020 1106 y(and)i(sums.)29 b(Here)17
b(w)o(e)f(explain)k(our)d(c)o(hoice)h(of)f(abstract)g(syn)o(tax)1020
1148 y(b)o(y)g(app)q(ealing)i(to)d(a)h(\(hop)q(efully\))h(familiar)g
(\(though)g(imaginary\))1020 1189 y(concrete)f(syn)o(tax)g(whic)o(h)g
(has)g(a)g(direct)g(mapping)h(in)o(to)f(the)g(con-)1020
1231 y(structors)d(w)o(e)e(ha)o(v)o(e)i(added)g(to)f(the)g(datat)o(yp)q
(e)h Ff(exp)p Fm(.)1076 1272 y(The)9 b(in)o(tro)q(duction)j(of)d(pro)q
(ducts)h(\()p Ff(epair)p Fm(\))d(uses)j(the)f(traditional)1020
1314 y(paren)o(theses)20 b(comma)e(notation)i(to)e(pair)h(t)o(w)o(o)e
(expressions,)22 b(e.g.)1020 1355 y Ff(\(4,x\))p Fm(.)35
b(The)19 b(elimination)k(of)c(pro)q(ducts)i(\()p Ff(epabs)p
Fm(\))c(uses)k(a)e(pat-)1020 1397 y(tern)f(matc)o(hing)i(abstraction)f
(with)g(t)o(w)o(o)e(b)q(ound)i(v)n(ariables)i(with)1020
1438 y(an)14 b(explicit)j(annotation)f(denoting)g(the)e(domain)i(of)d
(the)i(abstrac-)1020 1480 y(tion.)24 b(F)m(or)14 b(example)j(one)e
(migh)o(t)h(write:)21 b Ff(\(fn)d(\(t1)h(*)g(t2\))f(\(x,y\))1020
1522 y(=>)h(x\))c Fm(for)g(the)h(\014rst)g(pro)r(jection)h(function.)27
b(Here)15 b Ff(\(t1)k(*)g(t2\))c Fm(is)1020 1563 y(the)k(t)o(yp)q(e)g
(annotation,)j Ff(\(x,y\))16 b Fm(indicate)21 b(the)e(b)q(ound)h(v)n
(ariables,)1020 1605 y(and)14 b(the)f(b)q(o)q(dy)h(of)f(the)g
(abstraction)i(is)e(just)g Ff(x)p Fm(.)1076 1646 y(Sums)20
b(are)g(in)o(tro)q(duced)h(\()p Ff(esum)p Fm(\))d(b)o(y)h(tagging)i(an)
f(expression)1020 1688 y(with)g(one)h(of)f(the)g(sum)g(injection)i
(tags.)38 b(F)m(or)20 b(example)h Ff(\(left)1020 1729
y(x\))15 b Fm(or)g Ff(\(right)i(5\))p Fm(.)24 b(The)15
b(elimination)k(of)c(sums)h(\()p Ff(esumabs)p Fm(\))d(uses)1020
1771 y(a)k(pattern)g(matc)o(hing)h(abstraction)h(with)e(t)o(w)o(o)f
(clauses.)30 b(F)m(or)16 b(ex-)1020 1812 y(ample:)i Ff(\(fn)h(\(t1)f(+)
h(t2\))g(left)f(x)h(=>)g(3)g(|)g(right)f(y)h(=>)g(3\))12
b Fm(de-)1020 1854 y(notes)f(the)f(constan)o(t)h Ff(3)e
Fm(function.)17 b(Note)10 b(again,)i(the)e(explicit)i(anno-)1020
1895 y(tation,)i Ff(\(t1)k(+)h(t2\))p Fm(,)12 b(denoting)j(the)e
(domain)h(of)f(the)g(abstraction.)1076 1937 y(In)c(Figure)h(4)g(w)o(e)e
(giv)o(e)i(the)f(seman)o(tic)i(ev)n(aluation)g(function)g
Ff(eval)1020 1978 y Fm(and)20 b(the)g(rei\014cation)i(functions)g
Ff(reify)17 b Fm(and)k Ff(reflect)p Fm(.)34 b(Again)1020
2020 y(the)17 b(dots)h(\()p Ff(...)p Fm(\))28 b(indicate)19
b(elided)g(clauses)f(whic)o(h)g(are)f(iden)o(tical)1020
2061 y(to)j(those)h(in)h(previous)g(\014gures.)40 b(The)21
b(ev)n(aluation)i(function)f(is)1020 2103 y(again)12
b(completely)h(standard.)18 b(It)10 b(is)i(in)o(teresting)h(to)e(note,)
g(though,)1020 2144 y(that)f(the)h(ev)n(aluation)h(of)e(pro)q(duct)i
(elimination)h(\()p Ff(epabs)p Fm(\))8 b(and)j(sum-)1020
2186 y(elimination)j(\()p Ff(esabs)p Fm(\))8 b(build)k(ML)f(functions)h
(\()p Ff(F)d Fm(and)i Ff(G)p Fm(\),)f(whic)o(h)h(use)1020
2227 y(the)16 b(pattern)g(matc)o(hing)i(capabiliti)q(es)g(of)e(the)g
(underlying)j(imple-)1020 2269 y(men)o(tation)g(language)g(to)e(decomp)
q(ose)i(their)f Ff(value)d Fm(argumen)o(ts.)1020 2310
y(Note)9 b(that)g(these)h(functions)g(will)h(cause)f(an)f(SML)g
Ff(match)e Fm(exception)1020 2352 y(if)14 b(they)g(are)g(applied)i(to)e
(non-)p Ff(pair)p Fm(s)f(or)h(non-)p Ff(sum)p Fm(s.)19
b(This)14 b(another)1020 2393 y(place)c(where)f(the)g(errors)g
(discussed)i(in)f(Section)g(2.1)e(originate.)18 b(It)9
b(is)1020 2435 y(here)j(that)g(w)o(e)g(main)o(tain)i(the)e(shap)q(e)h
(in)o(v)n(arian)o(t)h(b)q(et)o(w)o(een)e(function)1020
2476 y(v)n(alues)i(\(constructed)f(with)g Ff(vfun)p Fm(\))d(and)j(t)o
(yp)q(es.)k(Ev)o(ery)c(function)h Ff(F)1020 2518 y Fm(that)d(decomp)q
(oses)i(a)d Ff(vpair)f Fm(ob)r(ject)i(is)h(tagged)g(with)f(a)g
Ff(tpair)e Fm(t)o(yp)q(e)1020 2559 y(\(assuming)j(that)f(the)g
(annotations)h(in)g Ff(exp)p Fm('s)d(are)h(correct\).)17
b(A)10 b(sim-)1020 2601 y(ilar)16 b(condition)h(holds)g(for)d
(functions)i Ff(G)f Fm(that)g(branc)o(h)g(on)g(a)g Ff(vsum)p
Fm(.)961 2747 y(4)p eop
%%Page: 5 5
5 4 bop -76 -34 a Fm(Without)15 b(rei\014cation,)h(w)o(ell-t)o(yp)q(ed)
f(programs)611 -50 y Fg(3)643 -34 y Fm(nev)o(er)f(ha)o(v)o(e)g(these)
-76 7 y(problems.)k(With)11 b(rei\014cation,)h Ff(F)e
Fm(and)g Ff(G)g Fm(m)o(ust)g(deal)h(with)f Ff(vdyn)f
Fm(v)n(al-)-76 49 y(ues)15 b(as)g(w)o(ell.)23 b(It)14
b(is)i(the)e(expansion)j(prop)q(erties)g(of)d Ff(reflect)e
Fm(that)-76 90 y(ensures)i(that)f(these)h(errors)f(do)g(not)h(o)q(ccur)
f(while)h(reifying.)-20 132 y(In)20 b(Figure)h(4)f(the)f
Ff(reify)f Fm(function)j(o)o(v)o(er)f(a)g(function)h(v)n(alue)-76
173 y(\()p Ff(vfun\(t,f\))p Fm(\))13 b(m)o(ust)k(construct)h(one)g(of)e
(the)i(three)f(kinds)h(of)f(ab-)-76 215 y(stractions,)e(i.e.)i(pro)q
(duct)e(elimination,)h(sum)e(elimination,)i(or)d(or-)-76
256 y(dinary)g(lam)o(b)q(da)f(abstraction.)18 b(By)11
b(insp)q(ecting)i(the)e(domain)h Ff(t)e Fm(this)-76 298
y(c)o(hoice)18 b(can)f(b)q(e)h(made.)29 b(It)16 b(builds)j(an)e
(appropriate)i(abstraction)-76 339 y(with)12 b(\\fresh")f(b)q(ound)i(v)
n(ariables,)g(and)f(uses)g(Dan)o(vy)g(and)g(Filinski)q('s)-76
381 y Ff(reset)17 b Fm(con)o(trol)k(op)q(erator[10)q(,)d(13)q(])h(to)g
(delimit)i(a)e(new)h(dynamic)-76 422 y(con)o(text.)d(Think)d(of)e(this)
h(dynamic)i(con)o(text)e(as)f(a)h(limited)h(con)o(tin-)-76
464 y(utation,)k(whic)o(h)g(when)e(applied,)k(will)d(carry)g(forw)o
(ard)f(only)i(that)-76 505 y(part)h(of)f(the)g(con)o(tin)o(uation)j
(starting)f(from)e(the)g(shift)h(op)q(erator.)-76 547
y(This)14 b(con)o(text)f(ma)o(y)g(b)q(e)h(extracted)f(b)o(y)h(a)e
Ff(shift)f Fm(con)o(trol)j(op)q(erator)-76 588 y(in)d(the)g
Ff(reflect)d Fm(function.)17 b(More)11 b(ab)q(out)g(ho)o(w)g(these)g
(con)o(texts)g(are)-76 630 y(used)j(is)f(giv)o(en)i(b)q(elo)o(w)f(b)q
(elo)o(w.)-20 667 y(The)e(function)i Ff(reflect)9 b Fm(expands)k(its)g
Ff(exp)e Fm(argumen)o(t)i(to)f(ha)o(v)o(e)-76 705 y(the)k(shap)q(e)g
(of)f(its)h Ff(typ)e Fm(argumen)o(t.)25 b(F)m(or)15 b(a)h(pro)q(duct)g
(it)g(returns)g(a)-76 742 y Ff(vpair)d Fm(where)j(the)f(comp)q(onen)o
(ts)i(are)e(the)g(\014rst)h(and)g(second)g(pro-)-76 779
y(jection)e(functions)h(applied)g(to)e Ff(e)p Fm(.)j(Here)-76
847 y Fa(fun)h(efst)f(t)h(e)h(=)f(eapp\(epabs)o(\("x)o(",)o("y")o(,t,)o
(eva)o(r)d("x"\),e\))-76 884 y(fun)j(esnd)f(t)h(e)h(=)f(eapp\(epabs)o
(\("x)o(",)o("y")o(,t,)o(eva)o(r)d("y"\),e\))-20 955
y Fm(Re\015ect)i(o)o(v)o(er)g(a)f(sum)g(constructs)i(a)e(case)g
(statemen)o(t.)24 b(Recall)-76 997 y(that)11 b Ff(reify)e
Fm(uses)j Ff(reset)d Fm(to)i(delimit)i(a)e(con)o(text)h(in)f(ev)o(ery)h
(function)-76 1038 y(just)g(b)q(efore)g(it)h(is)f(applied.)19
b(If)12 b(this)g(function)i(is)e(rei\014ed)h(o)o(v)o(er)g(a)f
Ff(sum)-76 1080 y Fm(then)h(it)f(will)i(b)q(e)f(applied)h(to)e(an)h
(expanded)h(v)n(alue)f(constructed)h(b)o(y)-76 1121 y(the)e
Ff(reflect)c Fm(function.)18 b(What)11 b(single)j(v)n(alue)e(can)g
(represen)o(t)g(b)q(oth)-76 1163 y(injections)f(of)e(a)g(sum?)17
b(No)9 b(suc)o(h)g(v)n(alue)i(exists,)f(so)g(instead)g
Ff(reflect)-76 1204 y Fm(extracts)15 b(the)g(curren)o(t)g(con)o(text)g
(using)h Ff(shift)c Fm(and)j(distributes)i(it)-76 1246
y(o)o(v)o(er)i(b)q(oth)f(branc)o(hes)i(of)e(the)g(case)h(expression,)i
(applying)g(it)d(to)-76 1287 y(expanded)11 b Ff(left)c
Fm(and)j Ff(right)d Fm(v)n(alues)k(in)f(the)f(appropriate)i(branc)o
(hes)-76 1329 y(of)k(the)f(case)h(b)q(eing)h(constructed.)23
b(Note)15 b(that)g(a)f(case)h(expression)-76 1370 y(o)o(v)o(er)f(a)g
(term)g Ff(e)g Fm(is)g(simply)i(syn)o(tactic)g(sugar)e(for)g
(application)j(of)d(a)-76 1412 y(sum)i(abstraction)h(to)e
Ff(e)p Fm(.)24 b(I.e.)f Ff(case)18 b(x)h(of)g(C)g(x)g(=>)g(e)h(|)f(D)g
(y)g(=>)-76 1453 y(f)13 b Fm(is)g(the)g(same)h(as)f Ff(\(fn)18
b(C)h(x)h(=>)e(e)i(|)f(D)g(y)g(=>)g(f\))g(x)p Fm(.)-20
1495 y(The)12 b(use)h(of)e Ff(shift)f Fm(and)j Ff(reset)d
Fm(originates)k(in)f(Dan)o(vy's)g(pap)q(er)-76 1536 y(and)k(is)h
(absolutely)h(brilliant.)30 b(It)16 b(is)i(p)q(ossible)h(to)d(do)h(a)o
(w)o(a)o(y)g(with)-76 1578 y Ff(shift)12 b Fm(and)i Ff(reset)p
Fm(,)e(but)i(only)i(b)o(y)e(writing)h(the)f Ff(eval)e
Fm(function)j(in)-76 1619 y(an)e(explicit)j(con)o(tiunation)g(passing)f
(st)o(yle.)-20 1661 y(A)o(t)g(this)i(p)q(oin)o(t)g(w)o(e)f(ha)o(v)o(e)g
(completed)h(an)g(implemen)o(tation)h(of)-76 1702 y(the)e(same)h
(material)g(co)o(v)o(ered)g(in)g(Dan)o(vy's)g(pap)q(er)g(whic)o(h)g(he)
f(im-)-76 1744 y(plemen)o(ted)g(using)h(Sc)o(heme.)22
b(The)15 b(only)h(signi\014can)o(t)h(di\013erence)g(is)-76
1786 y(that)10 b(w)o(e)f(use)h(a)f(no)o(v)o(el)i(implemen)o(tation)i
(tec)o(hnique)e(in)f(whic)o(h)h(t)o(yp)q(es)-76 1827
y(are)i(em)o(b)q(edded)h(in)g(v)n(alues.)k(This)13 b(allo)o(ws)h(our)f
(implemen)o(tation)j(to)-76 1869 y(handle)f(sev)o(eral)f(imp)q(ortan)o
(t)g(extensions.)-76 1966 y Fn(5)41 b(Adding)13 b(P)o(olymo)o(rphism)
-76 2045 y Fm(P)o(olymorphism)19 b(is)e(an)g(imp)q(ortan)o(t)g(feature)
g(used)g(extensiv)o(ely)h(in)-76 2086 y(mo)q(dern)j(functional)i
(languages.)41 b(T)m(o)20 b(add)h(p)q(olymorphism)j(w)o(e)-76
2128 y(need)16 b(a)g(p)q(olymorphic)i(lam)o(b)q(da)f(calculus.)26
b(This)16 b(do)q(es)g(not)g(mean)-76 2169 y(the)h(user)g(m)o(ust)g
(write)g(programs)h(in)f(the)g(p)q(olymorphic)j(lam)o(b)q(da)-76
2211 y(calculus.)f(He)10 b(con)o(tin)o(ues)j(to)e(write)g(programs)h
(in)g(a)f(language)i(with)-76 2252 y(no)g(explicit)j(t)o(yp)q(e)d
(information,)i(and)e(a)g(Hindley-Miln)q(er)i(t)o(yp)q(e)f(in-)-76
2294 y(ference)9 b(engine)h(adds)g(the)f(t)o(yp)q(e)g(annotations.)18
b(These)9 b(annotations)-76 2335 y(include:)18 b(univ)o(ersall)q(y)c
(quan)o(ti\014ed)f(t)o(yp)q(es)e(in)h(the)f(domain)h(of)f(t)o(yp)q(es,)
-76 2377 y(and)16 b(t)o(yp)q(e)f(abstraction)h(and)g(t)o(yp)q(e)f
(application)j(in)e(the)f(syn)o(tactic)-76 2418 y(domain.)j(In)13
b(the)g(seman)o(tic)h(domain)g(w)o(e)e(need)h(to)g(add)g(t)o(yp)q(e)g
(func-)-76 2460 y(tions)e(whic)o(h)f(when)g(applied)i(to)d(a)h(t)o(yp)q
(e)g(return)g(a)f(v)n(alue)i(sp)q(ecialized)-76 2501
y(to)i(that)g(t)o(yp)q(e.)p -76 2532 399 2 v -32 2556
a Fe(3)-16 2568 y Fi(Those)d(with)i(correct)e(annotations.)p
1020 -74 1005 2 v 1019 453 2 528 v 1042 -4 a Ff(datatype)17
b(typ)h(=)39 b(...)1042 38 y(|)20 b(tuniv)d(of)i(string)f(*)h(typ)1042
79 y(|)h(tvar)e(of)h(string;)1042 162 y(datatype)e(exp)h(=)39
b(...)1042 204 y(|)20 b(etapp)d(of)i(exp)g(*)g(typ)77
b(\(*)19 b(Ex:)38 b(len)19 b([int])e(*\))1042 245 y(|)j(etabs)d(of)i
(string)f(*)h(exp;)1082 287 y(\(*)g(Ex:)38 b(Fn)18 b(alpha)g(=>)h(fn)g
(\(alpha\))e(x)i(=>)g(x)58 b(*\))1042 370 y(datatype)17
b(value)h(=)39 b(...)1042 411 y(|)20 b(vtypfun)d(of)h(typ)h(->)g
(value;)p 2024 453 V 1020 455 1005 2 v 1102 526 a Fm(Figure)14
b(5:)j Fb(T)o(yp)q(e)d(Additions)g(for)g(P)o(olymorphism)1076
650 y Fm(The)f(ev)n(aluation)i(function)f(b)q(ecomes)f(more)g(complex)h
(b)q(ecause)1020 691 y(the)e(en)o(vironmen)o(t)i(m)o(ust)f(no)o(w)f
(map)g(b)q(oth)h(v)n(alue)g(v)n(ariables)h(to)f(v)n(al-)1020
733 y(ues)j(and)h(t)o(yp)q(e)f(v)n(ariables)i(to)e(t)o(yp)q(es.)26
b(The)16 b(t)o(yp)q(e)g(mapping)i(is)e(ex-)1020 774 y(tended)f(when)f
(ev)n(aluating)j(t)o(yp)q(e)d(abstractions)j(and)d(it)h(is)f(used)h(to)
1020 816 y(p)q(erform)g(t)o(yp)q(e)g(substitution)i(on)e(the)g(t)o(yp)q
(es)g(in)h(t)o(yp)q(e)f(application)1020 857 y(as)h(w)o(ell)h(as)e(the)
h(explicit)j(domain)e(t)o(yp)q(e)f(annotations)i(presen)o(t)e(in)1020
899 y(abstractions.)26 b(Figure)16 b(6)f(pro)o(vides)i(the)f(details)h
(of)e(this)h(pro)q(cess.)1020 940 y(Here)h Ff(extT)f
Fm(extends)i(the)f(t)o(yp)q(e)h(mapping)h(in)f(the)g(en)o(vironmen)o
(t,)1020 982 y(and)13 b Ff(getT)e Fm(uses)j(the)f(t)o(yp)q(e)g(en)o
(vironmen)o(t)h(to)f(instan)o(tiate)i(the)e(t)o(yp)q(e)1020
1023 y(v)n(ariables)i(o)o(v)o(er)f(its)f Ff(typ)f Fm(argumen)o(t.)1076
1065 y(All)k(the)e(di\016culties)j(in)f(handling)h(p)q(olymorphism)g
(are)e(inher-)1020 1106 y(en)o(t)f(in)h(constructing)h(v)n(alues)f
(with)g(the)f(correct)g(t)o(yp)q(e.)21 b(The)14 b Ff(eval)1020
1148 y Fm(function)20 b(do)q(es)g(this)g(quite)g(elegan)o(tly)m(.)36
b(Only)20 b(the)f(cases)g(whic)o(h)1020 1189 y(deal)13
b(with)f(t)o(yp)q(es)g(di\013er)g(from)f(our)h(previous)i(v)o(ersion.)j
(When)c(con-)1020 1231 y(structing)h(a)f(function)h(v)n(alue)f
Ff(vfun\(t,f\))p Fm(,)c(w)o(e)j(m)o(ust)h(b)q(e)g(sure)g(that)1020
1272 y Ff(t)f Fm(is)h(fully)h(instan)o(tiated)h(using)f(the)e(t)o(yp)q
(e)h(mapping)i(en)o(vironmen)o(t.)1020 1314 y(This)i(ensures)g(that)f
(the)g(em)o(b)q(edded)h(t)o(yp)q(es)g(in)g Ff(vfun)d
Fm(v)n(alues)j(cor-)1020 1355 y(rectly)f(describ)q(e)h(the)e(t)o(yp)q
(e)h(of)f(their)h(function)h(\()p Ff(f)p Fm(\))d(coun)o(terparts.)1020
1397 y(Note)k(that)g(this)h(implies)i(that)d(ev)o(ery)g
Ff(vfun)f Fm(function)i(ev)o(er)f(cre-)1020 1438 y(ated)d(\()p
Ff(vfun\(t,f\))o Fm(\))c(has)k(a)g(monomorphic)h(annotation)h(\()p
Ff(t)p Fm(\).)j(The)1020 1480 y(Hindley-Mil)q(ner)14
b(t)o(yp)q(e)e(inference)h(ensures)g(that)f(all)h(t)o(yp)q(e)f
(abstrac-)1020 1522 y(tions)i(are)f(at)g(the)g(outermost)h(lev)o(el.)19
b(By)13 b(the)g(time)h(a)f Ff(vfun)e Fm(ob)r(ject)1020
1563 y(is)h(created)g(all)g(the)f(abstracted)i(t)o(yp)q(es)e(ha)o(v)o
(e)h(b)q(een)g(sp)q(ecialized.)20 b(T)m(o)1020 1605 y(ensure)c(this,)h
(t)o(yp)q(e)f(instan)o(tiation)i(m)o(ust)e(done)g(when)g(an)g(expres-)
1020 1646 y(sion)e(is)g(sp)q(ecialized)i(using)e(t)o(yp)q(e)g
(application.)1076 1688 y(Rei\014cation)j(for)d(a)g(p)q(olymorphic)j
(language)g(where)d(the)h(t)o(yp)q(es)1020 1729 y(are)10
b(explicitl)q(y)j(con)o(tained)f(in)f(the)f(v)n(alues)i(b)q(ecomes)f
(almost)g(trivial.)1020 1771 y(Rei\014cation)19 b(of)d(a)h(t)o(yp)q(e)g
(function)h(is)f(a)f(t)o(yp)q(e)h(abstraction)i(in)e(the)1020
1812 y(syn)o(tactic)g(domain.)27 b(Re\015ection)17 b(o)o(v)o(er)f(a)g
(term)g(with)g(a)g(univ)o(ersal)1020 1854 y(t)o(yp)q(e)g(constructs)h
(a)f(t)o(yp)q(e)h(function,)h(but)e(w)o(e)g(m)o(ust)g(\014rst)g
(replace)1020 1895 y(all)g(o)q(ccurrences)f(of)f(the)g(univ)o(ersall)q
(y)j(b)q(ound)f(t)o(yp)q(e)e(v)n(ariable)j(with)1020
1937 y(the)12 b(argumen)o(t)h(of)f(the)g(t)o(yp)q(e)h(function.)18
b Ff(reflect)9 b Fm(expands)14 b(a)e(t)o(yp)q(e)1020
1978 y(v)n(ariable)g(in)e(the)g(same)f(w)o(a)o(y)h(it)f(expands)i(a)f
(base)g(t)o(yp)q(e,)g(b)o(y)g(using)h(the)1020 2020 y
Ff(vdyn)j Fm(injection.)26 b(This)16 b(is)g(alw)o(a)o(ys)g(safe)g(b)q
(ecause)g(if)g(the)g(function)1020 2061 y(is)j(truly)h(p)q(olymorphic)i
(then)d(it)g(mak)o(es)g(no)g(assumption)i(ab)q(out)1020
2103 y(the)14 b(\\shap)q(e")g(of)g(its)g(argumen)o(t,)g(and)g(will)h
(th)o(us)f(nev)o(er)f(\\prob)q(e")i(a)1020 2144 y(v)n(alue's)f
(structure)g(in)g(a)f(w)o(a)o(y)f(that)i(will)g(cause)g(an)f(error.)
1020 2242 y Fn(6)41 b(Handling)11 b(Non-Closed)h(T)m(erms)1020
2320 y Fm(Being)h(able)g(to)f(handle)i(terms)e(with)g(free)g(v)n
(ariables)i(is)f(imp)q(ortan)o(t.)1020 2362 y(It)18 b(allo)o(ws)j
(programmers)e(to)g(construct)h(programs)g(in)f(the)g(w)o(a)o(y)1020
2404 y(they)13 b(are)h(accustomed,)f(rather)h(than)f(the)g(w)o(a)o(y)g
(that)g(is)h(necessary)1020 2445 y(for)g(input)h(in)o(to)g(the)f
(partial)i(ev)n(aluator.)21 b(In)14 b(the)g(implemen)o(tation)1020
2487 y(ab)q(o)o(v)o(e,)j(ev)o(ery)f(v)n(alue)h(em)o(b)q(eds)f(its)g(o)o
(wn)g(t)o(yp)q(e.)25 b(F)m(ree)15 b(v)n(ariables)j(in)1020
2528 y(terms)g(no)g(longer)h(cause)f(problems.)32 b(The)18
b(meaning)h(of)f(a)f(term)1020 2570 y(with)e(free)g(v)n(ariables)i(is)e
(parameterized)i(b)o(y)e(the)g(v)n(alues)h(assigned)1020
2611 y(to)f(those)g(v)n(ariables)i(in)f(the)f(initial)j(en)o(vironmen)o
(t.)25 b(These)15 b(v)n(alues)961 2747 y(5)p eop
%%Page: 6 6
6 5 bop -76 -74 2183 2 v -77 1574 2 1648 v -53 -4 a Ff(fun)18
b(eval)g(env)h(e)g(=)-53 38 y(case)f(e)h(of)-14 79 y(epair\(x,y)o(\))e
(=>)h(vpair\(eval)e(env)j(x,eval)e(env)h(y\))-53 121
y(|)h(epabs\(x,y)o(,t,)o(bo)o(dy\))d(=>)64 162 y(let)j(fun)f(F)h
(\(vpair\(v1,v)o(2\))o(\))e(=)38 b(eval)19 b(\(extV)e(x)i(v1)g(\(extV)f
(y)h(v2)g(env\)\))f(body)64 204 y(in)h(vfun\(t,F\))d(end)-53
245 y(|)j(esum\(tg,e)o(\))e(=>)h(vsum\(tg,eva)o(l)e(env)j(e\))-53
287 y(|)g(esabs\(t,x)o(,e1)o(,y)o(,e2)o(\))d(=>)j(let)g(fun)f(G)h
(\(vsum\(left,)o(v\))o(\))e(=)38 b(eval)19 b(\(extV)e(x)i(v)h(env\))e
(e1)535 328 y(|)h(G)g(\(vsum\(right)o(,v)o(\)\))d(=)39
b(eval)18 b(\(extV)g(y)h(v)g(env\))f(e2)437 370 y(in)h(vfun\(t,G\))d
(end)-53 411 y(|)j(...)-53 495 y(fun)f(reify)g(\(vpair\(a,)o(b\))o(\))f
(=)39 b(epair\(re)o(ify)16 b(a,)j(reify)e(b\))-14 536
y(|)i(reify)f(\(vsum\(tg,)o(v\))o(\))f(=)i(esum\(tg,r)o(eif)o(y)e(v\))
-14 578 y(|)i(reify)f(\(vfun\(t,f)o(\)\))e(=)64 619 y(\(case)i(t)h(of)
123 661 y(tpair\(t1,t)o(2\))d(=>)241 702 y(let)i(val)h(s1)g(=)g(gensym)
e("y")58 b(val)18 b(s2)h(=)g(gensym)f("z")319 744 y(val)h(p)g(=)g
(epair\(evar)d(s1,)i(evar)g(s2\))241 785 y(in)h(epabs\(s1,)o(s2)o(,t,)o
(re)o(set)d(\(fn)i(\(\))h(=>)g(reify)f(\(f)h(\(reflect)d(t)j(p\)\)\)\))
f(end)84 827 y(|)h(tsum\(t1,t2)o(\))d(=>)241 868 y(let)i(val)h(s1)g(=)g
(gensym)e("m")58 b(val)18 b(s2)h(=)g(gensym)f("n")319
910 y(fun)h(clause)e(tag)h(t)i(s)f(\(\))g(=)g(reify)f(\(f)g
(\(vsum\(tag,r)o(ef)o(lec)o(t)f(t)i(\(evar)e(s\)\)\)\))241
951 y(in)i(esabs\(t,s)o(1,)o(res)o(et)d(\(clause)h(left)h(t1)h
(s1\),s2,re)o(set)d(\(clause)h(right)g(t2)i(s2\)\))f(end)84
993 y(|)h(_)g(=>)39 b(let)18 b(val)h(s)g(=)g(gensym)e("x")241
1034 y(in)i(eabs\(s,t,)o(re)o(set)d(\(fn)i(\(\))h(=>)g(reify)f(\(f)g
(\(reflect)f(t)i(\(evar)f(s\)\)\)\)\))f(end\))-14 1076
y(|)i(reify)f(...)-53 1159 y(and)g(reflect)f(\(t)i(as)g(tpair\(t1,)o
(t2)o(\)\))d(e)j(=)84 1200 y(vpair\(ref)o(lec)o(t)d(t1)j(\(efst)f(t)h
(e\),reflect)d(t2)j(\(esnd)e(t)j(e\)\))-14 1242 y(|)f(reflect)e(\(t)i
(as)g(tsum\(t1,t)o(2\))o(\))e(e)i(=)84 1283 y(let)f(val)h(s1)g(=)g
(gensym)e("l")58 b(val)18 b(s2)h(=)g(gensym)f("r")162
1325 y(fun)h(clause)e(k)i(tag)g(t)g(s)g(\(\))g(=)g(k\(vsum\(tag)o(,re)o
(fl)o(ect)d(t)j(\(evar)f(s\)\)\))84 1366 y(in)h(shift)e(\(fn)i(k)g(=>)g
(eapp\(esab)o(s\(t)o(,s1)o(,r)o(ese)o(t)d(\(clause)h(k)j(left)e(t1)g
(s1\),)692 1408 y(s2,reset)e(\(clause)h(k)j(right)d(t2)i(s2\)\))535
1449 y(e\)\))84 1491 y(end)-14 1532 y(|)g(reflect)e(...)p
2106 1574 V -76 1575 2183 2 v 302 1647 a Fm(Figure)e(4:)i
Fb(Additions)c(to)i(Ev)n(al,)f(Reify)h(and)f(Re\015ect)h(for)f(Sums)h
(and)f(Pro)q(ducts)-76 1771 y Fm(\(lik)o(e)e(all)g(v)n(alues\))g(em)o
(b)q(ed)g(their)f(o)o(wn)g(t)o(yp)q(es)g(so)g(rei\014cation)i(of)e
(these)-76 1812 y(v)n(alues)h(is)g(handled)h(b)o(y)e(the)g(existing)h
(system.)17 b(A)10 b(trivial)j(extension)-76 1854 y(to)c(the)h(curren)o
(t)g(system)g(allo)o(ws)g(partial)i(ev)n(aluation)g(in)e(parameter-)-76
1895 y(ized)i(mo)q(dules.)18 b(By)12 b(initializi)q(ng)j(the)c(initial)
j(en)o(vironmen)o(t)f(to)e(con-)-76 1937 y(tain)16 b(bindings)h(for)e
(eac)o(h)g(of)g(the)f(parameterized)j(names)e(to)g Ff(vdyn)-76
1978 y Fm(v)n(alues)i(of)f(those)g(names,)g(suc)o(h)h(names)f(are)g
(treated)g(as)g(abstract)-76 2020 y(constan)o(ts.)-76
2117 y Fn(7)41 b(Handling)11 b(Primitives)i(and)g(Constants)-76
2196 y Fm(Practical)f(systems)e(supply)i(primitiv)o(e)g(op)q(erations)g
(on)f(base)f(t)o(yp)q(es.)-76 2237 y(These)j(op)q(erations)h(usually)h
(app)q(ear)e(as)f(additional)k(constructs)d(in)-76 2279
y(the)19 b(syn)o(tactic)h(domain,)i(or)c(as)h(constan)o(ts)h(in)g(the)f
(initial)i(en)o(vi-)-76 2320 y(ronmen)o(t.)c(Because)c(rei\014cation)h
(ma)o(y)d(in)o(tro)q(duce)j(dynamic)f(v)n(alues)-76 2362
y(\(constructed)18 b(with)f Ff(vdyn)p Fm(\))e(ev)o(ery)i(primitiv)o(e)i
(function)f(needs)f(to)-76 2404 y(kno)o(w)c(ho)o(w)g(to)g(react)h(when)
f(it)g(is)h(applied)h(to)e(suc)o(h)h(a)f(v)n(alue.)18
b(Con-)-76 2445 y(sider)11 b(an)f(addition)j(function)e(presen)o(t)f
(in)h(the)f(initial)j(en)o(vironmen)o(t.)-76 2487 y(It)g(migh)o(t)h(b)q
(e)f(enco)q(ded)h(as)f(a)g(function)i(v)n(alue)f(as)f(follo)o(ws:)-76
2558 y Ff(vfun\(tpair)o(\(ti)o(nt)o(,ti)o(nt)o(\),)-37
2599 y(fn)19 b(vpair\(vint)d(n,vint)h(m\))i(=>)g(vint\(n+m\))1079
1771 y(|)g(vpair\(vdyn)d(e,)j(x\))g(=>)1177 1812 y(vdyn\(eapp)o(\(ev)o
(ar)d("plus",)1373 1854 y(epair\(e,)h(reify)g(x\)\)\))1079
1895 y(|)i(vpair\(x,)e(vdyn)h(e\))h(=>)1157 1937 y(vdyn\(eapp\()o(eva)o
(r)e("plus",)1353 1978 y(epair\(reify)f(x,e\)\)\))1079
2020 y(|)j(vdyn)f(e)h(=>)g(vdyn\(eapp\()o(eva)o(r)d("plus",e\)\))1079
2061 y(|)j(_)g(=>)g(error)f("ill_type)o(d"\))1020 2131
y Fm(This)g(function)h(is)f Fk(smart)p Fm(.)29 b(When)18
b(it)g(is)g(applied)i(to)d(a)g(dynamic)1020 2173 y(argumen)o(t,)f(it)g
(kno)o(ws)f(ho)o(w)h(to)f(reconstruct)h(its)f(syn)o(tactic)i(repre-)
1020 2214 y(sen)o(tation.)i(This)13 b(solution)i(is)f(presen)o(t)g(in)g
(Dan)o(vy's)f(pap)q(er.)1076 2256 y(If)e(not)i(used)f(carefully)i(this)
f(solution)h(ma)o(y)f(lead)g(to)f(new)g(prob-)1020 2297
y(lems)i(w)o(e)f(outline)i(b)q(elo)o(w.)k(Our)14 b(solution)h(deals)g
(with)f(these)g(prob-)1020 2339 y(lems)i(and)g(handles)i(primitiv)o(es)
g(in)e(a)f(uniform,)i(and)f(non)g(ad-ho)q(c)1020 2380
y(manner.)1020 2474 y Fn(7.1)41 b(Primitives)12 b(F)o(o)o(rce)h
(Additional)f(Machinery)1020 2539 y Fm(Without)20 b(primitiv)o(es,)i
(functions)e(created)f(b)o(y)f Ff(eval)p Fm(,)g(in)h(a)g(t)o(yp)q(e)
1020 2581 y(correct)12 b(program,)g(are)f(nev)o(er)h(applied)i(to)d(v)n
(alues)i(with)e(the)h(wrong)1020 2622 y(shap)q(e.)17
b(In)9 b(the)g(rei\014cation)j(pro)q(cess)e(all)g Ff(vdyn)e
Fm(v)n(alues)i(are)g(pro)q(duced)961 2747 y(6)p eop
%%Page: 7 7
7 6 bop -76 -74 1005 2 v -77 1366 2 1441 v -53 -4 a Ff(fun)18
b(eval)g(env)h(e)g(=)-53 38 y(case)f(e)h(of)38 b(...)-53
79 y(|)19 b(\(eabs\(t,x)o(,bo)o(dy)o(\)\))d(=>)25 121
y(let)i(fun)h(F)g(v)g(=)h(eval)e(\(extV)f(x)j(v)f(env\))f(body)25
162 y(in)h(vfun\(getT)d(t)j(env,F\))f(end)-53 204 y(|)h(\(epabs\(t,)o
(x,y)o(,b)o(ody)o(\)\))d(=>)25 245 y(let)i(fun)h(F)g(\(vpair\(v1,)o
(v2\))o(\))d(=)39 b(eval)143 287 y(\(extV)17 b(x)j(v1)e(\(extV)g(y)h
(v2)g(env\)\))f(body)25 328 y(in)h(vfun\(getT)d(t)j(env,F\))f(end)-53
370 y(|)h(\(esabs\(t,)o(x,e)o(1,)o(y,e)o(2\))o(\))e(=>)64
411 y(let)i(fun)f(F)h(\(vsum\(left,)o(v\))o(\))e(=)260
453 y(eval)h(\(extV)g(x)h(v)h(env\))e(e1)182 495 y(|)h(F)g
(\(vsum\(right)o(,v)o(\)\))d(=)260 536 y(eval)i(\(extV)g(y)h(v)h(env\))
e(e2)64 578 y(in)h(vfun\(getT)d(t)j(env,F\))f(end)-53
619 y(|)h(\(etabs\(s,)o(e\)\))d(=>)25 661 y(vtypfun\(fn)g(t)j(=>)g
(eval)f(\(extT)g(s)h(t)g(env\))f(e\))-53 702 y(|)h(\(etapp\(e,)o(t\)\))
d(=>)25 744 y(\(case)i(eval)g(env)g(e)h(of)84 785 y(vtypfun)e(f)i(=>)g
(f)g(\(getT)f(t)h(env\)\);)-53 868 y(fun)f(reify)g(x)h(=)-53
910 y(case)f(x)h(of)38 b(...)-53 951 y(|)19 b(\(vtypfun)d(f\))j(=)84
993 y(let)f(val)h(t)g(=)g(gensym)f("t")84 1034 y(in)h(etabs\(t,r)o(ei)o
(fy)d(\(f)j(\(tvar)f(t\)\)\))g(end)-53 1117 y(and)g(reflect)f(t)i(e)g
(=)-53 1159 y(case)f(t)h(of)38 b(...)-53 1200 y(|)19
b(\(tuniv\(s,)o(t\)\))d(e)j(=)25 1242 y(vtypfun\(fn)d(t2)j(=>)103
1283 y(reflect)e(\(typsub)g([\(s,t2\)])g(t\))i(e\))-53
1325 y(|)g(\(tvar)e(_\))i(e)h(=)f(vdyn)f(e)p 928 1366
V -76 1368 1005 2 v 2 1440 a Fm(Figure)d(6:)h Fb(P)o(olymorphic)d(Ev)n
(al,)i(Reify)f(&)h(Re\015ect)-76 1562 y Fm(b)o(y)j(the)f(rei\014cation)
j(of)d(functional)i(v)n(alues,)h(and)e(the)f(use)h(of)f(the)-76
1604 y Ff(reflect)f Fm(expansion)k(guaran)o(tees)g(that)f(enough)g
(\\structure")h(is)-76 1645 y(wrapp)q(ed)12 b(around)g(these)g
Ff(vdyn)d Fm(v)n(alues)k(to)e(mak)o(e)g(them)g(\\in)o(visibl)q(e")-76
1687 y(to)f(the)f(functions)i(whic)o(h)g(are)e(applied)j(to)d(them.)16
b(When)11 b(primitiv)o(es)-76 1729 y(propagate)k(dynamic)g(v)n(alues,)g
(this)g(is)f(no)g(longer)h(the)f(case.)19 b(No)o(w,)-76
1770 y(functions)d(created)f(b)o(y)f Ff(eval)f Fm(\(as)h(w)o(ell)h(as)f
(primitiv)o(es\))j(m)o(ust)d(also)-76 1812 y(b)q(e)h(designed)i(to)e
(handle)h(syn)o(tactic,)g(dynamic)h(v)n(alues)f(as)e(w)o(ell)i(as)-76
1853 y(ordinary)f(seman)o(tic)f(v)n(alues.)k(Consider)d(the)e
(expression:)-76 1924 y Ff(fn)19 b(x)g(=>)-37 1965 y(case)f
(\(inteq\(x,3\))o(\))e(of)j(True)f(=>)h(5)g(|)h(False)d(=>)i(6)-76
2036 y Fm(Here,)10 b Ff(inteq)e Fm(is)j(a)f(smart)g(primitiv)o(e)i(as)e
(outlined)i(ab)q(o)o(v)o(e,)f(and)g Ff(True)-76 2078
y Fm(and)18 b Ff(False)e Fm(are)h(shorthands)i(for)e(elemen)o(ts)i(of)e
(the)h(t)o(yp)q(e)f Ff(int)i(+)-76 2119 y(int)14 b Fm(used)i(to)f
(denote)h(b)q(o)q(oleans,)i(namely:)k Ff(True)14 b Fm(=)h
Ff(left)j(0)d Fm(and)-76 2161 y Ff(False)e Fm(=)i Ff(right)j(0)p
Fm(.)k(The)15 b(expression)i(ab)q(o)o(v)o(e)f(has)g(the)f(follo)o(wing)
-76 2202 y(abstract)f(syn)o(tax:)-76 2273 y Ff(eabs\(tint,)o("x")o(,)22
2315 y(eapp\(esabs)o(\(ts)o(um)o(\(ti)o(nt,)o(ti)o(nt\))o(,)238
2356 y("y",eint)j(5,"z",ei)o(nt)f(6\),)120 2398 y(eapp\(evar)g
("inteq",)218 2439 y(epair\(evar)g("x",eint)h(3\)\)\)\))-76
2510 y Fm(Because)d(one)g(of)e(the)i(argumen)o(ts)g(to)f(the)g
(primitiv)o(e)i Ff(inteq)c Fm(is)j(dy-)-76 2552 y(namic,)g(the)f
(application)q(:)-76 2622 y Ff(eapp\(evar)j("inteq",ep)o(air)o(\(ev)o
(ar)g("x",eint)g(3\)\))1020 -34 y Fm(returns)11 b(a)f(dynamic)h(v)n
(alue.)18 b(This)10 b(causes)h(the)f(sum)g(abstraction)i(to)1020
7 y(b)q(e)i(applied)i(to)e(a)f(dynamic)j(v)n(alue.)k(But)14
b(functions)h(created)f(from)1020 49 y(sum)e(abstractions)h(\(see)f
(the)g Ff(esabs)d Fm(clause)k(of)f Ff(eval)d Fm(in)k(Figure)g(4.\))1020
90 y(do)g(not)h(handle)g(dynamic)h(v)n(alues.)1076 132
y(Our)e(new)g(insigh)o(t)i(is)f(that)f(the)g(ev)n(aluation)i(function)g
(m)o(ust)e(b)q(e)1020 173 y(mo)q(di\014ed)k(so)e(that)g(whenev)o(er)h
(a)f(function)h(v)n(alue)g(is)g(applied)h(to)e(a)1020
215 y(dynamic)f(v)n(alue)f(w)o(e)e(re\015ect)i(o)o(v)o(er)f(this)h(v)n
(alue)g(to)f(giv)o(e)h(it)f(the)g(shap)q(e)1020 256 y(that)h(the)g
(function)h(exp)q(ects.)k(In)13 b Ff(eval)p Fm(,)e(functions)j(are)f
(applied)i(in)1020 298 y(only)f(one)g(place,)g(in)f(the)g(clause)i(for)
e(application)j(\()p Ff(eapp)p Fm(\).)1020 369 y Ff(...)j(eval)f(env)g
(\(eapp\(x,y\))o(\))e(=)1177 411 y(\(case)i(\(eval)f(env)i(x\))g(of)
1255 452 y(vfun\(_,f\))e(=>)h(f\(eval)g(env)g(y\)\))1020
524 y Fm(This)h(clause)g(is)f(replaced)i(with)e(an)h(application)i(to)d
(a)g(new)f Ff(App)1020 565 y Fm(function)d(whic)o(h)g(c)o(hec)o(ks)g
(for)f(and)g(handles)i(this)f(con)o(tingency:)1020 636
y Ff(...)19 b(eval)f(env)g(\(eapp\(x,y\))o(\))e(=)1197
678 y(App\(eval)g(env)j(x,)f(eval)g(env)h(y\))1020 761
y(fun)g(App)f(\(vfun\(t,g)o(\),v)o(dyn)e(e\))j(=)g(g)g(\(reflect)e(t)i
(e\))1059 803 y(|)h(App)e(\(vfun\(_,g)o(\),x)o(\))f(=)i(g)g(x)1059
844 y(|)h(App)e(\(vdyn)g(e,x\))g(=)h(vdyn\(eapp)o(\(e,)o(rei)o(fy)d
(x\)\))1020 915 y Fm(It)g(is)g(also)h(p)q(ossible)h(that)e(the)g
(function)i(part)e(of)g(an)g(application)1020 957 y(can)k(b)q(e)f(a)g
(dynamic)i(v)n(alue.)37 b(The)19 b Ff(App)f Fm(function)j(also)f
(handles)1020 998 y(this)d(b)o(y)f(reifying)i(the)e(argumen)o(t)g(and)h
(constructing)h(a)d(dynamic)1020 1040 y(application)q(.)1076
1081 y(The)f(abilit)o(y)j(to)e(opp)q(ortunistical)q(ly)j(expand)e
(dynamic)g(v)n(alues)1020 1123 y(whic)o(h)e(are)g(the)g(argumen)o(ts)g
(of)g(function)h(application)i(in)d(system-)1020 1165
y(atic)c(w)o(a)o(y)f(is)h(crucial)h(in)f(a)f(system)h(with)g(primitiv)o
(e)h(functions)g(whic)o(h)1020 1206 y(ma)o(y)k(prop)q(ogate)h(dynamic)g
(v)n(alues.)23 b(W)m(e)14 b(consider)i(this)g(a)e(second)1020
1248 y(imp)q(ortan)o(t)k(con)o(tribution)i(of)d(pap)q(er.)30
b(With)18 b(out)f(this)h(abilit)o(y)m(,)i(a)1020 1289
y(system)13 b(is)h(forced)f(to)g(either)h(do)f(without)h(primitiv)o
(es,)h(drastically)1020 1331 y(reducing)j(its)f(utilit)o(y)m(,)i(or)e
(to)f(handling)j(them)e(in)g(a)f(non-uniform)1020 1372
y(and)e(ad-ho)q(c)g(manner.)1020 1466 y Fn(7.2)41 b(A)14
b(Subtle)f(Distinction)1020 1531 y Fm(Is)d(it)g(alw)o(a)o(ys)g
(necessary)h(to)f(re\015ect)g(o)o(v)o(er)g(a)g(dynamic)h(argumen)o(t)g
(b)q(e-)1020 1573 y(fore)h(applying)j(a)d(function)h(v)n(alue?)18
b(The)12 b(answ)o(er)h(to)e(this)i(question)1020 1615
y(is)g(no,)g(but)g(the)g(reasoning)i(necessary)f(to)e(answ)o(er)h(it)h
(is)f(quite)h(sub-)1020 1656 y(tle.)j(If)10 b(the)h(function)h(w)o(as)e
(constructed)i(b)o(y)f Ff(eval)e Fm(then)i(the)g(rei\014ca-)1020
1698 y(tion)h(m)o(ust)f(b)q(e)g(p)q(erformed,)g(otherwise)h(an)f(SML)g
(matc)o(h)g(exception)1020 1739 y(ma)o(y)k(o)q(ccur.)24
b(But,)16 b(if)f(the)g(function)i(is)f(a)f(smart)g(primitiv)o(e,)j
(then)1020 1781 y(rei\014cation)d(is)e(not)g(necessary)g(as)g(suc)o(h)g
(a)g(function)h(is)f(designed)h(to)1020 1822 y(handle)19
b(dynamic)f(v)n(alues.)30 b(Th)o(us,)18 b(the)f(correct)g(action)h(dep)
q(ends)1020 1864 y(up)q(on)e(b)q(eing)g(able)g(to)f(distinguish)j
(smart)d(primitiv)o(es)j(from)c(ordi-)1020 1905 y(nary)j(functions.)27
b(In)16 b(fact,)h(b)q(eing)g(able)g(to)f(distinguis)q(h)j(b)q(et)o(w)o
(een)1020 1947 y(functions)14 b(b)o(y)f(their)g(origin,)h(will)g(b)q(e)
f(essen)o(tial)i(for)d(our)h(treatmen)o(t)1020 1988 y(of)g(recursiv)o
(e)h(functions)h(as)e(w)o(ell.)1076 2030 y(T)m(o)h(mak)o(e)g(this)h(c)o
(hoice)g Ff(vfun)e Fm(v)n(alues)i(m)o(ust)f(b)q(e)h(tagged)f(to)g(dis-)
1020 2071 y(tinguish)h(their)f(abilit)o(y)i(to)d(handle)h(dynamic)h(v)n
(alues.)1076 2113 y(In)j(Figure)h(7)f(an)g(implemen)o(tation)j(of)c
(this)i(is)f(pro)o(vided.)34 b(A)1020 2154 y(new)11 b(datat)o(yp)q(e,)h
Ff(IQ)p Fm(,)e(is)h(added)i(whic)o(h)e(is)h(used)g(to)f(tag)g
Ff(vfun)e Fm(v)n(alues.)1020 2196 y(The)16 b Ff(App)g
Fm(function)h(uses)g(this)h(information)g(to)f(c)o(ho)q(ose)g(whether)
1020 2237 y(or)12 b(not)f(a)h(dynamic)h(v)n(alue)f(needs)h(to)e(b)q(e)h
(re\015ected)g(b)q(efore)g(function)1020 2279 y(application)q(.)1076
2320 y(One)17 b(other)g(optimization)j(is)d(no)o(w)g(p)q(ossible:)27
b(when)17 b(reifying)1020 2362 y(a)i Ff(smart)d Fm(function)k(it)f(is)g
(no)g(longer)h(necessary)g(to)e(re\015ect)h(o)o(v)o(er)1020
2403 y(the)f(fresh)g(newly)h(b)q(ound)g(v)n(ariable)h(to)d(construct)i
(a)f(v)n(alue)h(with)1020 2445 y(the)d(prop)q(er)g(shap)q(e.)26
b(Smart)16 b(functions)h(are)e(designed)j(to)d(handle)1020
2486 y(dynamic)g(v)n(alues.)20 b(The)13 b(clause)i(for)e(smart)h
(functions)h(in)f Ff(reify)e Fm(is)1020 2528 y(added)i(to)f(tak)o(e)g
(adv)n(an)o(tage)i(of)d(this)i(fact.)961 2747 y(7)p eop
%%Page: 8 8
8 7 bop -76 -74 1005 2 v -77 1034 2 1109 v -53 -4 a Ff(datatype)16
b(IQ)j(=)g(dumb)f(|)h(smart;)-53 79 y(datatype)d(value)i(=)39
b(...)-53 121 y(|)19 b(vfun)f(of)h(IQ)g(*)g(typ)f(*)h(\(value)f(->)h
(value\))-53 204 y(fun)f(eval)g(env)h(e)g(=)-53 245 y(case)f(e)h(of)38
b(...)-53 287 y(|)19 b(\(eapp\(x,y)o(\)\))d(=>)j(App\(eval)e(env)h
(x,eval)f(env)i(y\))-53 370 y(and)f(App)g(\(f,x\))g(=)-53
411 y(case)g(\(f,x\))f(of)-14 453 y(\(vfun\(dum)o(b,t)o(,g)o(\),v)o(dy)
o(n)g(e\))i(=>)f(g)i(\(reflect)c(t)j(e\))-53 495 y(|)g(\(vfun\(_,_)o
(,g\))o(,x)o(\))e(=>)h(g)i(x)-53 536 y(|)f(\(vdyn)e(e,x\))i(=>)f
(vdyn\(Eapp\(e)o(,r)o(eif)o(y)e(x\)\))-53 578 y(|)j(\(a,b\))e(=>)i
(vdyn\(Eapp)d(\(reify)i(a,reify)f(b\)\))-53 661 y(and)h(reify)g(v)h(=)
-53 702 y(case)f(v)h(of)38 b(...)-53 744 y(|)19 b(reify)e
(\(vfun\(smart)o(,t)o(,f\))o(\))g(=)25 785 y(let)h(val)h(s)g(=)g
(gensym)f("x")25 827 y(in)h(eabs\(t,s,)o(res)o(et)64
868 y(\(fn)g(\(\))g(=>)f(reify)g(\(f)h(\(vdyn)f(\(evar)f(s\)\)\)\)\))25
910 y(end)-53 993 y(and)h(reflect)f(t)i(e)g(=)h(...)p
928 1034 V -76 1036 1005 2 v 68 1107 a Fm(Figure)14 b(7:)j
Fb(Smart)e(F)l(unction)e(Application)-76 1231 y Fn(8)41
b(Lazy)12 b(Re\015ection)-76 1309 y Fm(Rei\014cation)17
b(is)d(quite)h(general,)h(but)e(b)q(ecause)h(it)g(is)f(t)o(yp)q
(e{directed)-76 1351 y(the)k(rei\014cation)h(of)e(v)o(ery)h(simple)h
(functions)g(\(suc)o(h)f(as)g(the)f(iden-)-76 1392 y(tit)o(y)g
(function)h(and)f(constan)o(t)g(functions\),)i(at)d(complex)i(t)o(yp)q
(es)f(is)-76 1434 y(somewhat)d(less)f(abstract)h(and)g(compact)f(than)h
(need)g(b)q(e.)-20 1475 y(F)m(or)e(example)i(the)f(rei\014cation)h(of)e
(the)h(constan)o(t)g Ff(5)f Fm(function)h(at)-76 1517
y(t)o(yp)q(e)h Ff(\(int+int\))i(->)j(int)11 b Fm(is:)18
b Ff(\(fn)g(\(int+int\))e(left)j(x)g(=>)g(5)g(|)-76 1558
y(right)f(y)h(=>)g(5\))12 b Fm(rather)h(than)h(the)f(simpler)i
Ff(\(fn)j(x)h(=>)g(5\))p Fm(.)-20 1600 y(If)13 b(the)g(t)o(yp)q(e)h(of)
f(the)g(function)h(gets)g(ric)o(her)g(then)g(solutions)h(b)q(e-)-76
1642 y(come)g(ev)o(en)g(less)h(compact.)23 b(Consider)16
b(the)f(iden)o(tit)o(y)i(function)f(at)-76 1683 y(t)o(yp)q(e:)-76
1725 y Ff(\(\(int*int\))o(+\(i)o(nt)o(*in)o(t\))o(\))h(->)i(\(\(int*in)
o(t\)+)o(\(i)o(nt*)o(int)o(\)\))o Fm(.)-76 1766 y(Its)13
b(rei\014ed)h(solution)h(is:)-76 1837 y Ff(fn)k(...)-17
1879 y(left)f(x)h(=>)58 b(left)18 b(\()i(\(fn)e(...)h(\(a,b\))e(=>)i
(a\))g(x,)356 1920 y(\(fn)f(...)h(\(a,b\))e(=>)i(b\))g(x)g(\))-17
1962 y(right)f(y)h(=>)g(right)e(\()j(\(fn)e(...)h(\(a,b\))e(=>)i(a\))g
(y,)356 2003 y(\(fn)f(...)h(\(a,b\))e(=>)i(b\))g(y)g(\))-76
2075 y Fm(where)d(w)o(e)f(ha)o(v)o(e)h(elided)i(the)d(t)o(yp)q(e)h
(information)i(\()p Ff(...)p Fm(\))23 b(to)16 b(mak)o(e)-76
2116 y(the)d(solutions)j(easier)e(to)f(read.)-20 2158
y(These)d(functions)h(are)e(so)h(un)o(wieldy)i(b)q(ecause)e(the)g
(rei\014cation)h(of)-76 2199 y(a)f(function)i(with)e(t)o(yp)q(e)h
Ff(a)19 b(->)g(b)9 b Fm(immediately)k(constructs)e(a)f
Ff(value)-76 2241 y Fm(using)i(the)f Ff(reflect)c Fm(function)12
b(with)f(the)g(full)g(structure)h(eviden)o(t)f(in)-76
2282 y(the)g(t)o(yp)q(e)h Ff(a)p Fm(,)e(ev)o(en)i(if)f(the)g(function)i
(only)f(lo)q(oks)g(at)f(a)g(small)i(p)q(ortion)-76 2324
y(of)k(it.)28 b(A)16 b(solution)j(to)e(the)g(ab)q(o)o(v)o(e)g(problem)i
(is)e(to)g(expand)h(suc)o(h)-76 2365 y(v)n(alues)d(lazily)m(,)f
(on-demand.)-20 2407 y(W)m(e)9 b(observ)o(e)h(that)f(our)g(curren)o(t)g
(implemen)o(tation)j(already)e(do)q(es)-76 2448 y(this)15
b(to)f(some)g(degree.)20 b(It)14 b(handles)i(unexp)q(ected)f
Ff(vdyn)d Fm(v)n(alues)k(in-)-76 2490 y(tro)q(duced)g(b)o(y)e(primitiv)
o(e)j(op)q(erators)f(b)o(y)e(expanding)j(these)e(v)n(alues)-76
2532 y(on-demand)g(in)e(the)h(application)i(clause)e(of)f
Ff(eval)p Fm(.)-20 2573 y(By)18 b(making)h(the)f Ff(reflect)c
Fm(function)19 b(expand)g(its)f(argumen)o(t)-76 2615
y(lazily)m(,)d(one)e(lev)o(el)h(of)e(structure)i(at)e(a)h(time)g(w)o(e)
f(no)h(longer)h(pro)q(duce)1020 -34 y(gigan)o(tic)g(\\rei\014ed")f(v)n
(alues)g(of)e(whic)o(h)i(w)o(e)e(need)h(only)h(a)f(small)h(part.)1020
7 y(This)d(not)g(only)h(impro)o(v)o(es)f(the)g(qualit)o(y)i(of)d(the)g
(pro)q(duced)i(co)q(de,)g(but)1020 49 y(also)19 b(signi\014can)o(tl)q
(y)i(impro)o(v)o(es)f(the)e(p)q(erformance)i(of)e(the)g(partial)1020
90 y(ev)n(aluator.)1076 132 y(This)e(lazy)g(expansion)h(is)f(quite)g
(easy)f(to)g(implemen)o(t.)25 b(In)15 b(the)1020 173
y(de\014nition)k(of)d Ff(reflect)e Fm(simply)k(replace)g(eac)o(h)f
Fk(r)n(e)n(cursive)d Fm(call)k(to)1020 215 y Ff(reflect)9
b Fm(with)j(the)g Ff(vdyn)e Fm(co)q(ercion)j(op)q(erator.)k(W)m(e)12
b(illustrate)i(this)1020 256 y(b)q(elo)o(w)i(in)g(the)f
Ff(tarrow)d Fm(and)k Ff(tpair)d Fm(clauses)j(in)g(the)f(de\014nition)i
(of)1020 298 y(re\015ect:)1020 369 y Ff(|)i(reflect)e(\(tarrow\(t1)o
(,t2)o(\)\))f(e)j(=)1099 411 y(vfun\(t1,)o(fn)d(v)j(=>)g(vdyn)f
(\(eapp\(e,rei)o(fy)e(v\)\)\))1020 452 y(|)j(reflect)e(\(t)i(as)g
(tpair\(t1,)o(t2\))o(\))d(e)k(=)1099 494 y(vpair\(vd)o(yn)c(\(efst)i(t)
h(e\),vdyn)e(\(esnd)h(t)h(e\)\))1020 565 y Fm(This)f(solution)i(w)o
(orks)e(in)h(the)f(sum)g(clause)h(as)e(w)o(ell,)j(and)e(in)h(all)1020
607 y(the)13 b(additional)j(clauses)e(w)o(e)e(will)j(in)o(tro)q(duce)f
(to)f(handle)h(recursion)1020 648 y(and)e(inductiv)o(e)i(t)o(yp)q(es.)j
(The)11 b(structure)h(that)f(w)o(e)g(fail)h(to)f(in)o(tro)q(duce)1020
690 y(b)o(y)16 b(eliding)i(the)d(recursiv)o(e)i(calls)g(is)f(in)o(tro)q
(duced)i(lazily)f(when)f(the)1020 731 y(functions)f(are)e(actually)i
(applied.)1076 773 y(The)21 b(lazy)g(expansion)i(of)e(expressions)h(to)
f(increase)h(p)q(erfor-)1020 814 y(mance)11 b(and)g(to)f(impro)o(v)o(e)
i(the)e(qualit)o(y)j(of)d(generated)h(co)q(de)g(without)1020
856 y(a)16 b(p)q(ost)g(pro)q(cessing)i(phase)f(is)f(the)g(third)h(ma)r
(jor)f(con)o(tribution)i(of)1020 897 y(this)d(pap)q(er.)k(The)14
b(lazy)g(expansion)i(strategy)e(can)g(b)q(e)g(quite)h(e\013ec-)1020
939 y(tiv)o(e.)28 b(T)m(ak)o(e)17 b(these)g(measuremen)o(ts)g(with)g(a)
g(grain)h(of)e(salt,)i(since)1020 980 y(this)d(is)f(only)i(a)e(single)i
(p)q(oin)o(t)f(of)e(information,)j(but)f(the)f(extended)1020
1022 y(example)20 b(in)f(the)g(app)q(endix)h(ran)f(more)f(than)h(\014v)
o(e)g(times)g(faster)1020 1063 y(\(elapsed)g(time)e(reduced)h(from)f(7)
g(seconds)h(to)f(just)g(o)o(v)o(er)g(1\))g(and)1020 1105
y(pro)q(duced)i(co)q(de)e(more)g(than)h(7)f(times)g(as)g(compact)h
(\(the)f(prett)o(y)1020 1146 y(prin)o(ted)c(co)q(de)f(w)o(en)o(t)g
(from)f(103)h(lines)i(to)d(14\))h(when)g(lazy)h(re\015ection)1020
1188 y(w)o(as)g(used.)1020 1286 y Fn(9)41 b(Recursive)13
b(F)o(unctions)1020 1364 y Fm(Handling)i(recursiv)o(e)e(functions)h(is)
f(problematic)h(for)e(partial)i(ev)n(al-)1020 1406 y(uators.)23
b(Should)16 b(a)f(recursiv)o(e)h(function)g(b)q(e)f(unfolded,)i(or)d
(should)1020 1447 y(it)h(b)q(e)h(sp)q(ecialized)i(and)d(then)h
(residualized?)26 b(In)15 b(a)g(t)o(yp)q(e-directed)1020
1489 y(partial)k(ev)n(aluator)g(unfolding)h(and)e(sp)q(ecializati)q(on)
j(are)c(handled)1020 1530 y(simply)g(b)o(y)e(applicatio)q(n)j(follo)o
(w)o(ed)e(b)o(y)f(rei\014cation.)25 b(But,)16 b(what)f(if)1020
1572 y(a)k(recursiv)o(e)h(function)g(needs)f(to)f(b)q(e)h(residualize)q
(d)i(b)q(ecause)f(the)1020 1613 y(recursion)15 b(is)e(con)o(trolled)j
(b)o(y)d(dynamic)i(argumen)o(ts?)1076 1655 y(In)c(our)g(system)g(w)o(e)
g(ha)o(v)o(e)g(a)g(simple)i(solution)g(that)e(w)o(orks)g(some)1020
1696 y(of)j(the)h(time:)20 b(a)14 b(recursiv)o(e)i(function)g(should)g
(b)q(e)f(sp)q(ecialized)i(if)e(it)1020 1738 y(is)d(applied)i(to)d(a)h
(dynamic)h(v)n(alue,)f(otherwise)g(it)g(is)g(unfolded.)18
b(This)1020 1779 y(has)12 b(turned)g(out)f(to)g(b)q(e)h(quite)g
(e\013ectiv)o(e)g(in)g(the)g(programs)g(w)o(e)e(used)1020
1821 y(our)j(system)h(on,)f(but)g(is)h(also)g(far)f(from)f(optimal.)
1076 1862 y(W)m(e)e(accomplish)i(this)e(b)o(y)g(in)o(tro)q(ducing)i(an)
e(explicit)i(\014xed-p)q(oin)o(t)1020 1904 y(com)o(binator)18
b(in)o(to)g(the)f(syn)o(tactic)h(domain.)30 b(A)16 b(concrete)h(syn)o
(tax)1020 1945 y(using)d(this)f(com)o(binator)h(is:)j
Ff(Y)i(f)g(=>)g(fn)g(x)g(=>)g(e)p Fm(.)d(This)d(is)g(equiv-)1020
1987 y(alen)o(t)19 b(to:)27 b Ff(let)18 b(fun)h(f)g(x)g(=)g(e)h(in)e(f)
i(end)p Fm(.)30 b(But)18 b(w)o(e)g(prefer)g(the)1020
2028 y(former)e(as)h(it)f(is)h(closer)g(to)g(the)f(abstract)h(syn)o
(tax)g(in)o(tro)q(duced)h(in)1020 2070 y(Figure)d(8.)20
b(Because)15 b(the)f(language)j(is)d(giv)o(en)h(a)g(strict)f(seman)o
(tics,)1020 2111 y Ff(Y)e Fm(m)o(ust)h(only)h(b)q(e)f(used)g(to)g
(construct)h(functions.)k(The)13 b(ev)n(aluation)1020
2153 y(mec)o(hanism)i(constructs)f(a)f Ff(vfun)e Fm(v)n(alue)j(from)f
(a)g Ff(Y)f Fm(expression.)1076 2194 y(The)18 b(k)o(ey)g(idea)h(to)f
(handling)j(recursion)f(is)e(to)g(capitalize)j(on)1020
2236 y(the)e(idea)i(that)e(v)n(alues)h(should)h(carry)f(additional)i
(information.)1020 2277 y(Previously)d(w)o(e)d(argued)i(that)f(v)n
(alues)h(should)g(carry)f(t)o(yp)q(e)h(infor-)1020 2319
y(mation,)c(and)g(that)f(functions)i(v)n(alues)g(should)f(carry)g
(information)1020 2360 y(indicating)19 b(their)f(source.)27
b(W)m(e)16 b(will)i(extend)f(this)g(idea)g(b)o(y)g(mak-)1020
2402 y(ing)d(recursiv)o(e)g(functions)g(\\smart")f(b)o(y)g(endo)o(wing)
h(them)f(with)g(the)1020 2443 y(abilit)o(y)i(to)e(residualize)i
(themselv)o(es.)k(This)13 b(can)g(b)q(e)g(seen)g(from)f(the)1020
2485 y(implemen)o(tation,)j(in)e(that)g(the)f(recursiv)o(e)i(functions)
g(returned)f(b)o(y)1020 2526 y Ff(eval)e Fm(when)h(op)q(erating)i(on)f
(a)g Fk(Y)e Fm(com)o(binator)j(ha)o(v)o(e)f(an)g(additional)1020
2568 y(clause)19 b(indicating)i(ho)o(w)c(they)h(b)q(eha)o(v)o(e)h(when)
f(applied)i(to)d(a)h(dy-)1020 2609 y(namic)c(argumen)o(t.)961
2747 y(8)p eop
%%Page: 9 9
9 8 bop -76 -74 1005 2 v -77 1034 2 1109 v -53 -4 a Ff(datatype)16
b(exp)j(=)-14 38 y(...)-53 79 y(|)g(ey)g(of)f(typ)h(*)g(string)e(*)j
(exp)38 b(\(*)19 b(Y)g(s)g(=>)g(e)g(*\))-53 162 y(fun)f(eval)g(env)h(e)
g(=)-53 204 y(case)f(e)h(of)-14 245 y(...)-53 287 y(|)g(ey\(t)f(as)h
(tarrow\(ta)o(rr)o(ow\()o(d,r)o(\),)o(_\),)o(x,)o(bod)o(y\))d(=>)-53
328 y(let)-14 370 y(fun)i(F)h(\(vdyn)f(e\))h(=)84 411
y(let)f(val)h(s')g(=)g(gensym)e(x)162 453 y(val)i(body')e(=)j(reify)182
495 y(\(eval)e(\(extV)f(x)417 536 y(\(vdyn)h(\(evar)g(s'\)\))417
578 y(env\))319 619 y(body\))84 661 y(in)h(vdyn\(Eapp)o(\(e)o(y\(t)o
(yp,)o(s')o(,bo)o(dy)o('\),)o(e\)\))d(end)25 702 y(|)j(F)g(v)h(=)f
(Apply\(eva)o(l)221 744 y(\(extV)f(x)339 785 y(\(vfun\(sma)o(rt,)457
827 y(getT)g(d)h(env,)457 868 y(F\)\))339 910 y(env\))221
951 y(body,v\))-53 993 y(in)f(vfun\(smart,)o(ge)o(tT)e(d)j(env,F\))f
(end)p 928 1034 V -76 1036 1005 2 v 144 1107 a Fm(Figure)c(8:)j
Fb(Recursiv)o(e)d(F)l(unctions)-20 1231 y Fm(In)e(Figure)g(8)g(the)g
(syn)o(tactic)g(com)o(binator)i Ff(ey\(t,s,e)o(\))8 b
Fm(is)13 b(in)o(tro-)-76 1272 y(duced,)i(whic)o(h)g(represen)o(ts)f
Fd(f)t(ix)p Fm(\()p Fd(\025)f(s)f Fm(:)f Fd(t)i(:)e(e)p
Fm(\).)20 b(It)13 b(binds)j Ff(s)d Fm(inside)j Ff(e)-76
1314 y Fm(to)d(the)g(v)n(alue)i(of)e(the)g(whole)h(expression,)h(whic)o
(h)e(is)h(also)g(returned)-76 1355 y(as)f(its)h(v)n(alue.)-20
1397 y(The)i Ff(eval)f Fm(function)i(giv)o(es)g(meaning)h(to)e(this)h
(expression)h(b)o(y)-76 1438 y(t)o(ying)11 b(a)f(recursiv)o(e)i(knot)e
(using)h(the)f(recursiv)o(e)i(function)f(capabilit)o(y)-76
1480 y(of)f(the)g(meta)g(language)i(ML)d(to)h(de\014ne)h(a)f(function)h
Ff(F)f Fm(whic)o(h)g(is)h(then)-76 1522 y(em)o(b)q(edded)j(in)f(a)f
Ff(vfun)e Fm(v)n(alue.)18 b(The)12 b(\014rst)h(clause)g(of)f
Ff(F)g Fm(de\014nes)h(ho)o(w)-76 1563 y(it)k(b)q(eha)o(v)o(es)h(on)f
(dynamic)h(v)n(alues)g(and)f(is)g(describ)q(ed)h(later.)28
b(The)-76 1605 y(second)14 b(clause)f(of)g Ff(F)f Fm(giv)o(es)h
(meaning)h(to)f(the)g Ff(ey)e Fm(com)o(binator.)19 b
Ff(F)12 b Fm(is)-76 1646 y(de\014ned)i(in)f(terms)g(of)f(the)h(ev)n
(aluation)i(of)d(the)h Ff(body)e Fm(of)h(the)g(com)o(bi-)-76
1688 y(nator)h(in)f(an)g(extended)h(en)o(vironmen)o(t)h(whic)o(h)f
(binds)g(the)f(v)n(ariable,)-76 1729 y Ff(x)j Fm(of)h(the)f(com)o
(binator)j(to)d(a)h Ff(vfun)e Fm(whic)o(h)i(em)o(b)q(eds)h
Ff(F)p Fm(.)e(The)g(b)q(o)q(dy)-76 1771 y(is)j(ev)n(aluated,)j(this)d
(should)i(return)e(a)g(function,)i(whic)o(h)e(is)h(then)-76
1812 y(applied)d(to)c(the)i(argumen)o(t)f Ff(v)p Fm(.)k(Th)o(us)c(the)g
(recursiv)o(e)i(knot)e(is)h(tied.)-20 1854 y(The)i(\014rst)g(clause)i
(mak)o(es)e Ff(F)f Fm(smart.)27 b Ff(F)15 b Fm(reconstructs)i(itself)g
(if)-76 1895 y(applied)f(to)d(a)g(dynamic)i(v)n(alue.)k(This)14
b(is)g(done)g(b)o(y)g(constructing)h(a)-76 1937 y(new)g
Ff(ey)f Fm(term)h(with)g(a)g(fresh)g(b)q(ound)h(v)n(ariable)h
Ff(s')p Fm(.)22 b(The)15 b(b)q(o)q(dy)g(of)-76 1978 y(this)10
b(term)g(is)g(the)f(old)i(b)q(o)q(dy)f(ev)n(aluated)h(under)g(a)e(new)g
(en)o(vironmen)o(t)-76 2020 y(binding)19 b Ff(x)c Fm(to)h
Ff(s')p Fm(.)24 b(W)m(e)16 b(can)h(illustrate)h(this)f(with)f(the)g
(follo)o(wing)-76 2061 y(example.)23 b(It)14 b(applies)i(a)e(recursiv)o
(e)i(implemen)o(tation)i(of)c(addition)-76 2103 y(using)h(incremen)o(t)
f(and)g(decremen)o(t)f(to)g(a)g(constan)o(t)h(5.)-76
2174 y Ff(\(Y)19 b(F)g(=>)-17 2216 y(fn)g(x)g(=>)42 2257
y(fn)g(y)g(=>)-17 2299 y(case)f(inteq\(x,0\))e(of)22
2340 y(True)i(=>)h(y)-17 2382 y(|)g(False)f(=>)h(plus\(1,F)d
(\(minus\(x,1)o(\)\))g(y\)\))-76 2423 y(5)-76 2495 y
Fm(The)9 b(ev)n(aluation)j(of)d(the)h Ff(Y)e Fm(com)o(binator)j
(returns)f(a)g(smart)f(function.)-76 2536 y(Because)i(this)h(is)f
(applied)h(to)f(a)f(real)h(v)n(alue)g(\()p Ff(vint)18
b(5)p Fm(\),)10 b(the)h(function)-76 2578 y(unfolds)17
b(itself)g(un)o(til)g Ff(x)d Fm(is)i(equal)h(to)e(0.)25
b(Since)16 b Ff(y)f Fm(is)h(dynamic)h(the)-76 2619 y(smart)12
b Ff(plus)f Fm(function)i(reconstructs)g(itself)h(returning)f(a)g
(dynamic)1020 -34 y(v)n(alue)j(for)f(eac)o(h)h(recursiv)o(e)g(call,)h
(\014nally)g(returning)g(the)e(dynamic)1020 7 y(v)n(alue:)h
Ff(\(fn\(int\))h(x)i(=>)g(plus\(1,pl)o(us)o(\(1,)o(pl)o(us\()o(1,p)o
(lu)o(s\(1)o(,p)o(lus)o(\(1,)o(x\))o(\)\)\))o(\)\))o
Fm(.)1076 49 y(Note)9 b(that)g(this)g(implemen)o(tation)j(of)d
(recursiv)o(e)h(functions)g(\(and)1020 90 y(the)g(partial)h(ev)n
(aluation)h(of)e(functions)h(in)f(general\))h(can)f(cause)g(ev)n(al-)
1020 132 y(uation)16 b(under)f(a)f(lam)o(b)q(da.)22 b(In)14
b(general)i(this)f(is)g(unsafe)g(as)f(it)h(ma)o(y)1020
173 y(lead)f(to)f(non-termination.)20 b(See)13 b(section)h(12)g(for)e
(details.)1076 215 y(Our)d(handling)j(of)d(recursion)h(is)g(quite)g(w)o
(eak.)16 b(W)m(e)9 b(lac)o(k)h(the)f(abil-)1020 256 y(it)o(y)k(to)g
(handle)h(m)o(utually)h(recursiv)o(e)f(functions)g(or)f(to)g(sp)q
(ecialize)i(a)1020 298 y(recursiv)o(e)h(function)g(with)f(more)f(than)h
(one)g(parameter)g(p)q(olyv)n(ari-)1020 339 y(an)o(tly)m(.)28
b(Neither)17 b(do)g(w)o(e)f(ha)o(v)o(e)h(an)o(y)g(memoization)i(abilit)
o(y)m(.)29 b(Nev-)1020 381 y(ertheless,)19 b(as)f(illustrated)i(in)e
(the)f(app)q(endix,)k(for)c(a)g(ligh)o(t)o(w)o(eigh)o(t)1020
422 y(system)f(w)o(e)f(are)g(able)h(to)g(accomplish)h(some)f(in)o
(teresting)h(results.)1020 464 y(It)c(is)h(an)g(op)q(en)g(question)h
(if)e(an)o(y)h(of)f(these)h(features)g(can)g(b)q(e)f(incor-)1020
505 y(p)q(orated)h(in)o(to)g(the)f(t)o(yp)q(e-directed)i(approac)o(h.)
1020 602 y Fn(10)40 b(Inductive)14 b(T)m(yp)q(es)1020
681 y Fm(Inductiv)o(e)i(t)o(yp)q(es)g(are)f(problematic)i(for)e
(similar)i(though)f(sligh)o(tly)1020 722 y(di\013eren)o(t)i(reasons)g
(than)f(recursiv)o(e)h(functions)g(are)e(problematic.)1020
764 y(They)c(p)q(oten)o(tially)j(cause)e(in\014nite)h(unfoldings.)19
b(Suc)o(h)13 b(in\014nite)h(un-)1020 805 y(foldings)g(will)g(o)q(ccur)f
(in)g(the)g Ff(reflect)c Fm(function)14 b(when)f(an)g(expres-)1020
847 y(sion)i(with)f(an)h(inductiv)o(e)h(t)o(yp)q(e)e(is)h(co)q(erced)g
(in)o(to)f(a)g(v)n(alue)h(with)g(an)1020 888 y(inductiv)o(e)k(\\shap)q
(e".)28 b(The)17 b(v)n(alue)g(constructed)h(will)g(b)q(e)e(in\014nite.)
1020 930 y(Our)e(solution)j(to)d(this)h(is)g(to)g(re\015ect)f(an)h
(expression)h(in)o(to)g(a)e(v)n(alue)1020 971 y(with)f(only)g(one)g
(lev)o(el)h(of)e(unfolding)i(o)o(v)o(er)f(an)f(inductiv)o(e)j(t)o(yp)q
(e,)d(and)1020 1013 y(to)i(rely)h(up)q(on)g(the)g(smart)f
(reconstruction)i(abilitie)q(s)h(of)d(functions)1020
1054 y(in)g(general)g(\(and)f(recursiv)o(e)h(functions)g(in)g
(particular)h(as)e(outlined)1020 1096 y(ab)q(o)o(v)o(e\))f(to)e(driv)o
(e)i(partial)h(ev)n(aluation)g(of)d(recursiv)o(e)j(functions)f(o)o(v)o
(er)1020 1137 y(inductiv)o(e)j(t)o(yp)q(es.)1076 1179
y(Figure)h(9)f(in)o(tro)q(duces)h(the)f(additional)k(mac)o(hinery)d
(necessary)1020 1221 y(to)i(handle)i(inductiv)o(e)h(t)o(yp)q(es.)32
b(A)18 b(new)g(t)o(yp)q(e)h(constructor,)h Ff(tmu)p Fm(,)1020
1262 y(used)14 b(to)f(construct)g(inductiv)o(e)j(t)o(yp)q(es)d(is)h
(added)g(to)f Ff(typ)p Fm(.)j(Tw)o(o)c(ad-)1020 1304
y(ditional)19 b(op)q(erators)d(in)h(the)f(syn)o(tactic)h(domain)g(are)f
(added:)23 b Ff(ein)1020 1345 y Fm(to)11 b(in)o(tro)q(duce)i(v)n(alues)
f(of)e(an)i(inductiv)o(e)h(t)o(yp)q(e)e(and)h Ff(einabs)c
Fm(to)j(elim-)1020 1387 y(inate)17 b(them.)25 b(The)15
b(syn)o(tax)i Ff(\(In)h(x\))d Fm(tak)o(es)h(a)g(v)n(alue)h
Ff(x)e Fm(with)h(t)o(yp)q(e)1020 1428 y Ff(T\(Mu)i(s)h(=>)g(T)g(s\))c
Fm(and)i(returns)f(a)g(v)n(alue)h(with)g(t)o(yp)q(e)f
Ff(Mu)j(s)g(=>)g(T)1020 1470 y(s)p Fm(.)d(The)10 b(syn)o(tax)i
Ff(\(fn)18 b(In)h(x)g(=>)g(e\))10 b Fm(creates)h(a)f(function)i(whose)f
(do-)1020 1511 y(main)g(is)f Ff(\(Mu)19 b(s)g(=>)g(T)g(s\))p
Fm(,)9 b(and)i(whic)o(h)f(binds)i Ff(x)d Fm(with)h(t)o(yp)q(e)h
Ff(T\(Mu)18 b(s)1020 1553 y(=>)h(T)g(s\))11 b Fm(inside)i
Ff(e)p Fm(.)j(The)c(ev)n(aluation)i(of)e(these)g(syn)o(tax)g
(constructs)1020 1594 y(is)i(straigh)o(t)g(forw)o(ard.)j(Ev)n(aluation)
e(either)f(adds)g(or)f(subtracts)h(the)1020 1636 y(new)f(seman)o(tic)h
(constructor)g Ff(vin)p Fm(.)1076 1677 y(F)m(or)i(example)h(some)f
(functions)h(o)o(v)o(er)f(lists)h(of)f(in)o(tegers)h(could)1020
1719 y(b)q(e)c(de\014ned)i(as)e(follo)o(ws:)1020 1786
y Ff(type)18 b(IntList)f(=)i(Mu)g(x)g(=>)g(unit)f(+)h(\(int)g(*)g(x\);)
1020 1828 y(val)g(nil)f(=)h(In)g(\(left)f(\(\)\);)1020
1869 y(val)h(cons)f(=)h(fn)g(\(x,y\))e(=>)i(In\(right)e(\(x,y\)\);)1020
1911 y(val)i(hd)f(=)i(fn)e(\(In)h(x\))g(=>)1059 1952
y(case)f(x)i(of)e(left)g(x)i(=>)f(error)e(|)i(right\(a,b\))d(=>)j(a;)
1076 2020 y Fm(Rei\014cation)14 b(of)d(a)g(function)h(with)g(an)f
(inductiv)o(e)j(domain)e(in)o(tro-)1020 2061 y(duces)17
b(an)g(inductiv)o(e)h(abstraction)h(\()p Ff(einabs)p
Fm(\).)24 b(A)16 b(fresh)g(v)n(ariable)1020 2103 y Ff(s1)f
Fm(with)h(t)o(yp)q(e)g Ff(T\(Mu)i(s)h(=>)g(T)g(s\))14
b Fm(is)j(re\015ected)f(o)o(v)o(er)g(to)f(obtain)i(a)1020
2144 y(v)n(alue.)23 b(This)15 b(v)n(alue)h(is)g(then)f(injected)g(in)o
(to)h(the)f(t)o(yp)q(e)g Ff(Mu)k(s)g(=>)g(T)1020 2186
y(s)11 b Fm(b)o(y)h(the)g Ff(vin)e Fm(constructor,)i
Ff(f)f Fm(is)i(then)f(applied)i(to)d(this)i(v)n(alue)f(and)1020
2227 y(the)h(result)h(rei\014ed)g(to)f(obtain)i(the)e(b)q(o)q(dy)h(of)f
(the)g(abstraction.)1076 2269 y(Re\015ection)e(of)d(an)h(expression,)i
Ff(e)p Fm(,)e(o)o(v)o(er)g(inductiv)o(e)i(t)o(yp)q(e)e
Ff(tmu\(s,t1\))1020 2310 y Fm(creates)15 b(a)f(v)n(alue)h(with)g(only)g
(one)g(lev)o(el)h(of)e(the)g(un)o(winding.)23 b(First)1020
2352 y Ff(e)15 b Fm(is)g(pro)r(jected)h(out)f(of)g(the)g(inductiv)o(e)j
(domain)f(using)f Ff(eout)d Fm(and)1020 2393 y(then)h(the)f(b)q(o)q(dy)
h Ff(t1)e Fm(of)g(the)i Ff(tmu)d Fm(is)j(used.)1020 2486
y Fn(10.1)40 b(Nested)14 b(P)o(atterns)f(and)g(Lazy)g(Expansion)1020
2548 y Fm(What)h(happ)q(ens)g(if)f(w)o(e)g(ha)o(v)o(e)h(a)e(function)j
(o)o(v)o(er)e(an)g(inductiv)o(e)j(t)o(yp)q(e)1020 2585
y(that)e(is)g(non-recursiv)o(e,)i(but)e(b)q(ecause)h(of)f(the)g(use)g
(of)g(nested)g(pat-)1020 2622 y(terns,)h(demands)h(more)f(than)h(one)f
(lev)o(el)h(of)f(unrolling)j(in)d(the)g(ex-)961 2747
y(9)p eop
%%Page: 10 10
10 9 bop -76 -74 1005 2 v -77 1449 2 1524 v -53 -4 a
Ff(datatype)16 b(typ)j(=)38 b(...)-53 38 y(|)19 b(tmu)f(of)h(string)e
(*)j(typ;)-53 121 y(datatype)c(value)i(=)39 b(...)-53
162 y(|)19 b(vin)f(of)h(value;)-53 245 y(datatype)d(exp)j(=)58
b(...)-53 287 y(|)19 b(ein)f(of)h(exp)-53 328 y(|)g(einabs)e(of)i(typ)f
(*)i(string)d(*)i(exp;)-53 411 y(fun)f(eval)g(env)h(e)g(=)-53
453 y(case)f(e)h(of)38 b(...)-53 495 y(|)19 b(\(ein)f(x\))h(=>)g
(vin\(eval)d(env)j(x\))-53 536 y(|)g(\(einabs\(t)o(,x,)o(bo)o(dy\))o
(\))d(=>)5 578 y(let)j(fun)f(F)i(\(vin)e(v\))g(=)162
619 y(eval)g(\(extV)g(x)h(v)h(env\))e(body)64 661 y(in)h(vfun\(dumb,)o
(ge)o(tT)d(t)k(env,F\))d(end)-53 744 y(and)h(reify)g(\(vfun\(_,t)o(,f)o
(\)\))e(=)-53 785 y(case)i(t)h(of)g(...)-53 827 y(|)g(tmu\(s,t1\))d(=>)
25 868 y(let)i(val)h(s1)g(=)g(gensym)e("y")25 910 y(in)i(einabs\(t,)o
(s1,)143 951 y(reset)e(\(fn)i(\(\))g(=>)182 993 y(reify)f(\(f)g(\(vin)
260 1034 y(\(reflect)f(t1)i(\(evar)e(s1\)\)\)\)\)\))25
1076 y(end)-53 1159 y(and)h(reflect)f(\(t)i(as)g(tmu\(s,t1\))o(\))d(e)k
(=)241 1200 y(vin\(refle)o(ct)c(t1)j(\(eout)f(t)h(e\)\))-53
1283 y(and)f(eout)g(t)h(\(ein)f(x\))h(=)g(x)-14 1325
y(|)g(eout)f(t)h(e)h(=)45 1366 y(let)e(val)h(z)g(=)g(gensym)e("z")45
1408 y(in)h(Eapp\(einabs)o(\(t)o(,z,)o(eva)o(r)e(z\),e\))i(end)p
928 1449 V -76 1451 1005 2 v 36 1523 a Fm(Figure)c(9:)j
Fb(Extensions)e(for)g(Inductiv)o(e)d(T)o(yp)q(es)-76
1646 y Fm(pansion)i(phase?)j(Consider)c(the)e Ff(cadr)f
Fm(function)j(b)q(elo)o(w)f(with)g(t)o(yp)q(e)-76 1683
y(list)j(of)f(in)o(teger)h(to)f(in)o(teger,)h(whic)o(h)g(returns)f(the)
g(head)h(of)f(the)g(tail)-76 1721 y(of)e(a)h(list)g(if)g(it)f(has)h(at)
f(least)h(t)o(w)o(o)f(elemen)o(ts)i(and)f(returns)g(zero)f(oth-)-76
1758 y(erwise.)-76 1825 y Fa(fun)17 b(cadr)f(\(In)h(xs\))f(=)-41
1863 y(case)h(xs)g(of)-5 1900 y(Nil)f(\(\))h(=>)g(0)-41
1937 y(|)h(Cons\(y,In)c(ys\))j(=>)65 1975 y(\(case)f(ys)h(of)g(Nil)g
(\(\))g(=>)f(0)i(|)f(Cons\(z,zs\))d(=>)j(z\);)-20 2046
y Fm(Rei\014cation)h(of)d Ff(cadr)e Fm(causes)j(the)g(re\015ection)g
(of)f(the)h(abstrac-)-76 2088 y(tion)f(v)n(ariable)h(at)e(an)g
(inductiv)o(e)j(t)o(yp)q(e.)j(Unrolling)d(this)e(t)o(yp)q(e)f(just)-76
2129 y(once)e(lea)o(v)o(es)g(the)g(tail)g(of)f(the)h(list)g(as)g(a)f
(dynamic)i(v)n(ariable.)18 b(Apply-)-76 2171 y(ing)11
b Ff(cadr)e Fm(to)h(this)h(single)h(unrolling)i(will)d(fail)h(when)e
(the)h(inner)g Ff(case)-76 2212 y Fm(is)f(applied)h(to)d(this)i
(dynamic)g(v)n(ariable.)18 b(F)m(ortunately)m(,)11 b(the)e(strategy)-76
2254 y(of)h(Section)i(7.2)e(sa)o(v)o(es)h(the)f(da)o(y)m(.)17
b(The)10 b Ff(case)e Fm(is)j(a)g Fk(dumb)e Fm(function;)j(so)-76
2295 y(when)f(it)g(is)h(applied)h(to)e(a)f(dynamic)j(v)n(ariable,)g
(application)h(re\015ects)-76 2337 y(this)e(v)n(ariable)h(forcing)f
(another)g(lev)o(el)g(of)f(unrolling.)19 b(If)11 b(a)g(recursiv)o(e)-76
2378 y(function)k(forced)f(this)g(kind)h(of)e(lazy)h(unrolling,)i
(non-termination)-76 2420 y(w)o(ould)d(result,)g(but)g(b)q(ecause)g
(recursiv)o(e)g(functions)h(are)e(smart)g(this)-76 2461
y(is)i(not)f(a)g(problem.)1020 -34 y Fn(11)40 b(An)14
b(Example)1020 44 y Fm(W)m(e)i(ha)o(v)o(e)g(built)h(a)f(t)o(yp)q
(e-directed)h(partial)g(ev)n(aluator)g(implemen-)1020
86 y(tation)c(based)f(up)q(on)h(the)f(ideas)h(outlined)g(ab)q(o)o(v)o
(e.)18 b(Our)11 b(implemen-)1020 127 y(tation)j(is)f(for)f(a)h(ric)o
(her)h(language)g(includin)q(g)h Fk(n)p Fm(-ary)e(pro)q(ducts)g(and)
1020 169 y Fk(n)p Fm(-ary)h(sums.)22 b(Our)14 b(system)h(uses)g(a)f
(simple)i(read-ev)n(al-prin)o(t)h(lo)q(op)1020 210 y(in)o(terface,)d
(and)g(incorp)q(orates)i(a)e(Hindley-Milne)q(r)i(t)o(yp)q(e)e
(inference)1020 252 y(system)g(whic)o(h)h(automaticly)h(adds)f(the)f
(necessary)h(t)o(yp)q(e)f(annota-)1020 293 y(tions.)j(The)11
b(partial)i(ev)n(aluator)f(can)f(handle)i(a)e(ric)o(her)h(t)o(yp)q(e)f
(system)1020 335 y(than)j(the)f(t)o(yp)q(e)g(inference)h(engine)h
(actually)g(constructs.)1076 376 y(As)d(an)g(illustratio)q(n)j(of)d
(the)g(p)q(o)o(w)o(er)g(of)g(suc)o(h)g(a)h(system)f(w)o(e)g(ha)o(v)o(e)
1020 418 y(included)17 b(the)e(complete)h(co)q(de)f(of)f(an)h(example)h
(in)f(the)g(app)q(endix)1020 459 y(\(Figure)c(10\).)16
b(This)11 b(example)g(implemen)o(ts)h(a)e(rewrite)h(system)f(o)o(v)o
(er)1020 501 y(an)19 b(expression)h(language.)34 b(A)18
b(rule)h(has)g(the)f(form)g Fd(l)q(hs)h Fl(\))h Fd(r)q(hs)1020
542 y Fm(where)15 b(all)h(the)f(v)n(ariables)i(in)f Fd(r)q(hs)f
Fm(m)o(ust)g(app)q(ear)h(in)g Fd(l)q(hs)p Fm(.)22 b(F)m(or)15
b(ex-)1020 584 y(ample)d(the)f(rule)h(\()p Fd(x)t Fm(+)t
Fd(y)q Fm(\))t(+)t Fd(z)24 b Fl(\))e Fd(x)t Fm(+)t(\()p
Fd(y)6 b Fm(+)t Fd(z)r Fm(\))k(sp)q(eci\014es)i(a)f(program)1020
625 y(whic)o(h)h(when)f(applied)i(to)e(a)g(sub)r(ject)g(term)g(of)g
(the)g(form)f(\()p Fd(x)t Fm(+)t Fd(y)q Fm(\))t(+)t Fd(z)1020
667 y Fm(returns)15 b Fd(x)9 b Fm(+)g(\()p Fd(y)h Fm(+)g
Fd(z)r Fm(\).)19 b(If)14 b(the)g(sub)r(ject)h(term)e(do)q(es)i(not)g
(ha)o(v)o(e)f(this)1020 708 y(shap)q(e)g(the)f(sub)r(ject)h(term)f(is)g
(returned)h(unc)o(hanged.)1076 750 y(In)e(the)g(app)q(endix)j(suc)o(h)d
(a)g(system)h(is)f(implemen)o(ted)i(in)f(a)f(com-)1020
791 y(pletely)j(naiv)o(e)g(manner.)k(Rewriting)c(is)f(implemen)o(ted)i
(b)o(y)e(a)f(func-)1020 833 y(tion)h Ff(rewrite)d Fm(whic)o(h)j(tak)o
(es)f(a)h(pattern,)f(a)h(sub)r(ject)f(term)g(and)h(re-)1020
874 y(turns)k(the)f(\(p)q(ossibly\))i(transformed)f(sub)r(ject)g(term.)
28 b(It)17 b(decom-)1020 916 y(p)q(oses)12 b(the)f(pattern)h(in)o(to)g
(left)f(and)h(righ)o(t-hand)h(sides)g(and)e(uses)h(the)1020
957 y(function)19 b Ff(match)d Fm(to)h(build)j(a)d(substitution)k(from)
c(the)h(left-hand)1020 999 y(side)e(and)f(the)g(sub)r(ject)g(term;)g
(if)g(successful,)i(it)e(applies)i(the)e(sub-)1020 1040
y(stitution)g(to)e(the)g(righ)o(t-hand)i(side)f(of)f(the)g(rule.)1076
1082 y(The)h(substitution)i(is)f(computed)f(b)o(y)g(the)g(function)i
Ff(match)p Fm(.)h(It)1020 1123 y(p)q(erforms)c(a)f(sim)o(ultaneous)j
(recursiv)o(e)f(w)o(alk)f(o)o(v)o(er)f(a)g(pattern)h(term)1020
1165 y(and)20 b(a)e(sub)r(ject)i(term,)f(returning)i(a)e(substitution)i
(whic)o(h)f(pairs)1020 1206 y(the)e(v)n(ariables)j(in)e(the)f(pattern)h
(to)f(the)h(matc)o(hing)g(subterms)g(of)1020 1248 y(the)c(sub)r(ject)h
(term.)22 b(If)15 b(at)g(an)o(y)g(p)q(oin)o(t)i(the)e(sub)r(ject)g
(term)g(fails)h(to)1020 1290 y(ha)o(v)o(e)g(the)g(\\shap)q(e")h(of)f
(the)g(pattern)g(the)g(failure)h(substitution)i(is)1020
1331 y(returned.)1076 1368 y(When)f Ff(rewrite)13 b Fm(is)18
b(partially)h(applied)g(to)e(a)f(rule)i(sp)q(ecifying)1020
1406 y(\()p Fd(x)8 b Fm(+)h Fd(y)q Fm(\))g(+)f Fd(z)23
b Fl(\))g Fd(x)8 b Fm(+)g(\()p Fd(y)i Fm(+)f Fd(z)r Fm(\))j(a)h
(function)i(from)e(term)f(to)i(term)f(is)1020 1443 y(returned.)26
b(When)17 b(rei\014ed)g(this)g(function)g(returns)f(the)g(follo)o(wing)
1020 1480 y(residual)f(program:)1020 1548 y Fa(fn)i(d1)g(=>)1020
1585 y(case)f(\(fn)h(In)g(d69)f(=>)h(d69\))f(d1)h(of)1055
1622 y(Var)g(d4)g(=>)g(d1)1020 1660 y(|)g(Op)g(d5)g(=>)1108
1697 y(if)g(\045streq)f(\(#2)g(d5,"+"\))1161 1735 y(then)g(\(case)g
(\(fn)h(In)g(d49)f(=>)h(d49\))f(\(\(#1)h(d5\)\))f(of)1302
1772 y(Var)h(d12)f(=>)h(d1)1285 1809 y(|)g(Op)g(d13)f(=>)1373
1847 y(if)h(\045streq)e(\(#2)i(d13,"+"\))1426 1884 y(then)f(In\(Op)g
(\(#1)g(d13,)1638 1921 y("+",)1638 1959 y(In\(Op)f(\(#3)i(d13,)1761
1996 y("+",)1761 2033 y(#3)g(d5\)\)\)\))1426 2071 y(else)f(d1)1285
2108 y(|)h(Int)g(d48)f(=>)h(d1\))1161 2145 y(else)f(d1)1020
2183 y(|)h(Int)g(d68)f(=>)h(d1)1076 2254 y Fm(The)12
b(rei\014cation)j(has)e(completely)h(reduced)g(all)f(static)h(compu-)
1020 2296 y(tations.)19 b(It)13 b(has)h(p)q(erformed)g(the)f(matc)o
(hing)i(against)g(the)e(pattern)1020 2337 y(\(left-hand)i(side\))f
(part)g(of)f(the)h(rule)g(and)g(the)g(substitution)i(of)d(the)1020
2379 y(righ)o(t-hand)g(side.)k(The)11 b(system)h(has)f(done)h(this)g
(without)g(an)o(y)g(time)1020 2420 y(impro)o(v)o(emen)o(ts,)g(th)o(us)e
(making)h(it)f(easier)h(to)f(b)q(oth)g(understand)h(and)1020
2462 y(main)o(tain.)1076 2503 y(This)i(example)h(illustrates)i(the)d
(usefulness)h(of)e(the)h(extensions)1020 2545 y(in)o(tro)q(duced)21
b(in)e(this)h(pap)q(er.)35 b(First,)21 b(the)d(source)i(program)f(w)o
(as)1020 2586 y(written)i(in)h(a)e(normal)i(st)o(yle,)h(referencing)f
(previously)i(de\014ned)951 2747 y(10)p eop
%%Page: 11 11
11 10 bop -76 -34 a Fm(functions,)13 b(and)f(hence)g(con)o(taining)i
(free)e(v)n(ariables.)18 b(It)11 b(is)h(not)g(nec-)-76
7 y(essary)i(to)f(abstract)h(o)o(v)o(er)f(suc)o(h)h(free)f(v)n
(ariables)i(b)q(efore)f(rei\014cation)-76 49 y(can)e(o)q(ccur.)17
b(Second,)c(sev)o(eral)g(of)f(the)g(functions)h(are)f(p)q(olymorphic)
-76 90 y(\(e.g.)26 b Ff(find)p Fm(,)14 b Ff(out)p Fm(,)h
Ff(first)f Fm(and)j Ff(second)p Fm(\),)d(and)i(the)g(implemen)o(ta-)-76
132 y(tion)i(residualizes)i(them)d(without)h(an)o(y)g(explicit)h
(monomorphiz-)-76 173 y(ing)f(annotations.)30 b(Third,)18
b(the)f(residual)i(program)f(con)o(tains)g(an)-76 215
y(inductiv)o(e)f(structure,)e(a)f(term.)20 b(The)14 b(\014nal)i
(extension,)g(the)e(resid-)-76 256 y(ualization)20 b(of)d(a)g(recursiv)
o(e)h(function)g(is)g(not)f(illustrated)j(in)d(this)-76
298 y(example.)-76 396 y Fn(12)40 b(Limitations)-76 474
y Fm(It)17 b(is)h(p)q(ossible)i(to)d(force)g(our)g(t)o(yp)q
(e-directed,)j(rei\014cation)g(based,)-76 516 y(partial)12
b(ev)n(aluator)g(in)o(to)f(an)g(in\014nite)h(lo)q(op.)18
b(Consider)11 b(the)g(function)-76 557 y Ff(upto)p Fm(:)-76
628 y Ff(val)19 b(upto)f(=)3 670 y(fix)g(upto)g(=>)h(fn)g(low)f(=>)h
(fn)g(high)f(=>)81 712 y(if)h(low)f(>)i(high)140 753
y(then)e(nil)140 795 y(else)g(cons\(low,u)o(pt)o(o)f(\(low+1\))f
(high\);)-76 866 y Fm(It)f(has)h(t)o(yp)q(e:)21 b Ff(int)e(->)f(int)h
(->)g(List)f(int)c Fm(and)h(is)h(a)f(total)h(func-)-76
907 y(tion,)21 b(it)e(terminates)h(on)f(all)h(in)o(teger)g(input.)35
b(If)18 b(it)h(is)g(partially)-76 949 y(applied)j(to)d(an)g(in)o
(teger,)i(sa)o(y)f Ff(1)p Fm(,)f(a)g(function)i(of)d(t)o(yp)q(e:)30
b Ff(int)18 b(->)-76 990 y(List)g(int)11 b Fm(is)j(returned.)j
(Rei\014cation)f(of)c(this)h(function)h(causes)g(an)-76
1032 y(in\014nite)h(lo)q(op.)-20 1073 y(The)c(function)h(returned)g(b)o
(y)f(a)g Ff(Y)f Fm(com)o(binator)j(is)e(\\smart",)h(but)-76
1115 y(reconstructs)g(itself)h(only)f(when)f(applied)j(to)d(dynamic)i
(v)n(alue.)k(The)-76 1157 y(v)n(alue)11 b(this)f(function)h(is)e
(applied)j(to)d(\()p Ff(1)p Fm(\))g(is)h(completely)h(kno)o(wn,)g(and)
-76 1198 y(in)k(eac)o(h)g(recursiv)o(e)g(call)h(it)e(remains)h
(completely)i(kno)o(wn.)j(T)m(ermi-)-76 1240 y(nation)12
b(of)e(the)h(function)h(dep)q(ends)f(up)q(on)h(the)e(dynamic)j
(parameter)-76 1281 y Ff(high)p Fm(,)h(whic)o(h)i(is)f(not)h(kno)o(wn)f
(and)h(the)f(rei\014cation)j(in\014nitely)g(un-)-76 1323
y(folds)c(the)f(\014xed-p)q(oin)o(t)i(com)o(binator.)-20
1364 y(This)d(happ)q(ens)h(whenev)o(er)f(a)f(function)h(de\014ned)h
(with)e(the)g(\014xed)-76 1406 y(p)q(oin)o(t)18 b(com)o(binator)g(do)q
(es)e(not)h(ha)o(v)o(e)g(its)g(termination)h(con)o(trolled)-76
1447 y(b)o(y)d(it's)f(\014rst)h(argumen)o(t.)21 b(This)15
b(is)g(a)f(common)h(problem)h(in)f(man)o(y)-76 1489 y(partial)f(ev)n
(aluators,)g(it)e(is)h(a)f(serious)i(imp)q(edimen)o(t)g(and)f(needs)g
(fur-)-76 1530 y(ther)h(study)m(.)20 b(F)m(ortunately)15
b(users)f(can)g(con)o(trol)h(this)f(problem)i(and)-76
1572 y(write)d(functions)i(that)e(a)o(v)o(oid)h(it)g(if)f(necessary)m
(.)-20 1613 y(T)o(yp)q(e-directed)19 b(partial)g(ev)n(aluators)g(ma)o
(y)f(also)g(cause)g(dupli-)-76 1655 y(cation)e(of)d(co)q(de.)21
b(This)15 b(comes)g(directly)h(from)e(splitting)j(con)o(texts)-76
1696 y(o)o(v)o(er)d(sum)f(abstractions.)19 b(F)m(ortunately)m(,)c(as)e
(discussed)i(b)o(y)f(Dan)o(vy)m(,)-76 1738 y(this)h(problem)g(can)f(b)q
(e)g(mitigated)i(b)o(y)e(residualizi)q(ng)j(lo)q(cal)e
Fk(let)e Fm(ex-)-76 1779 y(pressions.)-20 1821 y(A)j(third)h(problem)h
(arises)f(when)f(reifying)i(partial)g(functions.)-76
1862 y(Consider)10 b(the)f(function)h Ff(fun)19 b(tail)f(\(In)g(x\))h
(=)g(case)f(x)i(of)e(Cons\(a,b\))-76 1904 y(=>)h(b;)p
Fm(.)31 b(Reifying)20 b Ff(tail)c Fm(cause)j(a)f(rei\014cation)i(time)f
(error)f(since)-76 1945 y Ff(tail)12 b Fm(is)j(applied)h(to)e(expanded)
h(v)o(ersions)h(of)d(b)q(oth)i Ff(Nil)d Fm(and)j Ff(Cons)-76
1987 y Fm(ob)r(jects.)i(T)m(o)11 b(\014x)h(this)h(some)f(sort)g(of)f
(rei\014cation-time)k(matc)o(h)d(han-)-76 2028 y(dling)g(is)f(needed)f
(that)h(elides)g(branc)o(hes)g(of)f(sum-abstractions)i(that)-76
2070 y(cause)i(rei\014cation)h(time)f(matc)o(h)f(errors.)-76
2168 y Fn(13)40 b(Related)14 b(w)o(o)o(rk)-76 2246 y
Fm(This)f(w)o(ork)e(w)o(as)h(inspired)i(b)o(y)f(the)f(w)o(ork)f(of)h
(Dan)o(vy[9)q(],)f(whic)o(h)i(\014rst)-76 2288 y(demonstrated)h(to)e
(the)g(author)h(the)g(concept)g(of)f(rei\014cation)i(based)-76
2329 y(partial)j(ev)n(aluation.)25 b(Our)15 b(use)g(of)g(a)g
Ff(value)d Fm(t)o(yp)q(e)k(whic)o(h)f(em)o(b)q(eds)-76
2371 y(t)o(yp)q(e)g(information)i(is)e(a)g(ma)r(jor)g(con)o(tribution)i
(to)e(Dan)o(vy's)h(w)o(ork.)-76 2412 y(Dan)o(vy)i(used)g(the)f(Sc)o
(heme)h(compiler)g(as)f(his)h(reduction)h(engine.)-76
2454 y(This)12 b(did)g(not)f(allo)o(w)h(him)f(the)g(\015exibili)q(t)o
(y)i(needed)f(for)f(self)g(describ-)-76 2495 y(ing)16
b(v)n(alues)f(used)g(in)h(our)e(implemen)o(tation)q(.)24
b(Suc)o(h)15 b(v)n(alues)h(enable)-76 2537 y(the)c(extensions)h(for)e
(free)g(v)n(ariables,)i(and)f(p)q(olymorphis)q(m,)i(and)e(w)o(e)-76
2578 y(view)i(this)g(as)f(one)g(of)g(the)g(ma)r(jor)g(con)o(tributions)
j(of)d(this)h(pap)q(er.)1076 -34 y(The)g(use)g(of)f(an)h(injection)i
(constructor)e(\()p Ff(vdyn)p Fm(\))e(whic)o(h)j(allo)o(ws)1020
7 y(the)j(em)o(b)q(edding)i(of)d(the)h(syn)o(tactic)h(domain)g(in)o(to)
f(the)g(seman)o(tic)1020 49 y(domain)i(has)e(ro)q(ots)h(in)g(our)f
(earlier)i(w)o(ork)e(on)g(the)h(use)f(of)g(cata-)1020
90 y(morphisms)13 b(as)e(structured)h(con)o(trol)h(op)q(erators[12)q
(],)e(and)h(on)f(meta)1020 132 y(programming)k(systems)f(where)f(co)q
(de)g(is)h(a)f(\014rst)g(class)h(v)n(alue[22)q(].)1076
173 y(The)j(use)h(of)f(lazy)h(expansion)h(in)f(the)g
Ff(reflect)c Fm(function)19 b(w)o(e)1020 215 y(\014nd)g(reminiscen)o(t)
g(of)f(the)g(dela)o(y)o(ed)h(expansion)h(of)d(enco)q(dings)j(in)1020
256 y(Launc)o(h)o(bury's)c(w)o(ork)e(on)h(self)g(applicable)i(partial)f
(ev)n(aluators)g(for)1020 298 y(strongly-t)o(yp)q(ed)f(languages[19)s
(].)1076 339 y(The)j(traditional)1334 323 y Fg(4)1373
339 y Fm(partial)i(ev)n(aluation)g(literature)g(describ)q(es)1020
381 y(t)o(w)o(o)12 b(separate)i(tec)o(hniques)h(whic)o(h)f(are)f(used)g
(to)g(con)o(trol)h(the)f(com-)1020 422 y(plexit)o(y)h(of)d(p)q
(erforming)i(sym)o(b)q(olic)h(ev)n(aluation)g(of)e(the)g(source)g(pro-)
1020 464 y(gram)d(giv)o(en)h(its)f(static)h(inputs.)17
b(The)8 b(\014rst,)i(o\013-line)h(partial)f(ev)n(aluation[18)s(,)1020
505 y(7],)i(uses)g(an)g(initial)j(phase,)e(called)h(binding-time)h
(analysis,)f(whic)o(h)1020 547 y(uses)j(only)h(the)e(fact)h(that)f(an)h
(input)h(is)f(static,)h(to)e(construct)i(an)1020 588
y(annotated)d(program.)k(This)c(annotated)g(program)f(is)g(then)g
(resid-)1020 630 y(ualized,)g(executing)f(the)f(static)h(comp)q(onen)o
(ts)g(and)g(rebuilding)i(the)1020 671 y(dynamic)g(comp)q(onen)o(ts)f
(to)f(construct)h(the)f(residual)i(program.)1076 713
y(On-line)c(partial)h(ev)n(aluators)f([21,)f(20],)g(on)g(the)g(other)g
(hand,)h(use)1020 754 y(the)k(actual)h(v)n(alues)g(asso)q(ciated)g
(with)f(the)g(static)g(inputs)i(to)d(sym-)1020 796 y(b)q(olicall)q(y)k
(execute)d(the)g(source)h(to)e(build)k(the)d(residual)i(program.)1020
837 y(W)m(e)g(consider)h(our)f(partial)i(ev)n(aluator)f(on-line)h
(since)f(the)f(imple-)1020 879 y(men)o(tation)e(of)f(\\smart")g
(primitiv)o(es)i(actually)g(prob)q(es)f(the)f(actual)1020
920 y(v)n(alues)g(of)f(the)g(static)h(inputs.)1076 962
y(Tw)o(o)19 b(of)h(the)f(harder)i(problems)g(in)f(partial)i(ev)n
(aluation)g(are)1020 1003 y(pushing)11 b(a)e(static)h(con)o(text)g(o)o
(v)o(er)f(a)h(dynamic)g(branc)o(h)h(suc)o(h)e(as)h(an)f
Ff(if)1020 1045 y Fm(or)k Ff(case)p Fm(,)f(and)h(handling)j(higher)f
(order)f(functions.)19 b(The)13 b(\014rst)h(has)1020
1086 y(b)q(een)d(handled)i(b)o(y)e(con)o(tin)o(uation)j(based)e(sp)q
(ecializatio)q(n[6)s(,)e(4],)g(and)1020 1128 y(the)k(second)h(b)o(y)f
(a)g(closure)i(analysis[14)r(,)e(15,)g(3,)f(5)q(].)19
b(In)14 b(rei\014cation)1020 1169 y(based)j(systems,)g(higher)h(order)e
(functions)i(are)e(treated)h(lik)o(e)h(an)o(y)1020 1211
y(other)11 b(function,)h(and)g(static)f(con)o(texts)h(are)f(handled)h
(implicitl)q(y)i(b)o(y)1020 1253 y(the)f(use)g(of)f(the)g
Ff(shift)f Fm(and)i Ff(reset)d Fm(con)o(trol)k(op)q(erators)g(whic)o(h)
f(ab-)1020 1294 y(stract)e(the)g(curren)o(t)g(con)o(text)h(and)f(push)h
(it)f(in)o(to)h(the)f(clauses)h(of)f(the)1020 1336 y
Ff(case)p Fm(.)k(This)d(risks)h(duplicati)q(ng)i(co)q(de,)d(but)g(this)
h(co)q(de)g(duplication)1020 1377 y(can)i(often)f(b)q(e)h(con)o
(trolled)h(b)o(y)f(restructuring)h(the)f(program.)21
b(The)1020 1419 y(implemen)o(tations)e(for)d Ff(shift)e
Fm(and)i Ff(reset)e Fm(in)i(SML)h(used)f(in)h(our)1020
1460 y(implemen)o(tation)f(can)e(b)q(e)f(found)h(in)f(the)h
(literature[13)r(])1076 1502 y(Expansion)20 b(of)d(a)g(v)n(alue)h(to)f
(re\015ect)h(its)f(t)o(yp)q(e)h(has)g(b)q(een)f(used)1020
1543 y(b)o(y)12 b(Dan)o(vy)m(,)h(Malmkj\032r)f(and)h(P)o(alsb)q(erg)g
(to)f(p)q(erform)g(binding-time)1020 1585 y(impro)o(v)o(emen)o(ts[11)r
(].)j(The)9 b(tec)o(hnique)h(of)f(using)h(expansion-reducti)q(on)1020
1626 y(systems)g(to)g(reac)o(h)h(normal)g(forms)e(is)i(w)o(ell)g(kno)o
(wn)f(in)h(the)f(rewriting)1020 1668 y(comm)o(unit)o(y)m(,)k(esp)q
(ecially)i(the)d(use)g(of)g(eta-expansion[17)s(].)1076
1709 y(Recen)o(t)j(w)o(ork)f(has)h(used)g(suc)o(h)g(tec)o(hniques)h(to)
f(construct)g(the)1020 1751 y(in)o(v)o(erse)i(of)e(the)h(ev)n(aluation)
i(functional[2)r(])d(and)i(to)e(demonstrate)1020 1792
y(that)i(ev)o(ery)h(term)f(\(in)h(a)f(com)o(binator)i(form\))e(of)f
(system)i Fd(F)k Fm(has)1020 1834 y(a)16 b(normal)g(form[1].)24
b(In)16 b(the)g(latter)g(w)o(ork,)g(a)f(constructiv)o(e)j(pro)q(of)1020
1875 y(is)h(used)h(to)f(extract)g(an)g(ML)f(program)i(remark)n(ably)g
(similar)h(to)1020 1917 y(the)16 b(rei\014cation)i(based)e(partial)i
(ev)n(aluator)f(for)e(the)h(p)q(olymorphic)1020 1958
y(lam)o(b)q(da)f(calculus.)1076 2000 y(Recen)o(t)h(w)o(ork)e(b)o(y)i
(John)f(Hughes[16)q(])f(builds)k(another)d(frame-)1020
2041 y(w)o(ork)h(for)g(t)o(yp)q(e)h(based)g(partial)h(ev)n(aluation.)29
b(Here,)17 b(rather)g(than)1020 2083 y(base)c(the)g(propagation)j(of)c
(static)i(information)g(on)g(the)f(unfolding)1020 2124
y(of)k(functions)i(a)f(t)o(yp)q(e)g(inference-lik)o(e)i(analysis)g(is)e
(used)g(instead.)1020 2166 y(This)11 b(tec)o(hnique)g(has)g(b)q(een)f
(quite)h(e\013ectiv)o(e)g(in)g(remo)o(ving)g(run-time)1020
2207 y(datat)o(yp)q(e)h(tags,)g(when)g(the)f(sp)q(ecialized)k(v)o
(ersion)d(of)f(a)h(program)g(no)1020 2249 y(longer)i(needs)g(them.)1020
2347 y Fn(14)40 b(F)o(uture)14 b(W)o(o)o(rk)1020 2425
y Fm(F)m(or)h(a)f(long)i(time,)g(it)f(app)q(eared)h(to)f(the)f(author)i
(that)f(the)g(delim-)1020 2467 y(ited)h(con)o(trol)h(op)q(erators)g
Ff(shift)c Fm(and)k Ff(reset)p Fm([10)n(])e(w)o(ere)g(necessary)1020
2508 y(to)g(do)g(rei\014cation)j(o)o(v)o(er)d(sums.)23
b(Because)16 b Ff(shift)d Fm(and)j Ff(reset)d Fm(can)1020
2550 y(b)q(e)h(implemen)o(ted)i(using)f(con)o(tin)o(uations)i(and)d
(state[13)q(],)f(it)h(seems)p 1020 2582 399 2 v 1063
2606 a Fe(4)1080 2618 y Fi(As)c(opp)q(osed)i(to)e(t)o(yp)q(e-directed.)
951 2747 y Fm(11)p eop
%%Page: 12 12
12 11 bop -76 -34 a Fm(reasonable)20 b(that)f(these)f(same)h(mec)o
(hanisms)g(could)h(b)q(e)e(used)h(to)-76 7 y(construct)13
b(a)f(t)o(yp)q(e-directed)i(partial)g(ev)n(aluator)g(o)o(v)o(er)f(sums)
f(whic)o(h)-76 49 y(uses)18 b(con)o(tin)o(uation)q(s)i(and)f(state)f
(instead)h(of)f Ff(shift)d Fm(and)k Ff(reset)p Fm(.)-76
90 y(Recen)o(tly)f(the)f(author)g(and)h(Simon)g(P)o(eyton)f(Jones)g
(constructed)-76 132 y(suc)o(h)g(a)g(system)g(b)o(y)g(writing)h(the)f
Ff(eval)d Fm(function)k(in)g(an)f(explicit)-76 173 y(con)o(tin)o
(uation)c(passing)f(st)o(yle,)f(whic)o(h)g(uses)g(neither)g(\014rst)g
(class)g(con-)-76 215 y(tin)o(uations)19 b(nor)e(state.)27
b(F)m(urther)17 b(in)o(v)o(estigation)j(is)d(necessary)g(to)-76
256 y(compare)d(these)f(t)o(w)o(o)g(approac)o(hes.)-20
298 y(One)k(of)f(the)h(great)g(adv)n(an)o(tages)h(of)e(Dan)o(vy's)i
(original)h(pap)q(er)-76 339 y(is)13 b(that)f(the)g(ev)n(aluation)j
(mec)o(hanism)f(of)d(Sc)o(heme)i(is)g(used)f(directly)-76
381 y(rather)18 b(than)h(constructing)h(a)d(separate)i
Ff(eval)d Fm(function.)33 b(Since)-76 422 y(Sc)o(heme)12
b(v)n(alues)h(already)f(em)o(b)q(ed)g(m)o(uc)o(h)g(t)o(yp)q(e)f
(information,)j(man)o(y)-76 464 y(of)g(our)g(extensions)i(could)g(b)q
(e)e(directly)i(implemen)o(ted)g(in)f(Sc)o(heme)-76 505
y(giv)o(en)e(access)e(to)g(the)h(Sc)o(heme)f(implemen)o(tation)q(.)19
b(Changes)12 b(neces-)-76 547 y(sary)f(include)i(tagging)f(closures)g
(\(function)g(v)n(alues\))f(with)g(the)g(t)o(yp)q(e)-76
588 y(of)16 b(their)g(domain.)27 b(W)m(e)16 b(w)o(ould)h(lik)o(e)g(to)f
(further)g(in)o(v)o(estigate)i(this)-76 630 y(approac)o(h.)-76
728 y Fn(15)40 b(Conclusion)-76 806 y Fm(P)o(artial)12
b(ev)n(aluators)f(can)g(b)q(e)f(constructed)h(using)h(a)e(new)g
(paradigm:)-76 848 y(t)o(yp)q(e-directed)20 b(rei\014cation.)33
b(This)18 b(paradigm)h(leads)g(to)f(systems)-76 889 y(that)i(are)g
(simple)h(to)e(construct,)j(small)f(in)g(size,)g(and)g(need)f(no)-76
931 y(analysis)i(other)d(than)h(t)o(yp)q(e)f(inference.)37
b(W)m(e)19 b(presen)o(ted)h(a)f(par-)-76 972 y(tial)d(ev)n(aluator)h
(whic)o(h)f(extends)f(the)h(w)o(ork)e(of)h(Dan)o(vy)h(whic)o(h)g(can)
-76 1014 y(handle:)26 b(p)q(olymorphical)q(l)q(y)19 b(t)o(yp)q(ed)f
(functions,)g(free)f(v)n(ariables)h(in)-76 1055 y(terms,)f(an)g
(explicit)j(\014xed-p)q(oin)o(t)e(op)q(erator)g(\(or)f(recursion\),)i
(and)-76 1097 y(inductiv)o(e)d(datat)o(yp)q(es.)-20 1138
y(W)m(e)g(in)o(tro)q(duce)h(the)e(idea)i(that)e(t)o(yp)q(e-directed)i
(partial)g(ev)n(alu-)-76 1180 y(ators)e(are)g(expansion{redu)q(ctio)q
(n)j(systems.)k(W)m(e)15 b(implemen)o(t)i(the)-76 1221
y(reduction)c(mec)o(hanism)h(as)d(a)h(function)h(\()p
Ff(eval)p Fm(\))c(that)j(maps)g(an)g(ab-)-76 1263 y(stract)18
b(syn)o(tax)h(ob)r(ject)f(of)g(t)o(yp)q(e)h Ff(exp)d
Fm(to)i(a)g(simpler)i(t)o(yp)q(e)e(called)-76 1304 y(a)e
Ff(value)p Fm(,)f(and)i(the)f(expansion)i(mec)o(hanism)g(as)e(a)h(t)o
(yp)q(e-directed)-76 1346 y(function)e(\()p Ff(reflect)p
Fm(\))10 b(from)i Ff(exp)g Fm(to)h Ff(value)p Fm(.)-20
1387 y(By)k(using)h(t)o(w)o(o)e(domains)j(w)o(e)d(mak)o(e)h(precise)g
(the)g(distinction)-76 1429 y(b)q(et)o(w)o(een)g(v)n(alues)h(and)f
(terms.)28 b(This)17 b(distinction)j(help)q(ed)e(clarify)-76
1470 y(for)12 b(us)g(man)o(y)h(of)e(the)h(subtleties)i(in)f(Dan)o(vy's)
g(pap)q(er)g(where)f(v)n(alues)-76 1512 y(and)i(terms)f(are)g(not)g
(syn)o(tactically)j(distingui)q(shed.)-20 1553 y(Our)d(implemen)o
(tation)i(is)e(based)g(up)q(on)h(a)e(tec)o(hnique)i(that)f(em-)-76
1595 y(b)q(eds)18 b(t)o(yp)q(e)g(and)g(other)f(information)i(in)f(the)g
(seman)o(tic)g(domain,)-76 1636 y(so)e(that)g(ev)o(ery)g
Ff(value)e Fm(implicitly)19 b(con)o(tains)f(enough)f(t)o(yp)q(e)f
(infor-)-76 1678 y(mation)i(to)g(reify)f(itself.)31 b(The)17
b(implemen)o(tation)j(passes)e(around)-76 1719 y(t)o(yp)q(e)j(tags)g
(at)g(partial-ev)n(aluati)q(on)j(time)d(but)h(need)f(not)g(do)g(so)-76
1761 y(when)13 b(all)i(partial)f(ev)n(aluation)i(is)d(concluded.)19
b(W)m(e)13 b(consider)i(t)o(yp)q(e-)-76 1802 y(em)o(b)q(edding)g(v)n
(alues,)f(and)f(the)g(abilit)o(y)i(to)e(handle)h(primitiv)o(e)h(func-)
-76 1844 y(tions)j(in)g(a)f(systematic)h(w)o(a)o(y)m(,)f(t)o(w)o(o)f
(imp)q(ortan)o(t)j(con)o(tributions)g(of)-76 1885 y(this)14
b(pap)q(er.)-20 1927 y(One)19 b(of)g(the)g(elegan)o(t)h(features)f(of)g
(implemen)o(ting)j(a)c(partial)-76 1968 y(ev)n(aluator)10
b(in)g(this)g(fashion)g(is)f(that)g(the)g(sym)o(b)q(olic)i(reduction)f
(mec)o(h-)-76 2010 y(anism)15 b Fk(is)e Fm(the)h(op)q(erational)j
(seman)o(tics.)k(There)14 b(is)g(no)g(question)i(if)-76
2051 y(the)h(seman)o(tics)h(and)g(the)e(b)q(eha)o(vior)j(of)e(the)g
(sym)o(b)q(olic)h(execution)-76 2093 y(mec)o(hanism)d(coincide.)-76
2191 y Fn(References)-57 2269 y Fm([1])k(T.)d(Altenkirc)o(h,)j(M.)e
(Hofmann,)h(and)g(T.)e(Streic)o(her.)30 b(Cate-)3 2311
y(gorical)13 b(reconstruction)h(of)d(a)g(reduction)j(free)d
(normalization)3 2352 y(pro)q(of.)17 b Fk(L)n(e)n(ctur)n(e)12
b(Notes)g(in)h(Computer)g(Scienc)n(e)p Fm(,)d(953,)j(1995.)-57
2424 y([2])19 b(U.)d(Berger)i(and)g(H.)e(Sc)o(h)o(wic)o(h)o(ten)o(b)q
(erg.)32 b(An)17 b(in)o(v)o(erse)h(of)f(the)3 2465 y(ev)n(aluation)d
(functional)g(for)e(t)o(yp)q(ed)g Fd(\025)p Fm(-calculus.)18
b(In)12 b Fk(LICS'91,)3 2507 y(Symp)n(osium)d(on)h(L)n(o)n(gic)g(in)h
(Computer)f(Scienc)n(e,)f(A)o(mster)n(dam)p Fm(,)3 2548
y(pages)k(203{211.)h(IEEE,)f(1991.)1039 -34 y([3])18
b(A.)h(Bondorf.)35 b(Automatic)19 b(autopro)r(jection)i(of)e(higher)h
(or-)1098 7 y(der)c(recursiv)o(e)h(equations.)26 b(In)16
b(N.D.)e(Jones,)j(editor,)f Fk(ESOP)1098 49 y('90.)10
b(3r)n(d)g(Eur)n(op)n(e)n(an)f(Symp)n(osium)g(on)h(Pr)n(o)n(gr)n
(amming,)g(Cop)n(en-)1098 90 y(hagen,)19 b(Denmark,)h(May)f(1990)e(\(L)
n(e)n(ctur)n(e)h(Notes)f(in)i(Com-)1098 132 y(puter)12
b(Scienc)n(e,)e(vol.)i(432\))p Fm(,)e(pages)j(70{87.)g(Berlin:)h
(Springer-)1098 173 y(V)m(erlag,)g(Ma)o(y)f(1990.)1039
245 y([4])18 b(A.)23 b(Bondorf.)49 b(Impro)o(ving)25
b(binding)i(times)d(without)g(ex-)1098 286 y(plicit)14
b(cps-con)o(v)o(ersion.)k(In)12 b Fk(1992)f(A)o(CM)i(Confer)n(enc)n(e)d
(in)i(Lisp)1098 328 y(and)k(F)m(unctional)d(Pr)n(o)n(gr)n(amming,)j
(San)f(F)m(r)n(ancisc)n(o,)f(Califor-)1098 369 y(nia)j(\(Lisp)f
(Pointers,)g(vol.)g(V,)h(no.)f(1,)i(1992\))p Fm(,)d(pages)j(1{10.)1098
411 y(New)13 b(Y)m(ork:)f(A)o(CM,)h(1992.)1039 482 y([5])18
b(C.)d(Consel.)23 b(Binding)18 b(time)d(analysis)i(for)e(higher)h
(order)g(un-)1098 524 y(t)o(yp)q(ed)g(functional)g(languages.)24
b(In)15 b Fk(1990)e(A)o(CM)j(Confer)n(enc)n(e)1098 565
y(on)k(Lisp)g(and)f(F)m(unctional)e(Pr)n(o)n(gr)n(amming,)k(Nic)n(e,)g
(F)m(r)n(anc)n(e)p Fm(,)1098 607 y(pages)14 b(264{272.)g(New)e(Y)m
(ork:)h(A)o(CM,)f(1990.)1039 678 y([6])18 b(C.)j(Consel)h(and)h(O.)d
(Dan)o(vy)m(.)43 b(F)m(or)22 b(a)f(b)q(etter)h(supp)q(ort)g(of)1098
720 y(static)i(data)g(\015o)o(w.)46 b(In)23 b(J.)f(Hughes,)k(editor,)g
Fk(F)m(unctional)1098 761 y(Pr)n(o)n(gr)n(amming)20 b(L)n(anguages)e
(and)i(Computer)g(A)o(r)n(chite)n(ctur)n(e,)1098 803
y(Cambridge,)10 b(Massachusetts,)e(A)o(ugust)g(1991)h(\(L)n(e)n(ctur)n
(e)g(Notes)1098 844 y(in)18 b(Computer)g(Scienc)n(e,)e(vol.)i(523\))p
Fm(,)f(pages)i(496{519.)g(New)1098 886 y(Y)m(ork:)13
b(A)o(CM,)f(Berlin:)j(Springer-V)m(erlag,)g(1991.)1039
957 y([7])j(C.)11 b(Consel)i(and)g(O.)e(Dan)o(vy)m(.)16
b(P)o(artial)d(ev)n(aluation)h(in)f(parallel.)1098 998
y Fk(LISP)h(and)e(Symb)n(olic)g(Computation)p Fm(,)e(5\(4\):315{330,)k
(1993.)1039 1070 y([8])k(R.)c(Di)h(Cosmo.)20 b(Isomorphisms)c(of)e(t)o
(yp)q(es:)20 b(from)14 b Fd(\025)p Fm(-calculus)1098
1111 y(to)27 b(information)i(retriev)n(al)f(and)g(language)h(design.)59
b(In)1098 1153 y(Ronald)17 b(V.)d(Bo)q(ok,)h(editor,)h
Fk(Pr)n(o)n(gr)n(ess)e(in)g(The)n(or)n(etic)n(al)f(Com-)1098
1194 y(puter)g(Scienc)n(e)p Fm(.)d(Birkh\177)-19 b(auser,)15
b(1995.)1039 1266 y([9])j(O.)27 b(Dan)o(vy)m(.)59 b(T)o(yp)q
(e-directed)29 b(partial)g(ev)n(aluation.)61 b(In)1098
1307 y Fk(POPL'96:)16 b(The)c(23r)n(d)f(A)o(CM)i(SIGPLAN-SIG)o(A)o(CT)d
(Symp)n(o-)1098 1349 y(sium)i(on)g(Principles)e(of)i(Pr)n(o)n(gr)n
(amming)g(L)n(anguages,)d(St.)j(Pe-)1098 1390 y(tersbur)n(g,)g
(Florida,)g(January)f(1996)p Fm(,)f(pages)k(242{257.)f(A)o(CM,)1098
1432 y(1996.)1020 1503 y([10])18 b(O.)11 b(Dan)o(vy)h(and)g(A.)e
(Filinski)q(.)16 b(Abstracting)d(con)o(trol.)i(In)c Fk(1990)1098
1545 y(A)o(CM)g(Confer)n(enc)n(e)d(on)h(Lisp)g(and)g(F)m(unctional)e
(Pr)n(o)n(gr)n(amming)p Fm(,)1098 1586 y(pages)14 b(151{160.)g(A)o(CM,)
e(A)o(CM)h(Press,)g(June)g(1990.)1020 1658 y([11])18
b(O.)13 b(Dan)o(vy)m(,)g(K.)f(Malmkj\032r,)h(and)h(J.)e(P)o(alsb)q
(erg.)18 b(The)12 b(essence)1098 1699 y(of)j(eta-expansion)j(in)e
(partial)h(ev)n(aluation.)26 b Fk(Lisp)15 b(and)f(Sym-)1098
1741 y(b)n(olic)f(Computation)p Fm(,)d(8\(3\):209{228,)k(Septem)o(b)q
(er)g(1995.)1020 1812 y([12])k(L.)f(F)m(egaras)g(and)g(T.)f(Sheard.)28
b(Revisiting)20 b(catamorphisms)1098 1854 y(o)o(v)o(er)13
b(datat)o(yp)q(es)h(with)e(em)o(b)q(edded)i(functions)g(\(or,)e
(programs)1098 1895 y(from)18 b(outer)f(space\).)30 b(In)18
b Fk(Confer)n(enc)n(e)d(R)n(e)n(c)n(or)n(d)i(of)g(the)f(23r)n(d)1098
1937 y(A)o(CM)e(SIGPLAN-SIGA)n(CT)d(Symp)n(osium)g(on)h(Principles)f
(of)1098 1978 y(Pr)n(o)n(gr)n(amming)21 b(L)n(anguages)d(\(POPL'96\))p
Fm(,)k(pages)g(284{294,)1098 2020 y(St.)f(P)o(etersburg,)i(Florida,)h
(Jan)o(uary)d(21{24,)i(1996.)e(A)o(CM)1098 2061 y(Press.)1020
2133 y([13])d(A.)9 b(Filinski.)k(Represen)o(ting)e(monads.)g(In)e
Fk(Confer)n(enc)n(e)f(R)n(e)n(c)n(or)n(d)1098 2174 y(of)16
b(the)f(21st)g(A)o(nnual)f(A)o(CM)j(Symp)n(osium)e(on)g(Principles)f
(of)1098 2216 y(Pr)n(o)n(gr)n(amming)h(L)n(anguages)p
Fm(,)c(pages)k(446{457.)g(A)o(CM,)f(A)o(CM,)1098 2257
y(Jan)o(uary)g(1994.)1020 2328 y([14])k(C.)9 b(K.)h(Gomard.)i(Higher)f
(order)f(partial)h(ev)n(aluation)i({)c(HOPE)1098 2370
y(for)16 b(the)g(lam)o(b)q(da)h(calculus.)27 b(Master's)16
b(thesis,)h(DIKU,)e(Uni-)1098 2411 y(v)o(ersit)o(y)f(of)f(Cop)q
(enhagen,)i(Denmark,)e(Septem)o(b)q(er)h(1989.)1020 2483
y([15])k(C.K.)13 b(Gomard)i(and)g(N.D.)e(Jones.)20 b(A)14
b(partial)i(ev)n(aluator)f(for)1098 2524 y(the)20 b(un)o(t)o(yp)q(ed)g
(lam)o(b)q(da-calcul)q(us.)39 b Fk(Journal)18 b(of)g(F)m(unctional)1098
2566 y(Pr)n(o)n(gr)n(amming)p Fm(,)12 b(1\(1\):21{69,)h(Jan)o(uary)h
(1991.)951 2747 y(12)p eop
%%Page: 13 13
13 12 bop -76 -34 a Fm([16])19 b(J.)j(Hughes.)50 b(T)o(yp)q(e)24
b(sp)q(ecialisati)q(on)j(for)c(the)h Fd(\025)p Fm(-calculus;)3
7 y(or,)e(a)f(new)f(paradigm)j(for)d(partial)j(ev)n(aluation)g(based)f
(on)3 49 y(t)o(yp)q(e)15 b(inference.)25 b(T)m(ec)o(hnical)17
b(rep)q(ort,)f(Departmen)o(t)g(of)f(Cop-)3 90 y(m)o(uter)k(Science,)j
(Chalmers)e(T)m(ec)o(hnical)h(Univ)o(ersit)o(y)m(,)i(URL:)3
132 y(h)o(ttp://www.cs.c)o(halmers.se/)13 b(rjmh.,)f(1996.)-76
203 y([17])19 b(C.)i(B.)i(Ja)o(y)m(.)45 b(Long)23 b Fd(\014)r(\021)h
Fm(normal)g(forms)e(and)i(con\015uence)3 245 y(\(revised\).)44
b(T)m(ec)o(hnical)23 b(Rep)q(ort)f(ECS-LF)o(CS-91-183,)i(De-)3
286 y(partmen)o(t)k(of)f(Computer)h(Science,)k(Univ)o(ersit)o(y)e(of)d
(Ed-)3 328 y(in)o(burgh,)32 b(June)27 b(1992.)60 b(revised)29
b(v)o(ersion)f(a)o(v)n(ailable)i(at)3 369 y(h)o(ttp://theory)m(.do)q
(c.ic.ac.uk/tfm/pap)q(ers/Ja)o(yCB/l)q(on)q(gb)q(eta-)3
411 y(eta.dvi.Z.)-76 482 y([18])19 b(N.D.)9 b(Jones,)i(C.K.)e(Gomard,)i
(and)g(P)m(.)f(Sestoft.)j Fk(Partial)d(Eval-)3 524 y(uation)f(and)h(A)o
(utomatic)e(Pr)n(o)n(gr)n(am)j(Gener)n(ation)p Fm(.)e(Englew)o(o)q(o)q
(d)3 565 y(Cli\013s,)14 b(NJ:)e(Pren)o(tice)i(Hall,)f(1993.)-76
636 y([19])19 b(J.)d(Launc)o(h)o(bury)m(.)32 b(A)17 b(strongly)i(t)o
(yp)q(ed)f(self-applicabl)q(e)i(par-)3 678 y(tial)14
b(ev)n(aluator.)19 b(In)13 b Fk(FPCA'91:)k(Confer)n(enc)n(e)11
b(on)i(F)m(unctional)3 720 y(Pr)n(o)n(gr)n(amming)19
b(L)n(anguages)f(and)i(Computer)g(A)o(r)n(chite)n(ctur)n(e,)3
761 y(Cambridge,)14 b(Ma.)p Fm(,)h(pages)h(145{164,)h(Berlin,)g(August)
f(1991.)3 803 y(Springer-V)m(erlag,)f(LNCS)d(523.)-76
874 y([20])19 b(E.)g(Ruf.)37 b Fk(T)m(opics)19 b(in)g(Online)f(Partial)
h(Evaluation)p Fm(.)34 b(PhD)3 915 y(thesis,)16 b(Stanford)f(Univ)o
(ersit)o(y)m(,)i(California,)g(F)m(ebruary)f(1993.)3
957 y(Published)f(as)f(tec)o(hnical)h(rep)q(ort)e(CSL-TR-93-563.)-76
1028 y([21])19 b(E.)c(Ruf)h(and)g(D.)g(W)m(eise.)26 b(On)16
b(the)g(sp)q(ecializati)q(on)j(of)c(online)3 1070 y(program)h(sp)q
(ecializers.)28 b Fk(Journal)14 b(of)i(F)m(unctional)d(Pr)n(o)n(gr)n
(am-)3 1111 y(ming)p Fm(,)e(3\(3\):251{281,)j(July)g(1993.)-76
1183 y([22])19 b(T.)h(Sheard.)41 b(W)m(ell)23 b(t)o(yp)q(ed)e
(meta-programming)i(systems.)3 1224 y(T)m(ec)o(hnical)c(Rep)q(ort)f
(95-013,)i(Oregon)e(Graduate)h(Institute,)3 1266 y(P)m(.O.)f(Bo)o(x)h
(91000,)j(P)o(ortland,)g(Oregon)d(97291-1000)i(USA,)3
1307 y(No)o(v)o(em)o(b)q(er)13 b(1995.)-76 1405 y Fn(A)42
b(App)q(endix)-76 1484 y Fm(This)14 b(app)q(endix)h(con)o(tains)f(the)f
(complete)h(example)g(referenced)f(in)-76 1525 y(Section)20
b(11.)33 b(The)18 b(co)q(de)h(for)f(the)g(example)i(app)q(ears)f(in)g
(Figure)-76 1567 y(10.)34 b(W)m(e)18 b(de\014ne)i(t)o(w)o(o)e(datat)o
(yp)q(es)h(whic)o(h)h(along)f(with)g(the)g Ff(List)-76
1608 y Fm(datat)o(yp)q(e)11 b(of)e(Section)i(10)f(are)g(used)g(to)g
(implemen)o(t)h(terms)f(and)g(sub-)-76 1650 y(stitutions.)25
b(A)14 b(term)h(is)g(either)h(a)e(v)n(ariable,)j(an)f(in)o(teger)f
(constan)o(t)-76 1691 y(or)d(in)h(in\014x)h(op)q(erator.)j(A)12
b(term)g(is)g(enco)q(ded)i(as)e(the)g(\014xed-p)q(oin)o(t)i(of)-76
1733 y(the)e(sum)f(t)o(yp)q(e)h Ff(T)p Fm(,)f(i.e.)16
b Ff(term)i(=)i(\(Fix)e(x)h(=>)g(T)g(x\))p Fm(.)c(The)d
Ff(M)19 b(a)11 b Fm(t)o(yp)q(e)-76 1774 y(enco)q(des)f(a)f(ma)o(yb)q(e)
h(t)o(yp)q(e,)g(with)f(either)h(a)f(single)i Ff(a)d Fm(elemen)o(t)i(or)
f(noth-)-76 1816 y(ing.)19 b(Substitutions)d(are)d(implemen)o(ted)j(as)
d(ma)o(yb)q(e)h(lists)g(of)f(string)-76 1857 y(cross)c(terms:)15
b Ff(M\(List)j(\(string*F)o(ix)e(x)j(=>)g(T)g(x\)\))p
Fm(.)c Ff(Nothing)6 b Fm(in-)-76 1899 y(dicates)14 b(the)g(failure)g
(substitution.)-20 1940 y(The)9 b(p)q(olymorphic)j(function)e
Ff(find)d Fm(searc)o(hes)i(a)g(list)h(of)e Ff(\(string*a\))-76
1982 y Fm(pairs)i(for)f(one)g(whose)g(\014rst)g(comp)q(onen)o(t)h(is)f
Ff(s)p Fm(,)g(and)g(returns)g Ff(just\(a\))-76 2023 y
Fm(if)17 b(it)f(is)h(found,)h(and)f Ff(nothing)c Fm(otherwise.)28
b(Note)16 b(that)g(the)h(de\014-)-76 2065 y(nition)h(of)e
Ff(find)e Fm(uses)j(the)f Ff(rfun)e Fm(\(recursiv)o(e-function\))19
b(syn)o(tactic)-76 2106 y(sugar.)k(Using)16 b(this)f(notation)i(the)d
(sp)q(eci\014c)j(function)f Ff(rfun)i(find)-76 2148 y(s)h(\(In)g(x\))g
(=)g(...)f Fm(is)d(equiv)n(alen)o(t)h(to)e Ff(val)k(find)g(=)i(fn)f(s)g
(=>)g(fix)-76 2189 y(find)f(=>)h(fn)g(\(In)f(x\))h(=>)g(...)38
b Fm(.)19 b(In)14 b(general)h Ff(rfun)j(f)h(x)g(y)h(=)f(e)-76
2231 y Fm(can)j(b)q(e)f(rewritten)h(as)f Ff(val)d(f)h(=)h(fix)e(f)h(=>)
g(fn)g(x)g(=>)g(fn)g(y)g(=>)-76 2272 y(e)p Fm(.)-20 2314
y(The)f(function)g Ff(termeq)d Fm(tests)j(t)o(w)o(o)f(terms)g(for)g
(equalit)o(y)m(,)k(and)-76 2355 y Ff(subst)16 b Fm(applies)21
b(a)d(substitution)j(to)d(a)g(term.)33 b(Both)18 b Ff(match)f
Fm(and)-76 2397 y Ff(rewrite)10 b Fm(w)o(ere)j(describ)q(ed)i(earlier.)
-20 2438 y(The)h(residual)i(program)e(of)g(Section)h(11)f(w)o(as)f
(constructed)i(in)-76 2480 y(the)11 b(follo)o(wing)i(manner.)k(The)11
b(program)g(in)h(Figure)g(10)f(w)o(as)g(loaded)-76 2521
y(in)o(to)g(the)g(system.)17 b(A)10 b(term)g(represen)o(ting)i(\()p
Fd(x)s Fm(+)s Fd(y)q Fm(\))s(+)s Fd(z)25 b Fl(\))c Fd(x)s
Fm(+)s(\()p Fd(y)5 b Fm(+)-76 2563 y Fd(z)r Fm(\))14
b(w)o(as)g(constructed.)23 b(The)15 b(curried)h(function)g
Ff(rewrite)c Fm(w)o(as)i(ap-)-76 2604 y(plied)f(to)e(this)h(term.)k(A)
10 b(function)j(with)e(t)o(yp)q(e:)16 b Ff(term)i(->)h(term)9
b Fm(w)o(as)1020 -34 y(returned.)25 b(This)16 b(function)h(w)o(as)e
(rei\014ed)i(pro)q(ducing)g(the)f(residual)1020 7 y(function)e(displa)o
(y)o(ed.)951 2747 y(13)p eop
%%Page: 14 14
14 13 bop -76 -74 1005 2 v -77 2724 2 2799 v -53 -45
a Fa(sum)16 b(T)h(a)h(=)f(Var)g(string)88 -8 y(|)g(Op)g(\(a)g(*)g
(string)f(*)h(a\))88 30 y(|)g(Int)g(\(int\);)-53 104
y(sum)f(M)h(a)h(=)f(Nothing)e(unit)h(|)i(Just)e(a;)-53
179 y(rfun)g(find)g(s)h(\(In)g(x\))g(=)-53 216 y(case)f(x)h(of)-18
254 y(Nil\(\))f(=>)h(Nothing\(\))-53 291 y(|)g(Cons\(\(a,z\))o(,b\))d
(=>)17 328 y(if)j(streq\(a,s\))d(then)i(Just)h(z)g(else)f(find)g(s)i
(b;)-53 403 y(fun)e(out)h(\(In)f(x\))h(=)g(x;)-53 441
y(fun)f(first)g(\(x,y\))g(=)h(x;)-53 478 y(fun)f(second)g(\(x,y\))f(=)j
(y;)-53 553 y(rfun)e(termeq)f(\(In)i(t1\))f(\(In)h(x\))g(=)-53
590 y(case)f(t1)h(of)-18 627 y(Var)f(s)i(=>)f(\(case)e(x)j(of)f(Var)f
(t)i(=>)e(streq\(s,t\))299 665 y(|)i(_)f(=>)g(false\))-53
702 y(|)g(Op\(m,s,n\))d(=>)0 739 y(\(case)h(x)j(of)f(Op\(a,b,c\))d(=>)
52 777 y(if)j(streq\(s,b\))105 814 y(then)g(if)f(termeq)g(m)h(a)246
852 y(then)g(termeq)e(n)i(c)h(else)e(false)105 889 y(else)h(false)17
926 y(|)g(_)h(=>)f(false\))-53 964 y(|)g(Int)f(n)i(=>)f(\(case)e(x)j
(of)f(Int)f(m)i(=>)e(n=m)299 1001 y(|)i(_)f(=>)g(false\);)-53
1076 y(rfun)f(subst)g(sig)g(\(In)h(t\))g(=)-53 1113 y(let)f(val)h(f)g
(=)g(subst)f(sig)h(in)-53 1150 y(case)f(\(t\))g(of)-18
1188 y(Var)g(v)i(=>)f(\(case)e(find)i(v)g(sig)g(of)194
1225 y(Nothing)e(_)i(=>)g(\(In)f(\(Var)h(v\)\))158 1262
y(|)h(Just)e(w)h(=>)g(w\))-53 1300 y(|)g(Op)g(\(t1,s,t2\))d(=>)j(In)g
(\(Op)g(\(f)g(t1,)f(s,)h(f)g(t2\)\))-53 1337 y(|)g(Int)f(i)141
b(=>)17 b(In)g(\(Int)f(i\))-53 1375 y(end;)-53 1449 y(rfun)g(match)g
(pat)g(msigma)g(term)g(=)-53 1487 y(case)g(\(msigma\))f(of)0
1524 y(Nothing)g(\(\))i(=>)f(Nothing)g(\(\))-36 1561
y(|)i(Just)e(\(sigma\))f(=>)-53 1599 y(\(case)g(\(out)i(pat\))f(of)17
1636 y(Var)h(u)g(=>)52 1673 y(\(case)f(find)g(u)i(sigma)e(of)105
1711 y(Nothing\(\))f(=>)141 1748 y(Just)h(\(cons\(\(u,t)o(erm)o(\),)o
(sig)o(ma\))o(\))70 1786 y(|)h(Just)g(w)g(=>)g(if)g(termeq)e(w)i(term)
335 1823 y(then)f(Just)g(sigma)335 1860 y(else)g(Nothing\(\)\))-18
1898 y(|)h(Op)g(\(t11,s1,t1)o(2\))d(=>)52 1935 y(\(case)i(\(out)g
(term\))g(of)123 1972 y(Op)h(\(t21,s2,t2)o(2\))d(=>)88
2010 y(\(if)i(streq\(s2,\()e(s1\)\))158 2047 y(then)i(\(match)g(t11)h
(\(match)e(t12)i(msigma)e(t22\))h(t21\))158 2084 y(else)g(Nothing)g
(\(\)\))88 2122 y(|)h(_)g(=>)g(Nothing)e(\(\)\))-18 2159
y(|)i(Int)g(n)g(=>)52 2196 y(\(case)f(\(out)g(term\))g(of)105
2234 y(Int)h(u)g(=>)g(if)g(u=n)317 2271 y(then)f(msigma)317
2309 y(else)g(Nothing)f(\(\))70 2346 y(|)i(_)h(=>)f(Nothing)e
(\(\)\)\);)-53 2421 y(fun)h(rewrite)f(rule)h(term)h(=)-53
2458 y(let)f(val)h(lhs)f(=)i(first)d(rule)17 2495 y(val)i(rhs)f(=)i
(second)d(rule)17 2533 y(val)i(ms)34 b(=)18 b(match)d(lhs)i(\(Just)f
([]\))g(term)-53 2570 y(in)-18 2607 y(case)34 b(ms)17
b(of)52 2645 y(Nothing)f(\(\))g(=>)h(term)17 2682 y(|)g(Just)g
(\(sigma\))e(=>)i(subst)f(sigma)f(rhs)-53 2720 y(end)h(;)p
928 2724 V -76 2726 1005 2 v 55 2797 a Fm(Figure)e(10:)j
Fb(F)l(ull)c(P)o(attern)j(Matc)o(hing)d(Co)q(de)951 2747
y Fm(14)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
