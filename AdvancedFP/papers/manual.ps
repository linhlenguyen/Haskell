%!PS-Adobe-2.0
%%Creator: dvipsk 5.58c Copyright 1986, 1994 Radical Eye Software
%%Title: final.dvi
%%Pages: 61
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -o final.ps final.dvi
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 2000.03.02:1054
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (final.dvi)
@start /Fa 16 123 df<EA0780EA01C07F1200A27F1370A213781338A2133C131CA213
1E130E131E133F136713C738018780EA03031206000E13C0EA1C011238007013E0EAE000
4813F0141D7E9C18>21 D<126012F0A2126004047C830C>58 D<130113031306A3130CA3
1318A31330A31360A213C0A3EA0180A3EA0300A31206A25AA35AA35AA35AA35AA210297E
9E15>61 D<123F1207A2120EA45AA4EA39E0EA3A30EA3C1812381270131CA3EAE038A313
301370136013C01261EA2300121E0E1D7E9C12>98 D<EB07E01300A2EB01C0A4EB0380A4
3801E700EA0717EA0C0F1218EA380E12301270A2485AA4EB3880A3EA607838319900EA1E
0E131D7E9C16>100 D<EA01F0EA0708120CEA1804EA38081230EA7030EA7FC0EAE000A5
1304EA60081310EA3060EA0F800E127E9113>I<EB01E0EB0630EB0E7814F0EB1C601400
A45BA23803FFC038003800A25BA55BA5485AA55B1203A20063C7FC12F312F612E4127815
257E9C14>I<EB38C013C5EA0183EA0303000713801206120EA2381C0700A4130EA3EA0C
1EEA047CEA039CEA001CA25B1260EAF0301370EAE0C0007FC7FC121A809114>I<EA01C0
1203A2EA0180C7FCA6121C12271247A21287A2120EA25AA35A1380A21270EA7100123212
1C0A1C7E9B0E>105 D<EA3C1F384E6180384681C0EA4701128F128E120EA2381C0380A3
EB070000381310A2130E1420387006403830038014127E9119>110
D<13C01201A3EA0380A4EAFFF0EA0700A3120EA45AA4EA3820A21340A2EA1880EA0F000C
1A80990F>116 D<001C13C0EA27011247A238870380A2120EA2381C0700A438180E20A3
EA1C1E380C26403807C38013127E9118>I<001CEBC080392701C1C0124714C039870380
40A2120EA2391C070080A3EC0100EA1806A2381C0E02EB0F04380E13083803E1F01A127E
911E>119 D<380787803808C8403810F0C03820F1E0EBE3C03840E1803800E000A2485A
A43863808012F3EB810012E5EA84C6EA787813127E9118>I<001C13C0EA27011247A238
870380A2120EA2381C0700A4EA180EA3EA1C1EEA0C3CEA07DCEA001C1318EA6038EAF030
5B485AEA4180003EC7FC121A7E9114>I<EA0381EA07C1EA0FF6EA081CEA1008EA001013
2013401380EA010012025AEA08041210EA3C18EA67F8EA43F0EA81E010127E9113>I
E /Fb 12 109 df<12F012FC120E1203EA0180A2EA00C0A40A0A888111>0
D<13C0A4EA0180A2EA0300120E12FC12F00A0A888911>I<EA01C01207EA0E0012185A5A
A25AA30A0A808111>3 D<154015C0A5EC0180A4EC0300A21406A25C5CA25C5C5CEB0380
49C7FC131C1378EA07E0EAFF8000F8C8FC1A1B989A32>9 D<124012C0A51260A37EA27E
A27E7EA27E6C7E6C7E136013387F1307EB03C0EB00F8EC3FE014071B1B809A32>I<12FC
EAFFE0EA03F8EA001FEB07C0EB00E01438801406806E7E6E7E156081A28181A281A381A2
ED0180A5ED00C0A616402223A08142>12 D<F00FF0EF03FF94381FF00005FCC7FCEE07E0
041FC8FC1678ED01E0ED0780030EC9FC15385D15C0EC03804ACAFC140C5C5C5C5C495A49
CBFC1306A25B5B5BA25B5BA2485AA248CCFCA21206A25AA35AA35AA35AA65AA712403C3C
808174>27 D<1B30A91B60A61BC0A5F20180A3F20300A31A06A362A262A262A262A262A2
4F5A4FC7FCA2190661A2616161A2614E5A4EC8FC1806606060604D5A4D5A0506C9FC171C
5F17E04C5A0407CAFC161E1678ED01E0ED0780033ECBFCEC01F8EC0FC0D901FECCFCEB7F
F0D8FFFECDFC13804C4CCACB95>33 D<B47E13FF38007FF0EB00FFEC0FE0EC00FC151FED
03E0ED00F8161EEE0780EE01C0EE0070173C170E1703EF01C0717E1830181C841803727E
727E19608585858585737EA2737E1A6086A2868686A286A2747E747EA21B60A287A287A3
87A287A387A3F30180A4F300C0A41C60A71C30A91C105455D281A6>36
D<124012C0A91260A67EA57EA37EA37EA37EA26C7EA36C7EA21360A27F7FA27FA27F7FA2
6D7E6D7EA214608080A28080806E7E6E7E1560818181816F7E6F7EED0060163882160770
7EEE00E01778171C1707EF03C0EF00F8183EF007C0F001F8F0003FF107F8963800FFE097
3807FFF8F2001F555580D4A6>38 D<F31FF8F207FF9738FFE000DF07F8C7FC073FC8FCF0
01F8F007C0063EC9FC18F8EF03C04DCAFC171C177817E0EE03804CCBFC161C5E16604B5A
4B5A0306CCFC5D5D5D5D5D4A5A4ACDFC14065C5CA25C5C5CA2495A49CEFCA213065BA25B
A25B5BA25BA2485AA348CFFCA21206A35AA35AA35AA55AA65AA9124055558081A6>I<4A
B47E021F13F89138FE007FD903E0EB07C049C87E011C153849810160150649814848ED01
8048CA12C000061760A2481730481718A248170CA3481706A4481703AA00601706A46C17
0CA36C1718A26C17306C1760A26C17C06C6CED01806C6CED0300016015060138151C6D5D
010715E0D903E0EB07C0D900FE017FC7FC91381FFFF80201138038389C9B36>108
D E /Fc 4 64 df<1302131E137EEA01FE120F12FFA2120F1201EA007E131E13020F0C7E
852A>27 D<7E12F012FCB4FC13E013FEA213E0130012FC12F012800F0C67852A>45
D<1206A4120FA3EA1F80A2EA3FC0A2EA7FE0A3EAFFF00C0F86A72A>54
D<EAFFF0EA7FE0A3EA3FC0A2EA1F80A2EA0F00A31206A40C0F86902A>63
D E /Fd 2 119 df<120313801300C7FCA6121C12241246A25A120C5AA31231A21232A2
121C09177F960C>105 D<EA1C04EA26061246A2EA8604120CA3EA1808A213101320EA0C
60EA07800F0E7F8D11>118 D E /Fe 3 84 df<B512C0A2D807F0C7FC6C5AB3A41501A4
1502A41506A2150E151E157C0007EB01FCB6FCA220297CA829>76
D<D8FFE0913803FFC0A20007EEF800D802F0EC05F0A201781409A36D1411A26D1421A36D
1441A26D6C1381A3903903C00101A2ECE0021301A2903800F004A3EC7808A2EC3C10A3EC
1E20A2EC0F40A3EC07801207486C6C48487ED8FFF891387FFFC0A232297CA83B>I<017F
13403903FFE0C0380780F0380E001948130748130300781301127000F01300A315407EA2
007C1400127EEA7F80EA3FF06CB47E6C13F06C13FC00017F38003FFF010313809038003F
C0EC0FE0140315F014017E1400A37E15E07E14016C14C06CEB038000E6EB070038C3E01E
38C0FFF838801FE01C2B7CA925>83 D E /Ff 6 119 df<EA1FC0EA7FF0EA7078EA2018
EA001CA2EA07FC121FEA3C1C127012E0A3EA707C383FFF80EA0F8F11107E8F14>97
D<13FCEA01FEEA038EEA07041300A3EA7FFE12FFEA0700ACEAFFF8A20F177F9614>102
D<EAFF80A21203B3EAFFFEA20F177E9614>108 D<EAFC78EAFDFEEA1F86EA1E07121CAA
38FF8FE0A21310808F14>110 D<EAFC3FA2EA1C07AB131F380FFFE0EA03E71310808F14>
117 D<38FE3F80A2383C1E00EA1C1CA36C5AA3EA0630EA0770A36C5AA311107F8F14>I
E /Fg 7 104 df<B612C0A21A027C8B23>0 D<EA03F0EA0FFC487E487E481380A2B512C0
A66C1380A26C13006C5A6C5AEA03F012127E9317>15 D<12C012F0123C120FEA03C0EA00
F01338130E6D7EEB01E0EB0078141EEC0780EC01C0EC0780EC1E001478EB01E0EB078001
0EC7FC133813F0EA03C0000FC8FC123C127012C0C9FCA7007FB51280B612C01A247C9C23
>21 D<1506A381A216801501ED00C0166016701618B8FCA2C912181670166016C0ED0180
15031600A21506A328187E962D>33 D<EB3FF813FF3803C00048C7FC120C5A5AA25AA25A
A3B512F8A200C0C7FCA31260A27EA27E7E1207EA03C03800FFF8133F151C7C981E>50
D<130F1338136013E0EA01C0AFEA0380EA0700121E12F8121E1207EA0380EA01C0AFEA00
E013601338130F102D7DA117>102 D<12F8121E1207EA0380EA01C0AFEA00E013601338
130F1338136013E0EA01C0AFEA0380EA0700121E12F8102D7DA117>I
E /Fh 87 127 df<EAE038EAF078A7EAE038A2EA60300D0B7C9816>34
D<EA0387A6387FFFC0B512E0A238070E00A3EA0E1CA4B512E0A26C13C0381C3800A61319
7F9816>I<38380180EA7C03A238EE0700A2130EA35B127C5B1238C65AA35BA2485AA348
5AEB8380380707C0A2380E0EE0A3121CA2383807C0A23818038013207F9C16>37
D<12301278127C123C121CA41238127812F012E01240060D789816>39
D<13E01201EA0380EA0700120E5AA25AA25AA35AA91270A37EA27EA27E7EEA0380EA01E0
12000B217A9C16>I<12C07E12707E7E7EA27EA2EA0380A3EA01C0A9EA0380A3EA0700A2
120EA25A5A5A5A5A0A217B9C16>I<EA0380A4EAE38EEAF39EEAFFFEEA3FF8EA0FE0A2EA
3FF8EAFFFEEAF39EEAE38EEA0380A40F127D9516>I<13E0A8B512E0A33800E000A81313
7F9516>I<1238127C127EA2123E120E121E121C127812F01260070B798416>I<B51280A3
11037E8D16>I<127012F8A312700505788416>I<EB01801303A2EB0700A2130EA25BA25B
A25BA25BA2485AA2485AA248C7FCA2120EA25AA25AA25AA25AA25A11207E9C16>I<EA03
E0EA0FF8487EEA1E3CEA380EEA780FEA7007A238E00380A8EAF00700701300A2EA780FEA
3C1E6C5AEA1FFC6C5AEA03E011197E9816>I<12035AA25A5AB4FCA212E71207AEEAFFF8
A30D197B9816>I<EA07E0EA1FF8487EEA783EEAE00700F01380130312601200A2EB0700
A2130E5B5B5B5B485A485A000FC7FC381E03801238EA7FFFB5FC7E11197E9816>I<EA07
E0EA1FF8487EEA781E130712301200A2130E133EEA07FC13F013FCEA001E13077F1480A2
126012F038E00700EA781EEA3FFC6C5AEA07E011197E9816>I<137C13FC13DC1201EA03
9CA2EA071C120F120E121E123C1238127812F0B512E0A338001C00A53801FFC0A313197F
9816>I<EA3FFE127FA20070C7FCA7EA77F0EA7FFC7FEA780FEA300738000380A2126012
F0A238E00700EA781EEA3FFC6C5AEA07E011197E9816>I<13F8EA03FC487EEA0F07EA1C
0F1238EA78060070C7FCA2EAE3F8EAEFFCB47EEAF80F487EEB038012E0A21270A2130700
381300EA3C1EEA1FFC6C5AEA03E011197E9816>I<12E0B51280A338E00F00131EEA001C
5B137813705BA2485AA3485AA448C7FCA7111A7E9916>I<EA07F0EA1FFC487EEA7C1F38
F00780EAE003A338700700EA7C1FEA1FFCEA07F0EA1FFCEA3C1EEA700700F01380EAE003
A3EAF00700701300EA7C1FEA3FFE6C5AEA07F011197E9816>I<EA03E0EA0FF8487EEA3C
1EEA700E7F12E014801303A213071270EA780FEA3FFFEA1FFBEA0FE338000700A21230EA
780E5BEA707CEA3FF8EA1FE0EA0F8011197E9816>I<127012F8A312701200A8127012F8
A312700512789116>I<1238127CA312381200A812381278127CA2123C121CA212381270
12F012400618799116>I<EB01801307131FEB3E0013F8485AEA07C0485A003EC7FC12FC
12F012FC123EEA0F806C7EEA01F06C7E133EEB1F801307130111157E9616>I<387FFFC0
B512E0A2C8FCA5B512E0A26C13C0130B7F9116>I<12C012F012FC123EEA0F806C7EEA01
F06C7E133EEB1F801307131FEB3E0013F8485AEA07C0485A003EC7FC12FC12F012C01115
7E9616>I<EA0FF0EA3FFE487E38F00F801303A2EA600738001F00133E13785BEA01C0A5
5BC8FCA4487E487EA26C5A11197E9816>I<13F8EA03FC487EEA0F07381C3B80EA38FF12
793873C7C01383EAE701A73873838013C73879FF00EA38FEEA1C38380F03C0EA07FF6C13
00EA00FC12197E9816>I<13E0487EA213B0A2EA03B8A31318EA071CA5EA0E0EA2EA0FFE
A2487EEA1C07A3387E0FC038FF1FE0387E0FC013197F9816>I<EA7FF8EAFFFE6C7EEA1C
0714801303A4EB0700EA1FFF5BA2EA1C1FEB038014C01301A41303EB0780EA7FFFB51200
EA7FFC12197F9816>I<3801F180EA07FBEA0FFFEA1F0FEA3C07EA38031270A200F0C7FC
5AA77E38700380A21238383C0700EA1F0FEA0FFE6C5AEA01F011197E9816>I<EA7FF8EA
FFFE6C7EEA1C0FEB0780EB03C01301A214E01300A8EB01C0A21303EB0780130F387FFF00
485AEA7FF81319809816>I<387FFFC0B5FC7EEA1C01A490C7FCA2131CA2EA1FFCA3EA1C
1CA290C7FC14E0A5EA7FFFB5FC7E13197F9816>I<387FFFE0B5FC7EEA1C00A41400A213
1CA2EA1FFCA3EA1C1CA290C7FCA6EA7F80487E6C5A13197F9816>I<387F07F038FF8FF8
387F07F0381C01C0A7EA1FFFA3EA1C01A9387F07F038FF8FF8387F07F01519809816>72
D<EA7FFCEAFFFEEA7FFCEA0380B3EA7FFCEAFFFEEA7FFC0F197D9816>I<48B4FC481380
6C1300EA001CB0126012F05BEA7FF85BEA1FC011197E9816>I<B47E7F5B001CC7FCAE14
4014E0A4B5FCA313197F9816>76 D<38FC07E0EAFE0FA2383A0B80EA3B1BA513BBEA39B3
A413F3EA38E3A21303A538FE0FE0A313197F9816>I<387E07F038FF0FF8387F07F0381D
81C0A313C1121C13E1A213611371A313311339A21319131D130DA3EA7F07EAFF87EA7F03
1519809816>I<EA1FFC487E487EEA780F38F00780EAE003AEEAF007A238780F00EA7FFF
6C5A6C5A11197E9816>I<EA7FF8EAFFFE6C7E381C0F80130314C01301A313031480130F
381FFF005B13F8001CC7FCA7127F487E6CC7FC12197F9816>I<EA1FFC487E487EEA780F
38F00780EAE003AD13E312E1EAF0F738787F00EA7FFF6C5A6C5AEA001C131E130E130F7F
A2111F7E9816>I<EA7FF0EAFFFC6C7EEA1C0FEB07801303A41307EB0F00EA1FFE5B7FEA
1C0E7FA414101438A2387F03F0EAFF83387F01E01519809816>I<EA07E3EA1FFF5AEA78
1FEAF00712E0A290C7FC7E1278EA3F80EA1FF0EA07FCC67E130F7FEB0380A2126012E0EB
0700EAF80FEAFFFE5BEAC7F011197E9816>I<387FFFE0B5FCA2EAE0E0A400001300AFEA
07FC487E6C5A13197F9816>I<387F07F038FF8FF8387F07F0381C01C0B0380E0380A238
07070013FF6C5AEA00F81519809816>I<38FE0FE0A338380380EA3C07001C1300A3EA1E
0FEA0E0EA46C5AA4EA031813B8A3EA01B013F0A26C5A13197F9816>I<387E03F038FF07
F8387E03F0383800E0A4381C01C0A3137113F9A213D9A2000C1380A3EA0DDD138DA33807
8F00A213071519809816>I<387FFF80B5FCA238E007005B131E131CEA003C5B137013F0
485A5B1203485A90C7FC5A381E0380121C123C12781270B5FCA311197E9816>90
D<EAFFF0A3EAE000B3A8EAFFF0A30C20789C16>I<12C07EA21270A27EA27EA27EA27EA2
6C7EA26C7EA26C7EA21370A27FA27FA27FA27FA2EB0380A2130111207E9C16>I<EAFFF0
A3EA0070B3A8EAFFF0A30C207F9C16>I<1203EA0F80EA3FE0EAFDF8EAF078EA40100D06
7C9816>I<B51280A311037E7E16>I<1208121C123C1278127012E0A412F012F812781230
060D789B16>I<EA1FE0487E487EEA783CEA300E1200A2EA03FE121FEA3E0E127012E0A3
EA783E387FFFE0EA3FE7EA0F8313127E9116>I<12FCA3121CA4137CEA1DFEEA1FFFEB07
80381E03C0EA1C01EB00E0A6EB01C0EA1E03381F0780EBFF00EA1DFEEA0C7813197F9816
>I<EA03F8EA0FFCEA1FFEEA3C1EEA780CEA70005AA57EEA70071278EA3E0EEA1FFCEA0F
F8EA03F010127D9116>I<133FA31307A4EA03C7EA0FF748B4FCEA3C1F487EEA700712E0
A6EA700F12786C5A381FFFE0EA0FF7EA07C713197F9816>I<EA03F0EA0FFC487EEA3C0F
487E3870038012E0B5FCA300E0C7FCA2387003801278EA3E07381FFF00EA07FEEA01F811
127E9116>I<131E137F3801FF8013C7380383001380A2EA7FFFB5FCA2EA0380ACEA7FFC
487E6C5A11197F9816>I<3803E3C03807F7E0EA0FFF381C1CC038380E00A56C5AEA0FF8
485AEA1BE00038C7FC1218EA1FFC13FF481380387003C038E000E0A4387001C0EA7C0738
3FFF80380FFE00EA03F8131C7F9116>I<12FCA3121CA41378EA1DFCEA1FFE130FEA1E07
121CAA38FF8FE0139F138F13197F9816>I<1203EA0780A2EA0300C7FCA4EAFF80A31203
ACEAFFFC13FE13FC0F1A7C9916>I<13301378A213301300A4EA0FF8121F120FEA0038B3
EA6070EAF0F0EAFFE0EA7FC0EA3F800D237E9916>I<127E12FE127E120EA4EB7FE0A3EB
0F00131E5B5B5B120F7F13BC131EEA0E0E7F1480387F87F0EAFFCFEA7F871419809816>
I<EA7FC012FF127F1201B3EA7FFFB512806C130011197E9816>I<38F9C38038FFEFC0EB
FFE0EA3C78A2EA3870AA38FE7CF8A31512809116>I<EAFC78EAFDFCB47EEA1F0FEA1E07
121CAA38FF8FE0139F138F13127F9116>I<EA03E0EA0FF8487EEA3C1E487EEA700738E0
0380A5EAF00700701300EA780FEA3C1EEA1FFC6C5AEA03E011127E9116>I<EAFC7CEAFD
FEB5FC381F0780381E03C0EA1C01EB00E0A6EB01C0EA1E03381F0780EBFF00EA1DFEEA1C
7890C7FCA6B47EA3131B7F9116>I<3803E380EA0FF3EA1FFBEA3E0FEA78071270EAE003
A6EA70071278EA3C1FEA1FFBEA0FF3EA03E3EA0003A6EB1FF0EB3FF8EB1FF0151B7F9116
>I<387F0FC038FF3FE0EA7F7F3807F040EBC0005BA290C7FCA8EA7FFC12FF127F13127F
9116>I<EA0FECEA3FFC127FEAF03CEAE01CA2EA7000EA7F80EA1FF0EA07F8EA003CEA60
0E12E012F0EAF81EEAFFFC13F8EAC7E00F127D9116>I<12035AA4EA7FFFB5FCA20007C7
FCA75BEB0380A3EB8700EA03FE6C5A6C5A11177F9616>I<EAFC3FA3EA1C07AB131F381F
FFE0EA0FF7EA07C713127F9116>I<387F1FC038FF9FE0387F1FC0381C0700A2EA0E0EA3
6C5AA4EA03B8A3EA01F0A26C5A13127F9116>I<38FF1FE0A338380380A4EA39F3A20019
130013B3A3EA1DB71317EA1F1FEA0F1EEA0E0E13127F9116>I<387F1FC0133F131F380F
1E006C5AEA03B813F012016C5A12017FEA03B8EA073C131CEA0E0E387F1FC038FF3FE038
7F1FC013127F9116>I<387F1FC038FF9FE0387F1FC0381C0700120E130EA212075BA2EA
039CA21398EA01B8A2EA00F0A35BA3485A1279127BEA7F8090C7FC123C131B7F9116>I<
383FFFC05AA238700780EB0F00131EC65A5B485A485AEA078048C7FC381E01C0123C1278
B5FCA312127F9116>I<EB1F80137F13FF3801E0005BA91203EA7F8048C7FCA26C7EEA03
C01201A97F3800FF80137F131F11207E9C16>I<12E0B3AE0320779C16>I<127CB4FC7FEA
03C01201A97F6CB4FCEB7F80A2EBFF00EA01E05BA91203B45A90C7FC127C11207E9C16>
I<EA1C30EA3F78EAFFF8EAF7E0EA61C00D057C9816>I E /Fi 3
84 df<EAFFFEA2EA0780B31510A41530A21520156015E014011407B6FCA21C227DA122>
76 D<B46CEC7FE0A2D805C0ECBC00A3D804E0EB013CA201701302A36D1304A26D1308A3
6D1310A26D1320A29038038040A3903801C080A2903800E100A31472A2143CA2121F3BFF
E01807FFE0A22B227DA131>I<3801F8083807FF18381E0398383800F800301378007013
380060131812E01408A36C13001278127CEA3F8013F86CB4FC000713C0000113E038001F
F01301EB00781438143C141C7EA46C13186C1338143000F8136038CF01E038C7FF803880
FE0016247CA21E>83 D E /Fj 24 122 df<137EEA01C33903018080380E00C0001E13E0
001CEBE100123C5A14E214E45A14E814F0A25C1270EB016038300671381818323807E01C
19147E931D>11 D<14F8EB03061304EB080313101320EB4007A2138014063801000E140C
EB07F8EB0470380207D8EB001CA2141E5AA448133CA3147800181370001413F014E03812
01C038218700EA207C90C7FCA25AA45AA318297F9F1A>I<380FFFF05A5A3860400012C0
EA80C012005B1201A4120390C7FCA25AA3120E120614147E9314>28
D<127012F012F8A212781208A31210A31220A21240050E7C840D>59
D<144014C0EB0180A3EB0300A31306A25BA35BA35BA25BA35BA3485AA348C7FCA21206A3
5AA35AA25AA35AA35AA2122D7EA117>61 D<12E01278121EEA0780EA01E0EA0078131C13
07EB03C0EB00F0143C140FEC03C0A2EC0F00143C14F0EB03C049C7FC131C1378EA01E0EA
0780001EC8FC127812E01A1A7C9723>I<48B612803A001E000F001503A2815BA4903878
020292C7FCA21406495AEBFFFCEBF00CA23801E008A3EC000448485BA25DA248485B1560
1540EC01C0380F0007B65A211F7E9E22>69 D<027F1380903803C0C190390E0023000138
131749130F5B48481306485A48C7FC5A000E1404121E4891C7FCA25AA45AEC3FFEEC00F0
A20070495AA46C495AA26C13076C13056CEB19803801C06026007F80C7FC21217F9F24>
71 D<D801FEEC0FF8D8001EEC1F8001171500162F164F0127145E169EED011EA2903943
80023CA21504150801835C15101520EB81C0D80101495A1580A2ECC10000024A5A14C214
C4EB00E4489038E803C014F0A2000C13E0001EEBC007D8FFC0EB7FFC2D1F7E9E2C>77
D<39FFF001FF390F80007890C712301520154015807F0007EB01005C14025CA25C6D5AA2
00035B146014405CA201C1C7FC13E2120113E413E8A213F0A25B5B12005B20207E9E1B>
86 D<EBF180380389C038070780EA0E03121C123C383807001278A3EAF00EA31410EB1C
20A2EA703CEB5C40EA308C380F078014147E9318>97 D<EA0780123FEA0700A4120EA45A
A213F0EA1D0CEA3A0E123CEA380FA21270A4EAE01EA3131C133C1338EA607013E0EA31C0
EA1F0010207E9F14>I<1478EB03F8EB0070A414E0A4EB01C0A213F1EA038938070780EA
0E03121C123C383807001278A3EAF00EA31410EB1C20A2EA703CEB5C40EA308C380F0780
15207E9F18>100 D<137CEA0182EA0701120E121C123CEA3802EA780CEA7BF0EA7C0012
F0A4127013011302EA3004EA1838EA0FC010147E9315>I<13E01201A2EA00C01300A712
0E1213EA23801243A3EA87001207A2120EA25AA21320EA3840A31380EA1900120E0B1F7E
9E10>105 D<EA01C0121FEA0380A4EA0700A4120EA45AA45AA45AA3127112E2A4126412
380A207E9F0E>108 D<391E07C07C39231861869038A032033843C034D980381380A23A
87007007001207A3000EEBE00EA3ED1C10261C01C01320153816401518263803801380D8
1801EB0F0024147E9328>I<381E0780382318C0EBA0603843C0701380A2388700E01207
A3380E01C0A3EB0382001C1384EB07041408130300381310381801E017147E931B>I<38
03C1E038046218EB741CEA0878EB701EA2EA10E01200A33801C03CA31438380380781470
14E0EBC1C038072380EB1E0090C7FCA2120EA45AA2EAFFC0171D819317>112
D<EA018013C0EA0380A4EA0700A2EAFFF8EA0700120EA45AA45AA31310EA7020A2134013
80EA3100121E0D1C7F9B10>116 D<000F136038118070002113E013C01241EA43803883
81C0EA0701A3380E0380A31484EB0708120CA2380E0F10EA06133803E1E016147E931A>
I<381E01C0EA230314E0EA438113000047136000871340120EA3481380A3EB0100A21302
5B120CEA0E18EA03E013147E9316>I<3803C1C0380C622038103470EB38F01220146038
4070001200A35BA314203861C04012F1148012E238446300EA383C14147E931A>120
D<001E13600023137014E0EA438013001247388701C0120EA3381C0380A4EB0700121812
1C5BEA0C3EEA03CEEA000EA25BEAF0181338485AEAC060EA41C0003FC7FC141D7E9316>
I E /Fk 39 122 df<EBFE7C380381C6380603CE000E1384001C1380A6B512F0381C0380
AE38FF8FF0171A809916>11 D<126012F0A212701210A31220A21240A2040B7D830B>44
D<126012F0A2126004047D830B>46 D<EA07E0EA1C38EA381CEA300CEA700EEA6006A2EA
E007AAEA6006A2EA700EEA300CEA381CEA1C38EA07E010187F9713>48
D<12035AB4FC1207B3A2EA7FF80D187D9713>I<EA0F80EA1060EA2030EA4038EA803CEA
C01C12E01240EA003C1338A21370136013C0EA018013001202EA040412081210EA3008EA
3FF8127F12FF0E187E9713>I<EA07E0EA1838EA201CEA601EEA700EEA201E1200131CA2
13381370EA07E0EA0038131C130E130FA212E0A212C0EA400EEA601CEA1838EA07E01018
7F9713>I<1318A21338137813F813B8EA01381202A212041208121812101220124012C0
B5FCEA0038A6EA03FF10187F9713>I<EA3018EA3FF013E01380EA2000A5EA2FC0EA3060
EA2030EA00381318131CA2124012E0A2EA8018EA40381330EA30E0EA0F800E187E9713>
I<130CA3131EA2132F1327A2EB4380A3EB81C0A200017F1300A248B47E38020070A2487F
A3487FA2003C131EB4EBFFC01A1A7F991D>65 D<B512F8380E003814181408140C1404A3
EB0100A35BEA0FFFEA0E037FA3EB0002A314061404A2140C143CB512FC171A7F991A>69
D<EAFFE0000EC7FCB01408A3141814101430147014F0B5FC151A7F9918>76
D<B414FF000F14F0A2390B800170A23809C002A33808E004A2EB7008A3EB3810A3EB1C20
A2EB0E40A3EB0780A2EB0300121C39FF8307FF201A7F9923>I<EA0FC2EA1836EA200EEA
600612C01302A3EAE0001270127EEA3FE0EA1FF8EA03FCEA007E130E130713031280A3EA
C0021306EAE004EAD818EA87E0101A7E9915>83 D<007FB5FC38701C0700401301A200C0
148000801300A300001400B13803FFE0191A7F991C>I<EA1FC0EA38707FEA101C1200A2
EA03FCEA1E1C1238127012E01480A2133CEA705F381F8F0011107F8F13>97
D<12FC121CA913FCEA1D07381E0380381C01C0130014E0A6EB01C01480381E0300EA1906
EA10F8131A809915>I<EA07F8EA1C1C1238EA700813005AA612701304EA3808EA1C18EA
07E00E107F8F11>I<133F1307A9EA03E7EA0C17EA180F487E127012E0A6126012706C5A
EA1C373807C7E0131A7F9915>I<EA07C0EA1C30EA30181270EA600C12E0EAFFFCEAE000
A41260EA7004EA3808EA1C18EA07E00E107F8F11>I<EA01F0EA0718EA0E38EA1C101300
A6EAFFC0EA1C00AEEAFF800D1A80990C>I<EA0FCF3818718038303000EA7038A4EA3030
6C5AEA2FC00060C7FCA21270EA3FF013FC6C7EEA600FEAC003A4EA6006EA381CEA07E011
187F8F13>I<12FC121CA9137CEA1D87381E0380A2121CAB38FF9FF0141A809915>I<1218
123CA212181200A612FC121CAE12FF081A80990A>I<12FC121CA9EB1FC0EB0F00130C5B
13205B13E0121DEA1E70EA1C7813387F131E7F148038FF9FE0131A809914>107
D<12FC121CB3A6EAFF80091A80990A>I<38FC7C1F391D8E6380391E0781C0A2001C1301
AB39FF9FE7F81D107F8F20>I<EAFC7CEA1D87381E0380A2121CAB38FF9FF01410808F15>
I<EA07E0EA1C38EA300CEA700EEA6006EAE007A6EA6006EA700EEA381CEA1C38EA07E010
107F8F13>I<EAFCFCEA1D07381E0380381C01C0A2EB00E0A6EB01C01480381E0300EA1D
06EA1CF890C7FCA6B47E1317808F15>I<EA03E1EA0C13EA180BEA300FEA700712E0A612
70A26C5AEA1C37EA07C7EA0007A6EB3FE013177F8F14>I<EAFC78EA1D9CEA1E1C1308EA
1C00ABEAFF800E10808F0F>I<EA1F20EA60E0EA402012C0A2EAF000127FEA3FC0EA1FE0
EA00F0EA8070133012C01320EAF040EA8F800C107F8F0F>I<1208A41218A21238EAFFC0
EA3800A81320A41218EA1C40EA07800B177F960F>I<38FC1F80EA1C03AB1307120CEA0E
0B3803F3F01410808F15>I<38FF0F80383C0700EA1C061304A26C5AA26C5AA3EA03A0A2
EA01C0A36C5A11107F8F14>I<39FE7F1F8039381C0700003C1306381C0C04130E380E16
081317A238072310149013A33803C1A014E0380180C0A319107F8F1C>I<38FE3F80383C
1E00EA1C086C5AEA0F306C5A6C5A12017F1203EA0270487E1208EA181CEA381E38FC3FC0
12107F8F14>I<38FF0F80383C0700EA1C061304A26C5AA26C5AA3EA03A0A2EA01C0A36C
5AA248C7FCA212E112E212E4127811177F8F14>I E /Fl 4 53 df<1218127812981218
AC12FF08107D8F0F>49 D<121FEA6180EA40C0EA806012C01200A213C0EA0180EA030012
065AEA10201220EA7FC012FF0B107F8F0F>I<121FEA2180EA60C0A212001380EA010012
1FEA00801340136012C0A2EA8040EA6080EA1F000B107F8F0F>I<EA0180A21203120512
0D121912111221124112C1EAFFE0EA0180A4EA0FE00B107F8F0F>I
E /Fm 5 53 df<1330ABB512FCA238003000AB16187E931B>43 D<1206120E12FE120EB1
EAFFE00B157D9412>49 D<EA0F80EA30E0EA4070EA8030EAC03812E0124012001370A213
6013C0EA0180EA03001206EA0C081208EA1018EA3FF0127F12FF0D157E9412>I<EA0FE0
EA3030EA6018EA701CA21200131813381360EA07E0EA00301318130C130EA212E0A2EAC0
0CEA4018EA3030EA0FE00F157F9412>I<1330A2137013F0120113701202120412081218
12101220124012C0EAFFFEEA0070A5EA03FE0F157F9412>I E /Fn
61 123 df<91383F03E09138C38470903901878CF0010313989138033860D907001300A3
5D130EA390B6FC90380E00E05BA44A5A1338A549485AA54948C7FCA4EBC00E1201140CEA
318638798F1838F31E1038620C60383C07C02429829F1C>11 D<EC3FE0ECE01090380180
3801031378A290380700301500A3130EA390B512E0EB0E0090381C01C0A4EC03801338A3
EC0700A2137801701310EC0E20A313609038E00640EC038091C7FC5BA21201EA31801279
48C8FC1262123C1D29829F1A>I<EC3FCEECE0EE90380181FC1303EC00DC49131C1538A3
130E1570A290B512F090380E00704913E0A4EC01C01338A3EC0380A213701588EC0710A3
13E0EC0320EC01C091C7FC5B1201A2EA3180127948C8FC1262123C1F29829F1B>I<9139
3FC0FF809139E0E38040903A0181E600E00103EBEC01EC80DC903A07001C00C003181300
1538A2130EA25D90B7128090390E007003EE07005BA215E0160EA25BA24A485AA3017015
40EE3880EC0380A301E0EC1900ED000E4A90C7FC13C0140612013831860E38798F0C38F3
1E1838620C30383C07C02B29829F28>I<121C123E127EA2123A12021204A21208A21210
122012401280070E769F0E>39 D<130113021304130813101320136013C0EA0180A2EA03
005A1206120E120C121C12181238A212301270A21260A212E0A25AAD12401260A212207E
A27E102E79A113>I<13107F7F130613021303A37F1480A71303A31400A35BA21306A213
0E130CA2131C1318133813301370136013E05B485A90C7FC5A12065A5A5A5A1280112E80
A113>I<121C123CA41204A21208A212101220A212401280060E7D840E>44
D<EA7FF0EAFFE0127F0C037D8A10>I<127012F8A212F012E005057B840E>I<EB0F80EB30
E0EBE070EA01C0380380301438EA0700481378A2120E121E14704813F0A4387801E0A314
C0EA700312F01480130714001270130E5BEA30386C5AEA0FC0151F7C9D17>48
D<1302A21306130E133C13DCEA031C12001338A41370A413E0A4EA01C0A4EA0380A41207
EAFFF80F1E7B9D17>I<131FEB61C0EB80E0EA010000021370134012041320380840F0A3
EB80E0EA0901000613C038000380EB0700130C5B13605B0003C7FC12044813405A1480EA
2001EA7E033847FF00EA41FEEA80FC1378141F7C9D17>I<EB1F80EB60E0EB8070380100
3000021338EA0440A21320EB407013C038038060C712E0EB01C0EB030013FE131C130613
071480A312301278A238F00F001280EA401E131C5BEA30E0EA0F80151F7C9D17>I<EB80
603801FFC01480EBFE0090C7FC1202A45AA213F8EA050CEA0A06EA0C07120800001380A4
EB0F00127012F0130EEAE01EEA801C5B1330EA4060EA61C0001FC7FC131F7B9D17>53
D<3804E010EA0BF0000F1320001F1340381E19C038380E80EA3001386003001240EA8006
EA000E130C131C131813385BA213F05B1201A2485AA3485AA3120F90C7FCA21206141F79
9D17>55 D<131FEB7180EBC0C0EA0180000313E0EA07005A1301121EA314C0EA1C03A313
07EB0F80120CEA06373803C700EA000F130EA25B1260EAF0385BEAE060EA80C0EA438000
3EC7FC131F7B9D17>57 D<1207120F121FA2120E1200AA127012F8A212F012E008147B93
0E>I<14021406A2140E141EA2143F142F144F14CF148FEB010FA21302A213041308A201
10138014071320EB3FFFEB40071380A2EA0100A2120212061204001E14C039FF807FF81D
207E9F22>65 D<ECFE02903807818690381C004C49133C136049131C00011418485A48C7
FC5A001E1410A2481400A25AA45AA415801270A2EC01007E140200185B6C13186C132038
0381C0D800FEC7FC1F217A9F21>67 D<90B5128090381E00E015701538151C5B150EA35B
A449131EA44848133CA3157848481370A215E0EC01C0380780031580EC0E005C380F0070
B512C01F1F7D9E22>I<48B512FE39001E001C150C1504A25BA490387804081500A2140C
495AEBFFF8EBF018A23801E010A3EC001048481320A21540A24848138014011500140738
0F001FB512FE1F1F7D9E1F>I<48B512FC39001E003815181508A25BA4491310EC0800A3
495A1430EBFFF0EBF0303801E020A44848C7FCA4485AA4120FEAFFF81E1F7D9E1E>I<EC
FC04903807030C90381C00980130137813E04848133848481330A248C7FC120E001E1420
A2481400A25AA45AECFFF0EC0780A2EC0F001270A3141E7E0018133E001C132E6C13CC38
038304D800FCC7FC1E217A9F23>I<9039FFF1FFE090391F003E00011E133CA3495BA449
5BA449485A90B5FCEBF001A24848485AA44848485AA4484848C7FCA4000F5B39FFF1FFE0
231F7D9E22>I<3801FFF038001F00131EA35BA45BA45BA4485AA4485AA4485AA4120FEA
FFF0141F7D9E12>I<3801FFF8D8001FC7FC131EA35BA45BA45BA4485AA315803903C001
00A25C140238078006A25C141C380F0078B512F8191F7D9E1D>76
D<D801FEEC7FC0D8001EECFC005E0117EB0178A20127EB02F01504A215080147EB09E015
111521A20187495AEB83801583A23A01038107801482A2148400024AC7FC14881490A239
0401E01EA214C0000C1380001C143E3AFF8103FFC02A1F7D9E29>I<01FFEB3FE0011FEB
0F001504EB1780A201275BEB23C0A3903841E010A214F0134001805B1478A348486C5AA3
141E00025CA2140FA24891C7FC80A2120C001C1302EAFF80231F7D9E22>I<EB01FCEB07
0790381C01C090383000E001E0136048481370485A0007143890C7FC120E121E121C123C
A2481478A44814F0A215E0140115C0140300701480EC070000785B0038131E5C6C13706C
5B38078380D801FCC7FC1D217A9F23>I<48B5128039001E00E015701538153C5BA44913
78A215F015E09038F003C0EC0F00EBFFFC01F0C7FC485AA4485AA4485AA4120FEAFFF01E
1F7D9E1F>I<90B5FC90381E03C0EC00E0157015785BA44913F0A2EC01E015C09038F007
00141EEBFFF0EBF01C48487E140F8015803903C00F00A43807801E1508A21510000F130E
D8FFF01320C7EA03C01D207D9E21>82 D<903807E04090381C18C09038300580EB600313
C000011301018013001203A391C7FC7FA213F86CB47E14E06C6C7E131FEB01F8EB0078A2
1438A21220A2143000601370146014E000705B38E80380D8C606C7FCEA81F81A217D9F1A
>I<000FB512FC391E03C03800181418001014081220EB078012601240A239800F001000
001400A3131EA45BA45BA45BA41201387FFF801E1F799E21>I<393FFC0FF83907C003C0
9038800100A3380F0002A4001E5BA4485BA4485BA4485BA35CA200705B49C7FCEA3002EA
3804EA0C18EA07E01D20779E22>I<3BFFE1FFC07F803B1F003E001C00001E013C131816
10143E021E5B121F6C013E5BA2025E5B149E4BC7FC9038011E02A201025BA201045BA201
085BA201105B13205D01405BA2D9801FC8FC80EB000E7E0006130CA2000413082920779E
2D>87 D<EBF180380389C038070780EA0E03121C123C383807001278A3EAF00EA31420EB
1C40A2EA703C135C38308C80380F070013147C9317>97 D<EA0780123FEA0700A4120EA4
5AA213F0EA1D0CEA3A0E123CEA380FA21270A4EAE01EA3131C133C1338EA607013E0EA31
C0EA1F0010207B9F15>I<137EEA01C138030080EA0E07121E001C1300EA3C0248C7FCA3
5AA5EA70011302EA3004EA1838EA07C011147C9315>I<1478EB03F8EB0070A414E0A4EB
01C0A213F1EA038938070780EA0E03121C123C383807001278A3EAF00EA31420EB1C40A2
EA703C135C38308C80380F070015207C9F17>I<137CEA01C2EA0701120E121C123CEA38
02EA780CEA7BF0EA7C0012F0A4127013011302EA3804EA1838EA07C010147C9315>I<14
78EB019CEB033CA2EB07181400A2130EA5EBFFE0EB1C00A45BA55BA55BA5485AA35B1231
007BC7FC12F31266123C1629829F0E>I<EB1E30EB7138EBE0F03801C070EA03801207EB
00E05AA3381E01C0A4EB0380A2EA0E07130B38061700EA01E7EA0007A2130EA21230EA78
1C485AEA6070EA3FC0151D7F9315>I<EA01E0120FEA01C0A4485AA448C7FCA2131E1363
380E8180380F01C0120EA2381C0380A438380700A3EB0E1000701320A2131CEB0C4000E0
13803860070014207D9F17>I<13C0EA01E0A213C0C7FCA7120E12131223EA4380EA4700
A21287120EA35AA3EA38401380A21270EA31001232121C0B1F7C9E0E>I<EA01E0120FEA
01C0A4485AA448C7FCA2EB03C0EB0420380E08E013111321EB40C0381C8000001DC7FC12
1EEA1FC0EA38E01370A2EB384038707080A3EB310012E0EA601E13207D9F15>107
D<EA03C0121FEA0380A4EA0700A4120EA45AA45AA45AA3127112E2A4126412380A207C9F
0C>I<391C0F80F0392630C318394740640C903880680EEB0070A2008E495A120EA34848
485AA3ED70803A3803807100A215E115623970070064D83003133821147C9325>I<381C
0F80382630C0384740601380EB0070A2008E13E0120EA3381C01C0A3EB038400381388A2
EB0708EB031000701330383001C016147C931A>I<137CEA01C338030180000E13C0121E
001C13E0123C1278A338F003C0A3EB07801400EA700F130EEA3018EA1870EA07C013147C
9317>I<3801C1E0380262183804741C1378EB701EA2EA08E01200A33801C03CA3143838
038078147014E0EBC1C038072380EB1E0090C7FCA2120EA45AA2B47E171D809317>I<EB
F040380388C038070580EA0E03121C123C383807001278A3EAF00EA45BA2EA703C135CEA
30B8EA0F381200A25BA45BA2EA0FFE121D7C9315>I<EA1C1EEA266138278380EA478713
07EB0300008EC7FC120EA35AA45AA45A123011147C9313>I<13FCEA0302EA0601EA0C03
130713061300EA0F8013F0EA07F8EA03FCEA003E130E1270EAF00CA2EAE008EA4010EA20
60EA1F8010147D9313>I<EA018013C0EA0380A4EA0700A2EAFFF0EA0700120EA45AA45A
A31320EA7040A21380A2EA3100121E0C1C7C9B0F>I<000E13C0001313E0382301C0EA43
81EA4701A238870380120EA3381C0700A31410EB0E201218A2381C1E40EA0C263807C380
14147C9318>I<380E0380EA1307002313C0EA4383EA4701130000871380120EA3381C01
00A31302A25BA25BEA0E30EA03C012147C9315>I<000EEBC1C0001313E3392301C3E038
4381C1384701C015603987038040120EA3391C070080A3EC0100A21306EB0F02000C5B38
0E13083803E1F01B147C931E>I<38038380380CC440381068E013711220EB70C03840E0
001200A3485AA314403863808012F3EB810012E5EA84C6EA787813147D9315>I<000E13
C0001313E0382301C0EA4381EA4701A238870380120EA3381C0700A4130E1218A2EA1C1E
EA0C3CEA07DCEA001CA25B12F05BEAE060485AEA4380003EC7FC131D7C9316>I<3801C0
403803E080EA07F1380C1F00EA0802C65A5B5B5B5B5B48C7FC1202485AEA08021210EA3E
0CEA63FCEA41F8EA80E012147D9313>I E /Fo 24 119 df<1380EA0100120212065AA2
5AA25AA35AA412E0AC1260A47EA37EA27EA27E12027EEA0080092A7C9E10>40
D<7E12407E12307EA27EA27EA37EA41380AC1300A41206A35AA25AA25A12205A5A092A7E
9E10>I<126012F0A2126004047C830C>46 D<EA07C0EA1830EA201CEA400C130EEAF00F
12F81307A21270EA000F130EA2131CA213381370136013C0EA0180EA0300EA0601120C12
18EA1002EA3FFE127F12FF101C7E9B15>50 D<007FB512C0B612E0C9FCA8B612E06C14C0
1B0C7E8F20>61 D<B5FC380F01E0EB007880141C141EA4141C143C5CEB01E001FFC7FCEB
01E0EB0070147880A61510A2141CA239FFF00E20C7EA03C01C1D7E9B1F>82
D<12FEA212C0B3B312FEA207297C9E0C>91 D<12FEA21206B3B312FEA20729809E0C>93
D<EA1FC0EA3070EA78387F12301200A2EA01FCEA0F1C12381270126000E01340A3EA603C
38304E80381F870012127E9115>97 D<12FC121CAA137CEA1D87381E0180381C00C014E0
14601470A6146014E014C0381E018038190700EA10FC141D7F9C17>I<EA03F8EA0C0CEA
181E1230EA700CEA600012E0A61260EA70021230EA1804EA0C18EA03E00F127F9112>I<
EB1F801303AAEA03F3EA0E0BEA1807EA30031270126012E0A6126012701230EA1807EA0E
1B3803E3F0141D7F9C17>I<EA07E0EA0C30EA1818EA300CEA700EEA600612E0EAFFFEEA
E000A41260EA70021230EA1804EA0C18EA03E00F127F9112>I<13F8EA018CEA071E1206
EA0E0C1300A6EAFFE0EA0E00B0EA7FE00F1D809C0D>I<EB03803807C4C0EA1C78383838
8038301800EA701CA4EA3018EA38386C5AEA27C00020C7FCA21230EA3FF86CB4FC1480EA
2003386001C0EAC000A33860018038300300EA1C0EEA07F8121C7F9215>I<12FC121CAA
137C1387EA1D03001E1380121CAD38FF9FF0141D7F9C17>I<1218123CA21218C7FCA712
FC121CB0EAFF80091D7F9C0C>I<12FC121CB3A9EAFF80091D7F9C0C>108
D<EAFC7CEA1C87EA1D03001E1380121CAD38FF9FF014127F9117>110
D<EA03F0EA0E1CEA1806487E00701380EA600100E013C0A600601380EA700300301300EA
1806EA0E1CEA03F012127F9115>I<EAFCE0EA1D38EA1E78A2EA1C301300ACEAFFC00D12
7F9110>114 D<EA1F90EA2070EA4030EAC010A212E0EAF800EA7F80EA3FE0EA0FF0EA00
F8EA8038131812C0A2EAE010EAD060EA8FC00D127F9110>I<1204A4120CA2121C123CEA
FFE0EA1C00A91310A5120CEA0E20EA03C00C1A7F9910>I<38FF07E0383C0380381C0100
A2EA0E02A2EA0F06EA0704A2EA0388A213C8EA01D0A2EA00E0A3134013127F9116>118
D E /Fp 43 122 df<EB1FC0EB7020EBC0103801803800031378EA0700143091C7FCA7B5
12F8380700781438B2397FE1FF80192380A21B>12 D<127012F812FCA212741204A41208
A21210A212201240060F7C840E>44 D<EAFFF8A20D02808B10>I<127012F8A312700505
7C840E>I<EA01F0EA071CEA0C06487E00381380A2387001C0A400F013E0AE007013C0A3
EA780300381380A2381C0700EA0C06EA071CEA01F013227EA018>48
D<13801203120F12F31203B3A9EA07C0EAFFFE0F217CA018>I<EA03F0EA0C1CEA100700
201380384003C0A2008013E012F0EAF801A3EA2003120014C0A2EB07801400130E5B1318
5B5B5B485A90C7FC000213205A5A00181360481340383FFFC05AB5FC13217EA018>I<EA
03F8EA0C1EEA100F38200780004013C0127813031307123800001380A214005B130C1338
EA03F0EA001C130FEB0780A2EB03C0A214E01220127012F8A200F013C01240EB07801220
38100F00EA0C1CEA03F013227EA018>I<1303A25BA25B1317A213271367134713871201
13071202120612041208A212101220A2124012C0B512F838000700A7EB0F80EB7FF01521
7FA018>I<00101380381E0700EA1FFF5B13F8EA17E00010C7FCA6EA11F8EA120CEA1C07
381803801210380001C0A214E0A4127012F0A200E013C01280EA4003148038200700EA10
06EA0C1CEA03F013227EA018>I<12401260387FFFE014C0A23840008038C00100128013
02A2485A5BA25B5BA21360134013C0A21201A25B1203A41207A76CC7FC13237DA118>55
D<EA01F0EA060C487EEA1807383803801270A238F001C0A314E0A5127013031238EA1805
120CEA0619EA03E1380001C0A3EB0380A21230387807001306EA700CEA20186C5AEA0FC0
13227EA018>57 D<B512F8380F800E0007EB0780EC03C015E0140115F0A515E01403EC07
C0EC0F80EC3E00EBFFFE9038800780EC03C0EC01E015F0140015F8A6EC01F0A2EC03E0EC
07C0000FEB0F00B512FC1D227EA123>66 D<903807E0109038381830EBE0063901C00170
39038000F048C7FC000E1470121E001C1430123CA2007C14101278A200F81400A8127815
10127C123CA2001C1420121E000E14407E6C6C13803901C001003800E002EB381CEB07E0
1C247DA223>I<B612C0380F80070007130114001540A215601520A314201500A3146014
E013FF138014601420A491C7FCA9487EEAFFFE1B227EA120>70 D<903807F00890383C0C
18EBE0023901C001B839038000F848C71278481438121E15185AA2007C14081278A200F8
1400A7EC1FFF0078EB00F81578127C123CA27EA27E7E6C6C13B86C7E3900E0031890383C
0C08903807F00020247DA226>I<EAFFFCEA0FC0EA0780B3ACEA0FC0EAFFFC0E227EA112>
73 D<D8FFC0EB03FF000F15F0000715E0D805E01305A2D804F01309A301781311A36D13
21A36D1341A26D1381A39038078101A3EB03C2A2EB01E4A3EB00F8A31470120E001FEC03
F03AFFE0203FFF28227EA12D>77 D<EB0FE0EB783CEBE00E3903C0078039078003C0390F
0001E0000E1300001E14F0481478A2007C147CA20078143CA200F8143EA90078143C007C
147CA2003C1478003E14F8001E14F06CEB01E0A239078003C03903C007803900E00E00EB
783CEB0FE01F247DA226>79 D<B512F0380F803C0007130FEC078015C0140315E0A615C0
14071580EC0F00143CEBFFF00180C7FCAE487EEAFFFC1B227EA121>I<B512E0380F803C
0007130E6E7E81140381A55D14075D020EC7FC143CEBFFE0EB80708080141E140E140FA4
81A3168015C014073A0FC003C10039FFFC01E2C8127C21237EA124>82
D<3803F020380C0C60EA1802383001E0EA70000060136012E0A21420A36C1300A2127812
7FEA3FF0EA1FFE6C7E0003138038003FC0EB07E01301EB00F0A214707EA46C1360A26C13
C07E38C8018038C60700EA81FC14247DA21B>I<007FB512F83978078078006014180040
1408A300C0140C00801404A400001400B3A3497E3801FFFE1E227EA123>I<EA1FE0EA30
38EA780C130EEA30071200A313FFEA07C7EA1E07123C1278127000F01308A3130FEA7817
383C2390380FC1E015157E9418>97 D<120E12FE121E120EAB131FEB61C0EB8060380F00
30000E1338143C141C141EA7141C143C1438000F1370380C8060EB41C038083F0017237F
A21B>I<EA01FEEA0703380C0780121C383803000078C7FC127012F0A712700078134012
386C1380380C0100EA0706EA01F812157E9416>I<14E0130F13011300ABEA01F8EA0704
EA0C02EA1C01EA38001278127012F0A7127012781238EA1801EA0C0238070CF03801F0FE
17237EA21B>I<EA01FCEA0707380C0380381C01C01238007813E0EA700012F0B5FC00F0
C7FCA512700078132012386C13406C138038070300EA00FC13157F9416>I<133E13E338
01C780EA0387130748C7FCA9EAFFF80007C7FCB27FEA7FF0112380A20F>I<14703803F1
98380E1E18EA1C0E38380700A200781380A400381300A2EA1C0EEA1E1CEA33F00020C7FC
A212301238EA3FFE381FFFC06C13E0383000F0481330481318A400601330A2003813E038
0E03803803FE0015217F9518>I<120E12FE121E120EABEB1F80EB60C0EB80E0380F0070
A2120EAF38FFE7FF18237FA21B>I<121C123EA3121CC7FCA8120E127E121E120EB1EAFF
C00A227FA10E>I<120E12FE121E120EB3ADEAFFE00B237FA20E>108
D<390E1FC07F3AFE60E183803A1E807201C03A0F003C00E0A2000E1338AF3AFFE3FF8FFE
27157F942A>I<380E1F8038FE60C0381E80E0380F0070A2120EAF38FFE7FF18157F941B>
I<EA01FCEA0707380C0180381800C0003813E0481370A200F01378A700701370007813F0
003813E0381C01C0380E038038070700EA01FC15157F9418>I<EA0E3CEAFE46EA1E8FEA
0F0F13061300120EAD120FEAFFF010157F9413>114 D<EA0F88EA3078EA601812C01308
A212E0EAF000127FEA3FE0EA0FF0EA01F8EA003CEA801C130CA212C01308EAE018EAD030
EA8FC00E157E9413>I<1202A41206A3120E121E123EEAFFFCEA0E00AB1304A6EA070812
03EA01F00E1F7F9E13>I<000E137038FE07F0EA1E00000E1370AD14F0A2380601703803
82783800FC7F18157F941B>I<39FF8FF87F393E01E03C001CEBC01814E0000E1410EB02
60147000071420EB04301438D803841340EB8818141CD801C81380EBD00C140E3900F00F
00497EA2EB6006EB400220157F9423>119 D<38FF83FE381F00F0000E13C06C1380EB81
00EA0383EA01C2EA00E41378A21338133C134E138FEA0187EB0380380201C0000413E0EA
0C00383E01F038FF03FE17157F941A>I<38FF80FE381E00781430000E1320A26C1340A2
EB80C000031380A23801C100A2EA00E2A31374A21338A31310A25BA35B12F05B12F10043
C7FC123C171F7F941A>I E /Fq 21 118 df<B51280A311037F9016>45
D<B51280A23807F0006C5AB3B3A7487EB51280A211317DB017>73
D<B512C0A2D807F0C8FC6C5AB3AA1620A41640A416C0A21501A21503ED0780151F000714
7FB7FCA223317DB029>76 D<D8FFF0ED7FF8A200071700D802F815BEA3017CEC013EA26D
1402A36D1404A36D6C1308A36D6C1310A36D6C1320A26D6C1340A36D6C1380A391387C01
00A3EC3E02A36E5AA2EC0F88A3EC07D0A3EC03E0A300076D5AD80F80157FD8FFF891380F
FFF8EC008035317CB03D>I<B612E015FC3907E0003F0003EC0F80ED03C0ED01E016F0ED
00F8A21678167CA6167816F816F0150116E0ED03C0ED0F80ED3E0090B512F801E0C8FCB3
A3487EB57EA226317DB02D>80 D<90387F80203801FFE03907C07860380F001C001EEB06
E048130300381301007813001270156012F0A21520A37E1500127C127E7E13C0EA1FF86C
B47E6C13F06C13FCC613FF010F1380010013C0EC1FE01407EC03F01401140015F8A26C14
78A57E15706C14F015E07E6CEB01C000ECEB038000C7EB070038C1F01E38807FFCEB0FF0
1D337CB125>83 D<B5398007FFC0A2D807F0C7EA7C006C4814381610B3AF00015D7FA200
005DA201785C6D130193C7FC6D1306903807800C903803E078903800FFF0EC3F802A327C
B032>85 D<13FE380303C0380C00E00010137080003C133C003E131C141EA21208C7FCA3
EB0FFEEBFC1EEA03E0EA0F80EA1F00123E123C127C481404A3143EA21278007C135E6CEB
8F08390F0307F03903FC03E01E1F7D9E21>97 D<EB1FC0EBF0303801C00C38078002EA0F
00000E130F001E5B5AA2007C1304007890C7FC12F8A91278127C123C15807E000EEB0100
120F380780023801C00C3800F030EB1FC0191F7E9E1D>99 D<15F0141FA214011400AFEB
0FC0EB70303801C00C3803800238070001120E001E13005AA2127C1278A212F8A71278A2
127C123CA27E000E13016C1302380380046C6C487E3A00F030FF80EB1FC021327EB125>
I<EB3F80EBE0E0380380383807003C000E7F121E001C7F123C127C00781480140712F8A2
B6FC00F8C8FCA61278127C123C15807E000EEB0100000F13027E3801C00C3800F030EB1F
C0191F7E9E1D>I<15F090387F03083901C1C41C380380E8390700700848EB7800001E7F
A2003E133EA6001E133CA26C5B6C13706D5A3809C1C0D8087FC7FC0018C8FCA5121C7E38
0FFFF86C13FF6C1480390E000FC00018EB01E048EB00F000701470481438A500701470A2
6C14E06CEB01C00007EB07003801C01C38003FE01E2F7E9F21>103
D<120FEA1F80A4EA0F00C7FCABEA0780127FA2120F1207B3A6EA0FC0EAFFF8A20D307EAF
12>105 D<EA078012FFA2120F1207B3B3A7EA0FC0EAFFFCA20E327EB112>108
D<260780FEEB1FC03BFF83078060F0903A8C03C180783B0F9001E2003CD807A013E4DA00
F47F01C013F8A2495BB3A2486C486C133F3CFFFC1FFF83FFF0A2341F7E9E38>I<380780
FE39FF83078090388C03C0390F9001E0EA07A06E7E13C0A25BB3A2486C487E3AFFFC1FFF
80A2211F7E9E25>I<EB1FC0EBF0783801C01C38070007481480001EEB03C0001C130100
3C14E0A248EB00F0A300F814F8A8007814F0007C1301003C14E0A26CEB03C0A26CEB0780
3907800F003801C01C3800F078EB1FC01D1F7E9E21>I<380783E038FF8418EB887CEA0F
90EA07A01438EBC000A35BB3487EEAFFFEA2161F7E9E19>114 D<3801FC10380E033038
1800F048137048133012E01410A37E6C1300127EEA3FF06CB4FC6C13C0000313E038003F
F0EB01F813006C133CA2141C7EA27E14186C1338143000CC136038C301C03880FE00161F
7E9E1A>I<1340A513C0A31201A212031207120F381FFFE0B5FC3803C000B01410A80001
132013E000001340EB78C0EB1F00142C7FAB19>I<D8078013F000FF131FA2000F130100
071300B31401A300031302EBC0040001497E3A007030FF80EB1FC0211F7E9E25>I
E /Fr 85 127 df<127012F8B012701200A5127012F8A31270051C779B18>33
D<EA4010EAE038EAF078EAE038AAEA60300D0E7B9C18>I<EA0306EA078FA6387FFFC0B5
12E0A26C13C0380F1E00A6387FFFC0B512E0A26C13C0381E3C00A6EA0C18131C7E9B18>
I<EA3803387C0780A2EAEE0F1400A25B131EA2133EEA7C3CA2EA387CEA0078A213F85B12
015BA212035BA21207EB8380EB87C0120FEB0EE0A2121F121EA2123E383C07C0A2381803
8013247E9F18>37 D<1238127CA2127E123E120EA3121CA2123812F812F012C0070E789B
18>39 D<137013F0EA01E0EA03C0EA0780EA0F00121E121C5AA25AA45AA81270A47EA27E
121E7EEA0780EA03C0EA01F0120013700C24799F18>I<126012F012787E7E7EEA078012
03EA01C0A2EA00E0A41370A813E0A4EA01C0A2EA03801207EA0F00121E5A5A5A12600C24
7C9F18>I<EA01C0A4EA41C138F1C780EAFDDF387FFF00EA1FFCEA07F0A2EA1FFCEA7FFF
38FDDF80EAF1C73841C100EA01C0A411147D9718>I<136013F0A7387FFFC0B512E0A26C
13C03800F000A7136013147E9718>I<121C123E127E127F123F121F1207120E121E127C
12F81260080C788518>I<387FFFC0B512E0A26C13C013047E8F18>I<1230127812FCA212
7812300606778518>I<1303EB0780A2130F14005B131EA2133E133C137C1378A213F85B
12015B12035BA212075B120F90C7FCA25A121E123E123CA2127C127812F85AA212601124
7D9F18>I<EA01F0EA07FC487EEA1F1FEA1C0738380380007813C0EA7001A238E000E0A9
EAF001007013C0A2EA780300381380381C0700EA1F1FEA0FFE6C5AEA01F0131C7E9B18>
I<EA01801203A21207120F123F12FF12FB12431203B0EA7FFCEAFFFEEA7FFC0F1C7B9B18
>I<EA03F0EA0FFEEA3FFF387C0F80387003C0EAE00138F000E0A21260C7FCA2EB01C0A2
1303EB0780EB0F00131E5B5B5B485AEA07C0485A381E00E05AEA7FFFB5FC7E131C7E9B18
>I<EA07F8EA1FFE487E38780780EB03C0130112301200EB0380A2EB0F00EA03FF5B7F38
000780EB03C01301EB00E0A312F0A2EB01C01303387C0780383FFF006C5AEA03F8131C7E
9B18>I<131F5B1377A213E7120113C7EA038712071307120E121E123C1238127812F0B5
12F8A338000700A6EB7FF0A3151C7F9B18>I<383FFF80A30038C7FCA8EA3BF8EA3FFE7F
383C0780383003C0EA0001EB00E0A2126012F0A238E001C0EA7003387C0F80383FFF00EA
1FFCEA03F0131C7E9B18>I<137E48B4FC00071380380F83C0EA1E03121C3838018090C7
FC5AA2EAE1F8EAE7FEB5FC38FE078038F803C0EAF001EB00E05A7E1270A3383801C0EA3C
03381E0780380FFF006C5AEA01F8131C7E9B18>I<12E0B512E0A214C038E00380EB0700
C65A131E131C5BA25B13F05BA2485AA3485AA448C7FCA7131D7E9C18>I<EA03F0EA0FFC
487EEA3C0F38780780EA700338E001C0A314E0A21270EA7803EA3C0FEA1FFFEA0FFEEA03
F0C7FCEB01C0A338300380EA7807EB0F00133EEA3FFCEA1FF0EA07C0131C7E9B18>57
D<1230127812FCA2127812301200A81230127812FCA2127812300614779318>I<121812
3C127EA2123C12181200A81218123C127EA2123E121E120E121C123C127812F01260071A
789318>I<14C0EB03E01307EB1FC0EB3F80EBFE00485AEA07F0485AEA3F8048C7FC12FC
A2127F6C7EEA0FE06C7EEA01FC6C7EEB3F80EB1FC0EB07E01303EB00C013187E9918>I<
387FFFC0B512E0A3C8FCA4B512E0A36C13C0130C7E9318>I<126012F87E127F6C7EEA0F
E06C7EEA01FC6C7EEB3F80EB1FC0EB07E0A2EB1FC0EB3F80EBFE00485AEA07F0485AEA3F
8048C7FC12FC5A126013187E9918>I<137CEA01FEEA07FF380F8780381E03C0EA3C1DEA
387F3870FFE0EA71E313C112E1EAE380A638E1C1C0127113E33870FF8038387F00EA3C1C
381E00E0EA0F833807FFC00001138038007E00131C7E9B18>64 D<137013F8A213D8A2EA
01DCA3138CEA038EA4EA0707A5380FFF80A3EA0E03381C01C0A3387F07F000FF13F8007F
13F0151C7F9B18>I<EA7FFCB5FC6C1380381C03C01301EB00E0A4130114C01307381FFF
80140014C0EA1C03EB00E014F01470A414F014E01303387FFFC0B51280387FFE00141C7F
9B18>I<EBF8E0EA03FEEA07FFEA0F07EA1E03EA3C01EA38005AA214005AA8127014E0A2
7E123C381E01C0EA0F073807FF803803FE00EA00F8131C7E9B18>I<EA7FF8EAFFFE6C7E
381C0F80EB03C0A2EB01E01300A214F01470A814F014E0A2130114C01303EB0F80387FFF
00485AEA7FF8141C7F9B18>I<B512F0A3381C0070A41400A2130EA3EA1FFEA3EA1C0EA3
90C7FCA21438A5B512F8A3151C7F9B18>I<B512F8A3381C0038A41400A21307A3EA1FFF
A3EA1C07A390C7FCA7EAFFC0A3151C7F9B18>I<3801F1C0EA03FDEA0FFFEA1F0FEA1C03
123813011270A290C7FC5AA5EB0FF0131F130F387001C0A213031238A2EA1C07EA1F0FEA
0FFFEA03FDEA01F1141C7E9B18>I<387F07F038FF8FF8387F07F0381C01C0A9EA1FFFA3
EA1C01AA387F07F038FF8FF8387F07F0151C7F9B18>I<EA7FFFB512806C1300EA01C0B3
A4EA7FFFB512806C1300111C7D9B18>I<387F07F038FF87F8387F07F0381C03C0EB0780
1400130E131E5B13385B13F0121DA2EA1FB8A2131C121EEA1C0EA27FA2EB0380A2EB01C0
387F03F038FF87F8387F03F0151C7F9B18>75 D<EAFFC0A3001CC7FCB114E0A5B5FCA313
1C7E9B18>I<38FC01F8EAFE03A2383B06E0A4138EA2EA398CA213DCA3EA38D8A213F813
70A21300A638FE03F8A3151C7F9B18>I<387E07F038FF0FF8387F07F0381D81C0A313C1
121CA213E1A313611371A213311339A31319A2131D130DA3EA7F07EAFF87EA7F03151C7F
9B18>I<EA0FFE383FFF804813C0EA7803EA700100F013E0EAE000B0EAF001007013C0EA
7C07EA7FFF6C1380380FFE00131C7E9B18>I<EAFFFEEBFF8014C0EA1C03EB01E0130014
70A514E01301EB03C0EA1FFF1480EBFE00001CC7FCA8B47EA3141C7F9B18>I<EA7FF8EA
FFFE6C7E381C0F80130314C01301A313031480130F381FFF005BA2EA1C0F7FEB0380A514
9CA3387F01F8EAFF81387F00F0161C7F9B18>82 D<3803F1C0EA1FFF5AEA7C0FEA7003EA
E001A390C7FC12701278123FEA1FF0EA07FEC67EEB0F80EB03C01301EB00E0A2126012E0
130100F013C038F80780B5FCEBFE00EAE7F8131C7E9B18>I<387FFFF8B5FCA238E07038
A400001300B2EA07FFA3151C7F9B18>I<38FF83FEA3381C0070B36C13E0EA0F01380783
C03803FF806C1300EA007C171C809B18>I<38FE03F8EAFF07EAFE03383C01E0001C13C0
A3EA1E03000E1380A438070700A4EA038EA4EA018C13DCA3EA00D813F8A21370151C7F9B
18>I<38FE03F8A338700070A36C13E0A513F8EA39FC13DCA2001913C0A3138CA2EA1D8D
A31305000D1380EA0F07A2EA0E03151C7F9B18>I<383FFFE05AA2387001C01303EB0780
1400C65A131E131C133C5B137013F0485A5B1203485A90C7FC5A001E13E0121C123C5A12
70B5FCA3131C7E9B18>90 D<EAFFF8A3EAE000B3ACEAFFF8A30D24779F18>I<126012F0
A27E1278127C123CA2123E121E121F7EA27F12077F1203A27F12017F12007F1378A2137C
133C133E131EA2131F7F14801307A2EB030011247D9F18>I<EAFFF8A3EA0038B3ACEAFF
F8A30D247F9F18>I<EA0180EA07C0EA1FF0EA7EFCEAF83EEAE00E0F067C9B18>I<387FFF
C0B512E0A26C13C013047E7F18>I<1206121E123E12381270A212E0A312F812FC127CA2
1238070E789E18>I<EA0FF0EA1FFC487EEA3C0FEA180738000380A213FF1207121FEA7F
03127812E0A3EAF007EA780F383FFFF8EA1FFDEA07F015147E9318>I<127E12FE127E12
0EA5133EEBFF80000F13C0EBC1E01380EB0070120E1438A6000F1370A2EB80E013C1EBFF
C0000E138038063E00151C809B18>I<EA01FEEA07FF001F1380EA3E073838030048C7FC
A25AA61270EB01C01238EA3E03381FFF8000071300EA01FC12147D9318>I<EB1F80133F
131F1303A5EA03E3EA0FFBEA1FFFEA3C1FEA380FEA7007130312E0A6EA7007A2EA380FEA
3C1F381FFFF0380FFBF83803E3F0151C7E9B18>I<EA01F0EA07FCEA1FFEEA3E0F383807
80EA7003A238E001C0A2B5FCA300E0C7FC1270EB01C01238EA3E07381FFF8000071300EA
01F812147D9318>I<EB1F80EB7FC0EBFFE013E13801C0C01400A3387FFFC0B5FCA23801
C000AEEA7FFFA3131C7F9B18>I<3801E1F03807FFF85A381E1E30381C0E00487EA5EA1C
0EEA1E1EEA1FFC5BEA39E00038C7FC7EEA1FFEEBFFC04813E0387801F038700070481338
A4007813F0EA7E03381FFFC06C13803801FC00151F7F9318>I<127E12FE127E120EA513
3EEBFF80000F13C013C1EB80E01300120EAB387FC7FC38FFE7FE387FC7FC171C809B18>
I<EA0380EA07C0A3EA0380C7FCA4EA7FC012FF127F1201AEB5FCA3101D7C9C18>I<127E
12FE127E120EA5EB3FF0A3EB0780EB0F00131E5B5B5BEA0FF87F139C130EEA0E0F7FEB03
8014C0387FC7F812FF127F151C7F9B18>107 D<EAFFC0A31201B3A4B51280A3111C7D9B
18>I<38F9C1C038FFF7F013FF383E3E38EA3C3CA2EA3838AB38FE3E3EEB7E7EEB3E3E17
14809318>I<EA7E3E38FEFF80007F13C0EA0FC1EB80E01300120EAB387FC7FC38FFE7FE
387FC7FC1714809318>I<EA01F0EA0FFE487E383E0F80EA3803387001C0A238E000E0A5
EAF001007013C0EA7803383C0780EA3E0F381FFF006C5AEA01F013147E9318>I<EA7E3E
38FEFF80007F13C0380FC1E01380EB0070120E1438A6000F1370A2EB80E013C1EBFFC000
0E1380EB3E0090C7FCA7EA7FC0487E6C5A151E809318>I<3801F380EA07FBEA1FFFEA3E
1FEA380FEA7007A2EAE003A6EA7007A2EA380FEA3C1FEA1FFFEA0FFBEA03E3EA0003A7EB
1FF0EB3FF8EB1FF0151E7E9318>I<38FF0FC0EB3FE0EB7FF0EA07F0EBE060EBC0005BA2
90C7FCA9EAFFFC7F5B14147E9318>I<EA07F7EA3FFF5AEA780FEAE007A3007CC7FCEA7F
E0EA1FFCEA03FEEA001F38600780EAE003A212F038F80F00B5FC13FCEAE7F011147D9318
>I<487E1203A4387FFFC0B5FCA238038000A9144014E0A33801C1C013FF6C1380EB3E00
13197F9818>I<387E07E0EAFE0FEA7E07EA0E00AC1301EA0F033807FFFC6C13FE3801FC
FC1714809318>I<387F8FF000FF13F8007F13F0381C01C0380E0380A338070700A3138F
EA038EA3EA01DCA3EA00F8A2137015147F9318>I<38FF07F8138F1307383800E0A4381C
01C0137113F9A213D9EA1DDD000D1380A3138DEA0F8FA23807070015147F9318>I<387F
8FF0139F138F380F0700EA078EEA039EEA01DC13F81200137013F07FEA01DCEA039E138E
EA0707000E1380387F8FF000FF13F8007F13F015147F9318>I<387F8FF000FF13F8007F
13F0380E01C0EB0380A21207EB0700A2EA0387A2138EEA01CEA213CC120013DC1378A313
70A313F05B1279EA7BC0EA7F806CC7FC121E151E7F9318>I<383FFFF05AA2387001E0EB
03C0EB078038000F00131E5B13F8485AEA03C0485A380F0070121E5A5AB512F0A314147F
9318>I<EB07E0131F137FEB780013E0AB1201EA7FC0485AA26C7EEA01E01200AB1378EB
7FE0131F130713247E9F18>I<126012F0B3B012600424769F18>I<127CB4FC13C01203C6
7EAB7FEB7FC0EB3FE0A2EB7FC0EBF0005BABEA03C012FF90C7FC127C13247E9F18>I<EA
060CEA1F1EEA3FBEEAFBF8EAF1F0EA60C00F067C9B18>I E /Fs
9 117 df<90380FE0109038381C309038E002703803C00139078000F048C71270121E15
305A1510127C127800F81400A91278007C1410123CA26C1420A27E6C6C13406C6C138039
00E00300EB380CEB0FF01C217C9F24>67 D<EAFFFCEA0F8090C7FCB21401A41403140214
06A2140E143EB512FE181F7C9E1F>76 D<B46CEB07FE000715C0A2D805C0130BA2D804E0
1313A301701323A26D1343A36D1383A290380E0103A3EB0702A3EB0384A2EB01C8A3EB00
F0A21460121FD8FFE0EB7FFE271F7D9E2D>I<3803F020380C0C60381803E0EA30005A14
6012E01420A36C13007E127CEA7F80EA3FFC6CB4FC00071380000113C038000FE0130313
01EB00F014707EA46C136014E06C13C038F8018038C60300EA81FC14217C9F1C>83
D<1318A2133CA3134EA213CF1387A238010380A2000313C0EA0201A23807FFE0EA0400A2
481370A2001813380038137838FE01FF18177F961C>97 D<B512C0EA1C01130014401460
1420A213081400A21318EA1FF8EA1C1813081410A2130014301420A21460EB01E0B5FC14
177E9619>101 D<EAFFC0001CC7FCAD1440A314C0A2148013011307B5FC12177E9617>
108 D<00FCEB07F0001C1480A20016130BA200131313A338118023A23810C043A3EB6083
A2EB3103A3131AA2130C123800FEEB1FF01C177E9622>I<387FFFFC3870381C00401304
A200C0130600801302A300001300AE3803FF8017177F961B>116
D E /Ft 57 123 df<90380FF07F90397FF9FF809039F83FC7C03901E07F8F0003140FEA
07C091383F07806EC7FCA5B612F8A22607C01FC7FCB0393FF8FFF0A22220809F1F>11
D<EB0FE0EB7FF8EBF81C3801E07C1203EA07C0A2143891C7FCA3EBC1FEB5FCA23807C03E
B0393FF9FFC0A21A20809F1D>I<1238127C12FE12FFA2127F123B1203A21206A2120E12
0C12181230122008107C9F0F>39 D<1238127C12FE12FFA2127F123B1203A21206A2120E
120C12181230122008107C860F>44 D<EAFFF0A40C047F8B11>I<1238127C12FEA3127C
123807077C860F>I<EA01FCEA07FF381F07C0EA1E03003E13E0387C01F0A300FC13F8AD
007C13F0A3383E03E0001E13C0EA1F8F3807FF00EA01FC151D7E9C1A>48
D<137013F0120712FF12F91201B3A4387FFFC0A2121D7D9C1A>I<EA03FC381FFF803838
1FC0387C07E038FE03F0A214F81301127C1238EA000314F0A2EB07E0EB0FC01400131E5B
13705B3801C018EA0380EA0600481338381FFFF05A5AB5FCA2151D7E9C1A>I<EA03FC38
0FFF80381C0FC0383C07E0387E03F0A31307003C13E01200EB0FC0EB3F803803FE005B38
000F80EB07C0EB03E014F014F81238127C12FEA214F012FC387807E0383C0FC0381FFF80
3803FC00151D7E9C1A>I<EB01C013031307A2130F131F133B1373136313C3EA01831203
EA0703120E120C12181238127012E0B512FEA2380007C0A6EBFFFEA2171D7F9C1A>I<00
1C13E0EA1FFF14C01480140013FC13C00018C7FCA4EA19FE381FFF80381E07C0381803E0
381001F0120014F8A2127812FCA314F0EA7803007013E0383C0FC0380FFF00EA03FC151D
7E9C1A>I<133F3801FFC03807C0E0EA0F81381F03F0121E123E127CEB01E090C7FCEAFC
1013FF00FD13C0EB03E038FE01F0A200FC13F8A4127CA3003C13F0123E381E03E0380F07
C03807FF803801FE00151D7E9C1A>I<1260387FFFF8A214F014E014C038E0018038C003
00A21306C65A5B13381330137013F0A2485AA21203A41207A56C5A6C5A151E7D9D1A>I<
EA01FE380FFF80381E07C0383801E0EB00F01278A2127C127FEBC1E0383FE3C0381FFF80
380FFE003807FF8014C0001F13E0383C3FF0EA780FEB03F8EAF00113001478A214701278
007C13E0383E03C0380FFF803803FC00151D7E9C1A>I<EA01FCEA0FFF381F0780383E03
C0007C13E0130100FC13F0A314F8A4EA7C03A2EA3E05EA1FFDEA07F9EA0041EB01F0123C
127EEB03E0A214C0383C078038381F00EA1FFCEA07F0151D7E9C1A>I<1238127C12FEA3
127C12381200A61238127C12FEA3127C123807147C930F>I<EA07F8EA1FFE38381F80EA
780F00FC13C0A3127838301F8000001300133E5B13705BA25BA690C7FCA4EA01C0487E48
7EA36C5A6C5A12207D9F19>63 D<14E0A2497EA3497EA2EB06FCA2EB0EFEEB0C7EA2497E
A201307F141F01707FEB600FA2496C7E90B5FC4880EB8003000380EB0001A200066D7EA2
000E803AFFE00FFFE0A2231F7E9E28>65 D<903807FC0290383FFF0E9038FE03DE3903F0
00FE4848133E4848131E485A48C7120EA2481406127EA200FE1400A7127E1506127F7E15
0C6C7E6C6C13186C6C13386C6C13703900FE01C090383FFF80903807FC001F1F7D9E26>
67 D<B512FEECFFC03907E007F0EC01F86E7E157E81A2ED1F80A316C0A91680A3ED3F00
A2157E5D4A5AEC07F0B612C04AC7FC221F7E9E28>I<B612E0A23807E007140114001560
15701530A21430A21500147014F013FFA213E014701430150CA214001518A31538157815
F8EC03F0B6FCA21E1F7E9E22>I<B612E0A23807E00714011400156015701530A21430A2
1500147014F013FFA213E014701430A391C7FCA8B57EA21C1F7E9E21>I<903807FC0290
383FFF0E9038FE03DE3903F000FE4848133E4848131E485A48C7120EA2481406127EA200
FE91C7FCA591381FFFE0A2007E9038007E00A2127F7EA26C7E6C7E6C7E6C6C13FE3800FE
0190383FFF8E903807FC06231F7D9E29>I<B5FCA2EA07E0B3A9B5FCA2101F7E9E14>73
D<B57EA2D807E0C7FCB115C0A31401A3EC0380A2140F141FB6FCA21A1F7E9E1F>76
D<D8FFE0EC3FF86D147F00071600D806F814DFA3017CEB019FA26DEB031FA26D1306A290
380F800CA2903807C018A3903803E030A2903801F060A2903800F8C0A2EC7D80A2EC3F00
A3141ED8FFF0903803FFF8140C2D1F7E9E32>I<D8FFE0EBFFF07F0007EC06007FEA06FC
137E7F1480131FEB0FC0EB07E0EB03F0EB01F814FC1300147E143FEC1F8615C6EC0FE614
07EC03F6EC01FE1400A2157E153E151E150ED8FFF01306A2241F7E9E29>I<B512FEECFF
803907E00FE0EC03F0EC01F8A215FCA515F8A2EC03F0EC0FE090B51280ECFE0001E0C7FC
ACB5FCA21E1F7E9E24>80 D<B512FCECFF803907E00FE0EC03F081140181A45D14035DEC
0FE090B5128002FCC7FCEBE03FEC0F8081140781A381A31630EC03F802011360B53800FF
C0ED3F80241F7E9E27>82 D<3803FC08380FFF38381E03F8EA3800481378143812F01418
A26C13007EEA7FC013FE383FFF806C13C06C13E06C13F0C613F81307EB00FC147C143C12
C0A36C1338147800F8137038FE01E038EFFFC000811300161F7D9E1D>I<007FB512FCA2
397C07E07C0070141C0060140CA200E0140E00C01406A400001400B10003B512C0A21F1E
7E9D24>I<3CFFFC0FFFC0FFE0A23C0FC000FC000E007F00076E130CA26D151C0003D901
BF1318A2D801F85D9138031F80A22600FC076D5AEC060F01FE15E0903A7E0C07E0C0A201
3FECE18091381803F1A2D91FB801FBC7FCECB00102F013FF6D486C5AA201075C4A137CA2
010314784A133801011430331F7F9E36>87 D<EA07FC381FFF80383F07C0EB03E0EB01F0
A2120C1200133FEA07FDEA1F81EA3E01127C12F8A3EAFC02EA7E0C383FF87E380FE03E17
147F9319>97 D<B4FCA2121FAAEB1FC0EB7FF0EBE0F8EB807CEB007E143EA2143FA6143E
A2147C1380381EC1F8381C7FE038181F8018207E9F1D>I<EA01FE3807FF80381F0FC012
3EA2127CEB030000FCC7FCA6127C127E003E1360003F13C0EA1F813807FF00EA01FC1314
7E9317>I<EB07F8A21300AAEA01F8EA07FEEA1F83EA3E01EA7E00127CA212FCA6127CA2
127EEA3E01EA1F07380FFEFFEA03F818207E9F1D>I<EA01FE3807FF80380F83C0381E01
E0383E00F05A14F812FCB5FCA200FCC7FCA3127CA26C1318121E380F80703807FFE0C613
8015147F9318>I<EB3F80EBFFC03803E3E0EA07C71387120FEB83C0EB8000A5EAFFFCA2
EA0F80B0EA7FF8A213207F9F10>I<3803FC3C380FFFFE381E079E383C03DE007C13E0A5
003C13C0381E0780381FFF00EA13FC0030C7FCA21238383FFF806C13F06C13F84813FC38
78007C0070133E00F0131EA30078133CA2383F01F8380FFFE000011300171E7F931A>I<
B4FCA2121FAAEB0FC0EB3FE0EB61F0EBC0F813801300AD38FFE7FFA218207D9F1D>I<12
1C123E127FA3123E121CC7FCA6B4FCA2121FB0EAFFE0A20B217EA00E>I<B4FCA2121FAA
EB01FEA2EB00F014C0EB0380EB0700130C5B137C13FC139E130F001E1380EB07C01303EB
01E014F0EB00F838FFC3FFA218207E9F1C>107 D<B4FCA2121FB3AAEAFFE0A20B207E9F
0E>I<3AFE0FE03F8090391FF07FC03A1E70F9C3E09039407D01F0EB807E121FEB007CAC
3AFFE3FF8FFEA227147D932C>I<38FE0FC0EB3FE0381E61F0EBC0F81380EA1F00AD38FF
E7FFA218147D931D>I<48B4FC000713C0381F83F0383E00F8A248137CA200FC137EA600
7C137CA26C13F8A2381F83F03807FFC00001130017147F931A>I<38FF1FC0EB7FF0381F
E1F8EB80FCEB007EA2143E143FA6143E147E147CEB80FCEBC1F8EB7FE0EB1F8090C7FCA7
EAFFE0A2181D7E931D>I<EAFE3EEB7F80381ECFC0138FA2121FEB030090C7FCABEAFFF0
A212147E9316>114 D<EA0FE6EA3FFEEA701EEA600EEAE006A2EAF800EAFFC0EA7FF8EA
3FFCEA1FFE1203EA001FEAC007A212E0EAF006EAF81EEAFFFCEAC7F010147E9315>I<12
03A45AA25AA2123FEAFFFCA2EA1F00AA1306A5EA0F8CEA07F8EA03F00F1D7F9C14>I<38
FF07F8A2EA1F00AD1301A2EA0F063807FCFF6C5A18147D931D>I<39FFE07F80A2391F00
1C00380F8018A26C6C5AA26C6C5AA2EBF0E000015B13F900005B13FF6DC7FCA2133EA213
1CA219147F931C>I<3AFFC7FE1FE0A23A1F00F0030014F8D80F801306A29038C1BC0E00
07140CEBC3BE3903E31E18A29038F60F380001143001FE13B03900FC07E0A2EBF8030178
5BA2903830018023147F9326>I<38FFC0FFA2380F80703807C0606D5A3803E180EA01F3
6CB4C7FC137E133E133F497E136FEBC7C0380183E0380381F048C67E000E7F39FF81FF80
A219147F931C>I<39FFE07F80A2391F001C00380F8018A26C6C5AA26C6C5AA2EBF0E000
015B13F900005B13FF6DC7FCA2133EA2131CA21318A2EA783012FC5BEAC0E0EAE1C0EA7F
80001EC8FC191D7F931C>I<383FFFE0A2383C07C038380F80EA701F38603F00133E5BC6
5A1201485AEBE060EA07C0EA0F80001F13E0383F00C0EA3E01EA7C03B5FCA213147F9317
>I E /Fu 44 123 df<903901FF81FE010FEBEFFF903A7F81FF8F80D9FE01EB1FC03901
F803FE000314FCEA07F0EE0F80020190C7FCA7B712F0A32707F001FCC7FCB3A33A7FFF1F
FFE0A32A2A7FA927>11 D<B51280A611067F9016>45 D<130E131E137EEA07FE12FFA212
F81200B3ABB512FEA317277BA622>49 D<EBFF80000713F04813FC381E03FE393800FF80
007C133F00FE14C06C131F15E0140FA2127E003C131FC7FC15C0A2EC3F801500147E5C5C
495A495AEB078049C7FC131E4913E013705B3901C001C0EA0380EA0600000FB5FC5A5A5A
B61280A31B277DA622>I<EB7F803803FFF04813FC380F81FE381F007FEA3F80EC3F80A3
121F1300C7EA7F00A2147E5C495AEB07F0EBFFC0A2EB01F8EB007E801580EC1FC0A215E0
A2123C127EB4FCA215C0143F481480007CEB7F00383F01FE6CB45A000713F0C613801B27
7DA622>I<140FA25C5C5C5C5BA2EB03BFEB073F130E131C133C1338137013E0EA01C0EA
038012071300120E5A5A5A12F0B612F8A3C7EA7F00A890381FFFF8A31D277EA622>I<00
181303381F801FEBFFFE5C5C5C14C091C7FC001CC8FCA7EB7FC0381DFFF8381F80FC381E
003F1208C7EA1F8015C0A215E0A21218127C12FEA315C05A0078EB3F80A26CEB7F00381F
01FE6CB45A000313F0C613801B277DA622>I<EB07F8EB3FFE90B5FC3901FC07803903F0
0FC03807C01FEA0F80121F130048EB0F8091C7FC127EA3EAFE02EB1FF0EB3FFCEB603EEB
801F00FF14809038000FC0A24814E0A4127EA4123E003F14C07EEC1F80D80F8013003807
E07E6CB45A6C5B38003FC01B277DA622>I<1238123E003FB512F0A34814E015C0158015
003870000EA25C485B5C5CC6485AA2495A130791C7FC5B5B131E133EA2137E137CA213FC
A41201A76C5A13701C297CA822>I<EB3FC03801FFF04813FC3807C07E48C67E001E7FEC
0F80123EA2123F138001C01300EBF01F381FFC1E6D5A380FFFF86C13E06C7F6C13FC8000
077FD80F0F1380D81E0713C0EA3E01397C007FE0141F48130F14071403A315C0127C007E
EB07806CEB0F00381FC03F380FFFFC00035B38007FC01B277DA622>I<EB7F803801FFF0
00077F380FC0FC381F803E48487E007E1480A2140F00FE14C0A315E0A5007E131FA26C13
3F6C132F380F80CF3807FF8F0001130FEA0008010013C0A3EC1F80123E127FEC3F00143E
147E007E5B383E03F8381FFFE06C1380D801FEC7FC1B277DA622>I<91387FE003903907
FFFC07011FEBFF0F90397FF00F9F9039FF0001FFD801FC7F4848147F4848143F4848141F
485A160F485A1607127FA290C9FC5AA97E7F1607123FA26C7E160E6C7E6C6C141C6C6C14
3C6C6C14786CB4EB01F090397FF007C0011FB512800107EBFE009038007FF028297CA831
>67 D<B712E0A33903FC001FED07F01501A215001670A3913801C0781638A302031300A2
140F90B5FCA3EBFC0F1403A20201130EA3161C91C7FCA3163C1638167816F81501150315
1FB712F0A327297EA82C>69 D<B712C0A33903FC003FED0FE015031501A21500A316F091
3801C070A316001403A2140F90B5FCA3EBFC0F1403A21401A491C8FCA9B512FCA324297E
A82A>I<91387FE003903907FFFC07011FEBFF0F90397FF00F9F9039FF0001FFD801FC7F
484880484880484880485A82485A82127FA290CAFC5AA892B512F87E7F03001300123FA2
6C7EA26C7E6C7E6C7E6C7E6CB45B90387FF007011FB5129F0107EBFE0F9039007FF0032D
297CA835>I<B512F0A33803FC00B3B1B512F0A314297EA819>73
D<B512FCA3D803FCC8FCB3A3ED01C0A415031680A21507A2150FA2151F157F913801FF00
B7FCA322297EA828>76 D<D8FFFE92383FFF80A26D5D0003EFE000A2D9BF8014EFA2D99F
C0EB01CFA2D98FE0EB038FA3D987F0EB070FA2D983F8130EA2D981FC131CA3D980FE1338
A2027F1370A291383F80E0A391381FC1C0A291380FE380A2913807F700A3EC03FEA26E5A
A26E5AD8FFFE0203B51280A2157039297DA840>I<B612E015FE6F7E3A03FC003FE0ED0F
F06F7E6F7E150182A65E4B5A1507ED0FE0ED3FC090B500FEC7FCA29039FC00FF80ED3FC0
6F7E6F7E6F7EA9170EA21503923801FC1CB538F000FEEE7FF8EE0FE02F297EA832>82
D<9038FF80600003EBF0E0000F13F8381F80FD383F001F003E1307481303A200FC1301A2
14007EA26C140013C0EA7FFCEBFFE06C13F86C13FE80000714806C14C0C6FC010F13E0EB
007FEC1FF0140F140700E01303A46C14E0A26C13076C14C0B4EB0F80EBE03F39E3FFFE00
00E15B38C01FF01C297CA825>I<007FB71280A39039807F807FD87C00140F00781507A2
0070150300F016C0A2481501A5C791C7FCB3A490B612C0A32A287EA72F>I<3803FF8000
0F13F0381F01FC383F80FE147F801580EA1F00C7FCA4EB3FFF3801FC3FEA0FE0EA1F80EA
3F00127E5AA4145F007E13DF393F839FFC381FFE0F3803FC031E1B7E9A21>97
D<EAFFE0A3120FACEBE1FE9038EFFF809038FE07E09038F803F09038F001F89038E000FC
A2157EA2157FA8157EA315FCA29038F001F89038F803F090389C0FE090380FFF80390E01
FC00202A7EA925>I<EB3FF03801FFFC3803F03E380FC07FEA1F80EA3F00A248133E007E
90C7FCA212FEA7127EA2127F6CEB03801380001FEB0700380FE00E3803F83C3801FFF838
003FC0191B7E9A1E>I<EC7FF0A31407ACEB3F873801FFF73807F03F380FC00F381F8007
EA3F00A2127EA312FEA8127EA27EA2381F800F380FC01F3907E07FFF3801FFE738007F87
202A7EA925>I<EB3FC03801FFF03803E07C380F803E001F7F130048EB0F80127E15C0A2
00FE1307A2B6FCA248C8FCA3127EA2127F6CEB01C07E390F8003803907C007003803F01E
3800FFFCEB3FE01A1B7E9A1F>I<EB07F8EB3FFCEB7E3E3801FC7FEA03F813F01207143E
1400A7B512C0A33807F000B3A3387FFF80A3182A7EA915>I<9038FF80F00003EBE3F839
0FC1FE1C391F007C7C48137E003EEB3E10007EEB3F00A6003E133E003F137E6C137C380F
C1F8380BFFE00018138090C8FC1238A2123C383FFFF814FF6C14C06C14E06C14F0121F38
3C0007007CEB01F8481300A4007CEB01F0A2003FEB07E0390FC01F806CB5120038007FF0
1E287E9A22>I<EAFFE0A3120FAC147E9038E1FF809038E30FC001E413E0EBE80701F813
F013F0A213E0B039FFFE3FFFA3202A7DA925>I<1207EA0F80EA1FC0EA3FE0A3EA1FC0EA
0F80EA0700C7FCA7EAFFE0A3120FB3A3EAFFFEA30F2B7EAA12>I<EAFFE0A3120FB3B2EA
FFFEA30F2A7EA912>108 D<26FFC07FEB1FC0903AC1FFC07FF0903AC307E0C1F8D80FC4
9038F101FC9039C803F20001D801FE7F01D05BA201E05BB03CFFFE3FFF8FFFE0A3331B7D
9A38>I<38FFC07E9038C1FF809038C30FC0D80FC413E0EBC80701D813F013D0A213E0B0
39FFFE3FFFA3201B7D9A25>I<EB3FE03801FFFC3803F07E390FC01F80391F800FC0393F
0007E0A2007EEB03F0A300FE14F8A8007E14F0A26CEB07E0A2391F800FC0390FC01F8039
07F07F003801FFFC38003FE01D1B7E9A22>I<38FFE1FE9038EFFF809038FE0FE0390FF8
03F09038F001F801E013FC140015FEA2157FA8157E15FEA215FC140101F013F89038F807
F09038FC0FE09038EFFF809038E1FC0001E0C7FCA9EAFFFEA320277E9A25>I<38FFC1F0
EBC7FCEBC63E380FCC7F13D813D0A2EBF03EEBE000B0B5FCA3181B7F9A1B>114
D<3803FE30380FFFF0EA3E03EA7800127000F01370A27E00FE1300EAFFE06CB4FC14C06C
13E06C13F0000713F8C6FCEB07FC130000E0137C143C7E14387E6C137038FF01E038E7FF
C000C11300161B7E9A1B>I<13E0A41201A31203A21207120F381FFFE0B5FCA2380FE000
AD1470A73807F0E0000313C03801FF8038007F0014267FA51A>I<39FFE07FF0A3000F13
07B2140FA2000713173903F067FF3801FFC738007F87201B7D9A25>I<39FFFC03FFA339
0FF000F0000714E07F0003EB01C0A2EBFC0300011480EBFE070000140013FFEB7F0EA214
9EEB3F9C14FC6D5AA26D5AA36D5AA26D5AA2201B7F9A23>I<3BFFFC7FFC1FFCA33B0FE0
0FE001C02607F007EB0380A201F8EBF00700031600EC0FF801FC5C0001150EEC1FFC2600
FE1C5B15FE9039FF387E3C017F1438EC787F6D486C5A16F0ECE01F011F5CA26D486C5AA2
EC800701075CA22E1B7F9A31>I<39FFFC1FFEA33907F003803803F8079038FC0F003801
FE1E00005BEB7F3814F86D5A6D5A130F806D7E130F497EEB3CFEEB38FFEB787F9038F03F
803901E01FC0D803C013E0EB800F39FFF03FFFA3201B7F9A23>I<39FFFC03FFA3390FF0
00F0000714E07F0003EB01C0A2EBFC0300011480EBFE070000140013FFEB7F0EA2149EEB
3F9C14FC6D5AA26D5AA36D5AA26D5AA25CA21307003890C7FCEA7C0FEAFE0E131E131C5B
EA74F0EA3FE0EA0F8020277F9A23>I<003FB5FCA2EB00FEEA3C01383803FC007813F8EB
07F0EA700F14E0EB1FC0EA003F1480EB7F005B5B3801FC07120313F8EA07F0000F130F13
E0381FC00E003F131E387F803EEB00FEB5FCA2181B7E9A1E>I E
/Fv 86 128 df<90381F83E09038F06E303901C07878380380F8903800F03048EB7000A7
B612803907007000B2383FE3FF1D20809F1B>11 D<133FEBE0C0EA01C0380381E0EA0701
A290C7FCA6B512E0EA0700B2383FC3FC1620809F19>I<EB3FE013E0EA01C1EA0381EA07
00A8B5FCEA0700B2383FE7FC1620809F19>I<90381F81F89038F04F043901C07C063903
80F80FEB00F05A0270C7FCA6B7FC3907007007B23A3FE3FE3FE02320809F26>I<EA7038
EAF87CEAFC7EA2EA743AEA0402A3EA0804A2EA1008A2EA2010EA40200F0E7F9F17>34
D<9038018030A449485AA501065BA549485A007FB6FCB7128026001803C7FCA2EB3006A4
495AA2B712806C15002600C018C7FC48485AA548485AA500065BA321297E9F26>I<1270
12F812FCA212741204A31208A21210A212201240060E7C9F0D>39
D<13401380EA01005A12061204120C5AA212381230A212701260A412E0AC1260A4127012
30A212381218A27E120412067E7EEA008013400A2E7BA112>I<7E12407E12307E120812
0C7EA212077EA213801201A413C0AC1380A412031300A25A1206A25A120812185A12205A
5A0A2E7EA112>I<1303AFB612FCA2D80003C7FCAF1E207E9A23>43
D<127012F012F8A212781208A31210A31220A21240050E7C840D>I<EAFFF0A20C02808A
0F>I<127012F8A3127005057C840D>I<144014C0EB0180A3EB0300A31306A25BA35BA35B
A25BA35BA3485AA348C7FCA21206A35AA35AA25AA35AA35AA2122D7EA117>I<EA03F0EA
0E1C487EEA1806EA380738700380A400F013C0AD00701380A3EA780700381300EA1806EA
1C0E6C5AEA03F0121F7E9D17>I<13801203120F12F31203B3A6EA07C0EAFFFE0F1E7C9D
17>I<EA03F0EA0C1CEA100E487E00401380128000F013C0EAF803A3EA200712001480A2
EB0F00130E5B5B5B13605B485A48C7FC000613405A5A00101380EA3FFF5AB5FC121E7E9D
17>I<EA03F0EA0C1CEA100EEA200F007813801307A2EA380F12001400A2131E131C1370
EA07F0EA003C130E130FEB0780A214C0122012F8A300F013801240EB0F00EA200EEA183C
EA07F0121F7E9D17>I<1306A2130EA2131E132EA2134E138EA2EA010E1202A212041208
A212101220A2124012C0B512F038000E00A7EBFFE0141E7F9D17>I<EA1803EA1FFE5B5B
13E00010C7FCA6EA11F0EA161CEA180EEA10071480EA0003A214C0A3127012F0A200E013
801240EB0700EA20066C5AEA0838EA07E0121F7E9D17>I<137CEA0182EA0701380E0380
EA0C0712183838030090C7FC12781270A2EAF1F0EAF21CEAF406EAF807EB0380A200F013
C0A51270A214801238EB07001218EA0C0E6C5AEA01F0121F7E9D17>I<1240387FFFE014
C0A23840008038800100A21302485AA25B5BA25BA21360A213E05B1201A41203A76C5A13
1F7E9D17>I<EA03F0EA0C0CEA1006EA3003382001801260A3127038780300123EEA3F06
EA1FC8EA0FF0EA03F8487EEA0C7EEA103F38300F80EA6007EB01C012C01300A31480EA60
0100201300EA1002EA0C0CEA03F0121F7E9D17>I<EA03F0EA0E18487E487E13071270EB
038012F0A214C0A5EA7007A21238EA180BEA0E13EA03E338000380A3EB07001230EA7806
130EEA700CEA2018EA1070EA0FC0121F7E9D17>I<127012F8A312701200AA127012F8A3
127005147C930D>I<127012F8A312701200AA127012F012F8A212781208A31210A31220
A21240051D7C930D>I<007FB512F8B612FCC9FCA8B612FC6C14F81E0C7E9023>61
D<EA0FE0EA103CEA601EEA400EEAE00F12F0A21260EA001E131C13381370136013C01380
A2EA0100A6C7FCA5EA0380EA07C0A3EA038010207E9F15>63 D<5B497EA3497EA3EB09E0
A3EB10F0A3EB2078A3497EA2EBC03EEB801EA248B5FCEB000FA20002EB0780A348EB03C0
A2120C001E14E039FF801FFE1F207F9F22>65 D<B512E0380F0078141EA2801580A51500
5C141E147CEBFFF0EB007C141FEC0F80EC07C0140315E0A515C014071580EC0F00143EB5
12F01B1F7E9E20>I<90380FE0109038381C309038E002703803C00139078000F048C712
70121E15305A1510127C127800F81400A91278007C1410123CA26C1420A27E6C6C13406C
6C13803900E00300EB380CEB0FF01C217E9F21>I<B512F83807801EEC0780EC03C0EC01
E0EC00F015701578A2153CA3153EA8153CA2157C1578A215F0EC01E0EC03C0EC0780EC1E
00B512F81F1F7F9E23>I<B61280380F000F14031401140015C01540A314401500A214C0
130113FF130113001440A3EC0020A31540A315C01401EC0380140FB6FC1B1F7E9E1F>I<
B61280380780071401A2140015C01540A4EC2000A3146014E013FF138014601420A391C7
FCA87FEAFFFE1A1F7F9E1E>I<90380FE0109038381C309038E002703803C00139078000
F048C71270121E15305A1510127C127800F81400A7EC3FFEEC01F000781300127C123CA2
7EA27E6C7E3903C001703900E002309038380C1090380FF0001F217E9F24>I<39FFF07F
F8390F000780AD90B5FCEB0007AF39FFF07FF81D1F7E9E22>I<EAFFF0EA0F00B3ABEAFF
F00C1F7E9E10>I<3807FFC038003E00131EB3A3122012F8A3EAF01CEA403CEA6038EA10
70EA0FC012207F9E17>I<39FFF007FC390F0003E0EC0180150014025C5C5C5C5C5C49C7
FC5B497E130FEB13C0EB21E01341EB80F0EB0078A28080A280EC0780A2EC03C015E015F0
39FFF01FFE1F1F7E9E23>I<EAFFF8EA0F8090C7FCB21402A414061404A2140C141C147C
B512FC171F7E9E1C>I<B46CEB07FE000715C0A2D805C0130BA2D804E01313A301701323
A26D1343A36D1383A290380E0103A3EB0702A3EB0384A2EB01C8A3EB00F0A21460121FD8
FFE0EB7FFE271F7F9E2A>I<B4EB0FF8390F8003E0EC0080EA0BC0EA09E0A2EA08F01378
A27F7FA27FEB0780A2EB03C0EB01E0A2EB00F01478A2143C141EA2140F1407A214031401
123E38FF80001D1F7E9E22>I<EB1FE0EB70383801C00E48487E39070003804814C0001E
EB01E048EB00F0A2007C14F8A20078147800F8147CA900781478007C14F8A2003C14F000
3E1301001E14E06CEB03C06C148039038007003801E01E38007038EB1FE01E217E9F23>
I<B512E0380F007C141E80EC0780A215C0A41580A2EC0F00141E147CEBFFE090C8FCAEEA
FFF01A1F7E9E1F>I<EB1FE0EB70383801C00E48487E39070003804814C0001EEB01E000
3E14F0003C1300007C14F8A20078147800F8147CA900781478007C14F8A2003C14F0383E
0781391E0841E0390F1023C00007148039039017003801D01E3900783804EB1FF8EB001C
EC0C0CEC0E1CEC0FF8A2140715F0EC01E01E297E9F23>I<B57E380F00F0143C8080A215
80A41500A2141E5C14F0EBFF80EB01C0EB0070A280143CA3143EA31504143F141FEC0F08
39FFF00788C7EA01F01E207E9E21>I<3803F040380C0CC0EA1803EA3001EA6000A212E0
1440A36C13007E127CEA7F80EA3FF86CB4FC00071380C613C0EB1FE013031301EB00F014
707EA46C136014E06C13C038F8018038C60300EA81FC14217E9F19>I<007FB512E03878
0F010060EB006000401420A200C0143000801410A400001400B3497E3803FFFC1C1F7E9E
21>I<39FFF00FF8390F0003E0EC0080B3A46CEB01001380120314026C6C5A6C6C5AEB38
30EB0FC01D207E9E22>I<39FFF003FE391F8000F86CC7126015206C6C1340A36C6C1380
A2EBE00100011400A23800F002A213F8EB7804A26D5AA36D5AA2131F6D5AA2EB07C0A36D
5AA36DC7FC1F207F9E22>I<3BFFF07FF81FF03B1F000FC007C06C903907800180170015
C001805C00071502EC09E013C000035DEC19F01410D801E05CA2EC2078D800F05CA2EC40
3C01785CA2EC801E017C1460013C144090383D000F133F6D5CA2011E1307010E91C7FCA2
010C7F010413022C207F9E2F>I<397FF81FF8390FE007C03907C0030000031302EBE006
3801F00400005BEBF818EB78106D5AEB3E60EB1E406D5AA213076D7E497E1305EB08F0EB
18F8EB1078EB207CEB603EEB401EEB801F3901000F801407000214C000061303001FEB07
E039FFC01FFE1F1F7F9E22>I<39FFF001FF391F800078000F146012076D134000031480
7F3901F001001200EBF802EB7C06EB3C04EB3E08131EEB1F10EB0FB0EB07A014E06D5AAC
EB3FFC201F7F9E22>I<387FFFFE387E003C127800701378006013F814F0384001E01303
14C0EB07801200EB0F00131EA25B137C13785B1201EBE002EA03C0A2EA0780000F130613
00001E1304003E130C123C48133C14FCB5FC171F7E9E1C>I<12FFA212C0B3B3A512FFA2
082D7CA10D>I<EA0804EA1008EA2010A2EA4020A2EA8040A3EAB85CEAFC7EA2EA7C3EEA
381C0F0E7A9F17>I<12FFA21203B3B3A512FFA2082D80A10D>I<EA1FE0EA3030EA781813
1CEA300E1200A313FEEA078EEA1E0E1238127800F01310A3131E127838386720380F83C0
14147E9317>97 D<121C12FC121CAA137CEA1D87381E0180EB00C0001C13E01470A21478
A6147014F014E0001E13C0381A018038198700EA107C15207E9F19>I<EA01FCEA0706EA
1C0F123813060078C7FC127012F0A61270127800381380A2381C0100EA0706EA01F81114
7F9314>I<EB01C0130F1301AAEA01F1EA070DEA0C03EA180112381278127012F0A61270
A21238EA1803120CEA070D3801F1F815207F9F19>I<EA03F0EA0E1C487E487EA21270EB
038012F0A2B5FC00F0C7FCA31270A26C1380A2381C0100EA0706EA01F811147F9314>I<
137CEA01C6EA030F1207EA0E061300A7EAFFF0EA0E00B2EA7FE01020809F0E>I<14E038
03E330EA0E3CEA1C1C38380E00EA780FA5EA380E6C5AEA1E38EA33E00020C7FCA21230A2
EA3FFE381FFF8014C0383001E038600070481330A4006013606C13C0381C03803803FC00
141F7F9417>I<121C12FC121CAA137C1386EA1D03001E1380A2121CAE38FF8FF014207E
9F19>I<1238127CA31238C7FCA6121C12FC121CB1EAFF80091F7F9E0C>I<13E0EA01F0A3
EA00E01300A61370EA07F012001370B3A31260EAF06013C0EA6180EA3F000C28829E0E>
I<121C12FC121CAAEB1FE0EB0780EB060013045B5B5B136013E0EA1DF0EA1E70EA1C3813
3C131C7F130F7F148014C038FF9FF014207E9F18>I<121C12FC121CB3ABEAFF8009207F
9F0C>I<391C3E03E039FCC30C30391D039038391E01E01CA2001C13C0AE3AFF8FF8FF80
21147E9326>I<EA1C7CEAFC86EA1D03001E1380A2121CAE38FF8FF014147E9319>I<EA01
F8EA070E381C0380383801C0A2387000E0A200F013F0A6007013E0A2383801C0A2381C03
8038070E00EA01F814147F9317>I<EA1C7CEAFD87381E018014C0381C00E014F0147014
78A6147014F014E0381E01C0EB0380381D8700EA1C7C90C7FCA8B47E151D7E9319>I<38
01F04038070CC0EA0E02EA1C03EA38011278127012F0A6127012781238EA1C03EA0C05EA
0709EA01F1EA0001A8EB0FF8151D7F9318>I<EA1CF0EAFD18EA1E3CA21318EA1C00AEEA
FFC00E147E9312>I<EA0FC8EA3038EA6018EAC008A3EAE000127CEA3FE0EA1FF0EA07F8
EA003CEA800E130612C0A21304EAE00CEAD818EA87E00F147F9312>I<1202A31206A212
0EA2123EEAFFF8EA0E00AB1304A5EA07081203EA01F00E1C7F9B12>I<381C0380EAFC1F
EA1C03AE1307120CEA061B3803E3F014147E9319>I<38FF83F8383E00E0001C13C06C13
80A338070100A21383EA0382A2EA01C4A213E4EA00E8A21370A3132015147F9318>I<39
FF9FE1FC393C078070391C030060EC8020000E1440A214C0D80704138014E0A239038861
001471A23801D032143A143E3800E01CA2EB6018EB40081E147F9321>I<38FF87F8381E
03C0380E0180EB0300EA0702EA0384EA01C813D8EA00F01370137813F8139CEA010E1202
EA060738040380000C13C0003C13E038FE07FC16147F9318>I<38FF83F8383E00E0001C
13C06C1380A338070100A21383EA0382A2EA01C4A213E4EA00E8A21370A31320A25BA3EA
F080A200F1C7FC1262123C151D7F9318>I<EA7FFFEA700E1260EA401C133813781370EA
00E0120113C0EA038012071301120E121EEA1C03EA3802EA7006130EEAFFFE10147F9314
>I<B512FC1601808C17>I<EA1C04EA3F08EA43F0EA80E00E047C9D17>126
D<EA7038EAF87CA3EA70380E057C9E17>I E /Fw 9 122 df<EA01F0EA07FC487EEA1F1F
383C0780A2387803C0A3EA700100F013E0AF387803C0A4383C0780A2381F1F00EA0FFE6C
5AEA01F013237EA118>48 D<EA03F0EA0FFC487EEA3C1F38300780387003C0126000E013
E0EAC0011240A21200A3EB03C0A2EB0780A2EB0F00131E5B5B5B485A5B485A48C7FC120E
5A5A5AB512E0A313227EA118>50 D<B512F0A300F0C7FCADB512C0A300F0C7FCB014237B
A21C>70 D<EA07F0EA3FFC487EEA781FEA400F38000780A4137FEA07FF121FEA3E071278
12F0A3130FEA7C1FEA7FFFEA3FF7EA1F8711167E9517>97 D<12F0AD13F8EAF3FEB5FC38
FE0F80EAF80738F003C0A2EB01E0A7130314C0A238F80780EAFE1F38F7FF00EAF3FCEAF1
F813237DA219>I<EA01F8EA07FE487E381F0780383C03C0EA7801A2387000E0B5FCA300
F0C7FCA312701278127C6C1340381F03C0EA0FFF6C13803800FC0013167F9516>101
D<EAF0E012F312F7EAFF005A5A5AA25AAE0B167C9511>114 D<EAF00FB1131FEAF83FEA
7FFF13CFEA1F0F10167C9519>117 D<38F001E0A2387803C0A2127C383C0780A2121EEB
0F00A2120F130E131E1207139C1203139813B8120113F01200A25BA212015BA2485A1207
007FC7FCA2127C13207F9516>121 D E /Fx 36 122 df<14F013F81201120338078000
90C7FC5AA738FFF8F0A3EA0F00B1142180A018>12 D<1278A412181230A21260A212E005
0A7D830D>44 D<EAFFF0A30C03808B0F>I<12F0A404047C830D>I<EA03F0487EEA1FFEEA
1E1E487EEA380700781380A2EA700300F013C0AE38780780A300381300EA3C0FEA1E1EEA
1FFE6C5AEA03F012207E9E17>48 D<13C01201120712FFA212FB1203B3A4EAFFFEA30F1F
7C9E17>I<EA03F0EA0FFC487EEA383FEA700F3860078012E0EB03C01240A21200A3EB07
80A2EB0F00130E5B133C5B13E0485A485A48C7FC120E5A5A5AB512C0A3121F7E9E17>I<
B512C0A3EA0001EB0380EB07005B130E5BA25B1378A25BA25B1201A25B1203A45B1207A6
121E7E9D17>55 D<EA03F0487E487EEA1E1E487E487E148012F0130314C0A6EA7807A2EA
7C0FEA3E1FEA1FFBEA0FF33807C780EA0007A214005B131E1220EA307CEA7FF86C5AEA0F
C012207E9E17>57 D<EAFFFCEBFF8014C038F007E0EB01F013001478A514F0EB01E0EB0F
C0B51280A214E038F003F0EB00F8143C141C141EA5143C14FCEB03F8B512F014C0EBFE00
17207C9F1E>66 D<EB1FC0EBFFF84813FC3803E03C3807800C48C7FC121E123E123C127C
1278A35AA81278A3127C123C123E121E6C13023807800E3803E03E3801FFFC6C13F0EB1F
C017227DA01D>I<EB1FE0EBFFF84813FE3803E03E3807800E48C7FC121E123E123C5AA3
5AA7EB03FEA33878001EA37E123E121E7EEA07803803E03E3801FFFE6C13F8EB1FC01722
7DA01E>71 D<12F0B3AE04207C9F0D>73 D<EB1F80EBFFF0487F3803E07C3807801E4848
7E001EEB078048EB03C0A248EB01E0A30070130000F014F0A86C1301007814E0A2007C13
03003C14C0003E1307001E14806CEB0F00EBC03F3807E07E3801FFF86C5BEB1F801C227E
A021>79 D<EAFFFEEBFF8014E038F003F0130014781438143CA51438147814F01303B512
E01480EBFE0000F0C7FCAD16207C9F1D>I<EAFFFEEBFF8014E038F003F0EB00F8147814
3CA5147814F8EB03F0B512E01480EBFE00EAF01E130E130FEB0780A2EB03C0A2EB01E0A2
EB00F014701478143CA2141E17207C9F1D>82 D<EA01FC3807FF80001F13C0EA3E03EA7C
00007813005AA57E127C127EEA3FE0EA1FFCEA07FF0001138038003FC0EB07E01303EB01
F01300A5EB01E012C038F003C0EAFC0F387FFF80381FFE00EA03F814227EA019>I<B612
C0A3D8001EC7FCB3AB1A207E9F1F>I<EA07E0EA3FF8EA7FFCEA701EEA401FEA000FA313
3FEA07FF121FEA7E0F12F812F0A3EAF83FEA7FFFEA3FEFEA1F8F10147E9316>97
D<EA01FCEA07FF001F1380EA3E07EA3C0148C7FCA25AA61278A26C1380EA3E07EA1FFF00
071300EA01F811147F9314>99 D<EB03C0ACEA03E3EA0FFBEA1FFFEA3F0FEA7C031278A2
12F0A61278A2EA7C07EA3E0FEA1FFFEA0FFBEA03E312207F9F17>I<EA03F0EA0FFC487E
EA3E1FEA7C07127838700380B5FCA300F0C7FCA3127012786C1380EA3E07EA1FFF000713
00EA01F811147F9314>I<137EEA01FE1203EA078013005AA7EAFFF0A3EA0F00B10F2080
9F0E>I<3803E0F0EA0FFF5A383E3E00EA3C1E487EA5EA3C1EEA3E3EEA1FFC485AEA33E0
0030C7FC1238EA3FFEEBFF806C13C0007F13E0387803F0EAF000A3EAF801387E07E0383F
FFC0000F1300EA03FC141E7F9317>I<12F0ACEAF1F8EAF3FCEAF7FEEAFC1FEAF80FA212
F0AE10207D9F17>I<12F0A41200A812F0B3A204207D9F0B>I<12F0B3AE04207D9F0B>
108 D<EAF1F8EAF3FCEAF7FEEAFC1FEAF80FA212F0AE10147D9317>110
D<EA01F8EA07FE381FFF80383F0FC0EA3C03387801E0A238F000F0A6387801E0A2383C03
C0EA3F0F381FFF803807FE00EA01F814147F9317>I<EAF0E012F312F7EAFF0012FCA25A
A25AAC0B147D9310>114 D<EA0FF0EA3FFC127FEA780CEAF000A312FCEA7FE0EA3FF0EA
1FF8EA03FCEA003E131EA212C0EAF03CEAFFFCEA7FF8EA0FE00F147F9311>I<121EA6EA
FFF0A3EA1E00AD1310EA0FF8A2EA07E00D1A7F9910>I<EAF00FAF131F133FB5FCEA7FEF
EA3F0F10147D9317>I<D8F01F13F01480A239781B81E0133B14C11339393C31C3C01371
14E3D81C701380EA1E6014E713E0000EEB770013C0A20007137E143E13801C147F931F>
119 D<387801E0387C03C0383E0780EA1E0F000F1300EA079EEA03FC5B12016C5A12017F
487EEA079EEA0F0F120E381E0780383C03C0387801E000F813F01414809315>I<38F003
C0A238780780A2127C383C0F00A2121E131EA2EA0F1CA2EA073C133813B8120313B0EA01
F05B1200A2485AA212035B1207B4C7FC5A5A121D7F9315>I E /Fy
9 119 df<12E0A303037C820C>46 D<EA07C0EA1FF0EA3878EA701CEA601EEAE00EEAC0
0F124013071200A2130F130E131E131C133C137813F0EA01E013C0EA0380EA0700120E5A
5A5AB5FCA2101C7E9B15>50 D<EAFFF813FF38F00F80EB03C0EB01E0EB00F0A5EB01E013
03EB0FC0B51280140013F8EAF03C131C131E7FA2EB0780A2EB03C0A2EB01E0EB00F0A214
78151D7C9C1B>82 D<EA07E0EA0FF0EA3FF8EA3C3CEA700C130EEAFFFEA3EAE000A31270
EA7802EA3C0EEA1FFEEA0FFCEA03F00F127F9112>101 D<12F0A41200A71270B2041D7E
9C0A>105 D<EAE3E0EAEFF0EAFFF8EAF83CEAF01C12E0AD0E127D9115>110
D<EA03F0EA0FFC487EEA3C0F38780780EA700338E001C0A5EAF00300701380EA7807383C
0F00EA1FFE6C5AEA03F012127F9115>I<EA1FC0EA3FF0127FEAF030EAE000A27E127FEA
3FC0EA1FE0EA01F0EA0038A21280EAF078EAFFF0EA7FE0EA1FC00D127F9110>115
D<EAE007A212F0EA700EA2EA381CA3EA1C38A3EA0E70A2EA0660120713E0EA03C0A21012
7F9113>118 D E /Fz 18 118 df<B512C014F814FE38F800FFEC1F80EC07C0EC03E014
0115F0A214001401A215E01403EC07C0EC1F80EC7F00B512FE14F88014FF39F8007FC0EC
0FE0EC03F01401EC00F81578157CA615F81401EC03F0EC0FE0EC3FC0B61280ECFE0014F0
1E2A7BA927>66 D<00FE15FFA36C5C00FB15DF6D1303A3D8F9C0EB079FA36D130F00F815
1FA26D131F0170131EA20178133E0138133C013C137CA2011C1378011E13F8A2010E13F0
EB0F01A2010713E01483A2010313C014C7A20101138014EFA20100130014FF147EA391C7
FC282A7BA933>77 D<EB7FC03801FFF8000713FE487F381FC07F383F000F007E1306007C
90C7FCA25AA57E127E127F6C7EEA1FF86CB4FC6C13E06C13F8C67FEB0FFEEB00FF143FEC
1F80140F15C01407A6EC0F80126000F0EB1F0000FC5B38FF80FE6CB45A001F5B000713E0
C613801A2C7DAA21>83 D<B712E0A4260001F0C7FCB3B3A2232A7EA928>I<007FB512F8
A315F0C7120315E01407EC0FC01580141FEC3F00143E147E5C5C13015C1303495A5C130F
495A91C7FC5B137E137C13FC5B1201485A5B1207485A5B121F48C8FC123E127E007FB512
F8B6FCA31D2A7DA924>90 D<EA01FC380FFF80003F13C014E0383C03F0EA3001000013F8
1300A4130113FF1207121FEA3FC0EA7E005A5AA3EAFC01EA7E07EA7FFF7EEA1FFCEA0FE0
151B7E9A1C>97 D<143EAFEA01FCEA03FF000F13BE4813FE13C1383F007E003E133E5AA2
12FC5AA77E127CA2007E137E6C13FEEA1FC113FF6C13BE3803FE3EEA01F8172A7EA91E>
100 D<13FCEA03FF4813804813C0381F87E0EA3F01383E00F05A1470481378B512F8A400
F8C7FCA31278127CA27E003F1318381FC0F8EA0FFF7E000113E038007F00151B7E9A1A>
I<12F8AF133FEBFFC000FB13E0B512F0138338FE01F8EAFC00A35AB2152A7CA91E>104
D<12F8A51200AA12F8B3A9052A7CA90E>I<12F8B3B3A6052A7CA90E>108
D<D8F83F133F9039FFC0FFC000FB01E313E0B500F713F0018313833AFE01FE01F839FC00
FC00A3485BB2251B7C9A2E>I<EAF83FEBFFC000FB13E0B512F0138338FE01F8EAFC00A3
5AB2151B7C9A1E>I<137E3801FF80000713E04813F0381F81F8383F00FC003E137C4813
3EA20078131E00F8131FA7007C133EA36C137C003F13FC381FC3F8380FFFF06C13E06C13
C038007E00181B7E9A1D>I<EAF83C13FC12F912FBEAFFE0138013005A5AA35AB00E1B7C
9A14>114 D<EA07F8EA1FFF4813805AEA7C0738F8010090C7FCA37E127F13F0EA3FFC6C
7EEA07FFC61380EB1FC0130F1307A2124012E038FC1F80B5FC6C1300EA1FFEEA07F8121B
7E9A16>I<EA0F80A7B51280A3380F8000B2148013C33807FFC0A26C1300EA01F812227F
A115>I<00F813F8B3A213011303EAFC07B5FCEA7FFEEA3FF8EA1FC0151B7C9A1E>I
E /FA 61 123 df<EB0FF0EB7FFC3801F80E3803E01F48485AEA0F80A2141E140C91C7FC
A4B6FCA2380F801FB2397FF0FFE0A21B237FA21F>12 D<13181330136013C01201EA0380
EA0700A2120E121E121C123CA35AA412F85AAB7E1278A47EA3121C121E120E7EA2EA0380
EA01C012001360133013180D317BA416>40 D<12C012607E7E121C7E7EA2EA038013C012
0113E0A3EA00F0A413F81378AB13F813F0A4EA01E0A313C012031380EA0700A2120E5A12
185A5A5A0D317DA416>I<EAFFFCA40E047F8C13>45 D<1238127C12FEA3127C12380707
7C8610>I<14181438A21470A214E0A3EB01C0A2EB0380A3EB0700A3130EA25BA35BA25B
A35BA2485AA3485AA248C7FCA3120EA35AA25AA35AA25AA25A15317DA41C>I<13FE3807
FFC0380F83E0381F01F0383E00F8A248137CA312FC147EAD007C137CA36C13F8A2381F01
F0380F83E03807FFC03800FE0017207E9F1C>I<13181378EA01F812FFA21201B3A7387F
FFE0A213207C9F1C>I<EA03FCEA0FFF383C1FC0387007E0007C13F0EAFE0314F8A21301
127CEA3803120014F0A2EB07E014C0EB0F80EB1F00133E13385BEBE018EA01C0EA0380EA
0700000E1338380FFFF05A5A5AB5FCA215207D9F1C>I<13FE3807FFC0380F07E0381E03
F0123FEB81F8A3EA1F0314F0120014E0EB07C0EB1F803801FE007F380007C0EB01F014F8
EB00FCA2003C13FE127EB4FCA314FCEA7E01007813F8381E07F0380FFFC03801FE001720
7E9F1C>I<14E013011303A21307130F131FA21337137713E7EA01C71387EA0307120712
0E120C12181238127012E0B6FCA2380007E0A790B5FCA218207E9F1C>I<00301320383E
01E0383FFFC0148014005B13F8EA33C00030C7FCA4EA31FCEA37FF383E0FC0383807E0EA
3003000013F0A214F8A21238127C12FEA200FC13F0A2387007E0003013C0383C1F80380F
FF00EA03F815207D9F1C>I<EB1F80EBFFE03803E0703807C0F0380F01F8121F123EA238
7E00F0007C1300A2EAFC08EB7FC0EBFFE038FD80F038FF00F848137CA248137EA4127CA3
003C137C123E001E13F86C13F0380783E03803FFC0C6130017207E9F1C>I<1260127838
7FFFFEA214FC14F8A214F038E0006014C038C00180EB0300A2EA00065B131C1318133813
78A25BA31201A31203A76C5A17227DA11C>I<13FE3803FFC0380703E0380E00F05A1478
123C123E123F1380EBE0F0381FF9E0EBFFC06C13806C13C06C13E04813F0381E7FF8383C
1FFCEA7807EB01FEEAF000143E141EA36C131C007813387E001F13F0380FFFC000011300
17207E9F1C>I<EA01FE3807FF80380F83E0381E01F0EA3E004813F8147800FC137CA314
7EA4007C13FEA2EA3E01381E037EEA0FFEEA07FCEA0020EB007CA2121E003F13F8A214F0
EB01E0381E03C0381C0F80380FFE00EA03F817207E9F1C>I<1470A214F8A3497EA2497E
A3EB067FA2010C7F143FA2496C7EA201307F140F01707FEB6007A201C07F90B5FC4880EB
8001A2D803007F14004880000680A23AFFE007FFF8A225227EA12A>65
D<B67E15F03907F001F86E7E157EA2157FA5157E15FE5DEC03F890B55AA29038F001FCEC
007E811680151F16C0A6ED3F80A2ED7F00EC01FEB612F815C022227EA128>I<D903FE13
8090381FFF819038FF01E33901F8003FD803E0131F4848130F48481307121F48C71203A2
481401127EA200FE91C7FCA8127EED0180127F7E15036C6C1400120F6C6C1306D803F05B
6C6C13386CB413F090381FFFC0D903FEC7FC21227DA128>I<B67E15F03907F003FCEC00
7E81ED1F80ED0FC0ED07E0A216F01503A316F8A916F0A3ED07E0A2ED0FC0ED1F80ED3F00
157EEC03FCB612F0158025227EA12B>I<B612FCA23807F000153C151C150C150EA21506
140CA31500141C143CEBFFFCA2EBF03C141C140CA21503A214001506A3150EA2151E153E
EC01FCB6FCA220227EA125>I<B612F8A23807F001EC007815381518151CA2150CA21418
A21500A214381478EBFFF8A2EBF07814381418A491C7FCA8B512C0A21E227EA123>I<D9
03FE134090391FFFC0C090387F00F1D801F8133F4848130FD807C01307000F1403485A48
C71201A2481400127EA200FE1500A791380FFFFC127E007F9038001FC0A27EA26C7E6C7E
6C7E6C7ED801FC133F39007F80E790381FFFC30103130026227DA12C>I<B53883FFFEA2
3A07F0001FC0AD90B6FCA29038F0001FAFB53883FFFEA227227EA12C>I<B51280A23807
F000B3ACB51280A211227EA115>I<B538803FFCA23A07F0000380ED0700150E15185D15
E04A5A4A5A4AC7FC140E1418143C14FCEBF1FEEBF3FFEBF77F9038FE3F8001F87F496C7E
140F6E7E816E7E1401816E7E81ED3F8016C0ED1FE0B53881FFFEA227227EA12C>75
D<B512C0A2D807F0C7FCB31518A41538A21570A215F014011407B6FCA21D227EA122>I<
D8FFF0EC0FFF6D5C000716E0D806FC1437A3017E1467A26D14C7A290391F800187A29039
0FC00307A3903807E006A2903803F00CA2903801F818A3903800FC30A2EC7E60A2EC3FC0
A2EC1F80A3EC0F00D8FFF091B5FC140630227EA135>I<D8FFF8EB1FFE7F0007EC00C07F
EA06FF6D7E6D7E6D7E130F806D7E6D7E6D7E130080EC7F80EC3FC0EC1FE0EC0FF0140715
F8EC03FCEC01FEEC00FF157FA2153F151F150F15071503A2D8FFF01301150027227EA12C
>I<EB07FC90383FFF809038FC07E03903F001F848486C7E4848137E48487FA248C7EA1F
80A24815C0007E140FA200FE15E0A9007E15C0007F141FA26C15806D133F001F15006C6C
137E6C6C5B6C6C485A3900FC07E090383FFF80D907FCC7FC23227DA12A>I<B6FC15E039
07F007F0EC01FC1400157EA2157FA5157EA215FC1401EC07F090B512E0150001F0C7FCAD
B57EA220227EA126>I<EB07FC90383FFF809038FC07E03903F001F848486C7E4848137E
48487FA248C7EA1F80A24815C0007E140FA200FE15E0A9007E15C0007F141FA26C158090
3881F03F261F83F81300390FC70C7E3907E606FC3903F607F8D800FF13E090383FFF8001
071420EB0003EC01C0EDE0E015FF16C080A2ED7F801600151E232C7DA12A>I<B512FEEC
FFC03907F007F0EC01F86E7E157E157FA6157E5D4A5AEC07F090B512C05D9038F00FE06E
7E6E7E6E7EA81606EC00FEEDFF0CB538803FF8ED0FF027227EA12A>I<3801FE023807FF
86381F01FE383C007E007C131E0078130EA200F81306A27E1400B4FC13E06CB4FC14C06C
13F06C13F86C13FC000313FEEA003F1303EB007F143FA200C0131FA36C131EA26C133C12
FCB413F838C7FFE00080138018227DA11F>I<007FB61280A2397E03F80F007814070070
14030060140100E015C0A200C01400A400001500B3A248B512F0A222227EA127>I<B538
803FFCA23A07F0000180B3A60003EC03007F000114066C6C130E017E5B90383F80F89038
0FFFE0010190C7FC26227EA12B>I<B5EB0FFEA2D807F0EB00C0A26C6CEB0180A26D1303
000115007F000014067F6D5BA2EC801C013F1318ECC038011F133014E0010F5BA26D6C5A
A214F901035B14FD6DB4C7FCA26D5AA3147CA21438A227227FA12A>I<EA0FFC383FFF80
387E07C0EB03E0130114F0123C1200A2133FEA03FDEA1FC1EA3F01127E12FCA4EA7E02EB
0CF8381FF87F3807E03F18167E951B>97 D<B4FCA2121FABEB0FE0EB3FF8EBE07CEB803E
497EEC0F80A215C0A81580141F01801300EBC03E381EE07C381C3FF838180FC01A237EA2
1F>I<EBFF80000713E0380F83F0EA1F03123E127E387C01E090C7FC12FCA6127C127EA2
003E13186C1330380FC0603807FFC0C6130015167E9519>I<EB01FEA2EB003EABEA01FC
3807FFBE380F81FE381F007E003E133E127E127C12FCA8127CA26C137E6C13FE380F83BE
3907FF3FC0EA01FC1A237EA21F>I<13FE3807FF80380F87C0381E01E0003E13F0EA7C00
14F812FCA2B5FCA200FCC7FCA3127CA2127E003E13186C1330380FC0703803FFC0C61300
15167E951A>I<EB1FC0EB7FE0EBF1F0EA01E31203EA07C3EBC1E0EBC000A6EAFFFEA2EA
07C0B2EA3FFCA2142380A211>I<3801FE0F3907FFBF80380F87C7381F03E7391E01E000
003E7FA5001E5BEA1F03380F87C0EBFF80D809FEC7FC0018C8FCA2121C381FFFE06C13F8
6C13FE001F7F383C003F48EB0F80481307A40078EB0F006C131E001F137C6CB45A000113
C019217F951C>I<B4FCA2121FABEB07E0EB1FF8EB307CEB403CEB803EA21300AE39FFE1
FFC0A21A237EA21F>I<121C123E127FA3123E121CC7FCA7B4FCA2121FB2EAFFE0A20B24
7EA310>I<B4FCA2121FABECFF80A2EC38001460495A495A49C7FC130E5B137E13FF13CF
EB0F806D7E6D7E1301806D7E147C143C39FFE0FFC0A21A237EA21E>107
D<B4FCA2121FB3ADEAFFE0A20B237EA210>I<3AFF07F007F090391FFC1FFC3A1F303E30
3E01401340496C487EA201001300AE3BFFE0FFE0FFE0A22B167E9530>I<38FF07E0EB1F
F8381F307CEB403CEB803EA21300AE39FFE1FFC0A21A167E951F>I<13FE3807FFC0380F
83E0381E00F0003E13F848137CA300FC137EA7007C137CA26C13F8381F01F0380F83E038
07FFC03800FE0017167E951C>I<38FF0FE0EB3FF8381FE07CEB803E497E1580A2EC0FC0
A8EC1F80A29038803F00EBC03EEBE0FCEB3FF8EB0FC090C8FCA8EAFFE0A21A207E951F>
I<EAFE1FEB3FC0381E67E013C71387A2381F83C090C7FCADEAFFF0A213167E9517>114
D<EA0FF3EA3FFFEA781FEA6007EAE003A212F000FCC7FCEA7FE013F8EA3FFEEA0FFF1201
38000F80EAC007130312E0A238F00700EAFC0EEAEFFCEAC7F011167E9516>I<487EA412
03A21207A2120F123FB5FCA2EA0F80ABEB8180A5EB8300EA07C3EA03FEEA00F811207F9F
16>I<38FF01FEA2381F003EAF147E14FE380F81BE3907FF3FC0EA01FC1A167E951F>I<39
FFE01FE0A2391F800700000F1306EBC00E0007130C13E000035BA26C6C5AA26C6C5AA2EB
7CC0A2137F6D5AA26DC7FCA2130EA21B167F951E>I<3AFFE3FF07F8A23A1F007800C090
38807C01000F1580A23A07C07E030014DE5D3903E1DF06148FD801F1138CEBF307A2D800
FF13D8EBFE0315F890387C01F0A2013C5BEB3800A225167F9528>I<39FFE07FC0A2390F
801C006C6C5A6C6C5AEBF0606C6C5A3800F980137F6DC7FC7F80497E1337EB63E0EBC1F0
3801C0F848487E3807007E000E133E39FF80FFE0A21B167F951E>I<39FFE01FE0A2391F
800700000F1306EBC00E0007130C13E000035BA26C6C5AA26C6C5AA2EB7CC0A2137F6D5A
A26DC7FCA2130EA2130CA25B1278EAFC3813305BEA69C0EA7F80001FC8FC1B207F951E>
I<387FFFF0A2387C03E0387007C0EA600F38E01F8000C01300133E137EC65A5B485A0003
1330EA07E013C0380F8070121F383F0060003E13E0EA7C03B5FCA214167E9519>I
E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 473 441 a FA(In)n(tro)r(duction)18 b(to)h(m)n(ultistage)d
(Programming)781 556 y(Using)i(MetaML)387 1166 y Fz(Tim)h(Shea)n(rd)78
b(Zino)19 b(Benaissa)79 b(Matthieu)19 b(Ma)n(rtel)881
1222 y Fy(Revision)14 b(2.)662 1526 y Fx(P)o(aci\014c)i(Soft)o(w)o(a)o
(re)e(Resea)o(rch)i(Center)465 1583 y(Oregon)f(Graduate)i(Institute)g
(of)e(Science)h(and)g(T)l(echnology)825 1639 y(P)l(.O.)f(Bo)o(x)g
(91000)732 1695 y(P)o(o)o(rtland,)f(OR)i(97291-1000)823
1999 y Fw(F)o(eb)o(rua)o(ry)f(2000)71 2340 y Fv(The)22
b(researc)o(h)h(rep)q(orted)g(in)g(this)g(pap)q(er)g(w)o(as)f(supp)q
(orted)h(b)o(y)g(the)f(USAF)h(Air)g(Material)g(Command,)0
2397 y(con)o(tract)17 b(#)h(F19628-96-C-0161)o(,)e(NSF)h(Gran)o(ts)g
(CCR-9803880)f(and)i(IRI-9625462,)g(and)g(the)g(Departmen)o(t)0
2453 y(of)d(Defense.)p eop
%%Page: 2 2
2 1 bop eop
%%Page: 3 3
3 2 bop 0 286 a Fu(Con)n(ten)n(ts)0 390 y Ft(1)42 b(In)o(tro)q(duction)
1569 b(1)0 495 y(2)42 b(Language)19 b(o)o(v)o(erview)1420
b(2)68 552 y Fv(2.1)46 b(Basic)16 b Fs(SML)e Fv(constructs)33
b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)64 b(2)173 610 y(2.1.1)50 b Fs(Met)m(aML)p Fv('s)15
b(top-lev)o(el)h(in)o(teractiv)o(e)g(lo)q(op)i(.)k(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)64
b(2)173 668 y(2.1.2)50 b(F)l(unctions)32 b(.)22 b(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)64
b(3)173 726 y(2.1.3)50 b(P)o(olymorphism)44 b(.)22 b(.)g(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)64 b(4)173
783 y(2.1.4)50 b(Non-generalized)17 b(t)o(yp)q(e)f(v)m(ariables)41
b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)64 b(5)173 841 y(2.1.5)50
b(Recursion)30 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)64 b(6)173 899 y(2.1.6)50
b(Data)14 b(structures)19 b(.)j(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)64 b(7)68 956 y(2.2)46 b(Multi-stage)15
b(annotations)36 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)64 b(8)173 1014 y(2.2.1)50 b(The)16 b(brac)o(k)o(et)e
(op)q(erator:)19 b(building)f(pieces)e(of)f(co)q(de)27
b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)64 b(8)173 1072 y(2.2.2)50 b(The)16 b(escap)q(e)g(op)q(erator:)j
(comp)q(osing)c(pieces)i(of)e(co)q(de)32 b(.)22 b(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(10)173
1130 y(2.2.3)50 b(The)16 b Fr(run)e Fv(op)q(erator:)19
b(reducing)e(user)e(constructed)h(co)q(de)40 b(.)22 b(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(10)173 1187
y(2.2.4)50 b(The)16 b Fr(lift)e Fv(op)q(erator:)19 b(another)c(w)o(a)o
(y)f(to)h(build)i(co)q(de)41 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(10)173 1245 y(2.2.5)50
b(Lexical)17 b(capture)e(of)g(free)g(v)m(ariables:)22
b(constan)o(t)14 b(pieces)i(of)f(co)q(de)22 b(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)42 b(11)173 1303 y(2.2.6)50 b(Consistency)16
b(of)f(m)o(ulti-stage)g(programs)28 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(12)68 1361 y(2.3)k(A)15 b(simple)i(t)o(w)o(o)c(stage)i(example)26
b(.)c(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(13)68 1418 y(2.4)k(More-than-t)o(w)o(o-stage)13 b(programs)39
b(.)23 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(13)0 1522 y Ft(3)g(Language)19 b(con)o(v)o(en)o(tions)e(and)h
(di\013erences)f(from)f Fs(SML)726 b Ft(14)68 1580 y
Fv(3.1)46 b(The)15 b(syn)o(tax)g(of)f(meta-constructors)39
b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(15)68
1638 y(3.2)k(The)15 b(precedence)i(of)e(meta-constructors)25
b(.)d(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(15)68 1696
y(3.3)k(Disam)o(biguating)15 b(relational)i(op)q(erators)d(and)h
(meta-brac)o(k)o(ets)g(.)22 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)42 b(15)68 1753 y(3.4)k(Lac)o(k)15
b(of)g(Mo)q(dule)h(Lev)o(el)g(F)l(eatures)39 b(.)23 b(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(15)68 1811 y(3.5)k(Quali\014ed)17
b(T)o(yp)q(es)i(.)k(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(16)68 1869 y(3.6)k(Use)15
b(v.s.)k(The)d(In)o(teractiv)o(e)f(Lo)q(op)21 b(.)h(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(17)0 1973 y Ft(4)g(T)o(yping)18
b(Rules)1524 b(18)68 2031 y Fv(4.1)46 b(The)15 b(purp)q(ose)h(of)f(a)g
(m)o(ulti-stage)g(t)o(yp)q(e)g(system)36 b(.)22 b(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
42 b(18)68 2088 y(4.2)k(T)o(yping)15 b(Multi-stage)h(expressions)32
b(.)23 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(19)68 2146 y(4.3)k(In)o(teraction)15 b(Bet)o(w)o(een)g(run)h(and)f
(escap)q(e)46 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(19)0 2250 y Ft(5)g(Generation)19 b(time)e(co)q(de)i(optimizations)
1011 b(20)68 2308 y Fv(5.1)46 b(Safe)15 b(Beta)g(Reduction)33
b(.)23 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)42 b(20)68 2366 y(5.2)k(Safe)15 b(Eta)f(reduction)35
b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)42 b(20)68 2423 y(5.3)k(Let-Hoisting)17 b(.)22
b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)42 b(21)0 2528 y Ft(6)g(The)18 b(art)g(of)f(m)o
(ulti-stage)i(programming)1000 b(21)68 2585 y Fv(6.1)46
b(Merging)15 b(lists)42 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(22)173
2643 y(6.1.1)50 b(The)16 b(standard)e Fr(merge)h Fv(function)33
b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(22)173 2701
y(6.1.2)50 b(Annotating)15 b Fr(merge)p Fv(:)k(a)c(\014rst)g(attempt)34
b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(22)p eop
%%Page: 4 4
4 3 bop 173 286 a Fv(6.1.3)50 b(Annotating)15 b Fr(merge)p
Fv(:)k(a)c(second)h(attempt)g(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(23)173 343 y(6.1.4)50 b(Decreasing)16 b(the)f(size)h(of)f(the)g
(output)g(program)k(.)j(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(25)68 400 y(6.2)k(Sp)q(ecializin)q(g)17
b(a)e(shortest-path)g(algorithm)36 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
42 b(26)173 457 y(6.2.1)50 b(Graph)15 b(represen)o(tation)d(.)22
b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(27)173 514 y(6.2.2)50 b(The)16 b(shortest)e(path)h(algorithm)e(.)23
b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(27)173 571
y(6.2.3)50 b(A)15 b(t)o(w)o(o-lev)o(el)h(shortest)e(path)h(algorithm)45
b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)42 b(28)0 674 y Ft(7)g(Extensions)18
b(to)g(Standard)g(ML)1195 b(31)68 731 y Fv(7.1)46 b(Flexible)17
b(Records)40 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(31)68 788 y(7.2)k(Lab)q(elled)17
b(Anon)o(ymous)e(Sums)43 b(.)22 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)42 b(32)68 845 y(7.3)k(P)o(olymorphic)16
b(Recursion)f(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)42 b(33)68 901 y(7.4)k(Lo)q(cal)16 b(\(non)f
(Hindley-Milner\))j(P)o(olymorphism)f(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(33)68 958 y(7.5)k(Lo)q(cal)16 b(Existen)o(tial)g(Quan)o(ti\014cation)
h(.)23 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(34)68 1015 y(7.6)k(Higher)16 b(Order)f(Kinds)45 b(.)23
b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
42 b(35)68 1072 y(7.7)k(P)o(artial)15 b(Application)i(of)e(T)o(yp)q(e)g
(Constructors)41 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(36)68
1129 y(7.8)k(Monads)36 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(36)173 1186 y(7.8.1)50 b(Monads)15 b(in)h Fs(Met)m(aML)e
Fv(.)22 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(37)0 1289 y Ft(8)g(Exp)q(erimen)o(tal)18 b(F)l(eatures)f(of)h(MetaML)
1034 b(39)68 1346 y Fv(8.1)46 b(Delineated)16 b(Con)o(trol)f(Op)q
(erators)25 b(.)d(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(39)68 1403 y(8.2)k(Dynamic)15 b(t)o(yp)q(e-c)o(hec)o(king)f(.)22
b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(40)68 1460 y(8.3)k(In)o(tensional)16 b(Analysis)h(of)d(co)q(de)26
b(.)c(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(42)68 1516 y(8.4)k(A)15 b(HOL-lik)o(e)i(Theorem)e(Pro)o(v)o(er)d(.)22
b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(43)68 1573 y(8.5)k(Rei\014cation)16 b(.)23 b(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(45)0 1676 y Ft(9)g(The)18 b(MetaMl)g(Library)1351 b(46)68
1733 y Fv(9.1)46 b(Bo)q(ol)15 b(functions)47 b(.)23 b(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(46)68 1790 y(9.2)k(Num)15 b(op)q(erators)f(and)i(functions)34
b(.)22 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(47)68 1847 y(9.3)k(Comparison)15 b(op)q(erators)35
b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)42 b(47)68 1904 y(9.4)k(in)o(t)15 b(functions)f(.)22
b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)42 b(47)68 1961 y(9.5)k(real)15 b(functions)30
b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)42 b(48)68 2018 y(9.6)k(c)o(har)15
b(functions)j(.)k(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(48)68 2075 y(9.7)k(string)15
b(functions)24 b(.)f(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(48)68 2132 y(9.8)k(List)16
b(functions)26 b(.)c(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(49)68 2188 y(9.9)k(V)l(ector)15
b(primitiv)o(es)29 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(49)68 2245 y(9.10)23
b(Ref)15 b(primitiv)o(es)20 b(.)i(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(49)68
2302 y(9.11)23 b(option)15 b(t)o(yp)q(e)35 b(.)22 b(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(49)68 2359 y(9.12)23 b(sum)15 b(t)o(yp)q(e)44 b(.)23
b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)42 b(50)68 2416 y(9.13)23 b(monad)15
b(t)o(yp)q(e)27 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(50)68
2473 y(9.14)23 b(I/O)12 b(.)22 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
42 b(50)68 2530 y(9.15)23 b(MetaML)14 b(System)h(in)o(terfaces)e(.)23
b(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(50)68 2587 y(9.16)23 b(General)15 b(functions)20 b(.)i(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42
b(51)68 2644 y(9.17)23 b(Co)q(de)15 b(primitiv)o(es)20
b(.)j(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)42 b(51)68 2701 y(9.18)23 b(Unsafe)15
b(functions)40 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(51)p eop
%%Page: 5 5
5 4 bop 68 286 a Fv(9.19)23 b(Higher-Order)16 b(Logic)g(\(HOL\))f
(theorem)g(pro)o(v)o(er)g(functions)29 b(.)22 b(.)g(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)42 b(53)p
eop
%%Page: 6 6
6 5 bop eop
%%Page: 1 7
1 6 bop 369 472 a Fq(In)n(tro)r(duction)21 b(to)h(Multi-Stage)g
(Programming)757 563 y(Using)f(MetaML)616 751 y Fp(Tim)15
b(Sheard)h(and)h(Matthieu)f(Martel)875 809 y Fo(Revision)d(2.)623
925 y Fp(P)o(aci\014c)j(Soft)o(w)o(are)g(Researc)o(h)f(Cen)o(ter)401
983 y(Oregon)i(Graduate)g(Institute)e(of)i(Science)d(and)j(T)l(ec)o
(hnology)809 1041 y(P)l(.O.)e(Bo)o(x)h(91000)704 1099
y(P)o(ortland,)g(OR)g(97291-100)q(0)822 1204 y(F)l(ebruary)g(2000)0
1427 y Fu(1)67 b(In)n(tro)r(duction)0 1535 y Fv(In)16
b(a)f(meta-programming)g(system)g(meta-programs)f(manipulate)j(ob)s
(ject-programs.)i(Meta-programs)14 b(ma)o(y)0 1591 y(construct)d(ob)s
(ject-programs,)g(com)o(bine)i(ob)s(ject-program)d(fragmen)o(ts)g(in)o
(to)i(larger)g(ob)s(ject-programs,)e(observ)o(e)0 1648
y(the)j(structure)g(and)g(other)g(prop)q(erties)g(of)g(ob)s
(ject-programs,)e(and)j(execute)f(ob)s(ject-programs)f(to)g(obtain)h
(their)0 1704 y(v)m(alues.)71 1764 y(There)k(are)h(t)o(w)o(o)e(imp)q
(ortan)o(t)h(kind)i(of)e(meta-programming)f(scenarios:)25
b(program)17 b(generators,)f(and)i(pro-)0 1820 y(gram)c(analyses)h(.)20
b Fs(Met)m(aML)14 b Fv(is)i(a)e(meta-programming)g(system)g(designed)j
(for)d(the)h(\014rst)f(scenario:)20 b(program)0 1877
y(generation)15 b(.)71 1936 y(A)k(program)g(generator)f(\(a)h
(meta-program\))f(solv)o(es)h(a)h(particular)g(problem)g(b)o(y)g
(constructing)f(another)0 1993 y(program)g(\(an)h(ob)s(ject-program\))f
(that)g(solv)o(es)i(the)f(problem)h(at)f(hand.)36 b(Usually)21
b(the)g(generated)f(\(ob)s(ject\))0 2049 y(program)13
b(is)h("sp)q(ecialized")j(for)c(the)h(particular)h(problem)g(and)f
(uses)g(less)h(resources)f(than)g(a)f(general)i(purp)q(ose,)0
2106 y(non-generator)f(solution.)21 b(This)15 b(metho)q(d)g(of)g(pro)q
(ducing)h(sp)q(ecialized)i(solutions)d(b)o(y)g(using)g(a)g(program)f
(gener-)0 2162 y(ator)f(is)j(often)e(called)i Fn(stage)n(d)f(pr)n(o)n
(gr)n(amming)p Fv(.)20 b(A)14 b(meta-programming)g(system)g(is)h(one)g
(to)q(ol)f(that)g(can)h(b)q(e)g(used)0 2219 y(when)h(practicing)g(the)f
(staged)g(programming)f(metho)q(d)i(\(a)e(partial)i(ev)m(aluator)f(is)h
(another)f(to)q(ol\).)71 2278 y Fs(Met)m(aML)g Fv(is)i(in)o(tended)g
(to)e(b)q(e)i(a)f(conserv)m(ativ)o(e)g(extension)1117
2262 y Fm(1)1153 2278 y Fv(of)g(Standard)g Fs(SML)f Fv(whic)o(h)i(allo)
o(ws)f(the)g(pro-)0 2335 y(grammer)f(to)g(write)h(m)o(ultistage)g
(programs.)21 b(The)16 b(basic)h(annotations)e(used)i(to)e(describ)q(e)
j(a)d(staged)h(co)q(de)g(are)0 2391 y Fn(meta-br)n(ackets)j(esc)n(ap)n
(e)f Fv(.)31 b(Brac)o(k)o(eting)19 b(an)g(expression)g(indicates)i
(that)d(its)h(computation)g(is)g(to)g(b)q(e)g(dela)o(y)o(ed)0
2447 y(to)f(the)h(next)h(stage,)e(i.e.)32 b(part)19 b(of)f(the)h(ob)s
(ject)g(program)f(b)q(eing)i(generated.)31 b(Ev)m(aluation)20
b(ma)o(y)f(b)q(e)g(dela)o(y)o(ed)0 2504 y(for)e(man)o(y)h(stages)f(b)o
(y)h(brac)o(k)o(eting)g(the)g(corresp)q(onding)h(expression)g(as)f(man)
o(y)f(times)i(as)e(wished.)30 b(One)19 b(ma)o(y)0 2560
y(also)f(decrease)g(the)g(execution)h(stage)e(of)g(an)g(expression)i(b)
o(y)f Fn(esc)n(aping)e Fv(it)i(from)f(the)h(freeze)g(imp)q(osed)h(b)o
(y)f(the)p 0 2612 780 2 v 52 2639 a Fl(1)69 2655 y Fk(A)o(t)11
b(this)h(time)g(this)h(is)f(not)f(quite)i(true,)e(our)h(implemen)o
(tation)j(is)d(not)g(a)f(complete)i(implemen)o(tation)h(of)d(Standard)i
(ML)f(.)f(There)0 2701 y(are)i(also)h(sev)o(eral)g(small)h(syn)o
(tactic)f(di\013erences,)h(see)e(section)h(3.2.)964 2825
y Fv(1)p eop
%%Page: 2 8
2 7 bop 0 286 a Fv(brac)o(k)o(ets.)26 b(This)18 b(role)g(is)g(pla)o(y)o
(ed)g(b)o(y)f(the)h(escap)q(e)g(op)q(erator)f(\()l(~)l(\).)26
b(Other)18 b(more)f(sophisticated)i(op)q(erators)d(are)0
343 y(describ)q(ed)h(later)e(in)h(this)g(do)q(cumen)o(t.)71
413 y(W)l(riting)22 b(correct)f(m)o(ultistage)h(programs)e(quic)o(kly)j
(b)q(ecomes)f(a)f(c)o(hallenging)j(task)d(\(a)g(taste)f(of)i(that)e(is)
0 469 y(o\013ered)h(to)g(the)h(reader)g(in)g(Section)h(6\).)39
b Fs(Met)m(aML)21 b Fv(helps)i(the)f(user)g(b)o(y)g(t)o(yp)q(e)f(c)o
(hec)o(king)i(b)q(oth)f(the)g(lev)o(el)0 525 y(and)d(the)f(traditional)
i(t)o(yp)q(e)e(of)h(expressions.)30 b(T)o(yp)q(e-c)o(hec)o(king)20
b(is)f(p)q(erformed)g(once)g(and)g(for)f(all)h(b)q(efore)g(an)o(y)0
582 y(execution)c(o)q(ccurs.)20 b(T)o(yp)q(e-c)o(hec)o(king)c(succeeds)
f(only)g(if)g(ev)o(ery)f(expression)h(at)f(ev)o(ery)g(stage)g(is)g(w)o
(ell-t)o(yp)q(ed.)21 b(So,)0 638 y(if)c(the)g(t)o(yp)q(e-c)o(hec)o(k)o
(er)f(do)q(es)h(not)g(complain,)g(the)g(program)e(w)o(on't)h(go)g
(wrong)g(at)f(an)o(y)i(stage)e(of)i(its)f(execution.)0
695 y(In)j(addition,)g(the)f(system)g(c)o(hec)o(ks)g(the)g(soundness)h
(of)e Fn(binding-times)p Fv(.)27 b(Broadly)19 b(sp)q(eaking,)g(it)f
(prev)o(en)o(ts)g(an)0 751 y(expression)i Fj(e)g Fv(computed)f(at)g
(lev)o(el)h Fj(l)g Fv(from)f(b)q(eing)h(used)g(in)g(another)f
(expression)h(at)f(lev)o(el)h(less)g(than)g Fj(l)f Fv(\(i.e.)0
808 y(b)q(efore)c Fj(e)h Fv(is)g(computed\).)71 877 y(This)d(do)q
(cumen)o(t)g(attempts)e(to)h(b)q(e)i(an)e(in)o(tro)q(duction)i(to)e(b)q
(oth)h(m)o(ultistage)g(programming)f(and)g Fs(Met)m(aML)p
Fv(.)0 934 y(Section)j(2)f(describ)q(es)i(the)e(features)g(of)f(b)q
(oth)i Fs(SML)e Fv(\(for)h(those)g(not)f(familiar)i(with)g
Fs(SML)p Fv(\))e(and)i(its)f(meta-lev)o(el)0 990 y(extension.)21
b(In)15 b(Section)h(6,)e(w)o(e)g(examine,)h(step)g(b)o(y)g(step,)f(the)
h(design)h(of)e(t)o(w)o(o)f(larger)i(m)o(ultistage)g(programs:)j(a)0
1047 y Fn(mer)n(ge)d Fv(function)h(o)o(v)o(er)e(lists)i(and)g(a)e
Fn(shortest-p)n(ath)i Fv(algorithm.)0 1192 y Fu(2)67
b(Language)22 b(o)n(v)n(erview)0 1294 y Fs(Met)m(aML)e
Fv(is)g(a)g(meta-programming)f(system)g(.)34 b(In)20
b Fs(Met)m(aML)g Fv(one)g(writes)g(meta-programs)e(in)j(a)e(meta-)0
1351 y(language)d(whic)o(h)h(manipulate)g(ob)s(ject-programs)d(in)j(an)
f(ob)s(ject-language)g(.)22 b(In)16 b Fs(Met)m(aML)g
Fv(b)q(oth)g(the)g(meta-)0 1407 y(language)f(and)h(ob)s(ject-languages)
f(are)g Fs(SML)g Fv([MTHM97)n(,)g(P)o(au96)o(].)71 1464
y(Th)o(us)f(ev)o(ery)f(ordinary)i Fs(SML)e Fv(program)g(is)i(also)f(a)g
Fs(Met)m(aML)g Fv(program;)e(suc)o(h)j(programs)e(just)g(happ)q(en)j
(to)0 1520 y(do)g(no)f(ob)s(ject-lev)o(el)i(manipulation.)23
b Fs(Met)m(aML)16 b Fv(is)g(in)o(tended)h(to)e(b)q(e)i(a)e(conserv)m
(ativ)o(e)h(extension)h(to)e Fs(SML)p Fv(.)g(It)0 1577
y(has)f(the)h(same)f(syn)o(tax)g(and)h(seman)o(tics)f(with)h(the)g
(addition)h(of)e(a)g(few)g(meta-lev)o(el)i(programming)e(constructs.)0
1701 y FA(2.1)56 b(Basic)18 b Fi(SML)h FA(constructs)0
1787 y Fv(F)l(or)d(the)g Fs(SML)g Fv(no)o(vice)h(w)o(e)f(giv)o(e)h(an)f
(extremely)h(brief)g(o)o(v)o(erview)f(of)g(the)h(ordinary)f(features)g
(of)g Fs(SML)p Fv(.)g(In)h(the)0 1844 y(next)j(section)g(w)o(e)g
(explain)h(the)f(additional)i(meta-lev)o(el)f(features.)33
b(Those)20 b(familiar)h(with)f(the)g(syn)o(tax)f(and)0
1900 y(seman)o(tics)c(of)g(Standard)g Fs(SML)g Fv(ma)o(y)g(w)o(an)o(t)f
(to)g(skip)i(directly)h(to)d(Section)i(2.2.)0 2022 y
Ft(2.1.1)52 b Fs(Met)m(aML)p Ft('s)16 b(top-lev)o(el)j(in)o(teractiv)o
(e)f(lo)q(op)0 2109 y Fs(SML)d Fv(and)g Fs(Met)m(aML)p
Fv('s)g(in)o(terface)g(to)g(the)g(user)g(is)h(an)f Fn(inter)n(active)h
(lo)n(op)p Fv(.)j(In)d(this)g(in)o(teractiv)o(e)f(lo)q(op,)h(the)f
(user)0 2165 y(supplies)k(some)e(input.)27 b(It)17 b(is)g(parsed,)h(t)o
(yp)q(e-c)o(hec)o(k)o(ed,)g(and)f(if)h(the)f(input)h(is)g(t)o(yp)q(e-c)
o(hec)o(k)o(ed)f(successfully)l(,)j(the)0 2222 y(input)15
b(is)f(ev)m(aluated,)h(and)f(the)g(result)h(is)f(prin)o(ted)h(for)e
(the)h(user)g(to)f(insp)q(ect.)21 b(In)15 b(our)e(implemen)o(tation)j
(starting)0 2278 y(the)f(system)g(pro)o(vides)h(the)f(follo)o(wing:)0
2380 y Fh(Welcome)20 b(to)i(MetaML...)0 2480 y(-|)71
2588 y Fv(The)16 b(prompt)f(\\)p Fr(-|)p Fv(")g(indicates)i(to)e(the)h
(user)g(that)f(the)h(system)f(is)h(w)o(aiting)g(for)f(input.)23
b(The)16 b(user)f(submits)0 2644 y(expressions)h(to)f(b)q(e)h(ev)m
(aluated)h(b)o(y)f(t)o(yping)f(them)h(in)o(to)f(the)h(system)f(and)h
(terminating)g(them)f(b)o(y)h(a)f(semicolon)0 2701 y(\\)p
Fr(;)p Fv(")e(follo)o(w)o(ed)f(b)o(y)h(a)f Fn(new)r(line)p
Fv(.)18 b Fs(Met)m(aML)12 b Fv(reads,)g(t)o(yp)q(e-c)o(hec)o(ks,)h(and)
g(ev)m(aluates)g(the)g(curren)o(t)f(expression.)20 b(The)964
2825 y(2)p eop
%%Page: 3 9
3 8 bop 0 286 a Fv(result)12 b(is)g(then)g(displa)o(y)o(ed)g(and)g(a)f
(new)h(prompt)f(app)q(ears.)18 b Fs(Met)m(aML)12 b Fv(accepts)f
(di\013eren)o(t)h(kinds)h(of)e(expressions,)0 343 y(whic)o(h)16
b(are)f(describ)q(ed)i(b)o(y)e(the)g(syn)o(tax)g(of)g
Fs(SML)g Fv([MTHM97)n(])g(plus)h Fs(Met)m(aML)p Fv('s)f
(meta-extensions.)71 399 y(F)l(or)f(example,)i(constan)o(ts)e(are)h
(the)g(simplest)h(expressions)g(in)h(the)e(language.)0
493 y Fh(-|)21 b(2;)0 543 y(val)g(it)h(=)f(2)h(:)f(int)0
643 y(-|)g(2+3;)0 692 y(val)g(it)h(=)f(5)h(:)f(int)71
793 y Fv(Ab)q(o)o(v)o(e,)d(in)h(the)f(\014rst)g(example)h(the)f(input)h
Fr(2;)h Fv(is)e(parsed,)h(t)o(yp)q(e-c)o(hec)o(k)o(ed)g(to)e(ha)o(v)o
(e)h(t)o(yp)q(e)g Fr(int)p Fv(,)g(and)h(then)0 849 y(ev)m(aluated.)j
(In)16 b(the)f(second)h(example)g(the)g(expression)g
Fr(2+3)f Fv(is)h(treated)f(similarly)l(,)i(but)f(here)f(w)o(e)g(see)h
(that)f(the)0 906 y(expression)h(is)g(ev)m(aluated)g(to)f
Fr(5)g Fv(b)q(efore)g(its)h(v)m(alue)g(is)g(prin)o(ted;)71
962 y(Note)h(that)g(expressions)h(t)o(yp)q(ed)g(at)f(the)h(top)f(lev)o
(el,)i(if)f(successfully)i(t)o(yp)q(e-c)o(hec)o(k)o(ed,)e(are)g
(assigned)g(to)f(the)0 1019 y(top-lev)o(el)j(\\v)m(ariable")f
Fr(it)p Fv(.)29 b(This)19 b(v)m(ariable)h(can)e(b)q(e)h(used)g(in)g
(the)g(next)f(top)g(lev)o(el)i(input)f(to)f(obtain)h(the)f(last)0
1075 y(v)m(alue)e(input.)0 1169 y Fh(-|)21 b(5;)0 1219
y(val)g(it)h(=)f(5)h(:)f(int)0 1318 y(-|)g(2)h(+)g(it;)0
1368 y(val)f(it)h(=)f(7)h(:)f(int)71 1462 y Fv(New)16
b(v)m(ariables)i(with)e(names)g(of)g(the)h(user's)f(c)o(ho)q(osing)g
(can)h(b)q(e)g(in)o(tro)q(duced)g(using)g(the)g Fr(val)f
Fv(declaration.)0 1512 y(F)l(or)f(example:)0 1594 y Fh(-|)21
b(val)h(xyz)f(=)g(45)h(-)f(3;)0 1644 y(val)g(xyz)g(=)h(42)f(:)h(int)71
1733 y Fv(Note)14 b(that)g(the)g(in)o(teractiv)o(e)h(lo)q(op)g(prin)o
(ts)g(the)f(name)h(of)f(the)h(v)m(ariable)h(declared,)f(it's)f(t)o(yp)q
(e,)h(and)f(its)h(v)m(alue.)0 1852 y Ft(2.1.2)52 b(F)l(unctions)0
1938 y Fs(Met)m(aML)19 b Fv(is)h(a)f(higher)i(order)e(language.)33
b(In)20 b(it)f(functions)i(are)e Fn(\014rst)g(class)g(citizens)p
Fv(.)31 b(They)20 b(can)g(b)q(e)g(con-)0 1994 y(structed,)15
b(passed)g(as)g(parameters,)f(and)h(are)g(recognized)i(b)o(y)e(the)g(t)
o(yp)q(e-c)o(hec)o(k)o(er.)20 b(F)l(or)15 b(example)0
2088 y Fh(-|)21 b(fn)h(n)f(=>)h(n)f(+)h(1;)0 2138 y(val)f(it)h(=)f(fn)h
(:)f(int)g(->)h(int)0 2238 y Fv(constructs)e(an)f(anon)o(ymous)h
(function)g(whic)o(h)h(adds)f(1)g(to)f(its)h(argumen)o(t.)33
b(Using)21 b(the)f(normal)g(in)o(teractiv)o(e)0 2295
y(lo)q(op)15 b(seman)o(tics,)g(this)g(anon)o(ymous)f(function)i(is)f
(then)g(stored)f(in)i(the)f(v)m(ariable)h Fr(it)p Fv(.)j(Note)c(that)f
(functions)h(are)0 2351 y(prin)o(ted)k(out)f(b)o(y)g(prin)o(ting)h(the)
g(function)g(sc)o(hema)f Fr(fn)p Fv(.)29 b(Suc)o(h)19
b(functions)g(can)f(b)q(e)h(applied)i(to)c(argumen)o(ts)h(to)0
2408 y(construct)d(results.)0 2502 y Fh(-|)21 b(fn)h(x)f(=>)h(x)f(*)h
(x;)0 2551 y(val)f(it)h(=)f(fn)h(:)f(int)g(->)h(int)0
2651 y(-|)f(\(it)h(11\);)0 2701 y(val)f(it)h(=)f(121)g(:)h(int)964
2825 y Fv(3)p eop
%%Page: 4 10
4 9 bop 71 286 a Fv(In)18 b(order)g(to)g(write)g(large)h(programs,)e
(the)i(normal)f Fs(SML)g Fv(programming)f(st)o(yle)i(is)g(to)e
(de\014ne)j(functions,)0 343 y(giv)o(e)15 b(them)h(names,)e(and)i(then)
f(use)h(these)f(names)g(in)h(successiv)o(e)h(de\014nitions)g(.)0
453 y Fh(-|)k(val)h(inc)f(=)g(fn)h(n)f(=>)h(n)f(+)h(1;)0
503 y(val)f(inc)g(=)h(fn)f(:)h(int)f(->)g(int)0 603 y(-|)g(val)h(plus2)
e(=)i(fn)f(x)h(=>)f(inc\(inc)g(x\);)0 653 y(val)g(plus2)g(=)h(fn)f(:)g
(int)h(->)f(int)0 752 y(-|)g(plus2)g(4;)0 802 y(val)g(it)h(=)f(6)h(:)f
(int)71 917 y Fs(Met)m(aML)15 b Fv(supplies)i(a)e(useful)h(syn)o
(tactic)f(sugar)g(for)f(de\014ning)j(functions.)0 1028
y Fh(-|)k(fun)h(inc)f(n)g(=)h(n)f(+)h(1;)0 1078 y(val)f(inc)g(=)h(fn)f
(:)h(int)f(->)g(int)0 1177 y(-|)g(\(inc)g(12\);)0 1227
y(val)g(it)h(=)f(13)h(:)f(int)71 1343 y Fv(This)16 b(shorthand)f(can)h
(b)q(e)g(de\014ned)h(in)f(terms)f(of)g(a)g(named)h(declaration)g(\()p
Fr(val)23 b(f)h(=)g(...)p Fv(\))c(and)c(an)f(anon)o(y-)0
1399 y(mous)h(function)g(de\014nition)i(\()p Fr(fn)23
b(=>)h(n+1)p Fv(\))752 1383 y Fm(2)771 1399 y Fv(.)e(The)16
b(shorthand)f(can)h(b)q(e)h(extended)g(to)e(functions)i(of)e(an)o(y)h
(arit)o(y)l(.)0 1456 y(So)f(w)o(e)g(can)g(use)68 1571
y Fg(\017)23 b Fr(fun)g(f)h(x)g(=)f(e)135 b Fv(instead)16
b(of)60 b Fr(val)24 b(f)f(=)h(fn)g(x)f(=>)h(e)p Fv(.)68
1672 y Fg(\017)f Fr(fun)g(g)h(x)g(y)f(=)h(r)96 b Fv(instead)16
b(of)75 b Fr(val)23 b(g)h(=)g(fn)f(x)h(=>)g(fn)f(y)h(=>)g(r)120
b Fv(and)68 1773 y Fg(\017)23 b Fr(fun)g(h)h(x)g(y)f(z)h(=)g(p)45
b Fv(instead)16 b(of)68 b Fr(val)24 b(h)g(=)f(fn)h(x)g(=>)f(fn)h(y)g
(=>)f(fn)h(z)g(=>)f(p)p Fv(.)0 1904 y Ft(2.1.3)52 b(P)o(olymorphism)0
1993 y Fs(SML)16 b Fv(also)h(allo)o(ws)f(the)h(programmer)e(to)h(write)
g Fn(p)n(olymorphic)h Fv(functions.)25 b(Suc)o(h)17 b(functions)g(ma)o
(y)f(b)q(e)h(applied)0 2049 y(to)i(argumen)o(ts)g(of)g(di\013eren)o(t)g
(t)o(yp)q(es.)33 b(F)l(or)19 b(instance)h(the)g(function)g
Fr(id)g Fv(is)g(the)f(iden)o(tit)o(y)i(o)o(v)o(er)d(v)m(alues)j(in)f
(an)o(y)0 2106 y(domain:)0 2216 y Fh(-|)h(val)h(id)f(=)h(fn)f(x)g(=>)h
(x;)0 2266 y(val)f(id)h(=)f(Fn)h(:)f(['a].'a)f(->)i('a)0
2366 y(-|)f(id)h(3;)0 2416 y(val)f(it)h(=)f(3)h(:)f(int)0
2515 y(-|)g(id)h("a";)0 2565 y(val)f(it)h(=)f("a")g(:)h(string)p
0 2612 780 2 v 52 2639 a Fl(2)69 2655 y Fk(Strictly)15
b(sp)q(eaking,)g(this)g(is)f(not)f(exactly)i(correct,)e(as)h(the)f
Ff(fun)f Fk(syn)o(tactic)j(sugar)f(allo)o(ws)g(recursiv)o(e)h
(functions)g(while)g(the)e Ff(val)0 2701 y Fk(form)g(do)q(es)g(not.)18
b(See)13 b(Section)h(2.1.5)964 2825 y Fv(4)p eop
%%Page: 5 11
5 10 bop 71 286 a Fv(The)17 b(t)o(yp)q(e-c)o(hec)o(k)o(er)g(indicates)h
(that)f Fr(id)f Fv(is)i(p)q(olymorphic)g(b)o(y)f(using)h(a)e(t)o(yp)q
(e)h(v)m(ariable)i Fr('a)d Fv(in)i(its)f(t)o(yp)q(e.)25
b(In)0 343 y Fs(Met)m(aML)p Fv(,)19 b(the)h(list)h(of)e(the)h(free)605
326 y Fm(3)644 343 y Fv(v)m(ariables)h(of)f(a)f(t)o(yp)q(e)h(are)f
(displa)o(y)o(ed)i(as)f(a)f(pre\014x)h(of)f(the)h(t)o(yp)q(e:)29
b(in)21 b(the)0 399 y(example)16 b(b)q(elo)o(w,)f Fr(['a])g
Fv(indicates)i(that)d(the)h(t)o(yp)q(e)h(of)f(the)g(expression)h(is)g
Fr('a)23 b(->)h('a)p Fv(,)14 b(for)h(an)o(y)g Fr('a)p
Fv(.)71 469 y(Another)k(example)g(is)h(the)f(function)h
Fr(max)f Fv(b)q(elo)o(w.)32 b Fr(max)18 b Fv(tak)o(es)h(three)g
(argumen)o(ts:)27 b(an)19 b(op)q(erator)f Fr(gt)h Fv(for)0
526 y(comparison)e(and)g(t)o(w)o(o)f(v)m(alues)i Fr(a)f
Fv(and)g Fr(b)p Fv(.)26 b(It)17 b(returns)g(the)g(greatest)f(elemen)o
(t)i(\(according)f(to)f Fr(gt)p Fv(\))h(b)q(et)o(w)o(een)g
Fr(a)0 582 y Fv(and)e Fr(b)p Fv(.)0 686 y Fh(-|)21 b(fun)h(max)f(gt)g
(x)h(y)f(=)h(if)f(\(gt)g(x)h(y\))f(then)g(x)h(else)f(y;)0
736 y(val)g(max)g(=)h(Fn)f(:)h(['a].\('a)e(->)h('a)h(->)f(bool\))g(->)g
('a)h(->)f('a)g(->)h('a)0 845 y Fr(max)17 b Fv(is)i(p)q(olymorphic.)29
b(Ho)o(w)o(ev)o(er,)17 b(note)g(that)g(the)h(system)f(requires)i
Fr(x)e Fv(and)h Fr(y)g Fv(ha)o(v)o(e)f(the)h(same)f(t)o(yp)q(e)h
Fr('a)p Fv(.)27 b(In)0 901 y(addition)16 b Fr(gt)f Fv(has)g(to)g(ha)o
(v)o(e)g(the)g(t)o(yp)q(e)g Fr('a)24 b(->)f('a)h(->)g(bool)p
Fv(.)0 1025 y Ft(2.1.4)52 b(Non-generalized)19 b(t)o(yp)q(e)e(v)m
(ariables)0 1112 y Fv(P)o(olymorphism)c(allo)o(ws)g(the)g(programmer)f
(to)g(de\014ne)i(generic)g(functions)g(whic)o(h)g(ma)o(y)e(b)q(e)i
(applied)g(to)f(di\013eren)o(t)0 1168 y(kinds)21 b(of)e(argumen)o(ts.)
32 b(F)l(or)19 b(instance)i(the)f(t)o(yp)q(e)f(of)h(the)f(function)i
Fr(id)e Fv(\(giv)o(en)h(in)g(the)g(previous)h(section\))e(is)0
1225 y(parameterized)d(b)o(y)f(a)g Fn(typ)n(e)h(variable)f
Fr('a)p Fv(:)0 1328 y Fh(-|)21 b(fun)h(id)f(x)h(=)f(x;)0
1378 y(val)g(id)h(=)f(Fn)h(:)f(['a].'a)f(->)i('a)71 1487
y Fv(F)l(or)14 b(instance,)i Fr(id)f Fv(ma)o(y)f(b)q(e)i(applied)h(to)e
(b)q(oth)g(strings)g(and)g(functions:)0 1591 y Fh(-|)21
b(id)h("this)f(is)g(a)g(string";)0 1641 y(val)g(it)h(=)f("this)g(is)g
(a)h(string")e(:)i(string)0 1740 y(-|)f(id)h(\(fn)f(x)h(=>)f(x+1\);)0
1790 y(val)g(it)h(=)f(fn)h(:)f(int)g(->)h(int)71 1899
y Fv(W)l(e)c(sa)o(y)g(that)f Fr(id)p Fv('s)h(t)o(yp)q(e)g(v)m(ariable)i
(is)f(a)f Fn(gener)n(alize)n(d)e Fv(t)o(yp)q(e)j(v)m(ariable.)30
b(This)19 b(indicates)h(its)e(p)q(olymorphic)0 1956 y(b)q(eha)o(vior.)
26 b(Ho)o(w)o(ev)o(er,)16 b(It)h(ma)o(y)f(b)q(e)i(sometimes)f(unsafe)g
(to)f(generalize)j(a)e(t)o(yp)q(e)g(v)m(ariable.)26 b(This)18
b(\\unsafeness")0 2012 y(follo)o(ws)13 b(from)g(an)g(in)o(teraction)h
(of)e(SML's)h(reference)h(t)o(yp)q(es)f(and)h(generalized)h(t)o(yp)q(e)
e(v)m(ariables.)21 b(Generalization)0 2069 y(o)q(ccurs)c(at)g
(generalization)h(p)q(oin)o(ts,)f(t)o(ypically)i(at)d(top-lev)o(el)i
(and)f(inside)i(let)f(bindings.)27 b(A)o(t)16 b(a)h(generalization)0
2125 y(p)q(oin)o(t,)e(if)f(an)g(expression)i(is)e(not)g(a)g(v)m(alue)i
(\(but)e(a)g(computation)g(whic)o(h)h(ma)o(y)e(allo)q(cate)i(a)f
(reference)h(cell\),)h(then)0 2182 y(it)f(cannot)g(b)q(e)h(giv)o(en)g
(a)f(p)q(olymorphic)i(t)o(yp)q(e.)j(F)l(or)14 b(instance,)i(let)f(us)h
(de\014ne)g(the)f(function)h(pair:)0 2285 y Fh(-|)21
b(fun)h(pair)f(y)g(=)h(\(y,y\);)0 2335 y(val)f(pair)g(=)h(Fn)f(:)h
(['a].'a)e(->)h(\('a)h(*)f('a\))71 2444 y Fv(Note)13
b(that)h(b)q(oth)g Fr(pair)g Fv(and)g Fr(id)g Fv(are)g(p)q(olymorphic)h
(The)g(problem)g(o)q(ccurs)f(if)h(w)o(e)f(consider)h(the)f(expression)0
2501 y Fr(\(id)23 b(pair\))p Fv(.)34 b(This)20 b(expression)h(is)f(p)q
(olymorphic)i(but)e(it)g(is)g(not)g(a)f(v)m(alue)j(\(it)d(is)i(an)f
(application)h(and)f(it)g(is)0 2557 y(feasible)d(that)e(suc)o(h)g(an)h
(application)h(could)f(allo)q(cate)g(reference)h(cells\).)k(T)o(yp)q(e)
16 b(safet)o(y)f(considerations)h(do)f(not)0 2613 y(allo)o(w)g(the)h
(generalization)g(of)f(expressions)h(whic)o(h)g(do)f(reference)h(cell)h
([W)l(ri95)o(])e(allo)q(cation.)p 0 2658 780 2 v 52 2685
a Fl(3)69 2701 y Fk(Some)f(t)o(yp)q(e)f(v)n(ariables)i(are)e(not)h
(free.)i(See)d(Section)i(2.1.4)e(for)f(details.)964 2825
y Fv(5)p eop
%%Page: 6 12
6 11 bop 71 286 a Fv(The)21 b(treatmen)o(t)g(of)g(non-generalizable)j
(t)o(yp)q(e)e(v)m(ariables)h(v)m(aries,)h(dep)q(ending)g(up)q(on)e
(particular)g(imple-)0 343 y(men)o(tations.)i(Standard)17
b Fs(SML)g Fv(of)f(New)h(Jersey's)g(t)o(yp)q(e-c)o(hec)o(k)o(er)g
(rejects)g(suc)o(h)g(expressions.)25 b Fs(Caml)17 b Fv([Ler97)o(])0
399 y(instan)o(tiates)e(these)g(v)m(ariables)h(b)o(y)f
Fn(non-gener)n(alize)n(d)e(typ)n(e)j(variables)p Fv(.)j(An)o(y)c(t)o
(yp)q(e)g(ma)o(y)f(b)q(e)i(assigned)f(to)f(a)h(non-)0
456 y(generalized)22 b(t)o(yp)q(e)e(v)m(ariable)i Fj(v)r
Fv(.)34 b(Ho)o(w)o(ev)o(er,)20 b Fj(v)i Fv(ma)o(y)d(only)i(b)q(e)g
(instan)o(tiated)f(once.)35 b(Lik)o(e)21 b Fs(Caml)f(Met)m(aML)0
512 y Fv(uses)h(non-generalized)i(t)o(yp)q(e)f(v)m(ariables.)38
b(The)21 b(example)h(b)q(elo)o(w)g(illustrates)g(the)f(b)q(eha)o(vior)h
(of)e(the)h(system)0 569 y(concerning)16 b(this)g(p)q(oin)o(t.)0
671 y Fh(-|)43 b(val)21 b(e)h(=)g(id)f(pair;)0 721 y(val)g(e)h(=)f(fn)h
(:)f('1)h(->)f(\('1)g(*)h('1\))71 830 y Fv(The)14 b(v)m(ariable)i
Fr(e)e Fv(has)g(a)f(t)o(yp)q(e)i(\()p Fr('1)23 b(->)h(\('1)f(*)h('1\))p
Fv(\))13 b(whic)o(h)i(includes)i(a)d(non-generalizable)i(t)o(yp)q(e)f
(v)m(ariable)0 886 y Fr('1)p Fv(.)23 b(Note)17 b(the)f(absence)h(of)f
(square)h(brac)o(k)o(ets,)e(and)i(the)g(naming)f(of)g(the)h(v)m
(ariable)h(with)f(a)f(digit)h(rather)f(than)0 943 y(an)g(alphab)q(etic)
i(c)o(haracter.)k(This)17 b(is)g Fs(Met)m(aML)p Fv('s)f(w)o(a)o(y)f(of)
h(indicating)i(instan)o(tiatable)f(t)o(yp)q(e)f(v)m(ariables.)24
b(This)0 999 y(v)m(ariable)17 b(will)f(b)q(ecome)g(instan)o(tiated)g
(if)g Fr(e)f Fv(is)g(ev)o(er)g(used)h(in)g(a)f(non-p)q(olymorphic)i(w)o
(a)o(y)l(.)i(Consider:)0 1102 y Fh(-|)i(e)h(3;)0 1152
y(val)f(it)h(=)f(\(3,3\))g(:)g(\(int)g(*)h(int\))71 1260
y Fv(The)12 b(application)i(has)e(instan)o(tiated)h(the)f(v)m(ariable)i
Fr('1)p Fv(.)19 b(The)12 b(function)i Fr(e)e Fv(is)h(no)o(w)e(a)i
(function)g(o)o(v)o(er)e(in)o(tegers.)0 1317 y(After)k(this,)g
(attempting)g(to)f(apply)i Fr(e)f Fv(to)g(an)g(argumen)o(t)g(of)f(a)h
(di\013eren)o(t)h(t)o(yp)q(e)f(mak)o(es)g(the)g(system)g(complain.)0
1420 y Fh(-|)21 b(e;)0 1469 y(val)g(it)h(=)f(fn)h(:)f(int)g(->)h(\(int)
f(*)g(int\))0 1569 y(-|)g(e)h("aa";)0 1619 y(Error:)f(The)g(term:)0
1669 y("aa")0 1718 y(in)g(file)g('top)g(level')g(4)g(-)h(8)44
1768 y(Cannot)e(unify)h(the)g(types:)g(different)f(type)h(constructor)
65 1818 y(string)44 1868 y(and)65 1918 y(int)22 1968
y(in)g(expression:)f("aa")0 2090 y Ft(2.1.5)52 b(Recursion)0
2177 y Fv(Recursion)17 b(in)g Fs(SML)f Fv(is)g(explicit.)25
b(That)15 b(is,)h(if)h(y)o(ou)e(w)o(an)o(t)g(to)g(write)i(a)e(recursiv)
o(e)i(function)g(y)o(ou)e(m)o(ust)h(use)g(the)0 2234
y Fr(fun)g Fv(syn)o(tactic)h(sugar)g(or)f(the)h Fr(val)24
b(rec)16 b Fv(declaration.)26 b(T)l(o)17 b(illustrate)h(this,)f(here)g
(are)g(t)o(w)o(o)f(di\013eren)o(t)h(w)o(a)o(ys)f(to)0
2290 y(express)f(the)h(factorial)f(function)h(recursiv)o(ely:)0
2393 y Fh(-|)21 b(val)h(rec)f(fact)g(=)g(fn)h(x)f(=>)h(if)f(x=0)g(then)
g(1)h(else)f(x*\(fact)f(\(x-1\)\);)0 2443 y(val)h(fact)g(=)h(fn)f(:)h
(int)f(->)g(int)0 2542 y(-|)g(fact)g(5;)0 2592 y(val)g(it)h(=)f(120)g
(:)h(int)71 2701 y Fv(and)964 2825 y(6)p eop
%%Page: 7 13
7 12 bop 0 286 a Fh(-|)21 b(fun)h(fact)f(x)g(=)h(if)f(x=0)g(then)g(1)h
(else)f(x*\(fact)f(\(x-1\)\);)0 336 y(val)h(fact)g(=)h(fn)f(:)h(int)f
(->)g(int)0 436 y(-|)g(fact)g(4;)0 486 y(val)g(it)h(=)f(24)h(:)f(int)0
607 y Ft(2.1.6)52 b(Data)18 b(structures)0 694 y Fv(New)d(data-t)o(yp)q
(es)g(are)g(de\014ned)h(using)g(the)g Fr(datatype)e Fv(construct.)0
795 y Fh(-|)21 b(datatype)g('a)g(Seq)g(=)h(N)f(|)h(C)f(of)h('a)f(*)h
('a)f(Seq;)0 845 y(constructor)f(N)0 895 y(constructor)g(C)0
994 y(-|)h(N;)0 1044 y(val)g(it)h(=)f(Fn)43 b(:)22 b(['a].'a)42
b(Seq)0 1144 y(-|)21 b(C;)0 1194 y(val)g(it)h(=)f(Fn)43
b(:)22 b(['a].\('a)42 b(*)21 b('a)44 b(Seq\))21 b(->)g('a)43
b(Seq)71 1301 y Fv(A)19 b Fn(data-typ)n(e)i(de)n(clar)n(ation)i
Fv(in)o(tro)q(duces)d(a)f(new)h(t)o(yp)q(e)f(\(or)g(in)h(this)g(case)f
(a)g(t)o(yp)q(e)h(constructor\))e Fr(Seq)p Fv(,)i(and)0
1358 y(sev)o(eral)14 b(v)m(alue)i(constructors)d(\()p
Fr(N)h Fv(and)h Fr(C)p Fv(\).)e(A)i(v)m(alue)g(constructor)f(can)g
(either)h(b)q(e)g(a)f(constan)o(t)f(of)h(the)h(new)f(t)o(yp)q(e,)0
1414 y(suc)o(h)j(as)f Fr(N)g Fv(or)g(a)g(constructor)g(function)h(whic)
o(h)g(when)g(applied)h(to)e(v)m(alues)i(of)e(the)g(correct)g(t)o(yp)q
(e)h Fn(c)n(onstructs)e Fv(a)0 1471 y(v)m(alue)h(of)f(the)g(new)h(t)o
(yp)q(e)f(suc)o(h)h(as)f Fr(C)p Fv(.)0 1572 y Fh(-|)21
b(val)h(s)f(=)h(C\(1,C\(2,C\(3,N\)\)\))o(;)0 1622 y(val)f(s)h(=)f(C)h
(\(1,C)f(\(2,C)g(\(3,N)g(\)\)\))g(:)h(int)f(Seq)71 1730
y Fv(As)15 b(another)g(example,)g(a)g(binary)h(tree)f(with)g(in)o
(teger)h(v)m(alues)g(stored)f(at)f(the)i(lea)o(v)o(es)f(could)h(b)q(e)g
(de\014ned)h(as:)0 1831 y Fh(-|)k(datatype)g(Tree)f(=)i(Tip)f(of)h(int)
f(|)g(Node)g(of)h(Tree)f(*)g(Tree;)0 1881 y(constructor)f(Tip)0
1930 y(constructor)g(Node)0 2030 y(-|)h(Tip;)0 2080 y(val)g(it)h(=)f
(fn)43 b(:)22 b(int)f(->)g(Tree)0 2180 y(-|)g(Node;)0
2229 y(val)g(it)h(=)f(fn)43 b(:)22 b(\(Tree)f(*)g(Tree\))g(->)g(Tree)71
2337 y Fn(Pattern)d(matching)g Fv(allo)o(ws)h(the)f(user)g(to)f(write)h
(functions)h(o)o(v)o(er)e(data)h(t)o(yp)q(es.)28 b Fr(null)17
b Fv(indicates)j(whether)0 2394 y(a)g(sequence)i(as)e(de\014ned)h(ab)q
(o)o(v)o(e)f(b)o(y)g(the)h(data)f(t)o(yp)q(e)g Fr(Seq)g
Fv(is)h(empt)o(y)l(.)35 b Fr(length)19 b Fv(computes)i(the)f(length)h
(of)f(a)0 2450 y(sequence.)h(The)15 b(sym)o(b)q(ol)p
458 2450 15 2 v 48 w(matc)o(hes)g(an)o(y)g(v)m(alue.)0
2551 y Fh(-|)21 b(fun)h(length)e(N)i(=)f(0)109 2601 y(|)h(length)e
(\(C\(x,xs\)\))g(=)i(1+)f(\(length)f(xs\);)0 2651 y(val)h(length)g(=)g
(Fn)43 b(:)22 b(['a].'a)42 b(Seq)21 b(->)h(int)964 2825
y Fv(7)p eop
%%Page: 8 14
8 13 bop 0 286 a Fh(-|)21 b(length)g(s;)0 336 y(val)g(it)h(=)f(3)h(:)f
(int)0 436 y(-|)g(fun)h(null)f(N)g(=)h(true)109 486 y(|)g(null)f(\(C)g
(_\))g(=)h(false;)0 535 y(val)f(null)g(=)h(Fn)43 b(:)21
b(['a].'a)43 b(Seq)21 b(->)g(bool)0 635 y(-|)g(null)g(s;)0
685 y(val)g(it)h(=)43 b(false)f(:)22 b(bool)71 794 y
Fv(This)12 b(completes)g(our)g(cursory)f(review)h(of)g(Standard)f(ML.)h
(W)l(e)g(no)o(w)f(turn)g(our)h(atten)o(tion)f(to)g(the)h(meta-lev)o(el)
0 850 y(features)j(unique)i(to)d Fs(Met)m(aML)p Fv(.)0
975 y FA(2.2)56 b(Multi-stage)17 b(annotations)0 1061
y Fv(In)e(an)g(analogy)f(with)i(higher-order)f(programming,)f(a)g
Fn(se)n(c)n(ond-or)n(der)g Fv(program)g(mak)o(es)g(functions)i(\014rst)
e(class,)0 1118 y(while)g(a)e Fn(two-stage)h Fv(program)f(mak)o(es)g
(the)h Fn(r)n(epr)n(esentations)e Fv(of)h(programs)f(\014rst)h(class.)
20 b(A)13 b(third-stage)f(program)0 1174 y(mak)o(es)18
b(represen)o(tations)h(of)g(represen)o(tations)g(\014rst)f(class,)i
(etc.)31 b Fs(Met)m(aML)19 b Fv(is)g(a)g Fn(multistage)g
Fv(programming)0 1231 y(system)c(since)h(it)g(allo)o(ws)f(represen)o
(tations)g(at)g(all)h(stages)e(to)h(b)q(e)h(\014rst)e(class)i(ob)s
(jects.)71 1288 y Fs(Met)m(aML)j Fv(is)h(designed)h(to)e(mak)o(e)h(an)f
(explicit)j(distinction)f(b)q(et)o(w)o(een)f(the)g Fn(syntax)f
Fv(and)h(the)g Fn(semantics)0 1344 y Fv(of)i(programs.)39
b(By)22 b(this)g(w)o(e)g(mean)g(that)f(a)h(distinction)h(is)g(made)f(b)
q(et)o(w)o(een)g(the)g Fn(value)g Fv(describ)q(ed)i(b)o(y)e(an)0
1400 y(expression)h(and)f(the)g Fn(enc)n(o)n(ding)f Fv(of)g(that)h
(expression.)41 b Fs(Met)m(aML)22 b Fv(mak)o(es)f(this)i(distinction)h
(explicit)g(and)0 1457 y(allo)o(ws)15 b(programmers)f(to)h(describ)q(e)
i(b)q(oth.)71 1514 y(The)12 b(represen)o(tation)h(of)f(a)g(program)g
Fr(p)g Fv(whose)h(v)m(alue)g(is)g Fj(p)g Fv(is)g(denoted)g(b)o(y)g(the)
f(meta-brac)o(k)o(eted)g(expression)0 1570 y Fr(<p>)p
Fv(.)24 b(W)l(e)17 b(sa)o(y)f Fr(<p>)g Fv(is)i Fn(stage-)p
Fv(1)f Fn(c)n(o)n(de)f Fv(and)h(denotes)g(a)g(represen)o(tation)g(of)f
Fr(p)p Fv(.)24 b(W)l(e)17 b(refer)g(to)f Fr(p)h Fv(as)f
Fn(stage-)p Fv(0)h Fn(c)n(o)n(de)0 1627 y Fv(and)e(this)h(denotes)f
(its)h(v)m(alue)g Fn(p)p Fv(.)0 1750 y Ft(2.2.1)52 b(The)18
b(brac)o(k)o(et)e(op)q(erator:)23 b(building)d(pieces)d(of)h(co)q(de)0
1836 y Fs(Met)m(aML)c Fv(di\013ers)g(from)f Fs(SML)g
Fv(in)h(that)f(it)h(allo)o(ws)g(the)g(programmer)e(to)h(explicitly)k
(manipulate)e Fn(higher-stage)0 1893 y(expr)n(essions)223
1876 y Fm(4)241 1893 y Fv(.)20 b(In)15 b Fs(Met)m(aML)p
Fv(,)g(a)f(stage-1)g(expression)i(is)g(denoted)f(b)o(y)g(enclosing)h
(it)f(b)q(et)o(w)o(een)g(meta-brac)o(k)o(ets.)0 1949
y(F)l(or)g(instance,)g(the)g(pieces)i(of)e(co)q(de)h(denoting)f(the)h
(constan)o(t)e(23)h(and)g(the)g(arithmetic)h(expression)g(5)10
b(+)h(1)j(are)0 2052 y Fh(-|)21 b(<23>;)0 2102 y(val)g(it)h(=)f(<23>)g
(:)h(<int>)0 2201 y(-|)f(<5+1>;)0 2251 y(val)g(it)h(=)f(<5)h(\045+)f
(1>)g(:)h(<int>)71 2360 y Fv(First)13 b(of)g(all,)h(let)g(us)f(remark)g
(that)g(neither)h Fr(<23>)f Fv(nor)g Fr(<5+1>)g Fv(are)g(in)o(teger)g
(v)m(alues.)21 b(The)13 b(t)o(yp)q(e)h(of)f(these)g(t)o(w)o(o)0
2416 y(expressions)j(\()p Fr(<int>)e Fv(and)i Fr(<int>)p
Fv(\))e(indicates)i(that)f(they)g(are)g(b)q(oth)g(pieces)i(of)e(co)q
(de)g(with)h(t)o(yp)q(e)f Fr(int)p Fv(.)71 2473 y(T)l(rying)g(to)g(use)
g(them)g(as)g(in)o(tegers)h(fails)f(in)i(the)e(t)o(yp)q(e)g(c)o(hec)o
(king)h(stage,)e(and)i(the)f(system)g(complains:)0 2576
y Fh(-|)21 b(<23>)g(+)h(2;)0 2625 y(Error:)f(The)g(term:)p
0 2658 780 2 v 52 2685 a Fl(4)69 2701 y Fk(Expressions)15
b(whose)f(stage)f(is)h(higher)g(than)g(0.)964 2825 y
Fv(8)p eop
%%Page: 9 15
9 14 bop 0 286 a Fh(\(<23>,2\))0 336 y(in)21 b(file)g('top)g(level')g
(2)g(-)h(10)44 386 y(Cannot)e(unify)h(the)g(types:)g(Non)g(Qualified)f
(type)65 436 y(?#)44 486 y(and)65 535 y(<int>)22 585
y(in)h(expression:)f(\(<23>,2\))71 695 y Fv(F)l(urthermore,)13
b Fr(<5+1>)g Fv(is)i(not)e(reduced)j(to)d Fr(6)h Fv(b)q(ecause)h(brac)o
(k)o(eted)f(expressions)g(are)g Fn(fr)n(ozen)p Fv(.)19
b(Both)13 b(expres-)0 751 y(sions)j(are)e(ob)s(ject)h(programs)f(whic)o
(h)i(are)f(not)g(ev)m(aluated)h(un)o(til)g(explicitly)i(forced)d(with)h
(the)f Fr(run)g Fv(annotation.)71 808 y(A)g(more)g(sophisticated)h
(example)g(con)o(trasts)e(the)h(expressions)h Fr(id)f
Fv(and)g Fr(idCode)g Fv(b)q(elo)o(w:)0 912 y Fh(-|)21
b(val)h(id)f(=)h(fn)f(x)g(=>)h(x;)0 962 y(val)f(id)h(=)f(Fn)h(:)f
(['a].'a)f(->)i('a)0 1061 y(-|)f(val)h(idCode)e(=)i(<fn)f(x)g(=>)h(x>;)
0 1111 y(val)f(idCode)g(=)g(<\(fn)g(a)h(=>)f(a\)>)g(:)h(['a].<'a)42
b(->)21 b('a)h(>)71 1221 y Fr(id)14 b Fv(is)i(a)f(pure)g
Fs(SML)g Fv(function)h(and)g(the)f(language)g(infers)h(its)f(usual)h(p)
q(olymorphic)h(t)o(yp)q(e.)j(Next,)15 b(the)g(t)o(yp)q(e)0
1277 y(asso)q(ciated)21 b(to)e Fr(idCode)h Fv(is)h Fr(<'a)i(->)h('a>)p
Fv(.)35 b(Note)20 b(the)g(co)q(de)h(t)o(yp)q(e)g(constructor)e(brac)o
(k)o(ets)h(surrounding)h(the)0 1333 y(function)16 b(t)o(yp)q(e.)k(Co)q
(de)15 b(can)h(b)q(e)g(executed)g(using)g(the)f Fr(run)g
Fv(construct.)0 1437 y Fh(-|)21 b(\(run)g(idCode\))g("aa";)0
1487 y(val)g(it)h(=)f("aa")g(:)h(string)71 1596 y Fv(In)16
b(the)h(de\014nition)h(of)d Fr(idCode)p Fv(,)g Fr('a)24
b(->)g('a)16 b Fv(represen)o(ts)g(the)g(t)o(yp)q(e)g(the)g(ob)s(ject)g
(program)f(will)j(ha)o(v)o(e,)d(when)0 1653 y(\014nally)i(executed.)71
1723 y(In)f Fs(Met)m(aML)p Fv(,)f(programs)g(\(brac)o(k)o(eted)g
(expressions\))h(are)g(\014rst-class)g(v)m(alues.)22
b(Hence)17 b(one)f(can)g(use)g(them)0 1779 y(in)g(man)o(y)f(di\013eren)
o(t)g(w)o(a)o(ys.)0 1883 y Fh(-|)21 b(<fn)h(n)f(=>)h(n)f(+)h(1>;)0
1933 y(val)f(it)h(=)f(<\(fn)g(a)h(=>)f(a)h(\045+)f(1\)>)g(:)h(<int)f
(->)g(int>)71 2042 y Fr(<fn)i(n)h(=>)f(n)h(+)g(1>)15
b Fv(denotes)h(the)f(co)q(de)i(of)e(a)g(function.)22
b(It)15 b(is)h(the)g(enco)q(ding)h(of)e(the)h(incremen)o(t)g(function)0
2099 y(o)o(v)o(er)e(in)o(tegers.)0 2202 y Fh(-|)21 b(<fn)h(n)f(=>)h(<n)
f(+)g(1>>;)0 2252 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)f(<a)g(\045+)h(1>\)>)
f(:)g(<int)g(->)h(<int>>)71 2361 y Fr(<fn)h(n)h(=>)f(<n)h(+)g(1>>)11
b Fv(denotes)h(a)f(three-stage)g(program.)18 b(In)12
b(the)g(\014rst)g(stage)f(it)h(is)g(simply)h(a)e(piece)i(of)f(data)0
2418 y(whic)o(h)19 b(represen)o(ts)f(a)f(program.)27
b(In)19 b(the)f(second)h(stage)e(that)g(program)g(can)h(b)q(e)h(run,)f
(accepting)h(an)f(in)o(teger)0 2474 y(and)d(pro)q(ducing)i(a)e(piece)h
(of)f(co)q(de.)21 b(A)o(t)14 b(the)i(third)f(stage)g(that)f(piece)j(of)
e(co)q(de)g(can)h(b)q(e)g(executed.)71 2531 y(The)e Fn(stage)f
Fv(of)h(an)o(y)f(piece)i(of)f(co)q(de)g(can)g(b)q(e)h(iden)o(ti\014ed)h
(b)o(y)d(the)h(n)o(um)o(b)q(er)g(of)g(surrounding)h(brac)o(k)o(ets.)j
(Simple)0 2588 y(v)m(alues)j(as)e Fr(13)g Fv(and)g Fr(fn)24
b(n)g(=>)f(n+1)c Fv(are)h(stage-0)e(ob)s(ject)h(programs.)31
b(In)21 b Fr(<fn)i(n)h(=>)f(n)h(+)g(1>)p Fv(,)c(the)f(function)0
2644 y(inside)i(the)f(brac)o(k)o(ets)e(is)i(stage-1)f(co)q(de.)33
b(Finally)l(,)22 b(in)e Fr(<fn)j(n)h(=>)g(<n)f(+)h(1>>)p
Fv(,)19 b Fr(n)24 b(+)g(1)19 b Fv(is)h(a)f(stage-2)g(piece)h(of)0
2701 y(co)q(de.)964 2825 y(9)p eop
%%Page: 10 16
10 15 bop 0 286 a Ft(2.2.2)52 b(The)18 b(escap)q(e)g(op)q(erator:)23
b(comp)q(osing)18 b(pieces)g(of)f(co)q(de)0 373 y Fv(Brac)o(k)o(eted)22
b(expressions)h(can)g(b)q(e)g(view)o(ed)g(as)f Fn(fr)n(ozen)p
Fv(,)h(i.e.)42 b(reduction)23 b(do)q(es)g(not)f(apply)h(under)g(brac)o
(k)o(ets.)0 429 y(Ho)o(w)o(ev)o(er,)13 b(is)i(it)f(often)g(con)o(v)o
(enien)o(t)h(to)e(allo)o(w)h(some)g(reduction)h(steps)f(inside)i(a)e
(large)g(frozen)g(expression)h(while)0 486 y(it)20 b(is)g(b)q(eing)h
(constructed.)33 b Fs(Met)m(aML)19 b Fv(allo)o(ws)h(one)g(to)f
Fn(esc)n(ap)n(e)f Fv(from)h(a)g(frozen)h(expression)g(b)o(y)g
(pre\014xing)g(a)0 542 y(sub-expression)d(within)f(it)g(with)f(a)g
(tilde)h(\()l(~)l(\))f(.)20 b(F)l(or)15 b(instance,)g(let)h(us)f
(examine)h(the)f(function)i Fr(pair)d Fv(b)q(elo)o(w:)0
644 y Fh(-|)21 b(fun)h(pair)f(x)g(=)h(<\(~x,~x\)>;)0
694 y(val)f(pair)g(=)h(Fn)43 b(:)21 b(['a].<'a)g(>)g(->)h(<\('a)42
b(*)22 b('a)f(\)>)71 802 y Fv(The)c(function)h Fr(pair)f
Fv(tak)o(es)g(a)g(piece)i(of)e(co)q(de)g(\(of)g(t)o(yp)q(e)h
Fr(<'a>)p Fv(\)as)e(input,)i(and)g(pro)q(duces)g(a)f(new)h(piece)g(of)0
858 y(co)q(de)d(\(of)e(t)o(yp)q(e)i Fr(<\('a)23 b(*)h('a\)>)p
Fv(\).)19 b(It)14 b(transforms)f(the)h(input)h(co)q(de)g
Fj(x)g Fv(in)o(to)f(the)g(co)q(de)h(of)f(the)g(pair)h(\()p
Fj(x;)8 b(x)p Fv(\).)18 b(T)l(o)c(do)0 914 y(this)f(w)o(e)e(m)o(ust)h
(\\splice")h Fj(x)f Fv(in)h(the)g(resulting)g(co)q(de)f(in)h(t)o(w)o(o)
e(places.)20 b(This)13 b(is)f(done)h(b)o(y)f(escaping)h(the)f(o)q
(ccurrences)0 971 y(of)18 b Fr(x)h Fv(in)h(the)f(de\014nition)i(of)d
Fr(pair)p Fv(.)31 b(In)19 b(general,)h(when)g(inside)g(brac)o(k)o(ets)e
(at)h(stage)f(1,)i(~)p Fr(e)f Fv(ev)m(aluates)g(to)g
Fj(e)g Fv(at)0 1027 y(stage)e(0)g(\(hop)q(efully)i(returning)f(a)f
(piece)i(of)e(co)q(de\),)h(and)f(this)h(piece)h(of)e(co)q(de)h(is)g
(spliced)h(in)o(to)f(the)f(brac)o(k)o(eted)0 1084 y(expression)f(at)f
(the)g(p)q(oin)o(t)h(where)f(the)g(escap)q(ed)h(expression)h(o)q
(ccurred.)71 1141 y(No)o(w)d(the)h(function)h Fr(pair)f
Fv(can)g(b)q(e)h(used)g(to)f(construct)f(new)i(co)q(de)g(from)e(old:)0
1242 y Fh(-|)21 b(\(pair)g(<17-4>\);)0 1292 y(val)g(it)h(=)f(<\(17)g
(\045-)g(4,17)g(\045-)h(4\)>)f(:)h(<\(int)e(*)i(int\)>)0
1414 y Ft(2.2.3)52 b(The)18 b Fr(run)f Ft(op)q(erator:)23
b(reducing)18 b(user)e(constructed)i(co)q(de)0 1500 y
Fv(Here)i(w)o(e)f(explore)i(t)o(w)o(o)d(other)h(op)q(erators)g(pro)o
(vided)h(b)o(y)g Fs(Met)m(aML)g Fv(to)f(manipulate)i(pieces)g(of)e(co)q
(de.)34 b(The)0 1557 y Fr(run)17 b Fv(op)q(erator)g(is)h(the)g
(explicit)i(annotation)d(used)i(to)e(indicate)i(that)e(it)h(is)g(no)o
(w)f(time)h(to)f(execute)i(a)e(dela)o(y)o(ed)0 1613 y(computation)e
(\(i.e.)20 b(an)15 b(ob)s(ject)g(program\).)0 1715 y
Fh(-|)21 b(val)h(z)f(=)h(<27)f(-)g(15>;)0 1765 y(val)g(z)h(=)f(<27)h
(\045-)f(15>)g(:)h(<int>)0 1864 y(-|)f(run)h(z;)0 1914
y(val)f(it)h(=)f(12)h(:)f(int)71 2022 y Fv(The)16 b Fr(run)h
Fv(op)q(erator)e(allo)o(ws)i(us)g(to)f(reduce)h(a)f(piece)i(of)f(co)q
(de)g(to)f(a)g(v)m(alue)i(b)o(y)e(executing)i(the)f(co)q(de.)24
b(Com-)0 2079 y(putation)15 b(is)h(no)f(longer)h(deferred)f(and)h(the)f
(resulting)h(v)m(alue)h(is)e(a)g(pure)h(v)m(alue.)0 2201
y Ft(2.2.4)52 b(The)18 b Fr(lift)e Ft(op)q(erator:)24
b(another)18 b(w)o(a)o(y)e(to)i(build)g(co)q(de)0 2287
y Fv(The)d(lift)h(op)q(eration)g(do)q(es)f(not)g(mo)q(dify)g(the)h
(expressiv)o(e)g(p)q(o)o(w)o(er)e(of)h Fs(Met)m(aML)p
Fv(.)g(Ho)o(w)o(ev)o(er,)e(it)j(is)f(used)h(for)f(gen-)0
2343 y(erating)g(more)h(readable)g(programs)e(\(see)i(P)o(aragraph)e
(2.2.5\).)19 b(Similar)e(to)d(meta-brac)o(k)o(ets,)g
Fr(lift)h Fv(transforms)0 2400 y(an)g(expression)h(in)o(to)f(a)g(piece)
i(of)e(co)q(de.)20 b(But)15 b Fr(lift)g Fv(di\013ers)g(in)i(that)d(it)h
(reduces)h(its)g(input)g(b)q(efore)g(freezing)g(it.)0
2502 y Fh(-|)21 b(<4+1>;)0 2551 y(val)g(it)h(=)f(<4)h(\045+)f(1>)g(:)h
(<int>)0 2651 y(-|)f(lift)g(\(4+1\);)0 2701 y(val)g(it)h(=)f(<5>)g(:)h
(<int>)952 2825 y Fv(10)p eop
%%Page: 11 17
11 16 bop 71 286 a Fv(It)17 b(should)g(also)g(b)q(e)h(noted)f(that)f
Fr(lift)g Fv(can)h(not)g(b)q(e)g(applied)i(to)d(a)h(higher-order)h
(\(i.e.)25 b(functional\))17 b(argu-)0 343 y(men)o(ts,)d(as)h(it)h(is)f
(unde\014ned)i(on)f(them.)j(This)d(restriction)g(is)g(main)o(tained)g
(b)o(y)f(the)g(t)o(yp)q(e)g(of)g Fr(lift)p Fv(.)0 457
y Fh(-|)21 b(lift;)0 506 y(val)g(it)h(=)f(Fn)43 b(:)22
b(['a^].'a)42 b(->)21 b(<'a)g(>)0 606 y(-|)g(lift)g(\(fn)h(x)f(=>)g
(x\);)0 656 y(Error:)g(The)g(term:)0 706 y(\(fn)g(x)h(=>)f(x\))0
755 y(in)g(file)g('top)g(level')g(7)g(-)h(8)44 805 y(Cannot)e(unify)h
(the)g(types:)g(Non)g(Qualified)f(type)65 855 y(?^)44
905 y(and)65 955 y(?)i(->)f(?)22 1004 y(in)g(expression:)f(\(fn)h(x)g
(=>)h(x\))71 1122 y Fv(This)c(t)o(yp)q(e)g(can)h(b)q(e)f(read)g(as)g
(follo)o(ws:)26 b(F)l(or)17 b(all)i Fr('a)f Fv(whic)o(h)h(is)f
(liftable)i(\(the)e(meaning)h(of)e(the)h(carat)f(\()p
Fr(^)p Fv(\)\),)0 1179 y Fr(lift)c Fv(has)g(t)o(yp)q(e)h
Fr('a)24 b(->)f(<'a)h(>)p Fv(.)19 b(Note)13 b(ho)o(w)g(an)h(error)f(o)q
(ccurs)h(if)g(lift)g(is)g(applied)i(to)c(a)i(v)m(alue)h(with)e(a)h
(functional)0 1235 y(t)o(yp)q(e.)0 1369 y Ft(2.2.5)52
b(Lexical)19 b(capture)f(of)f(free)g(v)m(ariables:)24
b(constan)o(t)18 b(pieces)f(of)h(co)q(de)0 1459 y Fv(Sometimes)d(it)h
(is)f(useful)h(to)f(construct)f(co)q(de)i(con)o(taining)g(v)m(ariables)
g(referring)g(to)e(v)m(alues)i(previously)h(de\014ned)0
1516 y(in)f(an)f(earlier)h(stage.)j(F)l(or)c(example:)0
1629 y Fh(-|)21 b(val)h(n)f(=)h(10;)0 1679 y(val)f(n)h(=)f(10)h(:)f
(int)0 1779 y(-|)g(val)h(codePair)e(=)h(<\(n,3\)>;)0
1828 y(val)g(codePair)f(=)i(<\(\045n,3\)>)e(:)i(<\(int)e(*)i(int\)>)71
1946 y Fv(Here,)14 b(the)g(v)m(ariable)i Fr(n)e Fv(is)h(de\014ned)h(at)
e(stage)f(0,)h(but)h(inside)h Fr(codePair)p Fv(,)d(it)i(is)f
(referenced)i(at)d(stage)h(1.)19 b(Note)0 2003 y(that)c(inside)j
Fr(codePair)p Fv(,)c Fr(n)i Fv(is)h(a)e(free)h(v)m(ariable.)23
b(A)o(t)16 b(run)o(time,)g(when)g(the)g(expression)h
Fr(<\(n,3\)>)e Fv(is)h(ev)m(aluated,)0 2059 y(the)j(system)f(has)g(to)g
(compute)h(a)f(piece)i(of)e(co)q(de)h(related)g(to)f(the)h
Fn(value)g(of)g Fr(n)p Fv(.)30 b(This)19 b(piece)h(of)e(co)q(de)h(will)
h(b)q(e)0 2116 y(a)f(constan)o(t,)f(b)q(ecause)i Fr(n)f
Fv(is)g(kno)o(wn)g(to)f(b)q(e)i Fr(10)p Fv(.)31 b(W)l(e)19
b(call)h(this)f(phenomena)h(cross)e(stage)g(p)q(ersistence.)33
b(The)0 2172 y(prett)o(y)17 b(prin)o(ter)h(for)f(co)q(de)h(prin)o(ts)g
(all)g(cross)g(stage)e(p)q(ersisten)o(t)i(constan)o(ts)f(with)h(the)g
(annotation)f Fr(\045)p Fv(,)h(follo)o(w)o(ed)0 2229
y(b)o(y)c(the)h(name)f(of)g(the)h(free)f(v)m(ariable)i(whose)e(v)m
(alue)i(w)o(as)d(used)i(to)f(construct)g(the)h(constan)o(t.)j(All)e
(free)f(v)m(ariables)0 2285 y(\(regardless)h(of)g(t)o(yp)q(e\))g
(inside)i(meta-brac)o(k)o(ets)e(construct)g(these)g(constan)o(ts.)23
b(This)17 b(is)f(the)h(w)o(a)o(y)e(functions)i(are)0
2342 y(made)e(in)o(to)g(co)q(de.)0 2475 y Ft(Di\013erences)c(b)q(et)o
(w)o(een)g(lift)i(and)g(lexical)g(capture.)46 b Fv(The)10
b Fr(lift)g Fv(op)q(erator)f(cannot)h(b)q(e)h(used)g(on)f(functional)0
2531 y(v)m(alues.)24 b(This)16 b(is)h(b)q(ecause)g(lift)g(m)o(ust)e
(construct)h(an)g(expression,)h(whic)o(h)g(when)f(ev)m(aluated)h
(returns)f(the)g(same)0 2588 y(result.)k(F)l(or)13 b(functions)i(this)f
(is)g(not)g(alw)o(a)o(ys)f(p)q(ossible.)21 b(With)14
b(cross)f(stage)g(p)q(ersistence)i(w)o(e)f Fn(c)n(an)f
Fv(lift)i(a)e(function)0 2644 y(in)o(to)g(a)g(piece)h(of)f(co)q(de.)19
b(Cross)13 b(stage)f(p)q(ersistence)i(constructs)f(a)f(constan)o(t,)h
(whic)o(h)h(needs)f(no)g(ev)m(aluation)h(when)0 2701
y(it)h(is)h(\014nally)h(run.)j(This)c(allo)o(ws)f(us)g(to)g(construct)g
(co)q(de)h(for)e(functions.)952 2825 y(11)p eop
%%Page: 12 18
12 17 bop 0 286 a Fh(-|)21 b(val)h(inc)f(=)g(fn)h(a)f(=>)h(a+1;)0
336 y(val)f(inc)g(=)h(fn)f(:)h(int)f(->)g(int)0 436 y(-|)g(val)h
(encodeInc)d(=)j(<inc)f(5>;)0 486 y(val)g(encodeInc)f(=)i(<\045inc)e
(5>)i(:)f(<int>)0 585 y(-|)g(run)h(encodeInc;)0 635 y(val)f(it)h(=)f(6)
h(:)f(int)71 753 y Fv(T)l(o)14 b(illustrate)j(the)e(di\013erence)h(b)q
(et)o(w)o(een)g(the)f(t)o(w)o(o,)f(let)h(us)h(examine)g(one)f(more)g
(example:)0 866 y Fh(-|)21 b(val)h(liftLike)e(=)h(fn)h(x)f(=>)h(<x>;)0
916 y(val)f(liftLike)f(=)i(Fn)43 b(:)22 b(['a].'a)42
b(->)21 b(<'a)g(>)71 1034 y Fv(The)f(function)h Fr(liftLike)e
Fv(b)q(eha)o(v)o(es)h(lik)o(e)i(the)e(op)q(erator)f Fr(lift)p
Fv(,)h(it)h(ev)m(aluates)g(its)f(argumen)o(t,)g(and)h(then)0
1091 y(returns)16 b(a)h(piece)h(of)e(co)q(de)h(with)g(that)f(v)m(alue.)
25 b(Because)17 b(it)g(op)q(erates)f(b)o(y)h(cross-stage)e(p)q
(ersistence,)j(an)o(y)f(v)m(alue)0 1147 y(ma)o(y)i(b)q(e)i(so)f
(lifted,)i(ev)o(en)e(function)h(v)m(alues.)36 b(The)20
b(di\013erence)i(b)q(et)o(w)o(een)e(the)g(op)q(erator)g
Fr(lift)f Fv(and)h(the)h(this)0 1203 y(lexical)c(capture)e(of)g(free)g
(v)m(ariables)i(is)f(hidden)h(inside)g(of)d(the)i(implemen)o(tation.)71
1262 y(Cross-stage)d(p)q(ersistence)j(constructs)e Fn(e\016cient)g
Fv(co)q(de,)h(but)f(this)h(co)q(de)g(is)g(often)g(hard)f(to)g(insp)q
(ect)i(b)q(ecause)0 1319 y(w)o(e)f(cannot)g Fn(se)n(e)f
Fv(the)h(v)m(alue)i(inside)g(the)e(constan)o(t)g(in)h(the)f(resulting)h
(co)q(de.)21 b(Con)o(trast:)0 1432 y Fh(-|)g(lift)g(\(3+4,9\);)0
1482 y(val)g(it)h(=)f(<\(7,9\)>)f(:)i(<\(int)f(*)g(int\)>)0
1582 y(-|)g(liftLike)g(\(3+4,9\);)0 1631 y(val)g(it)h(=)f(<\045x>)g(:)h
(<\(int)e(*)i(int\)>)0 1765 y Ft(2.2.6)52 b(Consistency)17
b(of)h(m)o(ulti-stage)g(programs)0 1855 y Fv(It)e(is)g(imp)q(ortan)o(t)
f(that)g(the)g(programmer)g(ob)q(ey)h(strict)f(rules)h(when)h(escaping)
f(pieces)h(of)e(co)q(de)h(to)f(a)o(v)o(oid)h(what)0 1912
y(w)o(e)h(refer)h(to)f(as)g Fn(phase)h(err)n(ors)p Fv(.)27
b(First)17 b(of)g(all,)i(the)e(stage)g(of)g(an)h(escap)q(ed)g
(expression)h(m)o(ust)e(alw)o(a)o(ys)f(b)q(e)j(non-)0
1968 y(negativ)o(e.)24 b(This)17 b(implies)h(that)e(the)h(n)o(um)o(b)q
(er)g(of)f(brac)o(k)o(ets)f(surrounding)j(an)e(expression)i
Fj(e)e Fv(is)h(alw)o(a)o(ys)f(greater)0 2024 y(than)i(the)g(n)o(um)o(b)
q(er)g(of)f(times)h Fj(e)g Fv(is)g(escap)q(ed,)i(and)e(that)f(there)h
(are)f(no)h(escap)q(ed)h(expressions)f(whic)o(h)h(are)e(not)0
2081 y(inside)23 b(brac)o(k)o(ets.)39 b(Suc)o(h)22 b(errors)f(are)g
(detected)h(b)o(y)g(the)f(t)o(yp)q(e-c)o(hec)o(k)o(er)h(whic)o(h)h
(prohibit)f(the)g(use)g(of)f(badly)0 2137 y(escap)q(ed)16
b(expressions.)0 2251 y Fh(-|)21 b(fn)h(x)f(=>)h(~x;)0
2301 y(Error:)f(level-0)f(code)h(cannot)f(be)i(escaped)71
2418 y Fv(Inside)13 b(an)e(escap)q(ed)i(expression)f(one)g(m)o(ust)f(b)
q(e)h(careful)g(not)f(to)g(use)h(a)f(v)m(ariable)i(whic)o(h)g(is)f(b)q
(ound)g(at)f(a)g(higher)0 2475 y(stage)k(than)g(where)h(it)g(is)g(b)q
(eing)g(used.)22 b(F)l(or)15 b(example)h(the)f(co)q(de:)22
b Fr(<fn)h(x)h(=>)g Fv(~)p Fr(x>)15 b Fv(is)h(ob)o(viously)h(wrong.)j
(Here)0 2531 y(the)e(v)m(ariable)h Fr(x)f Fv(is)g(used,)h(while)h(the)e
(b)q(o)q(dy)g(of)g(the)g(abstraction)f(where)h(it)g(is)h(b)q(ound)g(is)
f(b)q(eing)h(constructed.)0 2588 y(The)14 b(v)m(ariable)i
Fr(x)e Fv(cannot)g(b)q(e)h(in)o(terpreted)g(at)e(stage)h(0,)g(b)q
(ecause)h(it)f(is)h(abstracted)f(at)f(stage)h(1.)19 b(In)c(summary)l(,)
e(a)0 2644 y(piece)h(of)e(co)q(de)g(con)o(taining)h(stage-)p
Fj(n)f Fv(ob)s(jects)g(cannot)g(b)q(e)h(escap)q(ed)g(to)f(a)g(stage)f
(less)i(than)f Fj(n)p Fv(.)19 b(Suc)o(h)13 b(phase-errors)0
2701 y(are)i(detected)h(b)o(y)f(the)g(t)o(yp)q(e-c)o(hec)o(k)o(er)h
(whic)o(h)g(prohibits)g(their)g(use.)952 2825 y(12)p
eop
%%Page: 13 19
13 18 bop 0 286 a Fh(-|)21 b(<fn)h(x)f(=>)h(~x>;)0 336
y(Error:)f(The)g(term:)0 386 y(x)0 436 y(in)g(file)g('top)g(level')g
(13)g(-)h(14)0 486 y(variable)e(bound)h(in)g(phase)g(1)h(used)f(too)g
(early)g(in)g(phase)g(0)0 612 y FA(2.3)56 b(A)19 b(simple)d(t)n(w)n(o)k
(stage)e(example)0 700 y Fv(W)l(e)d(describ)q(e)i(here)e(a)g(t)o(w)o
(o-stage)e(v)o(ersion)j(of)e(the)h(p)q(o)o(w)o(er)g(function.)21
b(This)15 b(illustrates)h(the)f(use)h(of)f(the)g(brac)o(k)o(et)0
756 y(and)j(escap)q(e)h(annotations.)29 b(Our)19 b(goal)f(is)g(to)g
(build)i(a)e(function)h(whic)o(h)g(can)g(b)q(e)g(sp)q(ecialized)i
(w.r.t.)28 b(a)17 b(giv)o(en)0 812 y(exp)q(onen)o(t.)j(First,)15
b(w)o(e)g(write)g(the)g(stage-0)g Fr(power)f Fv(function)i(with)g(no)f
(annotations..)0 917 y Fh(-|)21 b(fun)h(pow)f(x)g(n)h(=)f(if)h(n=0)f
(then)g(1)h(else)f(x*\(pow)f(x)i(\(n-1\)\);)0 967 y(val)f(pow)g(=)h(fn)
f(:)h(int)f(->)g(int)h(->)f(int)71 1077 y Fv(Assuming)13
b(no)o(w,)g(that)f(the)h(exp)q(onen)o(t)g Fj(n)h Fv(is)f(kno)o(wn)g(at)
f(stage-0)g(w)o(e)h(can)g(write)g(a)g(t)o(w)o(o-stage)e(program)h
Fr(pow2)0 1134 y Fv(whic)o(h)17 b(will)g(sp)q(ecialize)i
Fr(pow)c Fv(on)h(the)g(v)m(alue)h Fj(n)p Fv(.)23 b(W)l(e)16
b(do)f(this)i(b)o(y)f(annotating)f(\(putting)h(brac)o(k)o(ets)f(and)h
(escap)q(es)0 1190 y(on\))f(the)g(stage-0)f(program.)0
1295 y Fh(-|)21 b(fun)h(pow2)f(n)g(=)153 1345 y(<)g(fn)h(x)f(=>)g
(~\(if)g(n=0)h(then)f(<1>)g(else)g(<x*\(~\(pow2)e(\(n-1\)\))i(x\)>\))g
(>;)0 1394 y(val)g(pow2)g(=)h(fn)43 b(:)21 b(int)h(->)f(<int)g(->)g
(int>)71 1505 y Fr(pow2)14 b Fv(generates)i(the)f(enco)q(ding)i(of)e(a)
g(unary)g(function)i(\(the)e(outermost)f(brac)o(k)o(ets\).)20
b(Ho)o(w)o(ev)o(er,)14 b(the)h(b)q(o)q(dy)0 1561 y(of)e(this)g
(function)h(dep)q(ends)g(up)q(on)g(the)f(v)m(alue)h(of)f
Fj(n)p Fv(.)19 b(Since)c Fj(n)e Fv(is)g(static)g(\(kno)o(wn)f(at)h
(stage)f(0\))g(w)o(e)h(can)g(escap)q(e)h(the)0 1618 y(conditional)j
(and)f(it)g(can)g(b)q(e)g(reduced)g(at)f(program)g(generation)h(time.)
21 b(Both)15 b(branc)o(hes)h(of)f(the)h Fr(if)f Fv(construct)0
1674 y(a)i(piece)i(of)e(co)q(de)h(whic)o(h)g(will)h(b)q(e)f(spliced)i
(in)o(to)d(the)g(b)q(o)q(dy)h(of)f(the)h(function)g(b)q(eing)h
(generated.)26 b(In)18 b(the)g Fr(then)0 1731 y Fv(branc)o(h)12
b(this)g(piece)i(of)d(co)q(de)h(is)h(the)f(constan)o(t)f
Fr(<1>)p Fv(.)18 b(In)12 b(the)g Fr(else)f Fv(branc)o(h,)i(a)e(piece)j
(of)d(co)q(de)h(is)h(built,)g(con)o(taining)0 1787 y(the)k(m)o
(ultiplication)j(of)c Fr(x)h Fv(b)o(y)g(an)g(expression)h(whic)o(h)g
(is)g(spliced)h(in.)26 b(This)18 b(spliced)h(expression)f(is)g(built)g
(b)o(y)f(a)0 1844 y(recursiv)o(e)e(call)h(to)e Fr(pow2)p
Fv(.)19 b(Note)14 b(that)g(the)h(computation)g(of)f(the)g(escap)q(ed)i
(expression)g Fr(\(pow2)23 b(\(n-1\)\))14 b Fv(can)g(b)q(e)0
1900 y(done)i(at)e(stage)h(0,)f(since)i(its)g(argumen)o(t)e(\()p
Fr(n-1)p Fv(\))g(is)i(completely)h(kno)o(wn.)71 1957
y(Applying)i(an)e(in)o(teger)g(to)g Fr(pow2)g Fv(yields)i(a)e(sp)q
(ecialized)j(v)o(ersion)d(of)g(the)h(function.)27 b(Here,)17
b Fr(\(pow2)23 b(3\))17 b Fv(is)h(a)0 2014 y(program)e(whic)o(h)h(no)g
(longer)g(con)o(tains)g(conditional)h(nor)e(recursiv)o(e)i(calls.)25
b(Only)18 b(m)o(ultiplications)h(remain)f(to)0 2070 y(b)q(e)e(p)q
(erformed.)0 2175 y Fh(-|)21 b(\(pow2)g(3\);)0 2225 y(val)g(it)h(=)f
(<\(fn)g(a)h(=>)f(a)h(\045*)f(a)h(\045*)f(a)h(\045*)f(1\)>)g(:)h(<int)f
(->)g(int>)0 2324 y(-|)g(\(run)g(it\))h(5;)0 2374 y(val)f(it)h(=)f(125)
g(:)h(int)0 2500 y FA(2.4)56 b(More-than-t)n(w)n(o-stage)18
b(programs)0 2588 y Fv(In)e(the)f(previous)h(sections,)f(w)o(e)g(only)h
(considered)g(t)o(w)o(o)e(stage)g(programs.)19 b(Ho)o(w)o(ev)o(er,)14
b Fs(Met)m(aML)h Fv(allo)o(ws)g(us)h(to)0 2644 y(write)e(programs)f
(including)k(an)o(y)c(lev)o(el)j(of)d(staging,)h(i.e.)20
b(b)o(y)14 b(using)h(nested)f(meta-brac)o(k)o(eted)g(expressions.)20
b(W)l(e)0 2701 y(illustrate)c(this)g(b)o(y)f(the)g(function)h
Fr(asap)f Fv(b)q(elo)o(w.)20 b Fr(asap)15 b Fv(is)h(a)f(sp)q(ecialized)
j(v)o(ersion)d(of)g(the)g(function)h Fr(f)f Fv(b)q(elo)o(w:)952
2825 y(13)p eop
%%Page: 14 20
14 19 bop 0 286 a Fh(-|)21 b(fun)h(f)f(oper)g(=)h(\(fn)f(x)g(=>)h(\(fn)
f(y)h(=>)f(\(fn)g(z)h(=>)f(oper\(x,oper\(y,z\)\)\))o(\)\);)0
336 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a,'b].\(\('b)41
b(*)22 b('a)f(\))h(->)f('a)h(\))f(->)g('b)44 b(->)21
b('b)43 b(->)22 b('a)43 b(->)21 b('a)71 464 y Fr(f)d
Fv(inputs)i(a)f(binary)h(op)q(erator,)e(three)h(v)m(alues)i
Fr(x)p Fv(,)e Fr(y)g Fv(and)g Fr(z)g Fv(and)g(computes)g
Fr(x)24 b(oper)f(\(y)h(oper)f(z\))p Fv(.)31 b(W)l(e)0
520 y(desire)16 b(a)e(m)o(ultistage)h(v)o(ersion)g(of)f
Fr(f)h Fv(whic)o(h)h(sp)q(ecializes)h(itself)f(as)e(so)q(on)h(as)f(p)q
(ossible,)i(i.e.)21 b(as)14 b(so)q(on)h(as)f Fr(x)p Fv(,)g
Fr(y)h Fv(or)f Fr(z)0 577 y Fv(is)i(kno)o(wn.)21 b(W)l(e)16
b(call)g(this)g(function)h Fr(asap)p Fv(.)j(Note)c(that)f(this)h
(example)g(is)g(not)f(completely)i(general:)22 b(w)o(e)15
b(could)0 633 y(use)h(more)g(than)g(three)g(v)m(ariables)h(and)f(t)o(w)
o(o)f(di\013eren)o(t)h(op)q(erators)f Fr(oper1)g Fv(and)h
Fr(oper2)g Fv(instead)g(of)g(using)h Fr(oper)0 690 y
Fv(t)o(wice.)j(The)c(annotated)e(function)i(is:)0 815
y Fh(-|)21 b(fun)h(asap)f(oper)f(=)131 864 y(<fn)h(x)h(=>)218
914 y(<fn)f(y)h(=>)305 964 y(<fn)f(z)h(=>)f(oper\()g(~\(lift)g
(\(oper\(~\(lift)e(x\),y\)\)\),)h(z\))h(>>>;)0 1014 y(val)g(asap)g(=)h
(Fn)43 b(:)21 b(['a,'b^].)370 1064 y(\(\('b)g(*)h('a)f(\))h(->)f('b)h
(\))f(->)h(<'b)43 b(->)21 b(<'a)43 b(->)21 b(<'a)43 b(->)22
b('b)f(>>>)71 1191 y Fv(This)16 b(three-stage)e(function)j(creates)e(a)
g(piece)h(of)f(co)q(de)h(dep)q(ending)i(on)d(a)g(static)g(v)m(alue)i
Fr(oper)p Fv(.)j(As)15 b(so)q(on)g(as)0 1248 y Fr(x)g
Fv(is)g(kno)o(wn,)f(w)o(e)h(can)g(generate)f(the)h(co)q(de)h(of)e(a)h
(new)g(function)g(whic)o(h)h(only)f(dep)q(ends)i(on)e
Fr(y)f Fv(and)h Fr(z)p Fv(,)g(and)g(so)f(on)0 1304 y(for)h(the)g(other)
g(argumen)o(ts:)0 1429 y Fh(-|)21 b(asap)g(\(op)h(+\);)0
1479 y(val)f(it)h(=)0 1529 y(<\(fn)f(a)h(=>)f(<\(fn)g(b)g(=>)h(<\(fn)f
(c)g(=>)h(\045oper)f(\(~\045lift)f(\(\045oper)g(\(~\045lift)h
(a,b\)\),c\)\)>\)>\)>)22 1579 y(:)g(<'1)43 b(->)22 b(<'1)43
b(->)21 b(<'1)43 b(->)21 b('1)h(>>>)0 1678 y(-|)f(\(run)g(it\))h(11;)0
1728 y(val)f(it)h(=)0 1778 y(<\(fn)f(a)h(=>)f(<\(fn)g(b)g(=>)h
(\045oper)f(\(~\045lift)f(\(\045oper)h(\(11,a\)\),b\)\)>\)>)22
1828 y(:)g(<int)g(->)h(<int)f(->)g(int>>)0 1927 y(-|)g(\(run)g(it\))h
(22;)0 1977 y(val)f(it)h(=)f(<\(fn)g(a)h(=>)f(\045oper)g(\(44,a\)\)>)f
(:)i(<int)f(->)g(int>)0 2077 y(-|)g(\(run)g(it\))h(33;)0
2127 y(val)f(it)h(=)f(77)h(:)f(int)71 2254 y Fv(Note)d(that)h(the)g
(use)h(of)f Fr(lift)f Fv(allo)o(ws)i(the)f(actual)h(execution)g(of)f
Fr(oper\(x,y\))f Fv(as)h(so)q(on)g(as)g Fr(x)g Fv(and)g
Fr(y)g Fv(are)0 2311 y(kno)o(wn.)32 b(If)19 b(w)o(e)g(had)h(used)g(a)f
(an)g(escap)q(e)h(\()l(~)l(\))f(instead,)h(this)g(op)q(eration)g(w)o
(ould)f(not)g(b)q(e)h(executed)g(un)o(til)h(the)0 2367
y(resulting)16 b(piece)h(of)e(co)q(de)g(is)h(run.)0 2535
y Fu(3)67 b(Language)22 b(con)n(v)n(en)n(tions)h(and)g(di\013erences)g
(from)f Fe(SML)0 2644 y Fv(Since)f Fs(Met)m(aML)e Fv(is)h(not)e
(Standard)h(ML,)g(there)h(are)e(a)h(few)g(places)i(where)e(the)g(syn)o
(tax)g(and)g(seman)o(tics)g(of)0 2701 y Fs(Met)m(aML)c
Fv(di\013ers)h(from)e Fs(SML)p Fv(.)h(In)g(this)h(section)g(w)o(e)f
(summarize)g(these)h(di\013erences.)952 2825 y(14)p eop
%%Page: 15 21
15 20 bop 0 286 a FA(3.1)56 b(The)18 b(syn)n(tax)h(of)f
(meta-constructors)0 373 y Fv(Here)h(w)o(e)f(examine)i(the)e(few)h
(di\013erences)h(b)q(et)o(w)o(een)f Fs(SML)p Fv('s)f(and)g
Fs(Met)m(aML)p Fv('s)h(syn)o(taxes.)29 b(First)19 b(of)f(all,)i(the)0
429 y(syn)o(tax)14 b(is)i(extended)g(to)f(supp)q(ort)g(the)g(op)q
(erators)g(for)f(meta-programs)g(description.)68 537
y Fg(\017)23 b Fr(<e>)15 b Fv(freezes)i(the)f(expression)h
Fr(e)p Fv(.)22 b(Let)16 b Fj(n)f Fg(\025)f Fv(0)i(b)q(e)h(the)f(curren)
o(t)g(stage)f(of)h(computation.)22 b Fr(<e>)16 b Fv(denotes)g(a)114
593 y(stage-)p Fj(n)11 b Fv(+)h(1)18 b(expression.)29
b(The)18 b(computation)g(of)f Fr(e)h Fv(is)g(deferred,)h(and)f
Fr(<e>)g Fv(is)g(treated)f(as)h(a)f(v)m(alue)j(at)114
650 y(stage)14 b Fj(n)p Fv(.)68 744 y Fg(\017)23 b Fv(~)p
Fr(e)14 b Fv(escap)q(es)g(from)f(a)h(frozen)f(expression.)21
b(Let)14 b(~)q Fr(e)f Fv(o)q(ccur)h(in)h(a)e(larger)h(expression)g
Fr(e')p Fv(.)19 b(Let)14 b Fj(n)f(>)g Fv(0)g(b)q(e)i(the)114
801 y(stage)f(of)h Fr(e')p Fv(.)20 b(~)p Fr(e)15 b Fv(is)h(treated)f
(as)f(stage-\()p Fj(n)c Fg(\000)g Fv(1\))15 b(co)q(de,)g(ev)o(en)h(if)g
(it)f(is)h(inside)h(a)e(stage-)p Fj(n)g Fv(expression.)68
896 y Fg(\017)23 b Fr(run)g(e)18 b Fv(allo)o(ws)g(one)h(to)e(execute)i
(a)f(piece)i(of)e(co)q(de)g Fr(e)h Fv(built)g(at)f(the)g(same)g(stage.)
28 b(Let)18 b Fr(e)h Fv(b)q(e)f(a)g(stage-)p Fj(n)114
952 y Fv(piece)e(of)f(co)q(de)h(built)g(at)f(stage)f
Fj(m)p Fv(,)h Fj(n)e(>)g(m)p Fv(.)20 b Fr(run)j(e)15
b Fv(p)q(ermits)h(the)f(computation)g(of)g Fr(e)g Fv(at)g(stage)f
Fj(m)p Fv(.)20 b(The)114 1009 y(resulting)c(expression)g(is)g(a)f
(stage-\()p Fj(m)9 b Fg(\000)h Fv(1\))15 b(expression.)68
1103 y Fg(\017)23 b Fr(lift)g(e)13 b Fv(con)o(v)o(erts)f
Fn(\014rst-or)n(der)j(expr)n(ession)d Fv(in)o(to)h(a)g(piece)h(of)f(co)
q(de.)20 b(Ho)o(w)o(ev)o(er,)12 b(it)h(di\013ers)h(from)e(the)h(meta-)
114 1160 y(brac)o(k)o(ets)i(in)i(that)e(the)h(expression)h(is)g(ev)m
(aluated)g(\014rst.)22 b(Note)16 b(that)f(this)h(op)q(erator)g(cannot)f
(b)q(e)i(applied)114 1216 y(to)d(functions.)0 1340 y
FA(3.2)56 b(The)18 b(precedence)f(of)i(meta-constructors)0
1426 y Fv(The)14 b(follo)o(wing)g(describ)q(es)i(the)e(precedence)h
(rules)g(used)f(when)g(parsing)g(the)g(meta-programming)f(constructs.)
56 1533 y(1.)22 b(Escap)q(e)g(\()l(~)l(\))g(has)g(the)h(highest)g
(precedence.)43 b(Its)22 b(priorit)o(y)h(is)g(ev)o(en)f(higher)h(than)g
(that)e(of)h(function)114 1590 y(application.)56 1685
y(2.)g Fr(run)17 b Fv(has)g(the)g(lo)o(w)o(est)g(precedence)i(in)g(the)
e(language.)27 b(Because)18 b(of)f(this,)h(its)g(scop)q(e)g(extends)g
(as)f(far)g(to)114 1741 y(the)e(righ)o(t)g(as)g(p)q(ossible.)71
1849 y(F)l(or)j(instance,)j Fr(<f)j Fv(~)p Fr(x)g(y>)19
b Fv(is)g(parsed)h(as)e Fr(<f)24 b(\()q Fv(~)p Fr(x\))f(y>)p
Fv(,)d(instead)f(of)g Fr(<f)24 b Fv(~)q Fr(\(x)f(y\)>)c
Fv(b)q(ecause)h(of)f(escap)q(e's)0 1905 y(high)d(priorit)o(y)l(.)0
2028 y FA(3.3)56 b(Disam)n(biguating)17 b(relational)g(op)r(erators)h
(and)h(meta-brac)n(k)n(ets)0 2115 y Fv(Finally)l(,)f(since)g(the)f(sym)
o(b)q(ols)g Fr(<)g Fv(and)g Fr(>)f Fv(describ)q(e)j(frozen)e
(expressions,)g(w)o(e)g(need)g(a)g(non-am)o(biguous)g(w)o(a)o(y)f(for)0
2171 y(writing)i(comparison)g(op)q(erators)f(o)o(v)o(er)f(n)o(um)o(b)q
(ers.)28 b Fs(Met)m(aML)17 b Fv(uses)h(the)g(sym)o(b)q(ols)g
Fr('<')f Fv(and)h Fr('>')f Fv(instead)h(of)0 2227 y Fs(SML)d
Fr(<)g Fv(and)g Fr(>)g Fv(notations.)20 b(The)15 b(example)h(b)q(elo)o
(w)g(describ)q(es)h(the)e(use)h(of)e(the)i(greater)e(op)q(erator.)0
2329 y Fh(-|)21 b(let)h(val)f(x)g(=)h(1)f(in)h(x)f('>')h(0)f(end;)0
2378 y(val)g(it)h(=)43 b(true)g(:)21 b(bool)0 2502 y
FA(3.4)56 b(Lac)n(k)18 b(of)h(Mo)r(dule)f(Lev)n(el)f(F)-5
b(eatures)0 2588 y Fv(MetaML)21 b(is)i(an)f(implemen)o(tation)i(of)d
(the)h(core)g(of)g(ML.)g(It)g(lac)o(ks)g(all)h(of)f(ML's)g(mo)q(dule)h
(features.)40 b(This)0 2644 y(includes)23 b(signatures,)f(structures,)g
(functors,)g(and)f(quali\014ed)i(names)d(suc)o(h)i(as)e
Fr(Int.toString)p Fv(.)36 b(MetaML)0 2701 y(do)q(es)16
b(implemen)o(t)g(the)f Fr(abstype)f Fv(declaration,)i(whic)o(h)g(is)g
(not)f(strictly)g(part)g(of)g(the)g(mo)q(dule)h(system.)952
2825 y(15)p eop
%%Page: 16 22
16 21 bop 0 286 a Fh(abstype)20 b(Complex)h(=)g(D)h(of)f(real)g(*)h
(real)44 336 y(with)87 386 y(fun)f(toComplex)f(x)i(=)f(\(D\(x,0.0\)\);)
87 436 y(fun)g(realPart)f(\(D\(x,y\)\))h(=)g(x;)87 486
y(fun)g(imagPart)f(\(D\(x,y\)\))h(=)g(y;)87 535 y(fun)g(Add)h
(\(D\(x,y\)\))e(\(D\(a,b\)\))g(=)h(D\(x+a,y+b\);)87 585
y(end;)0 720 y FA(3.5)56 b(Quali\014ed)18 b(T)n(yp)r(es)0
810 y Fv(In)23 b(Standard)g(ML,)f(equalit)o(y)i(is)f(handled)h(in)g(an)
f(ad-ho)q(c)g(fashion.)43 b(The)23 b(equalit)o(y)g(op)q(erator)f(\()p
Fr(=)p Fv(\),)i(has)e(a)0 866 y(p)q(olymorphic)d(t)o(yp)q(e)e
Fr(all)23 b(''t)h(.)47 b(''t)24 b(->)f(''t)h(->)f(bool)17
b Fv(The)g(notation)f Fr(''t)h Fv(is)h(called)g(an)f(equalit)o(y)h(t)o
(yp)q(e)0 922 y(v)m(ariable,)d(and)f(is)h(a)e(generic)i(t)o(yp)q(e)f(v)
m(ariable)h(with)f(restrictions.)20 b(These)14 b(restrictions)h(ensure)
f(that)f(an)h(equalit)o(y)0 979 y(t)o(yp)q(e)h(v)m(ariable)i(can)e(nev)
o(er)h(b)q(e)f(instan)o(tiated)h(on)f(a)g(t)o(yp)q(e)g(whic)o(h)h(do)q
(es)g(not)f(supp)q(ort)g(equalit)o(y)l(.)71 1038 y(This)g(restriction)g
(is)h(a)e(sp)q(ecial)j(case)e(of)f(a)h(more)g(general)g(mec)o(hanism)g
(called)i(quali\014ed)g(t)o(yp)q(es,)d(whic)o(h)i(has)0
1094 y(found)h(wide)h(use)f(in)g(the)g(Hask)o(ell)g(language.)25
b(In)17 b(Hask)o(ell)h(programmers)d(can)i(use)g(the)g(class)g(system,)
f(whic)o(h)0 1150 y(in)o(tro)q(duces)h(quali\014ed)g(t)o(yp)q(es,)f(to)
f(sp)q(ecify)h(o)o(v)o(er-loaded)g(functions.)22 b(The)16
b(class)g(system)f(allo)o(ws)h(programmers)0 1207 y(to)21
b(sp)q(ecify)i(exactly)f(whic)o(h)g(t)o(yp)q(es)g(can)g(b)q(e)g(used)g
(to)f(instan)o(tiated)h(quali\014ed)h(t)o(yp)q(e)f(v)m(ariables,)i(and)
e(whic)o(h)0 1263 y(functions)16 b(should)g(b)q(e)g(used)g(at)e
(di\013eren)o(t)i(t)o(yp)q(es.)71 1322 y(In)k(MetaML)e(w)o(e)i(b)q
(orro)o(w)e(a)h(simple)i(subset)f(of)f(the)g(quali\014ed)j(t)o(yp)q(e)d
(system)g(of)g(Hask)o(ell.)34 b(In)20 b(MetaML)0 1378
y(there)c(are)h(a)f(\014xed)h(n)o(um)o(b)q(er)f(of)g(t)o(yp)q(e)h
(quali\014cations.)25 b(This)17 b(set)f(cannot)g(b)q(e)h(extended)h(b)o
(y)e(the)h(programmer,)0 1435 y(and)e(all)i(o)o(v)o(erloading)e(is)h
(handled)g(inside)h(the)f(in)o(terpreter,)f(and)g(is)h(not)e(user)i
(extendible.)71 1494 y(In)f(MetaML)g(w)o(e)g(write)h(quali\014cations)g
(b)o(y)g(p)q(ost\014xing)g(a)f(t)o(yp)q(e)g(v)m(ariable)i(b)o(y)e(its)g
(quali\014cation.)22 b(Th)o(us)15 b Fr('a=)0 1550 y Fv(is)f
(quali\014ed)h(b)o(y)e(the)h Fn(e)n(quality)f Fv(predicate,)h
Fr('b\\name)f Fv(is)g(quali\014ed)j(b)o(y)d(the)g Fn(lacks)h(the)h(lab)
n(el)e Fr(name)g Fv(predicate,)h Fr('c^)0 1607 y Fv(is)h(quali\014ed)i
(b)o(y)d(the)h Fn(liftable)f Fv(predicate,)h Fr('d#)f
Fv(is)h(quali\014ed)i(b)o(y)d(the)h Fn(numeric)g Fv(predicate,)g(and)g
Fr('e<)f Fv(is)h(quali\014ed)0 1663 y(b)o(y)g(the)g Fr(orderable)f
Fv(predicate.)71 1715 y(The)19 b(equalit)o(y)h(predicate)g(applies)g
(to)f(all)h(t)o(yp)q(es)f(whic)o(h)g(do)g(not)g(ha)o(v)o(e)g(a)f
(function)i(t)o(yp)q(e)f(inside.)34 b(These)0 1765 y(are)19
b(the)g(observ)m(ables)i(of)e(the)g(language.)32 b(The)20
b(nice)g(prop)q(ert)o(y)f(of)g(quali\014ed)i(t)o(yp)q(es)e(is)h(that)f
(the)g(predicates)0 1815 y(are)c(prop)q(ogated)g(b)o(y)g(the)h(t)o(yp)q
(e)f(system.)20 b(Note)15 b(b)q(elo)o(w)h(ho)o(w)f(the)h(equalit)o(y)g
(predicate)g(is)g(propagated)f(in)o(to)g(the)0 1864 y(t)o(yp)q(es)g(of)
g(the)g(functions)h(when)g(they)f(use)h(the)f(equalit)o(y)h(op)q
(erator.)0 1963 y Fh(-|)21 b(fun)h(mem)f(x)g([])h(=)f(false)g(|)h(mem)f
(x)g(\(y::ys\))g(=)g(if)h(x=y)f(then)g(false)g(else)g(mem)g(x)g(ys;)0
2012 y(val)g(mem)g(=)h(Fn)43 b(:)22 b(['a=].'a)42 b(->)21
b('a)43 b(list)21 b(->)h(bool)0 2112 y(-|)f(fun)h(find)f(x)g
(\(\(y,z\)::ys\))f(=)h(if)h(x=y)f(then)g(z)g(else)g(find)g(x)h(ys;)0
2162 y(val)f(find)g(=)h(Fn)43 b(:)21 b(['a,'b=].'b)42
b(->)21 b(\('b)43 b(*)22 b('a)f(\))h(list)f(->)g('a)0
2261 y(-|)g(fun)h(f)f(x)h(y)f(=)h(\(x,3\))f(=)g(y;)0
2311 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a=].'a)42 b(->)21
b(\('a)43 b(*)22 b(int\))f(->)g(bool)71 2407 y Fv(The)14
b(liftable)i(predicate)f(applies)h(to)d(all)j(observ)m(able)f(t)o(yp)q
(es)f(\(lik)o(e)h(the)g(equalit)o(y)g(predicate,)g(t)o(yp)q(es)f
(without)0 2457 y(functions\))i(except)f(co)q(de)h(t)o(yp)q(es.)k(W)l
(e)15 b(do)g(not)g(allo)o(w)h(the)f(lifting)h(of)f(co)q(de)h(t)o(yp)q
(es.)0 2555 y Fh(-|)21 b(fun)h(f)f(x)h(=)f(lift)g(x;)0
2605 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a^].'a)42 b(->)21
b(<'a)h(>)71 2701 y Fv(The)15 b(n)o(umeric)h(predicate)g(applies)h(to)e
Fr(int)f Fv(and)i Fr(float)p Fv(,)e(and)h(is)h(manifest)f(in)h(the)f
(arithmetic)h(op)q(erators.)952 2825 y(16)p eop
%%Page: 17 23
17 22 bop 0 286 a Fh(-|)21 b(fun)h(f)f(x)h(=)f(x)h(+)f(x;)0
336 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a#].'a)42 b(->)21
b('a)71 414 y Fv(The)16 b(orderable)h(predicate)g(applies)h(to)d
Fr(int)p Fv(,)h Fr(float)p Fv(,)f Fr(char)p Fv(,)g(and)i
Fr(string)p Fv(,)e(and)h(is)h(manifest)f(in)h(the)f(rela-)0
464 y(tional)g(op)q(erators.)0 541 y Fh(-|)21 b(fun)h(f)f(x)h(=)f(x)h
('<')f(x;)0 591 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a<].'a)42
b(->)21 b(bool)71 669 y Fv(The)d(lac)o(ks)h(lab)q(el)g(predicate)h(is)e
(used)h(to)f(t)o(yp)q(e)g(labled)i(sums)e(,)h(and)f(pro)q(ducts)h
(\(records\).)28 b(It)19 b(applies)h(to)0 719 y(sum)15
b(and)h(pro)q(ducts)f(whic)o(h)h(lac)o(k)g(the)f(appropriate)g(lab)q
(el.)0 796 y Fh(-|)21 b(fun)h(f)f(x)h(=)f(#name)g(x;)0
846 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a\\name,'b].{name)o(:)e('b)43
b(|)22 b('a)f(})h(->)f('b)71 924 y Fv(A)c(t)o(yp)q(e)g(v)m(ariable)i
(can)e(ha)o(v)o(e)g(m)o(ultiple)i(quali\014cations.)27
b(Consider)18 b(the)f(example)h(b)q(elo)o(w)g(where)g
Fr('a)f Fv(m)o(ust)0 973 y(lac)o(k)e(t)o(w)o(o)f(lab)q(els.)0
1051 y Fh(-|)21 b(fun)h(f)f(x)h(=)f(\(#name)g(x,)g(#age)g(x\);)0
1101 y(val)g(f)h(=)f(Fn)h(:)f(['a\\name\\age,'b,'c])o(.{age)o(:)e('b)i
(,name:)g('c)g(|)h('a)f(})h(->)f(\('c)g(*)h('b\))71 1178
y Fv(Or)15 b(the)g(example)h(where)g(the)f(argumen)o(t)f(m)o(ust)h
(meet)g(b)q(oth)g(the)h(n)o(umeric)g(and)f(orderable)h(predicates.)0
1256 y Fh(-|)43 b(fun)21 b(f)h(x)g(=)f(\()h(x=x,)f(x)g('<')g(x\);)0
1306 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a=<].'a)42 b(->)21
b(\(bool)g(*)h(bool\))0 1426 y FA(3.6)56 b(Use)18 b(v.s.)24
b(The)18 b(In)n(teractiv)n(e)g(Lo)r(op)0 1512 y Fv(There)e(are)g(t)o(w)
o(o)e(w)o(a)o(ys)h(that)g(users)h(can)f(load)i(functions)f(in)o(to)g
(MetaML.)f(Users)g(can)h(t)o(yp)q(e)g(functions)h(directly)0
1568 y(in)o(to)e(the)g(top-lev)o(el)i(in)o(teractiv)o(e)e(lo)q(op,)h
(or)e(they)i(can)f(use)h(the)f(\014le-orien)o(ted)i Fr(use)d
Fv(function.)0 1656 y Fh(-|)21 b(use)h("lists.sml";)0
1706 y(val)f(not)g(=)h(fn)43 b(:)22 b(bool)f(->)g(bool)0
1756 y(val)g(null)g(=)h(Fn)43 b(:)21 b(['a].'a)43 b(list)21
b(->)g(bool)0 1806 y(val)g(hd)h(=)f(Fn)43 b(:)22 b(['a].'a)42
b(list)21 b(->)g('a)0 1855 y(val)g(tl)h(=)f(Fn)43 b(:)22
b(['a].'a)42 b(list)21 b(->)g('a)44 b(list)0 1905 y(val)21
b(length)g(=)g(Fn)43 b(:)22 b(['a].'a)42 b(list)21 b(->)h(int)0
1955 y(val)f(append)g(=)g(Fn)43 b(:)22 b(['a].'a)42 b(list)21
b(->)h('a)43 b(list)21 b(->)g('a)43 b(list)0 2005 y(val)21
b(@)h(=)f(Fn)44 b(:)21 b(['a].\('a)42 b(list)21 b(*)h('a)43
b(list\))21 b(->)g('a)43 b(list)0 2055 y(val)21 b(revappend)f(=)i(Fn)43
b(:)21 b(['a].\('a)42 b(list)21 b(*)h('a)43 b(list\))21
b(->)g('a)43 b(list)0 2105 y(val)21 b(rev)g(=)h(Fn)43
b(:)22 b(['a].'a)42 b(list)21 b(->)g('a)43 b(list)0 2154
y(val)21 b(map)g(=)h(Fn)43 b(:)22 b(['a,'b].\('b)41 b(->)21
b('a)h(\))f(->)h('b)43 b(list)21 b(->)g('a)43 b(list)71
2249 y Fv(By)16 b(placing)h(de\014n)o(tions)g(in)g(a)f(\014le,)h(and)f
(reading)h(them)f(with)h(the)f Fr(use)g Fv(function)h(programmers)d
(can)j(sa)o(v)o(e)0 2306 y(rep)q(eatedly)f(t)o(yping)g(the)f(same)g
(de\014nitions.)71 2362 y(There)21 b(is)i(one)e(imp)q(ortan)o(t)g
(di\013erence)i(b)q(et)o(w)o(een)f(the)g(in)o(teractiv)o(e)g(lo)q(op)g
(and)g(the)g Fr(use)f Fv(function.)40 b(The)0 2418 y(parsers)17
b(for)g(these)h(t)o(w)o(o)e(mo)q(des)h(are)h(sligh)o(tly)g(di\013eren)o
(t.)27 b(When)18 b(parsing)g(a)f(\014le,)i(the)e(parser)g(can)h
(determine)0 2475 y(the)e(end)g(of)f(the)h(\014le)g(b)o(y)g(reading)g
(the)g(end-of-\014le)h(mark)o(er.)j(When)c(reading)g(from)f(the)h(in)o
(teractiv)o(e)g(lo)q(op,)g(this)0 2531 y(is)g(not)e(p)q(ossible.)22
b(Because)16 b(of)f(this,)g(the)g(in)o(teractiv)o(e)h(lo)q(op)f
(determines)h(the)g(end)f(of)g(the)g(curren)o(t)g(input)h(when)0
2588 y(it)e(senses)g(a)f(semicolon)i(as)f(the)f(last)h(c)o(haracter)f
(in)i(a)e(line.)21 b(Problems)14 b(are)g(p)q(ossible)h(using)g(this)f
(solution)g(since,)0 2644 y(legal)i(declarations)g(in)g(ML)f(do)g(not)g
(need)h(to)e(end)i(in)g(a)f(semicolon,)h(and)f(semicolons)h(can)f(app)q
(ear)h(at)e(the)h(end)0 2701 y(of)g(a)g(line,)h(b)q(efore)g(the)f
(whole)h(declaration)g(is)f(parsed.)20 b(F)l(or)15 b(example:)952
2825 y(17)p eop
%%Page: 18 24
18 23 bop 0 286 a Fh(-|)21 b(let)h(val)f(x)g(=)h(12;)0
336 y(in)f(x)h(+)g(1)f(end;)0 386 y(Error:)g(2.0:)g(syntax)f(error)h
(found)g(at)g(EOF)0 486 y(-|)g(Error:)g(1.2:)g(syntax)f(error:)h
(deleting)42 b(IN)21 b(ID)0 535 y(Error:)g(2.11:)f(syntax)h(error)g
(found)f(at)i(END)71 668 y Fv(The)11 b Fr(let)f Fv(is)i(a)e(legal)i(ML)
f(declaration)h(but)f(the)g(semicolon)h(after)e(the)h
Fr(12)g Fv(prematurely)g(ends)g(the)g(parse,)h(and)0
724 y(the)17 b Fr(in)23 b(x)h(+)g(1)f(end)16 b Fv(fragmen)o(t)g(is)h
(tak)o(en)f(as)g(the)h(b)q(eginning)h(of)e(the)h(next)g(in)o
(teraction.)24 b(Had)16 b(this)h(app)q(eared)0 781 y(in)f(a)f(\014le)h
(parsed)f(b)o(y)h Fr(use)e Fv(this)i(error)e(w)o(ould)i(not)f(ha)o(v)o
(e)g(o)q(ccured.)0 954 y Fu(4)67 b(T)n(yping)24 b(Rules)0
1066 y Fv(The)17 b(meta-op)q(erators)f(add)h(a)g(certain)g(lev)o(el)h
(of)f(complexit)o(y)g(to)g(the)g(t)o(yping)g(rules)h(of)e
Fs(SML)p Fv(.)g(In)i(this)f(section)0 1122 y(w)o(e)e(treat)f(this)i
(additional)g(complexit)o(y)l(.)0 1274 y FA(4.1)56 b(The)18
b(purp)r(ose)g(of)h(a)g(m)n(ulti-stage)d(t)n(yp)r(e)i(system)0
1370 y Fv(A)24 b(formal)g(treatmen)o(t)f(of)h(the)g(static)g(seman)o
(tics)h(of)f(m)o(ultistage)g(programs)f(can)h(b)q(e)h(found)g(in)g
([TBS98)o(,)0 1426 y(MTBS99)o(,)19 b(She97,)g(T)l(ah99)o(].)32
b(Here)19 b(w)o(e)g(informally)h(describ)q(e)h(ho)o(w)d(higher-stage)i
(expressions)g(are)e(c)o(hec)o(k)o(ed)0 1483 y(b)o(y)j(the)g(system.)36
b Fs(Met)m(aML)p Fv('s)20 b(t)o(yp)q(e-c)o(hec)o(k)o(er)h(helps)h(the)f
(programmer)f(b)o(y)g(v)o(erifying)i(the)f(consistency)g(of)0
1539 y(m)o(ultistage)15 b(expressions.)21 b(This)16 b(is)f(three-fold:)
56 1672 y(1.)22 b(A)16 b(particular)i Fn(c)n(o)n(de)f(typ)n(e)f
Fv(is)h(assigned)h(to)e(ev)o(ery)g(higher-stage)h(expression.)25
b(This)17 b(co)q(de-t)o(yp)q(e)h(includes)114 1728 y(information)13
b(completely)i(describing)h(the)d(t)o(yp)q(e)h(of)f(the)h(dela)o(y)o
(ed)g(program)e(con)o(tained.)20 b(The)14 b(seman)o(tics)114
1785 y(of)j Fs(Met)m(aML)h Fv(assumes)g(that)f(ev)o(ery)h(piece)i(of)d
(co)q(de)i(m)o(ust)e(execute)i(safely)f(in)h(an)f(en)o(vironmen)o(t)h
(with)114 1841 y(no)f(bindings)i(for)d(free)h(v)m(ariables.)30
b(Most)17 b(free)h(v)m(ariables)h(are)f(con)o(v)o(erted)g(in)o(to)g
(cross)f(stage)g(p)q(ersisten)o(t)114 1898 y(constan)o(ts,)22
b(but)h(the)f(in)o(teraction)h(b)q(et)o(w)o(een)g(meta-brac)o(k)o(ets)e
(and)i(the)f Fr(run)g Fv(op)q(erator)g(allo)o(ws)g(a)g(few)114
1954 y(free)17 b(v)m(ariables)h(to)f(escap)q(e)h(this)g(mec)o(hanism.)
26 b(F)l(or)17 b(example,)h Fr(<fn)23 b(x)h(=>)48 b(\(run)23
b(<x>\)>)16 b Fv(attempts)h(to)114 2011 y(\\lo)q(okup")g
Fr(x)h Fv(in)g(the)g(empt)o(y)f(en)o(vironmen)o(t.)28
b(This)18 b(in)o(teraction)g(b)q(et)o(w)o(een)g(run)g(and)g(escap)q(e)g
(is)g(the)g(one)114 2067 y(hole)e(in)g(the)f(curren)o(t)g(MetaML)f
(implemen)o(tation.)22 b(See)15 b(section)h Ft(??)f Fv(for)f(a)h
(discussion)i(of)e(this.)56 2182 y(2.)22 b(The)d(system)f(c)o(hec)o(ks)
h(the)g(consistency)h(of)e(higher-stage)i(expressions.)31
b(By)19 b(this)h(w)o(e)e(mean)h(that)f(an)o(y)114 2238
y(dela)o(y)o(ed)c(program,)e(is)i(itself)g(alw)o(a)o(ys)e(w)o(ell)j(t)o
(yp)q(ed.)k(F)l(or)13 b(instance)h(the)f(expression)i
Fr(<1+true>)d Fv(is)i(rejected)114 2295 y(ev)o(en)i(if)h(it)f(could)h
(b)q(e)g(considered)g(as)f(a)f(piece)j(of)d(co)q(de)i(at)e(stage)h(0.)
22 b(This)16 b(means)g(that)g(an)o(y)f(w)o(ell-t)o(yp)q(ed)114
2351 y(expression)h(cannot)f(go)f(wrong)h(at)f(an)o(y)h(stage)g(of)f
(its)i(execution.)56 2466 y(3.)22 b(The)13 b(phase)g(consistency)g(of)g
(m)o(ultistage)f(expressions)i(is)f(v)o(eri\014ed)h(b)o(y)f(the)g(t)o
(yp)q(e-c)o(hec)o(k)o(er.)19 b(This)13 b(prev)o(en)o(ts)114
2523 y(the)h(programmer)e(from)h(writing)i(programs)d(whic)o(h)j(use)f
(v)m(ariables)i(in)e(stages)f(b)q(efore)h(they)g(are)g(de\014ned.)114
2579 y(F)l(or)i(instance)j(it)e(prev)o(en)o(ts)g(the)h(use)g(of)e(an)i
(expression)g(in)g(a)f(stage)g(preceding)i(its)e(computation)h(suc)o(h)
114 2635 y(as)f Fr(<fn)24 b(x)g(=>)g Fv(~)p Fr(x>)p Fv(,)18
b(but)g(do)q(es)h(not)e(catc)o(h)h(the)g(error)g(caused)g(b)o(y)g(the)h
(in)o(teraction)f(b)q(et)o(w)o(een)g(run)h(and)114 2692
y(escap)q(e.)952 2825 y(18)p eop
%%Page: 19 25
19 24 bop 0 286 a FA(4.2)56 b(T)n(yping)18 b(Multi-stage)f(expressions)
0 376 y Fs(Met)m(aML)i Fv(assigns)g(t)o(yp)q(es)g(of)f(the)h(form)f
Fr(<)p Fj(\013)p Fr(>)h Fv(to)f(ev)o(ery)h(meta-brac)o(k)o(eted)f
(expression.)32 b(The)19 b(brac)o(k)o(ets)f(sur-)0 433
y(rounding)d(this)f(pair)h(indicate)g(that)e(it)i(is)f(a)g(stage-1)f
(expression.)20 b(Lev)o(el-)p Fj(n)c Fn(expr)n(essions)c
Fv(are)i(surrounded)h(b)o(y)f Fj(n)0 489 y Fv(pairs)j(of)f(brac)o(k)o
(ets,)f(and)i(stage-)p Fj(n)f Fn(typ)n(es)g Fv(are)g(also)g(surrounded)
h(b)o(y)g Fj(n)f Fv(pairs)h(of)f(brac)o(k)o(ets.)23 b(A)16
b(stage-0)f(expres-)0 546 y(sion)i(is)h(surrounded)f(b)o(y)g(zero)f
(pairs)h(of)g(brac)o(k)o(ets:)22 b(stage-0)16 b(expressions)h(are)g
(assigned)g(normal)g(t)o(yp)q(es.)24 b(This)0 602 y(is)16
b(illustrated)g(in)g(the)g(examples)g(b)q(elo)o(w.)0
715 y Fh(-|)21 b(<2>;)0 765 y(val)g(it)h(=)f(<2>)g(:)h(<int>)71
882 y Fv(Here)17 b(w)o(e)g(ha)o(v)o(e)g(a)f(stage-1)h(expression)h
(where)f Fj(\013)f Fv(=)i Fr(int)p Fv(.)25 b(In)18 b(the)f(t)o(yp)q(e)g
Fr(<)p Fj(\013)p Fr(>)p Fv(,)g Fj(\013)h Fv(indicates)g(the)g(t)o(yp)q
(e)f(the)0 938 y(expression)c(will)i(ha)o(v)o(e)d(in)h(the)g(stage)f
(of)g(its)h(execution.)20 b(Ob)o(viously)l(,)14 b(in)f
Fr(<2>)p Fv(,)g Fr(2)f Fv(will)i(ha)o(v)o(e)f(t)o(yp)q(e)f
Fr(int)g Fv(at)g(stage-1.)0 1051 y Fh(-|)21 b(<<<2>>>;)0
1101 y(val)g(it)h(=)f(<<<2>>>)f(:)i(<<<int>>>)71 1212
y Fv(Here)16 b(w)o(e)g(ha)o(v)o(e)g(a)g(stage-3)f(expression.)24
b Fj(\013)14 b Fv(=)j(is)f(itself)h(a)f(co)q(de)h(t)o(yp)q(e.)23
b(W)l(e)16 b(can)h(also)f(ha)o(v)o(e)g(co)q(de)g(t)o(yp)q(es)h(for)0
1261 y(functions.)0 1359 y Fh(-|)k(<fn)h(x)f(=>)h(x+5>;)0
1409 y(val)f(it)h(=)f(<\(fn)g(a)h(=>)f(a)h(\045+)f(5\)>)g(:)h(<int)f
(->)g(int>)0 1509 y(-|)g(fn)h(x)f(=>)h(<x+5>;)0 1559
y(val)f(it)h(=)f(fn)43 b(:)22 b(int)f(->)g(<int>)71 1661
y Fv(Summarizing)16 b(the)f(t)o(yp)q(e)h(rules)f(for)g(the)g
(meta-programming)g(constructs)f(w)o(e)h(ha)o(v)o(e:)68
1778 y Fg(\017)23 b Ft(meta-brac)o(k)o(ets.)18 b Fv(If)c
Fr(e)g Fv(has)f(t)o(yp)q(e)h Fj(\034)k Fv(then)c Fr(<e>)g
Fv(has)f(t)o(yp)q(e)h Fr(<)p Fj(\034)5 b Fr(>)p Fv(.)19
b(In)14 b(addition)h(an)o(y)e(escap)q(es)h(\(or)f(\\holes"\))114
1835 y(inside)k(of)d Fr(e)h Fv(m)o(ust)g(b)q(e)h(\014lled)h(with)f(co)q
(de)f(of)g(the)g(correct)g(t)o(yp)q(e)g(for)g(that)g(holes)g(con)o
(text.)68 1937 y Fg(\017)23 b Ft(escap)q(e.)d Fv(If)14
b Fr(e)f Fv(has)h(t)o(yp)q(e)g Fr(<)p Fj(\034)5 b Fr(>)13
b Fv(then)i(~)p Fr(e)f Fv(has)f(t)o(yp)q(e)h Fj(\034)19
b Fv(and)14 b(can)g(b)q(e)g(spliced)i(in)o(to)d(a)h(\\hole")g(whose)g
(con)o(text)114 1994 y(exp)q(ects)i(a)e(piece)j(of)e(co)q(de)h(with)f
(t)o(yp)q(e)g Fr(<)p Fj(\034)5 b Fr(>)p Fv(.)68 2096
y Fg(\017)23 b Ft(run.)c Fv(If)c Fr(e)g Fv(has)g(t)o(yp)q(e)h
Fr(<)p Fj(\034)5 b Fr(>)15 b Fv(then)g Fr(run)24 b(e)15
b Fv(has)g(t)o(yp)q(e)g Fj(\034)5 b Fv(.)68 2199 y Fg(\017)23
b Ft(lift.)e Fv(If)15 b Fr(e)g Fv(has)g(t)o(yp)q(e)h
Fj(\034)k Fv(then)15 b Fr(lift)24 b(e)15 b Fv(has)g(t)o(yp)q(e)g
Fr(<)p Fj(\034)5 b Fr(>)0 2333 y FA(4.3)56 b(In)n(teraction)18
b(Bet)n(w)n(een)g(run)h(and)g(escap)r(e)0 2423 y Ft(??)71
2482 y Fv(The)c(t)o(yp)q(e)h(system)e(presen)o(ted)i(ab)q(o)o(v)o(e)f
(has)g(some)g(dra)o(wbac)o(ks.)20 b(In)c(particular)g(it)f(t)o(yp)q(es)
h(the)f(program)f Fr(<fn)0 2538 y(x)24 b(=>)g Fv(~)p
Fr(\(run)f(<x>\)>)15 b Fv(whic)o(h)h(leads)g(to)e(a)h(run)o(time)h
(error.)0 2651 y Fh(-|)43 b(<fn)21 b(x)h(=>)f(~\(run)g(<x>\)>;;)0
2701 y(Error:)g(In)g(the)g(dynamic)f(runtime)h(environment:)e(Variable)
h(Not)h(Found:)g('x'782')952 2825 y Fv(19)p eop
%%Page: 20 26
20 25 bop 71 286 a Fv(This)15 b(is)g(b)q(ecause)g(the)g(rule)g(for)f(t)
o(yping)h Fr(run)f Fv(expressions)h(remo)o(v)o(es)f(brac)o(k)o(ets)g
(without)g(lo)o(w)o(ering)h(the)g(lev)o(el)0 343 y Fn(n)p
Fv(.)25 b(This)18 b(is)f(the)g(normal)g(course)h(of)e(a\013airs,)h(and)
g(is)h(the)f(righ)o(t)g(thing)g(to)f(do,)i(except)f(if)h
Fr(run)e Fv(is)i(applied)h(to)d(a)0 399 y(piece)i(of)e(co)q(de)i(with)f
(free)f(v)m(ariables)i(whic)o(h)g(are)e(b)q(ound)i(at)e(a)g(lev)o(el)i
(higher)f(than)g(the)g(lev)o(el)h(at)e(whic)o(h)h Fr(run)f
Fv(is)0 456 y(executed.)k(This)14 b(is)g(the)g(case)f(for)g(the)h
(example)g(ab)q(o)o(v)o(e)f(b)q(ecause)i Fr(x)e Fv(is)h(b)q(ound)g(at)f
(lev)o(el)i(1,)e(and)h Fr(run)f Fv(is)h(executed)0 512
y(at)h(lev)o(el)h(0.)71 570 y(Designing)k(a)f(t)o(yp)q(e)g(system)g(to)
g(k)o(eep)h(trac)o(k)e(of)h(this)h(is)g(quite)g(hard.)32
b(W)l(e)20 b(ha)o(v)o(e)f(designed)h(sev)o(eral)g(t)o(yp)q(e)0
627 y(systems)f(to)f(in)o(v)m(alidate)j(suc)o(h)f(programs[TBS98)n(,)f
(MTBS99)o(].)32 b(Unfortunately)19 b(these)g(systems)g(either)h(also)0
683 y(thro)o(w)d(a)o(w)o(a)o(y)g(other)h(go)q(o)q(d)h(programs,)e(or)h
(require)h(elab)q(orate)g(annotations.)29 b(A)18 b(complete)i(solution)
f(to)f(this)0 740 y(problem)e(can)g(b)q(e)h(found)f(in)g(the)g(thesis)g
(of)g(W)l(alid)h(T)l(aha[T)l(ah99)n(],)e(but)h(this)g(requires)h
(writing)f(programs)f(in)h(a)0 796 y(rather)f(unnatural)g(st)o(yle.)71
854 y(In)e(the)g Fs(Met)m(aML)f Fv(implemen)o(tation)i(w)o(e)e(tak)o(e)
g(the)h(p)q(osition)h(that)e(suc)o(h)h(errors)f(are)g(similar)i(to)e
(errors)g(suc)o(h)0 911 y(as)18 b(taking)g(the)g(head)h(or)f(tail)g(of)
g(an)g(empt)o(y)g(list:)27 b(T)o(yp)q(eable,)20 b(but)e(leading)i(to)d
(a)h(run)o(time)h(error.)28 b(Av)o(oiding)0 967 y(suc)o(h)15
b(errors)g(are)f(the)h(resp)q(onsibili)q(t)o(y)i(of)d(the)i
(programmer.)i(W)l(e)d(ha)o(v)o(e)g(written)g(man)o(y)f(staged)h
(programs)f(and)0 1023 y(alw)o(a)o(ys)g(a)o(v)o(oided)i(this)f(error.)
71 1081 y(Researc)o(h)g(in)o(to)g(impro)o(ving)h(the)f(t)o(yp)q(e)h
(system)e(is)i(an)f(area)g(of)g(con)o(tin)o(ued)h(researc)o(h.)0
1234 y Fu(5)67 b(Generation)23 b(time)g(co)r(de)f(optimizations)0
1338 y Fv(T)l(o)16 b(write)h(m)o(ultistage)g(programs)f(e\013ectiv)o
(ely)l(,)h(one)g(needs)h(to)e(observ)o(e)h(the)f(programs)g(pro)q
(duced,)i(and)f(these)0 1395 y(programs)c(should)h(b)q(e)h(as)e(simple)
i(as)f(p)q(ossible.)21 b(F)l(or)13 b(this)h(reason,)f(our)h(implemen)o
(tation)h(p)q(erforms)f(automatic)0 1451 y(optimizations)f(on)e(sev)o
(eral)h(kinds)h(of)f(co)q(de)g(when)g(it)g(is)h(generated.)18
b(These)13 b(optimizations)f(in)o(v)o(olv)o(e)h(p)q(erforming)0
1507 y(safe)i(b)q(eta)g(and)h(eta)e(reductions,)i(let-hoisting)h(and)e
(monad)g(la)o(w)g(normalization.)0 1638 y FA(5.1)56 b(Safe)18
b(Beta)h(Reduction)0 1727 y Fv(A)g(b)q(eta)g(reduction)h(is)f(safe)f
(if)i(it)f(do)q(es)g(not)f(c)o(hange)h(ev)m(aluation)h(order,)f(or)g
(e\013ect)f(termination)i(prop)q(erties.)0 1783 y(There)f(is)g(one)g
(safe)g(case)g(whic)o(h)g(is)h(particularly)g(easy)e(to)g(recognize,)j
(namely)l(,)f(Plotkin's)f Fj(\014)1667 1790 y Fd(v)1706
1783 y Fv(rule)g([Plo75].)0 1840 y(Whenev)o(er)c(an)g(application)h(is)
g(constructed)f(where)g(the)g(function)g(part)f(is)i(an)f(explicit)i
(lam)o(b)q(da)e(abstraction,)0 1896 y(and)f(the)f(argumen)o(t)g(part)g
(is)h(a)g(v)m(alue,)g(then)g(that)f(application)i(can)f(b)q(e)g(sym)o
(b)q(olically)i(b)q(eta)e(reduced.)20 b(In)14 b(order)0
1953 y(to)j(a)o(v)o(oid)g(duplicating)j(co)q(de)e(w)o(e)f(restrict)h
(our)f(optimizations)h(to)f(constan)o(ts)g(or)g(v)m(ariables)i(\(while)
g(Plotkin's)0 2009 y Fj(\014)26 2016 y Fd(v)61 2009 y
Fv(rule)d(also)g(allo)o(ws)f(the)g(v)m(alues)h(to)f(b)q(e)h(lam)o(b)q
(da)g(expressions\).)k(F)l(or)14 b(example)i(in:)0 2118
y Fh(val)21 b(g)h(=)f(<fn)h(x)f(=>)g(x)h(*)g(5>;)0 2168
y(val)f(h)h(=)f(<fn)h(x)f(=>)g(\(~g)h(x\))f(-)h(2>;)0
2282 y Fv(The)c(v)m(ariable)h(h)e(ev)m(aluates)i(to:)24
b Fr(<fn)f(d1)h(=>)f(\(d1)h(*)f(5\))h(-)g(2>)17 b Fv(rather)g(than)g
Fr(<fn)24 b(d1)f(=>)h(\(\(fn)f(d2)h(=>)f(d2)0 2338 y(*)h(5\))f(d1\))h
(-)f(2>)p Fv(.)0 2469 y FA(5.2)56 b(Safe)18 b(Eta)h(reduction)0
2551 y Fv(Another)f(simple)h(optimization)g(is)f(eta-reduction,)h(i.e.)
28 b(terms)17 b(of)h(the)f(form:)25 b Fr(\(fn)e(x)h(=>)g(e)f(x\))18
b Fv(where)g Fr(e)f Fv(is)0 2601 y(a)j(v)m(alue)i(\(an)e(explicit)j
(lam)o(b)q(da)e(or)f(a)g(v)m(ariable\))i(and)f Fr(x)f
Fv(do)q(es)h(not)f(o)q(ccur)h(free)g(in)g Fr(e)p Fv(.)36
b(Suc)o(h)22 b(terms)e(can)g(b)q(e)0 2651 y(eta-reduced)d(to)f
Fr(e)g Fv(without)g(c)o(hanging)g(their)h(meaning)g(or)e(termination)i
(b)q(eha)o(vior.)23 b(T)l(o)16 b(see)h(ho)o(w)e(this)i(w)o(orks)0
2701 y(in)f(MetaML)f(see)g(the)g(example)h(b)q(elo)o(w:)952
2825 y(20)p eop
%%Page: 21 27
21 26 bop 0 286 a Fh(-|)21 b(<fn)h(f)f(=>)h(\(fn)f(x)g(=>)h(f)f(x\)>;)0
336 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)f(a\)>)g(:)h(['a,'b].<\('b)41
b(->)21 b('a)h(\))f(->)h('b)43 b(->)21 b('a)h(>)0 436
y(-|)f(<fn)h(\(f,y\))e(=>)i(\(fn)f(x)g(=>)h(\(f)f(y\))h(x\)>;)0
486 y(val)f(it)h(=)f(<\(fn)g(\(b,a\))g(=>)g(\(fn)g(c)h(=>)f(b)h(a)g
(c\)\)>)f(:)174 535 y(['a,'b,'c].<\(\('c)41 b(->)21 b('b)43
b(->)22 b('a)f(\))h(*)f('c)g(\))h(->)f('b)44 b(->)21
b('a)g(>)71 627 y Fv(Notice)16 b(ho)o(w)f(the)h(eta-rule)h(is)f
(applied)i(in)f(the)f(\014rst)g(example,)g(but)g(not)g(in)g(the)g
(second.)23 b(This)17 b(is)f(b)q(ecause)0 683 y(the)e(conditions)h(for)
e(safet)o(y)g(are)g(not)h(met)f(\(the)h(function)g(part)f(is)i(an)e
(application)j(not)d(a)g(v)m(alue\))i(in)g(the)e(second)0
740 y(example.)0 861 y FA(5.3)56 b(Let-Hoisting)0 947
y Fv(Let-hoisting)16 b(is)g(illustrated)h(b)o(y)e(the)g(follo)o(wing)h
(examples:)0 1044 y Fh(-|)21 b(<let)g(val)h(x)f(=)h(\(let)f(val)g(y)g
(=)h(5)g(in)f(y+1)g(end\))g(in)g(x)h(+)g(2)f(end>;)0
1094 y(val)g(it)h(=)f(<let)g(val)g(a)h(=)f(5)h(val)f(b)h(=)f(a)h(\045+)
f(1)44 b(in)21 b(b)h(\045+)f(2)h(end>)f(:)g(<int>)0 1193
y(-|)g(<let)g(val)h(y)f(=)h(5)f(in)h(let)f(val)g(x)h(=)f(y+1)g(in)h
(x+2)f(end)g(end>;)0 1243 y(val)g(it)h(=)f(<let)g(val)g(a)h(=)f(5)h
(val)f(b)h(=)f(a)h(\045+)f(1)44 b(in)21 b(b)h(\045+)f(2)h(end>)f(:)g
(<int>)71 1347 y Fv(Safe-b)q(eta,)12 b(safe-eta,)f(and)g
(safe-let-hoisting)i(are)e(instances)h(of)f(W)l(adler)h(and)g(Sabry's)f
(call-b)o(y-v)m(alue)j(equiv-)0 1403 y(alence)g(rules)f([SW97)o(].)38
b(Applying)14 b(these)e(rules)i(mak)o(es)d(it)i(harder)f(to)g
(understand)h Fn(why)g Fv(a)f(particular)h(program)0
1460 y(w)o(as)18 b(generated,)h(but)g(in)g(our)g(exp)q(erience,)i(the)e
(resulting)g(programs)f(are)g(smaller,)i(simpler,)h(and)d(easier)i(to)0
1516 y(understand.)g(These)c(adv)m(an)o(tages)f(mak)o(e)f(this)i
(tradeo\013)e(w)o(orth)o(while.)71 1573 y(In)h(the)h(MetaML)e(implemen)
o(tation)i(the)g(normalization)g(la)o(ws)f(can)g(b)q(e)h(turned)f(on)g
(and)h(o\013.)j(They)c(are)g(all)0 1629 y(on)h(b)o(y)f(default.)22
b(The)16 b(side)g(e\013ecting)g(function)g Fr(feature)f
Fv(can)h(b)q(e)g(used)g(to)f(con)o(trol)g(the)h(normalization)h(la)o
(ws.)0 1685 y Fr(feature)23 b(0)15 b Fv(displa)o(ys)h(the)f
(normalization)h(mo)q(des,)f(and)h Fr(feature)23 b(n)15
b Fv(toggles)g(the)g Fr(nth)g Fv(feature.)0 1782 y Fh(-|)21
b(feature)g(0;)0 1832 y(1)h(Safe-beta)e(is)h(on.)0 1882
y(2)h(Safe-eta)e(is)h(on.)0 1932 y(3)h(Let-hoisting)d(is)i(on.)0
1982 y(4)h(Monad-law-norma)o(lizat)o(ion)d(is)i(on.)0
2031 y(val)g(it)h(=)f(false)43 b(:)21 b(bool)0 2131 y(-|)g(feature)g
(4;)0 2181 y(Monad-law-normali)o(zatio)o(n)e(is)i(off.)0
2231 y(val)g(it)h(=)f(false)43 b(:)21 b(bool)0 2373 y
Fu(6)67 b(The)22 b(art)h(of)e(m)n(ulti-stage)j(programming)0
2475 y Fv(In)19 b(this)h(Section)f(w)o(e)g(in)o(tro)q(duce)g(t)o(w)o(o)
f(larger)g(examples)i(of)e(t)o(w)o(o-stage)f(programs.)29
b(The)19 b(\014rst)f(example)i(is)f(a)0 2531 y(m)o(ultistage)g
(function)h(for)f(merging)g(sorted)g(lists.)32 b(The)20
b(second)g(example)g(is)f(a)g(program)f(whic)o(h)i(generates)0
2588 y(sp)q(ecialized)e(v)o(ersions)d(of)f(the)h(shortest)f(path)g
(algorithm)h(sp)q(ecialized)j(for)c(a)g(particular)i(graph.)j(These)c
(exam-)0 2644 y(ples)j(are)f(presen)o(ted,)g(to)g(p)q(oin)o(t)g(out)g
(in)h(more)f(detail,)h(ho)o(w)f Fs(Met)m(aML)g Fv(w)o(orks,)f(and)h
(tom)f(illustrate)j(some)d(of)0 2701 y(the)f(problems)h(that)f(need)h
(to)e(b)q(e)i(addressed)g(when)f(staging)g(and)h(algorithm.)952
2825 y(21)p eop
%%Page: 22 28
22 27 bop 0 286 a FA(6.1)56 b(Merging)18 b(lists)0 372
y Fv(In)e(this)f(Section,)h(w)o(e)f(examine)h(ho)o(w)f(to)f(annotate)h
Fr(merge)p Fv(,)f(a)h(simple)h(function)g(o)o(v)o(er)f(sorted)g(lists.)
0 491 y Ft(6.1.1)52 b(The)18 b(standard)f Fr(merge)g
Ft(function)0 577 y Fv(Giv)o(en)f(t)o(w)o(o)e(sorted)i(sequences)h
Fr(s1)e Fv(and)h Fr(s2)p Fv(,)f Fr(merge)g Fv(outputs)g(the)h(sorted)f
(concatenation)h(of)g Fr(s1)f Fv(and)h Fr(s2)p Fv(.)21
b(W)l(e)0 633 y(use)13 b(this)g(example)g(in)g(order)g(to)e(illustrate)
j(the)f(w)o(a)o(y)e(meta-programs)g(can)i(b)q(e)g(designed.)20
b(One)13 b(standard-)p Fs(SML)0 690 y Fr(merge)h Fv(function)i(is)0
781 y Fh(-|)21 b(fun)h(merge)e(xs)i(ys)f(=)65 831 y(case)g(xs)h(of)109
881 y([])f(=>)h(ys)65 931 y(|)g(\(z::zs\))e(=>)i(case)f(ys)g(of)414
981 y([])g(=>)h(xs)370 1030 y(|)g(w::ws)f(=>)g(if)h(z)f('<')g
(\(w:int\))719 1080 y(then)g(z::\(merge)f(zs)h(ys\))719
1130 y(else)g(w::\(merge)f(xs)h(ws\);)0 1180 y(val)g(merge)g(=)h(fn)43
b(:)21 b(int)g(list)g(->)h(int)f(list)g(->)g(int)g(list)71
1278 y Fv(The)11 b(example)i(b)q(elo)o(w)f(illustrates)h(ho)o(w)e(the)g
(t)o(w)o(o)f(sorted)i(sequences)g Fr(s1)g Fv(and)f Fr(s2)h
Fv(can)f(b)q(e)h(used)h(as)e(argumen)o(ts)0 1335 y(to)k
Fr(merge)f Fv(to)h(pro)q(duce)h(a)f(single)h(sorted)f(sequence.)0
1426 y Fh(-|)43 b(val)21 b(s1)h(=)f([3,6,7];)0 1476 y(val)g(s1)h(=)f
([3,6,7])f(:)i(int)f(list)0 1576 y(-|)43 b(val)21 b(s2)h(=)f([2,9,43];)
0 1625 y(val)g(s2)h(=)f([2,9,43])f(:)i(int)f(list)0 1725
y(-|)43 b(\(merge)21 b(s1)g(s2\);)0 1775 y(val)g(it)h(=)f
([2,3,6,7,9,43])e(:)j(int)f(list)0 1894 y Ft(6.1.2)52
b(Annotating)19 b Fr(merge)p Ft(:)j(a)c(\014rst)e(attempt)0
1973 y Fv(Let)e(us)h(assume)f(that)f(only)i(sequence)g
Fr(s1)f Fv(is)h(kno)o(wn.)k(Our)14 b(goal)g(is)h(to)f(sp)q(ecialize)i
Fr(merge)e Fv(with)g(resp)q(ect)h(to)f(this)0 2023 y(static)h
(parameter.)k(Straigh)o(tforw)o(ard)13 b(annotations)i(of)g
Fr(merge)f Fv(yield)j(the)f(function)g Fr(merge2)p Fv(.)0
2103 y Fh(-|)21 b(fun)h(merge2)e(xs)h(=)65 2153 y(<fn)h(ys)f(=>)109
2203 y(~\(case)g(xs)g(of)196 2252 y([])h(=>)f(<ys>)153
2302 y(|)g(\(z::zs\))f(=>)i(<case)f(ys)g(of)501 2352
y([])h(=>)f(~\(lift)g(xs\))458 2402 y(|)g(\(w::ws\))g(=>)g(if)g(z)h
('<')f(\(w:int\))806 2452 y(then)g(z::\(~\(merge2)f(zs\))h(ys\))806
2502 y(else)g(w::\(~\(merge2)f(xs\))h(ws\))436 2551 y(>)131
2601 y(\))65 2651 y(>;)0 2701 y(val)g(merge2)g(=)g(fn)43
b(:)22 b(int)f(list)g(->)h(<int)f(list)g(->)g(int)g(list>)952
2825 y Fv(22)p eop
%%Page: 23 29
23 28 bop 0 286 a Fr(merge2)15 b Fv(is)i(a)f(function)h(whic)o(h)g
(inputs)h(a)e(sequence)h Fr(xs)f Fv(and)h(outputs)f(a)g(program)f
Fj(p)p Fv(.)23 b(First,)16 b Fj(p)g Fv(abstracts)f(the)0
343 y(sequence)k Fr(ys)f Fv(to)f(b)q(e)h(merged)g(in)o(to)g
Fr(xs)p Fv(.)28 b(The)18 b(escap)q(e)g(c)o(haracter,)g(around)g(the)f
Fr(case)h Fv(construct,)g(mak)o(es)f(the)0 399 y(case)g(lev)o(el-0)h
(co)q(de.)25 b(The)17 b(case)g(analysis)h(of)e Fr(xs)h
Fv(is)g(p)q(erformed)g(in)h(the)f(\014rst)f(stage)g(and)h(the)g(result)
h(is)f(a)g(piece)0 456 y(of)e(co)q(de)g(\(a)g(lev)o(el-1)h
(expression\).)21 b(When)15 b Fr(xs)g Fv(matc)o(hes)g
Fr(z::zs)p Fv(,)f(the)h(recursiv)o(e)h(calls)g(to)e Fr(merge2)h
Fv(are)f(escap)q(ed.)0 512 y(This)i(is)f(p)q(ossible)i(b)q(ecause)g
Fr(xs)e Fv(is)g(kno)o(wn)g(at)g(lev)o(el)h(0.)71 569
y(The)21 b(t)o(yp)q(e)f(of)h Fr(merge2)f Fv(indicates)i(that)e(it)h(is)
g(a)g(function)h(whic)o(h)f(inputs)h(a)e(sequence)i(of)f(in)o(tegers)g
(and)0 625 y(generates)12 b(the)g(enco)q(ding)h(of)f(a)f(function)i
(from)f(the)g(domain)g(of)g(sequences)h(of)e(in)o(tegers)h(to)g(a)g
(range)f(of)h(sequence)0 682 y(of)j(in)o(tegers.)71 750
y(Ho)o(w)o(ev)o(er,)10 b(applying)i Fr(merge2)e Fv(to)g
Fr(s1)h Fv(yields)h(an)f(in\014nite)i(computation.)18
b(This)12 b(is)f(b)q(ecause)h(the)f(computation)0 807
y(of)k Fr(w::\()q Fv(~)o Fr(\(merge2)23 b(xs\))g(ws\))15
b Fv(in)h(the)g Fr(else)e Fv(branc)o(h)h(con)o(tains)h(a)f
(non-decreasing)h(recursiv)o(e)g(call)g(to)f Fr(merge2)p
Fv(.)71 863 y(This)g(ob)o(vious)g(annotation)g(of)f Fr(merge)h
Fv(pro)q(duces)g(an)g(incorrect)h(program.)i(A)d(more)g(careful)g
(examination)0 920 y(of)g(the)g(function)h(is)g(required)g(for)f(m)o
(ultistage)g(programming.)0 1039 y Ft(6.1.3)52 b(Annotating)19
b Fr(merge)p Ft(:)j(a)c(second)f(attempt)0 1125 y Fv(In)h(order)g(to)f
(ensure)h(termination,)h(the)e(recursiv)o(e)i(call)g(to)e(the)g
(function)i(in)g(the)e Fr(else)h Fv(statemen)o(t)e(m)o(ust)h(b)q(e)0
1182 y(c)o(hanged.)24 b Fr(merge3)15 b Fv(is)i(a)f(non)h(annotated)e(v)
o(ersion)i(of)f Fr(merge)g Fv(whic)o(h)h(restructures)f(the)g
(recursion)h(pattern)f(of)0 1238 y Fr(merge)p Fv(.)j(The)14
b(function)h Fr(split)23 b(z)h(ys)14 b Fv(returns)g(a)g(pair)g(of)g
(sequences)h(con)o(taining)g(the)f(elemen)o(ts)h(in)g
Fr(ys)f Fv(greater)0 1295 y(than)i(and)g(less)h(than)f
Fr(z)g Fv(resp)q(ectiv)o(ely)l(.)24 b(The)16 b(head)g(of)g(the)g
(resulting)h(sequence)h(is)e Fr(u)g Fv(\(the)g(elemen)o(ts)g(less)h
(than)0 1351 y Fr(z)p Fv(\),)c(follo)o(w)o(ed)g(b)o(y)g
Fr(z)p Fv(.)19 b(No)o(w)13 b(all)h(recursiv)o(e)g(calls)g(are)f
(strictly)h(decreasing.)20 b Fr(merge3)12 b Fv(uses)h(the)h(auxiliary)g
(function)0 1407 y Fr(split)23 b(below)p Fv(.)0 1505
y Fh(-|)e(fun)h(reverse)e([])h(ys)h(=)f(ys)h(|)f(reverse)g(\(x::xs\))f
(ys)h(=)h(\(reverse)e(xs)h(\(x::ys\)\);)0 1555 y(val)g(reverse)g(=)g
(Fn)43 b(:)22 b(['a].'a)42 b(list)21 b(->)g('a)44 b(list)20
b(->)i('a)43 b(list)0 1655 y(-|)21 b(fun)h(split2)e(\(n:int\))g(xs)i
(\(small,big\))d(=)109 1704 y(case)i(xs)g(of)153 1754
y([])g(=>)g(\(reverse)f(small)h([],)g(reverse)g(big)g([]\))109
1804 y(|)h(\(z::zs\))e(=>)h(if)h(z)f('>')g(n)458 1854
y(then)g(split2)f(n)i(zs)f(\(small,z::big\))458 1904
y(else)g(split2)f(n)i(zs)f(\(z::small,big\);)0 1954 y(val)g(split2)g(=)
g(fn)87 2003 y(:)h(int)f(->)g(int)g(list)43 b(->)22 b(\(int)f(list)42
b(*)22 b(int)f(list)g(\))h(->)f(\(int)g(list)43 b(*)21
b(int)h(list)e(\))0 2103 y(-|)h(fun)h(split)e(n)i(l)f(=)h(\(split2)e(n)
i(l)g(\([],[]\)\);)0 2153 y(val)f(split)g(=)h(fn)f(:)g(int)h(->)f(int)g
(list)43 b(->)21 b(\(int)g(list)43 b(*)22 b(int)f(list)g(\))0
2252 y(-|)g(fun)h(merge3)e(xs)h(ys)h(=)65 2302 y(case)f(xs)h(of)109
2352 y([])f(=>)h(ys)65 2402 y(|)g(z::zs)f(=>)153 2452
y(\(case)f(ys)i(of)218 2502 y([])f(=>)h(xs)174 2551 y(|)g(w::ws)f(=>)
240 2601 y(if)g(z)h('<')f(w)305 2651 y(then)g(z::\(merge3)f(zs)h(ys\))
305 2701 y(else)g(let)g(val)g(\(u,v\))g(=)h(split)f(z)g(ys)952
2825 y Fv(23)p eop
%%Page: 24 30
24 29 bop 414 286 a Fh(in)458 336 y(append)20 b(u)i(\(z::\(merge3)d(zs)
j(v\)\))414 386 y(end)153 436 y(\);)0 486 y(val)f(merge3)g(=)g(fn)h(:)f
(int)g(list)43 b(->)22 b(int)f(list)43 b(->)21 b(int)g(list)71
621 y Fr(merge4)d Fv(is)h(an)g(annotated)g(v)o(ersion)g(of)f
Fr(merge3)p Fv(.)31 b(Annotations)18 b(in)i Fr(merge4)e
Fv(are)h(v)o(ery)g(similar)h(to)e(those)0 677 y(in)f
Fr(merge2)p Fv(.)j(Ho)o(w)o(ev)o(er,)15 b(the)h(termination)g(b)q(eha)o
(vior)g(of)g(the)g(\014rst)f(stage)g(of)g(the)h(computation)g(has)g(no)
o(w)f(b)q(een)0 734 y(impro)o(v)o(ed.)0 868 y Fh(-|)21
b(fun)h(merge4)e(xs)h(=)0 917 y(<fn)g(ys)h(=>)44 967
y(~\(case)e(xs)i(of)131 1017 y([])f(=>)h(<ys>)87 1067
y(|)g(\(z::zs\))e(=>)174 1117 y(<case)h(ys)g(of)240 1166
y([])g(=>)g(~\(lift)g(xs\))196 1216 y(|)h(\(w::ws\))e(=>)283
1266 y(if)i(\(~\(lift)e(z\)\))h('<')g(w)349 1316 y(then)g(\(~\(lift)f
(z\)\)::\(~\(merge4)f(zs\))i(ys\))349 1366 y(else)g(let)g(val)g
(\(low,high\))f(=)h(split)g(\(~\(lift)f(z\)\))i(ys)458
1416 y(in)501 1465 y(append)f(low)654 1515 y(\(~\(lift)f
(z\)::\(~\(merge4)f(zs\))i(high\)\))458 1565 y(end)174
1615 y(>\))0 1665 y(>;)0 1714 y(val)g(merge4)g(=)g(fn)43
b(:)22 b(int)f(list)g(->)h(<int)f(list)g(->)g(int)g(list>)71
1849 y Fv(It)g(is)g(imp)q(ortan)o(t)g(to)f(note)h(that)f
Fr(split)g Fv(de\014ned)j(at)d(lev)o(el)i(0)f(is)h(used)f(at)g(lev)o
(el)h(1)f(in)g(the)h(de\014nition)g(of)0 1906 y Fr(merge4)p
Fv(.)h(The)17 b(imp)q(ortance)g(of)f(cross)g(stage)g(p)q(ersistence)i
(when)f(writing)g(staged)f(programs)f(cannot)i(b)q(e)g(o)o(v)o(er)0
1962 y(emphasized.)37 b(The)21 b(example)g(b)q(elo)o(w)g(depicts)h(the)
e(application)j(of)d(a)g(one)g(elemen)o(t)i(list)f(to)f
Fr(merge4)p Fv(.)35 b(The)0 2019 y(sp)q(ecialized)18
b(program)c(inputs)i(a)f(list)h(and)g(inserts)f(the)h(static)f
Fr(2)g Fv(in)h(the)f(righ)o(t)g(place.)0 2153 y Fh(-|)43
b(\(merge4)21 b([2]\);)0 2252 y(val)g(it)h(=)0 2302 y(<\(fn)f(a)h(=>)
109 2352 y(\(case)f(a)g(of)153 2402 y([])g(=>)218 2452
y([2])109 2502 y(|)h(\(c::b\))e(=>)218 2551 y(if)h(2)h(\045'<')f(c)283
2601 y(then)g(2)h(::)f(a)283 2651 y(else)g(let)g(val)h(\(e,d\))e(=)i
(\045split)f(2)g(a)43 b(in)22 b(\045append)e(e)i(\(2)f(::)h(d\))f
(end\)\)>)22 2701 y(:)g(<int)g(list)g(->)h(int)f(list>)952
2825 y Fv(24)p eop
%%Page: 25 31
25 30 bop 0 286 a Ft(6.1.4)52 b(Decreasing)18 b(the)f(size)h(of)g(the)f
(output)i(program)0 372 y Fv(Although)c Fr(merge4)f Fv(is)h(correct,)f
(the)h(generated)g(program)f(has)g(size)i(exp)q(onen)o(tial)g(in)g(the)
f(length)g(of)f(the)h(static)0 429 y(input)k(sequence.)28
b(This)19 b(is)f(b)q(ecause)h(all)f(the)g(branc)o(hes)g(induced)i(b)o
(y)e(the)g(conditional)h Fr(if)k(z)h('<')g(w)17 b Fv(are)h(ex-)0
485 y(plored.)71 542 y(Another)12 b(approac)o(h)g(consists)h(of)f
(using)h(a)f(di\013eren)o(t)h(de\014nition)h(of)e(the)h
Fr(merge)f Fv(function,)h(denoted)g Fr(merge5)p Fv(.)0
690 y Fh(-|)21 b(fun)h(merge5)e(xs)h(ys)h(=)65 740 y(case)f(xs)h(of)109
789 y([])f(=>)h(ys)65 839 y(|)g(\(a::b\))f(=>)g(let)g(val)g(\(u,v\))g
(=)h(split)e(a)i(ys)327 889 y(in)370 939 y(append)f(u)h(\(a::\(merge5)d
(b)j(v\)\))327 989 y(end;)0 1039 y(val)f(merge5)g(=)g(fn)h(:)f(int)g
(list)43 b(->)22 b(int)f(list)43 b(->)21 b(int)g(list)71
1137 y Fv(The)c Fr(if)g Fv(statemen)o(t)f(o)q(ccurring)i(in)g
Fr(merge3)e Fv(and)i Fr(merge4)e Fv(has)h(disapp)q(eared)i(in)f
Fr(merge5)p Fv(.)25 b(Concisely)l(,)19 b(its)0 1193 y(purp)q(ose)e(has)
g(b)q(een)h Fn(pushe)n(d)f Fv(inside)h(the)f(de\014nition)h(of)f
Fr(split)e Fv(whic)o(h)j(will)g(b)q(e)g(executed)f(at)f(lev)o(el-1.)26
b Fr(merge6)0 1250 y Fv(is)16 b(the)f(natural)g(annotated)g(v)o(ersion)
g(of)g Fr(merge5)p Fv(.)0 1342 y Fh(-|)21 b(fun)h(merge6)e(xs)h(=)65
1392 y(<fn)h(ys)f(=>)109 1441 y(~\(case)g(xs)g(of)196
1491 y([])h(=>)f(<ys>)153 1541 y(|)g(\(a::b\))g(=>)g(<let)g(val)g
(\(u,v\))g(=)h(split)e(~\(lift)h(a\))g(ys)436 1591 y(in)479
1641 y(append)g(u)h(\(~\(lift)e(a\)::\(~\(merge6)f(b\))i(v\)\))436
1690 y(end)414 1740 y(>)131 1790 y(\))65 1840 y(>;)0
1890 y(val)g(merge6)g(=)g(fn)43 b(:)22 b(int)f(list)g(->)h(<int)f(list)
g(->)g(int)g(list>)71 1988 y Fv(The)13 b(program)f(b)q(ello)o(w)i(w)o
(as)f(generated)g(using)h Fr(merge6)p Fv(.)k(Its)13 b(size)h(is)g
(linear)g(in)g(this)g(of)f(the)g(input)h(sequence.)0
2080 y Fh(-|)21 b(merge6)g([2];)0 2130 y(val)g(it)h(=)0
2180 y(<\(fn)f(a)h(=>)f(let)g(val)g(\(c,b\))g(=)h(\045split)e(2)i(a)43
b(in)22 b(\045append)e(c)h(\(2)h(::)f(b\))h(end\)>)22
2229 y(:)f(<int)g(list)g(->)h(int)f(list>)71 2321 y Fv(When)15
b(applied)j(to)c(larger)i(static)f(lists,)h(the)f(increase)h(in)h(size)
f(of)f(the)g(generated)h(program)e(is)i(linear)h(with)0
2371 y(the)e(size)h(of)f(the)g(input.)21 b(It)16 b(adds)f(a)g(single)h
Fr(let)f Fv(for)g(eac)o(h)g(elemen)o(t.)0 2452 y Fh(-|)21
b(merge6)g([2,5];)0 2502 y(val)g(it)h(=)0 2551 y(<\(fn)f(a)h(=>)109
2601 y(let)f(val)g(\(c,b\))g(=)h(\045split)e(2)i(a)131
2651 y(in)f(\045append)f(c)i(\(2)f(::)h(let)f(val)g(\(e,d\))g(=)h
(\045split)e(5)i(b)43 b(in)21 b(\045append)g(e)g(\(5)h(::)f(d\))g
(end\))g(end\)>)22 2701 y(:)g(<int)g(list)g(->)h(int)f(list>)952
2825 y Fv(25)p eop
%%Page: 26 32
26 31 bop 71 286 a Fv(The)18 b(app)q(earance)g(of)g(this)g(generated)g
(program)f(could)i(b)q(e)g(impro)o(v)o(ed)f(b)o(y)g(\\pulling")h(the)f
(let)h(outside)f(of)0 336 y(the)d(cons)h(\()p Fr(::)p
Fv(\))j(op)q(erator.)65 411 y Fh(<fn)j(a)f(=>)h(let)f(val)g(\(c,b\))g
(=)g(\045split)g(2)g(a)349 461 y(val)g(\(e,d\))g(=)g(\045split)g(5)g(b)
349 511 y(val)g(w)g(=)h(\(\045append\))e(e)i(\(2)43 b(::)g(d\))262
561 y(in)21 b(\(\045append\))f(c)h(\(5)44 b(::)21 b(w\))262
611 y(end>)0 686 y Fv(This)14 b(can)g(b)q(e)g(done)f(b)o(y)h
(restructuring)f(the)h(generator.)k(T)l(o)13 b(e\013ect)g(this)h
(transformation,)e(w)o(e)h(in)o(tro)q(duce)i(a)e(new)0
736 y(lo)q(cal)i(v)m(ariable)g Fr(zs)f Fv(in)g(the)g(generated)g
(\(second)g(stage\))f(co)q(de,)h(and)g(assign)g(to)f(it)i(the)e
(expression)i(generated)f(b)o(y)0 785 y(the)h(\(\014rst)g(stage\))f
(recursiv)o(e)i(call)g(to)f Fr(merge6)p Fv(.)0 861 y
Fh(fun)21 b(merge6)g(xs)g(=)65 910 y(<fn)h(ys)f(=>)109
960 y(~\(case)g(xs)g(of)196 1010 y([])h(=>)f(<ys>)153
1060 y(|)g(\(a::b\))g(=>)g(<let)g(val)g(\(u,v\))g(=)h(split)e(~\(lift)h
(a\))g(ys)523 1110 y(val)g(zs)h(=)f(~\(merge6)f(b\))i(v)436
1160 y(in)479 1209 y(append)f(u)h(\(~\(lift)e(a\)::)h(zs\))436
1259 y(end)414 1309 y(>)131 1359 y(\))65 1409 y(>;)0
1484 y Fv(No)o(w)15 b(observ)o(e)g(the)g(structure)g(of)g(generated)g
(co)q(de)h(for)e(a)h(larger)g(\014rst)g(stage)f(input.)0
1559 y Fh(-|)21 b(merge6)g([1,5,8,33];)0 1609 y(val)g(it)h(=)0
1659 y(<\(fn)f(a)h(=>)109 1708 y(let)f(val)g(\(c,b\))g(=)h(\045split)e
(1)i(a)196 1758 y(val)f(\(e,d\))g(=)h(\045split)e(5)i(b)196
1808 y(val)f(\(g,f\))g(=)h(\045split)e(8)i(d)196 1858
y(val)f(\(i,h\))g(=)h(\045split)e(33)i(f)196 1908 y(val)f(j)h(=)f(h)196
1958 y(val)g(k)h(=)f(\045append)g(i)g(\(33)h(::)f(j\))196
2007 y(val)g(l)h(=)f(\045append)g(g)g(\(8)h(::)f(k\))196
2057 y(val)g(m)h(=)f(\045append)g(e)g(\(5)h(::)f(l\))131
2107 y(in)g(\045append)f(c)i(\(1)f(::)h(m\))f(end\)>)22
2157 y(:)g(<int)g(list)g(->)h(int)f(list>)0 2276 y FA(6.2)56
b(Sp)r(ecializing)16 b(a)j(shortest-path)f(algorithm)0
2362 y Fv(This)d(Section)h(illustrates)g(ho)o(w)e(m)o(ultistage)g
(programming)h(can)f(b)q(e)i(used)f(to)f(e\016cien)o(tly)i(impro)o(v)o
(e)f(a)f(program)0 2418 y(that)19 b(solv)o(es)i(a)e(problem)i(in)g
(graph)f(theory)l(.)35 b(Giv)o(en)20 b(a)g(directed)h(w)o(eigh)o(ted)g
(graph)e(\()p Fj(V)s(;)8 b(E)s Fv(\))17 b(and)k(t)o(w)o(o)d(no)q(des)0
2475 y Fj(a;)8 b(b)15 b Fg(2)j Fj(V)9 b Fv(,)18 b(a)f(shortest)g(path)h
(algorithm)f(\014nds)i(the)e(minim)o(um)i(w)o(eigh)o(ted)f(path)g(in)g
Fj(G)g Fv(from)e(the)i(source)g Fj(a)g Fv(to)0 2531 y(the)d
(destination)h Fj(b)p Fv(.)71 2588 y(Assume)e(no)o(w)g(that)f(the)i(w)o
(eigh)o(t)f(function)h(is)f(unkno)o(wn)h(at)e(program)h
(generation-time.)20 b(One)15 b(can)f(exp)q(ect)0 2644
y(to)f(sp)q(ecialize)j(the)e(general)g(algorithm)g(with)g(resp)q(ect)g
(to)f(the)g(particular)i(graph)e Fj(G)p Fv(.)19 b(In)14
b(the)g(remainder)g(of)g(this)0 2701 y(Section,)i(w)o(e)f(presen)o(t)g
(a)g(m)o(ultistage)g(program)f(that)g(realizes)j(suc)o(h)e(a)g(sp)q
(ecialization.)952 2825 y(26)p eop
%%Page: 27 33
27 32 bop 129 501 a Fc(-)45 502 y Fb(')p 45 623 2 39
v 129 502 42 2 v 323 615 a Fc(?)322 510 y Fb($)p 322
615 2 23 v 221 510 20 2 v 167 523 a Fc(-)206 524 y Fb(\003)p
206 538 2 7 v 206 549 2 11 v 206 633 a(&)p 290 633 11
2 v 303 641 a(\001)57 703 y Fc(6)p 55 662 2 1 v 55 688
a Fb(\012)p 81 688 94 2 v 303 662 2 5 v 198 w(\011)p
175 688 104 2 v 227 443 2 59 v 227 469 a(\011)p 201 469
3 2 v 227 286 a(\014)p 227 385 2 67 v 187 286 8 2 v 187
285 a Fc(\033)421 388 y(?)420 254 y Fb($)p 420 388 2
53 v 215 254 123 2 v -403 w(\003)p 192 254 23 2 v 360
640 a Fc(\033)p 436 566 2 57 v 436 641 a Fb(!)p 360 641
4 2 v 436 450 a(\000)p 436 509 2 52 v 425 450 5 2 v 359
439 a Fc(-)339 440 y Fb(\033)p 339 619 2 122 v 398 440
3 2 v 197 494 a(l)329 644 y(l)422 419 y(l)160 269 y(l)29
644 y(l)18 662 y Fp(1)188 510 y(2)149 284 y(3)414 436
y(5)317 660 y(4)466 787 y Fv(Figure)15 b(1:)20 b(The)15
b(graph)g(represen)o(ted)h(b)o(y)f(the)g(function)h Fr(g)p
Fv(.)0 927 y Ft(6.2.1)52 b(Graph)17 b(represen)o(tation)0
1014 y Fv(A)i(graph)g(is)g(enco)q(ded)h(b)o(y)f(a)g(function)g
Fr(g)p Fv(.)31 b(The)19 b(function)h Fr(g)p Fv('s)e(argumen)o(t)g(can)h
(b)q(e)h(though)o(t)e(of)h(as)f(a)h(v)o(ertex,)0 1071
y(denoted)14 b(b)o(y)g(an)g(in)o(teger)g(lab)q(el.)21
b(The)14 b(function)g(returns)g(a)f(list)i(of)e(successor)h(no)q(des)h
(denoted)f(b)o(y)f(their)i(in)o(teger)0 1127 y(lab)q(els.)21
b(The)16 b(function)g Fr(g)f Fv(b)q(elo)o(w)h(enco)q(des)g(the)f(graph)
g(in)h(Figure)g(1.)0 1231 y Fh(-|)21 b(fun)h(g)f(x)h(=)109
1280 y(case)f(x)h(of)153 1330 y(1)f(=>)h([2])109 1380
y(|)g(2)f(=>)h([3,4])109 1430 y(|)g(3)f(=>)h([5])109
1480 y(|)g(4)f(=>)h([1,2,5])109 1529 y(|)g(5)f(=>)h([4])109
1579 y(|)g(_)f(=>)h([];)0 1629 y(val)f(g)h(=)f(fn)44
b(:)21 b(int)g(->)h(int)f(list)0 1753 y Ft(6.2.2)52 b(The)18
b(shortest)e(path)j(algorithm)0 1840 y Fv(First)d(w)o(e)g(describ)q(e)i
(the)f(standard)e(algorithm.)24 b Fr(shortestPath)14
b Fv(is)j(a)f(non-annotated)g(function,)i(taking)e(\014v)o(e)0
1896 y(argumen)o(ts.)68 1993 y Fg(\017)23 b Fr(succ)d
Fv(is)i(the)f(function)h(asso)q(ciating)g(to)e(a)h(v)o(ertex)g(a)g
(list)h(of)f(successor)g(v)o(ertexes,)h(and)g(enco)q(des)g(the)114
2049 y(top)q(ology)15 b(of)f(the)i(graph;)68 2146 y Fg(\017)23
b Fr(source)14 b Fv(is)i(the)f(source)g(v)o(ertex;)68
2242 y Fg(\017)23 b Fr(dest)14 b Fv(is)i(the)f(destination)h(v)o
(ertex;)68 2339 y Fg(\017)23 b Fr(marked)14 b Fv(indicates)j(whic)o(h)f
(no)q(des)f(ha)o(v)o(e)g(already)h(b)q(een)g(visited)g(b)o(y)g(the)f
(algorithm;)68 2435 y Fg(\017)23 b Fr(weight)g(x)g(y)15
b Fv(indicates)i(the)e(w)o(eigh)o(t)g(of)g(the)g(edge)h(\()p
Fj(x;)8 b(y)r Fv(\).)71 2531 y(The)17 b(resulting)g(v)m(alue)h(is)f(an)
g(in)o(teger)g(indicating)i(the)d(cost)g(of)h(the)g(shortest)e(path)i
(b)q(et)o(w)o(een)g Fr(source)f Fv(and)0 2588 y Fr(dest)e
Fv(in)h(the)f(graph)g(denoted)h(b)o(y)f Fr(succ)p Fv(.)19
b(In)c(the)f Fr(then)g Fv(branc)o(h)g(of)g(the)g(conditional,)i(10000)d
(is)h(assumed)h(to)e(b)q(e)0 2644 y(an)h(in\014nitely)j(big)d(v)m
(alue.)21 b(First,)14 b Fr(source)f Fv(is)i(added)f(to)g(the)g(list)h
(of)f(already)g(visited)h(v)o(ertices.)20 b Fr(explore)13
b Fv(is)i(the)0 2701 y(list)h(of)f Fr(source)p Fv('s)g(successors)g
(whic)o(h)i(ha)o(v)o(e)e(not)g(b)q(een)i(visited)f(y)o(et.)21
b(The)15 b(function)i(inside)g(the)f Fr(map)f Fv(computes)952
2825 y(27)p eop
%%Page: 28 34
28 33 bop 0 286 a Fv(the)16 b(shortest)f(path)h(b)q(et)o(w)o(een)h(eac)
o(h)f(of)g Fr(source's)f Fv(successors)h(and)g Fr(dest)p
Fv(.)22 b(The)16 b(resulting)h(v)m(alues)h(are)d(stored)0
343 y(in)h(the)f Fr(pathWeights)f Fv(list.)21 b(Finally)l(,)16
b Fr(shortestPath)e Fv(returns)h(the)g(minim)o(um)h(v)m(alue)h(in)f
Fr(pathWeights)p Fv(.)0 445 y Fh(-|)21 b(fun)h(shortestPath)d(succ)i
(source)f(dest)h(marked)g(weight)f(=)109 495 y(if)h(source)g(=)g(dest)
174 545 y(then)g(0)174 595 y(else)218 644 y(let)g(val)g(marked2)g(=)g
(\(source::marked\))305 694 y(val)g(explore)g(=)g(\(minus)g(\(succ)g
(source\))f(marked2\))305 744 y(fun)h(short)g(x)h(=)f(shortestPath)f
(succ)g(x)i(dest)f(marked2)f(weight)305 794 y(val)h(path_weights)f(=)
414 844 y(map)h(\(fn)g(node)g(=>)h(\(short)e(node\))h(+)h(\(weight)e
(source)h(node\)\))501 893 y(explore)218 943 y(in)262
993 y(case)f(path_weights)g(of)305 1043 y([])h(=>)h(10000)262
1093 y(|)f(_)h(=>)f(\(minimum)f(path_weights\))218 1143
y(end;)0 1192 y(val)h(shortestPath)e(=)j(fn)44 1242 y(:)f(\(int->int)f
(list\))h(->)g(int)g(->)h(int)f(->)g(int)h(list)42 b(->)22
b(\(int->int->int\))c(->)k(int)71 1351 y Fv(The)13 b(follo)o(wing)h
(example)h(illustrates)f(the)f(use)h(of)f(the)h(function)g(\(here)f(ev)
o(ery)h(edge)f(has)h(a)f(unit)h(w)o(eigh)o(t,)f(i.e.)0
1407 y Fr(w)24 b(x)f(y)h(=)g(1)p Fv(\).)0 1509 y Fh(-|)d
(\(shortestPath)e(g)j(3)g(2)f([])h(w\);)0 1559 y(val)f(it)h(=)f(3)h(:)f
(int)0 1682 y Ft(6.2.3)52 b(A)17 b(t)o(w)o(o-lev)o(el)g(shortest)g
(path)h(algorithm)0 1768 y Fv(Here,)i(w)o(e)e(describ)q(e)j(ho)o(w)d
(to)g(annotate)g(the)h(algorithm)g(in)h(order)f(to)f(obtain)h(a)f
(program)g(generator)g(whic)o(h)0 1825 y(pro)q(duces)f(graph-dep)q
(enden)o(t)g(co)q(de.)23 b(Since)17 b(the)f Fr(weight)f
Fv(function)i(is)g(assumed)f(unkno)o(wn,)g Fr(shortestPath2)0
1881 y Fv(outputs)i(the)g(enco)q(ding)i(of)d(a)h(function)h(dep)q
(ending)h(on)e(this)h(parameter.)27 b(Most)18 b(of)f(the)h(computation)
g(only)0 1938 y(dep)q(ends)k(on)e(the)h(structure)f(of)g(the)g(graph)g
(and)h(can)g(b)q(e)g(escap)q(ed.)36 b(Hence,)22 b(the)f(v)m(ariables)g
Fr(marked2)f Fv(and)0 1994 y Fr(explore)d Fv(are)g(b)q(ound)i(at)e
(program)g(generation-time.)28 b(In)19 b(addition,)g(inside)g(the)f
Fr(map)24 b(function)p Fv(,)17 b(only)h(the)0 2051 y(application)f(of)e
Fr(weight)f Fv(and)h(the)h(addition)g(are)f(not)g(p)q(erformed)g
(statically)l(.)0 2153 y Fh(-|)21 b(fun)h(shortestPath2)d(succ)i
(source)f(dest)h(marked)g(=)65 2203 y(<fn)h(weight)e(=>)109
2252 y(~\(if)h(source)f(=)i(dest)218 2302 y(then)f(<0>)218
2352 y(else)262 2402 y(let)g(val)g(marked2)f(=)i(source::marked)349
2452 y(val)f(explore)f(=)i(\(minus)e(\(succ)h(source\))f(marked\))349
2502 y(fun)h(short)g(x)g(=)h(shortestPath2)d(succ)i(x)g(dest)g(marked2)
349 2551 y(val)g(path_weights)e(=)479 2601 y(map)j(\(fn)f(node)g(=>)g
(<)h(\(~\(short)e(node\))h(weight\))f(+)610 2651 y(\(weight)h(~\(lift)f
(source\))g(~\(lift)h(node\)\))g(>)g(\))567 2701 y(explore)952
2825 y Fv(28)p eop
%%Page: 29 35
29 34 bop 262 286 a Fh(in)327 336 y(\(liftMinimum)19
b(path_weights\))262 386 y(end)131 436 y(\))65 486 y(>;)0
535 y(val)i(shortestPath2)e(=)j(fn)22 585 y(:)f(\(int)g(->)h(int)f
(list)g(\))g(->)h(int)f(->)g(int)h(->)f(int)g(list)43
b(->)610 635 y(<\(int)21 b(->)g(int)h(->)f(int\))g(->)g(int>)71
744 y Fv(Finally)l(,)14 b(note)f(that)g(the)g(minim)o(um)i(function)f
(has)f(to)f(generate)h(a)g(residual)i(co)q(de.)k(This)14
b(is)g(done)f(b)o(y)h(lifting)0 800 y(it)h(in)o(to)h(the)f(new)g
(function)h Fr(liftMinimum)e Fv(de\014ned)j(b)q(elo)o(w.)0
903 y Fh(-|)k(fun)h(liftMinimum)d(x)j(=)109 953 y(case)f(x)h(of)153
1003 y([])f(=>)g(<10000>)109 1052 y(|)h(\(c::cs\))e(=>)h(<min)g(~c)h
(~\(liftMinimum)d(cs\)>;)0 1102 y(val)i(liftMinimum)f(=)h(fn)43
b(:)22 b(<int>)f(list)g(->)g(<int>)71 1211 y Fv(The)15
b(follo)o(wing)h(example)g(illustrate)g(the)g(use)f(of)g
Fr(shortestPath2)p Fv(.)j(W)l(e)d(obtain)h(v)o(ery)e(compact)h(co)q
(de.)0 1313 y Fh(-|)21 b(\(shortestPath2)e(g)j(4)f(2)h([]\);)0
1363 y(<\(fn)f(weight)g(=>)109 1413 y(\045min)g(\(\045min)g(\(0)g
(\045+)g(weight)g(1)h(2\))f(10000)g(\045+)g(weight)g(4)g(1\))218
1463 y(\(\045min)g(\(0)g(\045+)g(weight)g(4)h(2\))f(\(\045min)g
(\(10000)f(\045+)i(weight)e(4)i(5\))f(10000\)\)\)>)22
1513 y(:)g(<\(int)g(->)h(int)f(->)g(int\))g(->)g(int>)0
1615 y Fv(It)10 b(is)h(p)q(ossible)h(to)d(impro)o(v)o(e)h(the)h(app)q
(earance)f(of)g(this)h(residual)g(program)e(b)o(y)h(restructuring)g
(the)h Fr(shortest)p 1843 1615 15 2 v 16 w(path)0 1665
y Fv(and)j(the)g Fr(liftMinimum)f Fv(function.)20 b(By)14
b(in)o(tro)q(ducing)i(lo)q(cal)f Fr(let)e Fv(bindings)j(w)o(e)e(a)o(v)o
(oid)g(the)g(deeply)h(nested)g(calls)0 1714 y(to)g(the)g
Fr(min)g Fv(function.)0 1804 y Fh(-|)21 b(fun)h(liftMinimum)d(x)j(=)109
1854 y(case)f(x)h(of)153 1904 y([])f(=>)g(<10000>)109
1954 y(|)h(\()f(<10000>)f(::)i(cs\))f(=>)g(liftMinimum)f(cs)109
2003 y(|)i(\(c::cs\))e(=>)h(<let)g(val)g(y)h(=)g(~\(liftMinimum)d(cs\))
501 2053 y(val)i(z)h(=)g(~c)414 2103 y(in)f(min)h(z)f(y)h(end>;)0
2153 y(val)f(liftMinimum)f(=)h(fn)43 b(:)22 b(<int>)f(list)g(->)g
(<int>)0 2252 y(-|)g(fun)h(shortestPath2)d(succ)i(source)f(dest)h
(marked)g(=)65 2302 y(<fn)h(weight)e(=>)109 2352 y(~\(if)h(source)f(=)i
(dest)218 2402 y(then)f(<0>)218 2452 y(else)262 2502
y(let)g(val)g(marked2)f(=)i(source::marked)349 2551 y(val)f(explore)f
(=)i(\(minus)e(\(succ)h(source\))f(marked\))349 2601
y(fun)h(short)g(x)g(=)h(shortestPath2)d(succ)i(x)g(dest)g(marked2)349
2651 y(val)g(path_weights)e(=)479 2701 y(map)j(\(fn)f(node)g(=>)952
2825 y Fv(29)p eop
%%Page: 30 36
30 35 bop 654 286 a Fh(let)21 b(val)g(recall)g(=)g(<)h(~\(short)e
(node\))h(weight>)741 336 y(val)g(wght)g(=)h(<weight)e(~\(lift)h
(source\))f(~\(lift)g(node\)>)654 386 y(in)h(<let)g(val)g(q)h(=)f
(~recall)g(in)g(q)h(+)f(~wght)g(end>)654 436 y(end\))567
486 y(explore)262 535 y(in)327 585 y(\(liftMinimum)e(path_weights\))262
635 y(end)131 685 y(\))65 735 y(>;)0 785 y(val)i(shortestPath2)e(=)j
(fn)22 834 y(:)f(\(int)g(->)h(int)f(list)g(\))g(->)h(int)f(->)g(int)h
(->)f(int)g(list)43 b(->)21 b(<\(int)g(->)g(int)h(->)f(int\))g(->)g
(int>)0 934 y(-|)43 b(\(shortestPath2)19 b(g)j(4)f(2)h([]\);)0
984 y(-|)f(val)h(it)f(=)0 1034 y(<\(fn)g(a)h(=>)109 1083
y(let)f(val)g(b)h(=)f(10000)196 1133 y(val)g(c)h(=)f(10000)196
1183 y(val)g(d)h(=)f(c)h(\045+)f(a)h(4)g(5)196 1233 y(val)f(e)h(=)f
(\045min)g(d)h(b)196 1283 y(val)f(f)h(=)f(0)196 1333
y(val)g(g)h(=)f(f)h(\045+)f(a)h(4)g(2)196 1382 y(val)f(h)h(=)f(\045min)
g(g)h(e)196 1432 y(val)f(i)h(=)f(10000)196 1482 y(val)g(j)h(=)f(0)196
1532 y(val)g(k)h(=)f(j)h(\045+)f(a)h(1)g(2)196 1582 y(val)f(l)h(=)f
(\045min)g(k)h(i)196 1631 y(val)f(m)h(=)f(l)h(\045+)f(a)h(4)g(1)131
1681 y(in)f(\045min)g(m)h(h)f(end\)>)22 1731 y(:)g(<\(int)g(->)h(int)f
(->)g(int\))g(->)g(int>)71 1834 y Fv(F)l(or)c(completeness)i(w)o(e)f
(include)i(the)e(de\014nitions)i(of)e(the)g(auxiliary)h(functions)g
(used)g(b)o(y)f Fr(shortestPath)0 1890 y Fv(and)d Fr(shortestPath2)f
Fv(b)q(elo)o(w.)0 2053 y Fh(\(*)43 b(min)21 b(:)h(int)f(->)g(int)h(->)f
(int)g(*\))0 2103 y(fun)g(min)g(x)h(z)g(=)f(if)g(x)h('<')f(z)h(then)f
(x)g(else)g(z)h(;)0 2203 y(\(*)f(minimum)g(:)g(int)g(list)43
b(->)22 b(int)f(*\))0 2252 y(fun)g(minimum)g(\(x::xs\))f(=)h(\(case)g
(xs)h(of)f([])g(=>)h(x)f(|)h(_)f(=>)h(min)f(x)h(\(minimum)e(xs\)\);)0
2352 y(\(*)h(map)h(:)f(\('b)g(->)h('a\))f(->)g('b)h(list)42
b(->)22 b('a)f(list)g(*\))0 2402 y(fun)g(map)g(f)h(x)g(=)f(case)g(x)h
(of)f([])g(=>)h([])f(|)h(\(a::b\))e(=>)i(\(f)f(a\)::\(map)f(f)i(b\);)0
2502 y(\(*)f(mem)h(:)f(int)g(->)h(int)f(list)43 b(->)21
b(bool)g(*\))0 2551 y(fun)g(mem)g(x)h(xs)f(=)h(case)f(xs)g(of)h([])f
(=>)g(false)g(|)h(\(a::b\))e(=>)i(if)f(a=x)g(then)g(true)g(else)g(mem)g
(x)h(b;)0 2651 y(\(*)f(minus)g(:)h(int)f(list)43 b(->)21
b(int)g(list)43 b(->)21 b(int)h(list)e(*\))0 2701 y(fun)h(minus)g(xs)g
(ys)h(=)952 2825 y Fv(30)p eop
%%Page: 31 37
31 36 bop 22 286 a Fh(case)21 b(xs)g(of)65 336 y([])h(=>)f([])22
386 y(|)g(\(a::b\))g(=>)g(if)h(mem)f(a)g(ys)h(then)f(minus)g(b)g(ys)h
(else)e(a::\(minus)g(b)i(ys\);)0 592 y Fu(7)67 b(Extensions)23
b(to)f(Standard)i(ML)0 696 y Fv(W)l(e)18 b(built)h(MetaML)f(to)f(exp)q
(erimen)o(t)i(with)f(staged)g(programming.)27 b(W)l(e)19
b(found)f(a)g(n)o(um)o(b)q(er)g(of)f(applications)0 752
y(\(esp)q(ecially)c(in)e(the)g(area)e(of)i(compiler)g(generation)g
(from)f(staged)g(in)o(terpreters\))g(required)h(\015exible)i(t)o(yp)q
(e)d(systems)0 808 y(that)i(w)o(ere)h(not)g(a)o(v)m(ailable)i(in)f
(Standard)f(ML.)f(Th)o(us)h(w)o(e)g(implemen)o(ted)i(a)e(n)o(um)o(b)q
(er)g(of)g(extensions)h(to)e(Standard)0 865 y(ML)18 b(in)h(MetaML.)d
(These)i(extensions)h(are)f(sound)g(and)g(w)o(ell)h(though)o(t)e(out)g
(ideas)i(whic)o(h)f(ha)o(v)o(e)g(app)q(eared)g(in)0 921
y(the)e(literature.)23 b(There)16 b(are)f(no)h(new)g(ideas)h(in)g
(these)f(extensions,)g(only)h(practical)f(implemen)o(tations.)24
b(These)0 978 y(extensions)15 b(allo)o(w)f(a)g(broader)f(st)o(yle)i(of)
e(programming,)g(and)i(an)f(implemen)o(tation)h(of)e(them)h(ma)o(y)g(b)
q(e)g(useful)i(to)0 1034 y(programmers)e(in)i(their)g(o)o(wn)e(righ)o
(t,)h(ev)o(en)g(if)h(their)g(problems)g(do)f(not)g(in)o(v)o(olv)o(e)g
(staging.)0 1163 y FA(7.1)56 b(Flexible)16 b(Records)0
1252 y Fv(MetaML)j(uses)h(a)g(more)f(general)h(notion)h(for)e(record)h
(t)o(yp)q(es)f(than)h(Standard)g(ML.)f(A)h(record)g(is)g(a)g(lab)q
(eled)0 1308 y(pro)q(duct.)29 b(A)18 b(record)g(con)o(tains)g(an)o(y)g
(n)o(um)o(b)q(er)h(of)e(\014elds)j(surrounded)f(b)o(y)f(squiggly)h
(brac)o(k)o(ets)e(\()p Fr({)23 b(...)h(})p Fv(\).)k(A)0
1364 y(\014eld)19 b(is)f(comp)q(osed)f(of)g(a)h Fn(lab)n(el)e
Fv(and)i(a)f(v)m(alue)h(separated)f(b)o(y)h(an)f(equal)h(sign)g(\()p
Fr(=)p Fv(\).)26 b(A)18 b(record)f(with)h(t)o(w)o(o)e(\014elds)0
1421 y(called)h Fr(name)e Fv(and)h Fr(age)f Fv(can)h(b)q(e)g(written:)
21 b Fg(f)i Fr(name)g(=)h("Tom",)f(age)h(=)f(29)h Fg(g)p
Fv(.)d(Eac)o(h)15 b(\014eld)i(has)e(an)h(asso)q(ciated)0
1477 y(t)o(yp)q(e)h(and)f(the)h(t)o(yp)q(e)f(of)g(a)g(record)h(is)g
(written)f(as)g(sequence)i(of)e(lab)q(els)i(separated)e(b)o(y)h(a)f
(colon)h(\()p Fr(:)p Fv(\).)22 b(Th)o(us)17 b(the)0 1534
y(record)e(ab)q(o)o(v)o(e)g(has)g(t)o(yp)q(e:)20 b Fg(f)k
Fr(name)f(:)47 b(string,)23 b(age)h(:)47 b(int)24 b Fg(g)p
Fv(.)71 1592 y(Field)17 b(selection)h(is)g(accomplished)g(b)o(y)f
(pattern)f(matc)o(hing)g(or)g(the)h(record)g(selector)g(\()p
Fr(#)p Fv(\))e(notation.)24 b(Th)o(us)0 1648 y Fr(#name)f
Fg(f)h Fr(name)f(=)h("Tom",)f(age)g(=)h(29)g Fg(g)18
b Fv(reduces)h(to)f Fr("Tom")p Fv(.)28 b(A)19 b(record)f(selector)h(is)
f(written)h(b)o(y)f(using)h(a)0 1705 y(hash)d(follo)o(w)o(ed)g(b)o(y)f
(an)h(in)o(teger,)f(or)g(alpha-n)o(umeric)i(tok)o(en.)k(The)16
b(t)o(yp)q(es)f(of)g(selectors)h(are)f(quite)i(generic,)f(and)0
1761 y(apply)g(to)f(an)o(y)g(record)h(with)g(a)f(lab)q(el)i(the)f(same)
f(as)g(the)h(selector.)21 b(F)l(or)15 b(example,)h(w)o(e)f(ma)o(y)g
(observ)o(e])g(the)h(t)o(yp)q(e)0 1817 y(of)f(the)g Fr(#name)g
Fv(selector)g(b)o(y)g(t)o(yping)h(it)f(at)g(the)g(MetaML)f(prompt:)0
1925 y Fh(-|)21 b(#name;)0 1975 y(val)g(it)h(=)f(Fn)43
b(:)22 b(['a\\name,'b].{nam)o(e:)d('b)43 b(|)22 b('a)f(})g(->)h('b)71
2087 y Fv(W)l(e)17 b(read)g(this)h(t)o(yp)q(e)g(as)f(follo)o(ws:)24
b(for)17 b(all)h(records)f(of)g(t)o(yp)q(e)h Fr('a)f
Fv(whic)o(h)h(don't)f(ha)o(v)o(e)g(a)g(lab)q(el)i(called)g
Fr(name)p Fv(,)0 2144 y(and)14 b(all)h(t)o(yp)q(es)f
Fr('b)p Fv(,)g(the)g(expression)h Fr(#name)f Fv(has)g(a)f(function)i(t)
o(yp)q(e)g(from)e(a)h(record)g(with)g(all)h(the)g(\014elds)g(that)e
Fr('a)0 2200 y Fv(has)i(plus)h(one)g(more)e(\014eld)j(with)e(lab)q(el)i
Fr(name)e Fv(of)g(t)o(yp)q(e)g Fr('b)g Fv(to)f(a)h Fr('b)g
Fv(ob)s(ject.)71 2258 y(The)d(notation)g Fr('a\\name)f
Fv(is)i(called)h(a)e(quali\014ed)i(t)o(yp)q(e.)19 b(It)12
b(means)h(all)g(t)o(yp)q(es)f(whic)o(h)h(are)f(records,)h(and)f(whic)o
(h)0 2314 y(additionally)17 b(do)e(not)g(ha)o(v)o(e)g(a)g(\014eld)h
(with)g(lab)q(el)h Fr(name)p Fv(.)71 2365 y(One)f(ma)o(y)e(also)h(use)h
(pattern)e(matc)o(hing)i(to)e(access)i(the)f(\014elds)h(of)f(a)g
(record.)20 b(F)l(or)14 b(example)i(consider:)0 2459
y Fh(-|)21 b(fun)h(g)f({name=x,)f(age)h(=)h(w,)f(...)h(})f(=)h(w+1;)0
2509 y(val)f(g)h(=)f(Fn)44 b(:)21 b(['a\\age\\name,'b].{)o(age:)d
(int,name:)i('b)43 b(|)22 b('a)f(})h(->)f(int)71 2601
y Fv(Record)f(extension)g(is)g(the)g(abilit)o(y)h(to)e(construct)g(a)h
(new)f(record)h(with)g(additional)h(\014elds)g(from)e(an)g(old)0
2651 y(record.)43 b(The)23 b(record)f(extension)i(notation)e(adds)h(a)g
(v)o(ertical)g(bar)f(\()p Fr(|)p Fv(\))g(to)g(the)h(squiggly)h(brac)o
(k)o(et)e(record)0 2701 y(notation.)952 2825 y(31)p eop
%%Page: 32 38
32 37 bop 0 286 a Fh(-|)21 b(fun)h(j)f({name=x,)f(age)h(=)h(w)g(|)f(z)h
(})f(=)h(\(w+1,{name)e(=)43 b("Joe")21 b(|z}\);)0 336
y(val)g(j)h(=)f(Fn)44 b(:)21 b(['a\\age\\name,'b].)305
386 y({age:)g(int,name:)f('b)43 b(|)22 b('a)f(})h(->)305
436 y(\(int)f(*)h({name:)e(string)h(|)g('a)h(}\))0 535
y(-|)f(j)h({name)f(=)g("Tom")g(,)h(age)f(=)g(29,)h(address)e(=)i("1)f
(Main)g(Street"};)0 585 y(val)g(it)h(=)f(\(30,{address)e(=)j("1)f(Main)
g(Street",)g(name)f(=)i("Joe"}\))e(:)196 635 y(\(int)h(*)h({address:)e
(string,name:)f(string)h(|)i('1)f(}\))0 755 y FA(7.2)56
b(Lab)r(elled)16 b(Anon)n(ymous)j(Sums)0 834 y Fv(Lab)q(elled)c(anon)o
(ymous)d(sums)h(are)f(the)h(dual)h(to)e(lab)q(eled)i(pro)q(ducts.)20
b(Here)13 b(the)g(lab)q(el)h(is)f(an)g(injection)h(tag)e(in)o(to)g(a)0
884 y(sum)g(t)o(yp)q(e.)19 b(In)12 b(analogy)g(to)f(records,)i
(injections)g(in)g(MetaML)e(are)h(indicated)h(using)g(the)f(p)q(ercen)o
(t)h(\()p Fr(\045)p Fv(\))e(notation.)0 934 y(A)k(p)q(ercen)o(t)h
(follo)o(w)o(ed)f(b)o(y)h(an)f(in)o(teger,)g(or)f(alpha-n)o(umeric)j
(tok)o(en)e(indicates)i(an)e(injection.)0 1012 y Fh(-|)21
b(\045even;)0 1062 y(val)g(it)h(=)f(Fn)43 b(:)22 b(['a\\even,'b].'b)40
b(->)22 b(Sum{even:)e('b)43 b(|)21 b('a)h(})71 1140 y
Fv(When)15 b(applied)i(to)e(argumen)o(ts,)f(injections)i(pro)q(duce)g
(lab)q(eled)i(sum)d(t)o(yp)q(es.)0 1218 y Fh(-|)21 b(\045even)g(4;)0
1267 y(val)g(it)h(=)f(\045even)g(4)g(:)h(Sum{even:)e(int)h(|)h('1)f(})0
1367 y(-|)g(\045A)h(true;)0 1417 y(val)f(it)h(=)f(\045A)h(true)42
b(:)22 b(Sum{A:)e(bool)h(|)h('1)f(})71 1495 y Fv(The)c(nice)h(prop)q
(ert)o(y)e(of)h(lab)q(eled)i(sum)e(t)o(yp)q(es)g(is)g(that)f(sum)o(t)o
(yp)q(es)h(unify)h(to)e(construct)h(ric)o(her)g(sum)g(t)o(yp)q(es.)0
1545 y(Since)i(b)q(oth)f(branc)o(hes)f(of)g(the)h(if)g(in)g(the)g
(function)g(b)q(elo)o(w)g(return)f(a)g(di\013eren)o(t)h(sum)f(t)o(yp)q
(e,)h(the)g(range)f(of)g(the)0 1594 y(function)f(is)g(the)f(union)h(of)
f(the)g(t)o(w)o(o)f(sum)h(t)o(yp)q(es.)0 1672 y Fh(-|)21
b(fun)h(f)f(x)h(=)f(if)h(even)f(x)g(then)g(\045even)g(x)h(else)f
(\045odd)f(x;)0 1722 y(val)h(f)h(=)f(Fn)44 b(:)21 b
(['a\\even\\odd].int)d(->)k(Sum{even:)e(int,odd:)g(int)h(|)h('a)f(})71
1800 y Fv(Sum)d(t)o(yp)q(es)g(can)g(b)q(e)h(discriminated)h(using)f
(pattern)e(matc)o(hing.)29 b(The)18 b(pattern)g Fr(\()24
b(\045name)f(x)h(\))17 b Fv(matc)o(hes)0 1850 y(only)g(against)e(a)h(v)
m(arian)o(t)g(of)f(a)h(sum)g(t)o(yp)q(e)g(whose)g(actual)g(injection)i
(tag)d(is)h Fr(\045name)p Fv(.)22 b(Observ)o(e)16 b(the)g(in)o
(teraction)0 1900 y(b)q(elo)o(w:)0 1978 y Fh(-|)21 b(fun)h(getA)f
(\(\045a)g(x\))g(=)h(x;)0 2028 y(val)f(getA)g(=)h(Fn)43
b(:)21 b(['a\\a,'b].Sum{a:)e('b)43 b(|)22 b('a)f(})h(->)f('b)0
2127 y(-|)g(getA)g(\(\045a)h(3\);)0 2177 y(val)f(it)h(=)f(3)h(:)f(int)0
2277 y(-|)g(getA\()g(\045B)h(false)e(\);)0 2327 y(Non)h(Exhaustive)f
(Match)0 2376 y(\045B)h(false)0 2461 y Fv(A)j(m)o(ulti-clause)h
(function)f(\()p Fr(\(fn)f(x)h(=>)g(clause1)f(|)g(y)h(=>)g(clause2\))p
Fv(\))e(with)i(injections)h(as)e(patterns,)h(is)0 2517
y(t)o(yp)q(ed)16 b(b)o(y)f(remo)o(ving)g(the)g(lab)q(el)i(of)e(eac)o(h)
g(clause)h(from)e(the)i(sum)f(t)o(yp)q(e)g(of)g(additional)i(clauses.)
71 2567 y(F)l(or)d(example)i(the)f(t)o(yp)q(e)h(of)e
Fr(z)i Fv(in)g(the)f(function)h(b)q(elo)o(w)g(is)f(a)g(sum)g(t)o(yp)q
(e)h(\()p Fr('a\\w)p Fv(\))e(without)h(a)g Fr(w)g Fv(injection.)0
2645 y Fh(-|)21 b(fun)h(W)f(g)h(=)43 b(\(fn)21 b(\045w)h(x)f(=>)h(g)f
(x)h(|)f(z)h(=>)f(z\);)0 2695 y(val)g(W)h(=)f(Fn)44 b(:)21
b(['a\\w,'b].\('b)41 b(->)21 b('a)h(\))f(->)h(Sum{w:)e('b)43
b(|)22 b('a)f(})h(->)f('a)952 2825 y Fv(32)p eop
%%Page: 33 39
33 38 bop 0 286 a FA(7.3)56 b(P)n(olymorphic)17 b(Recursion)0
375 y Fv(In)c(MetaML)e(it)h(is)h(p)q(ossible)g(to)f(t)o(yp)q(e)g
(functions)g(whic)o(h)h(use)f(p)q(olymorphic)i(recursion.)20
b(P)o(olymorphic)12 b(recursion)0 432 y(o)q(ccurs)k(when)f(in)i(a)e
(recursiv)o(e)h(function)g(de\014nition,)h(the)e(function)h(b)q(eing)h
(de\014ned)f(is)g(called)h(at)e(t)o(w)o(o)f(di\013eren)o(t)0
488 y(instances)i(of)f(a)g(p)q(olymorphic)i(t)o(yp)q(e.)j(In)c(general)
g(Hindley-Milner)i(t)o(yp)q(e)e(inference)h(cannot)e(b)q(e)h(used)g(to)
e(infer)0 544 y(the)h(t)o(yp)q(e)h(of)e(a)h(function)h(that)f(uses)g(p)
q(olymorphic)i(recursion.)71 602 y(F)l(or)12 b(example)h(consider)h
(the)e(datat)o(yp)q(e)h(b)q(elo)o(w,)g(and)g(our)f(\014rst)g(attempt)g
(at)g(writing)h(the)g(the)g(map)f(function)0 659 y(for)j(it.)0
767 y Fh(-|)21 b(datatype)g('a)g(T)g(=)h(A1)f(of)h('a)f(|)h(A2)f(of)h
('a)f(T)h(*)f('a)g(T)h(|)g(A3)f(of)g(\('a)h(list\))e(T;)0
817 y(constructor)g(A1)0 867 y(constructor)g(A2)0 917
y(constructor)g(A3)0 1016 y(-|)h(fun)h(mapT)f(f)g(\(A1)g(x\))h(=)f(f)h
(x)109 1066 y(|)g(mapT)f(f)g(\(A2\(x,y\)\))f(=)i(A2\(mapT)e(f)i(x,mapT)
e(f)i(y\))109 1116 y(|)g(mapT)f(f)g(\(A3)g(zs\))g(=)h(A3\(map)f(f)g
(zs\);)0 1166 y(Error:)g(The)g(term:)0 1216 y(map)0 1265
y(in)g(file)g('top)g(level')g(101)g(-)h(104)44 1315 y(Cannot)e(unify)h
(the)g(types:)g(different)f(type)h(constructor)65 1365
y(list)44 1415 y(and)65 1465 y(T)22 1515 y(in)g(expression:)f(map)71
1628 y Fv(By)13 b(giving)h(an)g(explicit)h(t)o(yp)q(e)f(declaration)g
(for)f(the)g(function)h(w)o(e)f(can)h(at)f(least)g(c)o(hec)o(k)h(that)f
(the)g(giv)o(en)h(t)o(yp)q(e)0 1685 y(is)j(w)o(ell)h(formed.)25
b(T)l(o)17 b(giv)o(e)g(a)f(t)o(yp)q(e)h(declaration)h(in)g(MetaML)e(it)
h(is)h(necessary)f(to)f(use)h(the)g Fr(val)24 b(rec)16
b Fv(form)g(of)0 1741 y(recursiv)o(e)f(function)g(de\014nition)i
(\(this)d(is)h(a)f(restriction)h(of)f(the)g(curren)o(t)h(implemen)o
(tation,)g(and)g(will)h(hop)q(efully)0 1798 y(b)q(e)g(remo)o(v)o(ed)f
(in)h(the)f(future\).)0 1906 y Fh(-|)21 b(val)h(rec)f(\('a,'b,'c\))e
(mapT)i(:)h(\('a)f(->)h('b\))f(->)g('a)g(T)h(->)f('b)h(T)f(=)0
1956 y(fn)g(f)h(=>)f(\(fn)h(\(A1)f(x\))g(=>)g(A1\(f)g(x\))218
2006 y(|)h(\(A2\(a,b\)\))d(=>)j(A2\(mapT)e(f)i(a,)f(mapT)g(f)h(b\))218
2055 y(|)g(\(A3)f(w\))g(=>)g(A3\(m)g(\(map)g(f\))h(w\)\);)0
2105 y(val)f(m)h(=)f(Fn)44 b(:)21 b(['a,'b].\('b)41 b(->)22
b('a)f(\))h(->)f('b)43 b(T)22 b(->)f('a)43 b(T)0 2235
y FA(7.4)56 b(Lo)r(cal)17 b(\(non)i(Hindley-Milner\))c(P)n(olymorphism)
0 2324 y Fv(MetaML)h(allo)o(ws)h(a)g(certain)g(lev)o(el)h(of)f(lo)q
(cal)g(p)q(olymorphism.)26 b(Most)16 b(languages)h(with)g(t)o(yp)q(e)g
(inference,)i(allo)o(w)0 2380 y(univ)o(ersal)e(quan)o(ti\014cation)f
(only)g(at)f(the)g(outermost)g(lev)o(el)i(of)e(a)g(t)o(yp)q(e.)21
b(This)16 b(mak)o(es)f(it)h(imp)q(ossible)i(to)d(write)g(a)0
2437 y(higher)c(order)g(function)g(that)f(tak)o(es)f(a)h(p)q
(olymorphic)j(function)e(as)f(an)g(argumen)o(t.)18 b(Suc)o(h)11
b(a)f(function)h(w)o(ould)g(ha)o(v)o(e)0 2493 y(a)i(t)o(yp)q(e)g(lik)o
(e:)19 b Fr(all)24 b('b)g(.)47 b(\(all)23 b('a)h(.)48
b('a)23 b(T)h(->)g('b)f(S\))h(->)f('b)h(->)f(int)13 b
Fv(where)g(some)g(of)f(the)h(univ)o(ersally)0 2550 y(quan)o(ti\014ed)j
(t)o(yp)q(e)f(v)m(ariables)i(\(the)e Fr('a)g Fv(in)h(this)f(example\))h
(are)f(not)g(at)f(the)i(outermost)e(lev)o(el)i(\(lik)o(e)g(the)g
Fr('b)p Fv(\).)71 2601 y(MetaML)e(relaxes)h(this)h(restriction)f(b)o(y)
g(allo)o(wing)h(the)f(argumen)o(ts)f(to)g(data)g(constructor)g
(functions)i(to)e(b)q(e)0 2651 y(lo)q(cally)g(univ)o(ersally)h(quan)o
(ti\014ed.)k(F)l(or)12 b(example)i(w)o(e)e(de\014ne)i(the)e
(constructor)g Fr(A)g Fv(to)g(tak)o(e)g(t)o(w)o(o)f(parameters)h(b)q
(oth)0 2701 y(of)j(whic)o(h)h(are)f(p)q(olymorphic)h(functions.)952
2825 y(33)p eop
%%Page: 34 40
34 39 bop 0 286 a Fh(-|)21 b(datatype)g(Z)g(=)h(A)f(of)h(\(['a].'a)e
(->)h('a\))g(*\(['b].'b)f(->)i(int\);)0 336 y(constructor)e(A)71
417 y Fv(W)l(e)15 b(can)g(apply)h Fr(A)f Fv(only)h(to)f(suitably)h(p)q
(olymorphic)g(argumen)o(ts.)k(F)l(or)14 b(example:)0
498 y Fh(-|)21 b(fun)h(id)f(x)h(=)f(x;)0 548 y(val)g(id)h(=)f(Fn)43
b(:)22 b(['a].'a)42 b(->)21 b('a)0 647 y(-|)g(fun)h(two)f(x)g(=)h(2;)0
697 y(val)f(two)g(=)h(Fn)43 b(:)22 b(['a].'a)42 b(->)21
b(int)0 797 y(-|)g(val)h(q)f(=)h(A\(id,two\);)0 846 y(val)f(q)h(=)f(A)h
(\(Fn)f(,Fn)g(\))h(:)f(Z)71 934 y Fv(Note)16 b(that)f(the)i(t)o(yp)q(e)
f(of)g Fr(q)h Fv(is)g Fr(Z)f Fv(whic)o(h)h(do)q(es)g(not)f(ha)o(v)o(e)g
(an)o(y)g(p)q(olymorphism)i(in)f(its)g(t)o(yp)q(e.)23
b(Th)o(us)17 b(w)o(e)f(can)0 990 y(get)f(around)f(the)h(restriction)h
(that)e(no)h(function)h(can)f(b)q(e)h(passed)f(a)f(p)q(olymorphic)j
(function)f(as)e(an)h(argumen)o(t,)0 1047 y(b)o(y)g(passing)h(it)f(a)g
(Z-lik)o(e)h(ob)s(ject)f(instead)h(whic)o(h)g(suitably)g(encapsulates)g
(p)q(olymorphic)h(functions.)71 1097 y(No)o(w)c(a)h(function)h(that)e
(tak)o(es)h(a)g(ob)s(ject)f Fr(A\(h,k\))g Fv(with)i(t)o(yp)q(e)f
Fr(Z)g Fv(as)g(a)g(parameter)f(can)i(use)f(its)g(p)q(olymorphic)0
1146 y(comp)q(onen)o(ts)h(in)h(a)f(p)q(olymorphic)i(w)o(a)o(y)l(.)0
1227 y Fh(-|)k(fun)h(g)f(\(A\(h,k\)\))f(=)i(\(h)f("a",h)g(4,k)g(2,)h(k)
f(true\);)0 1277 y(val)g(g)h(=)f(fn)44 b(:)21 b(Z)h(->)f(\(string)f(*)i
(int)f(*)h(int)f(*)h(int\))71 1364 y Fv(In)16 b(order)h(for)e(this)i
(to)f(b)q(e)h(safe,)f(some)f(fairly)i(strict)g(restrictions)f(m)o(ust)g
(b)q(e)h(placed)h(on)e(the)g(argumen)o(ts)g(to)0 1421
y(constructors)d(that)g(exp)q(ect)i(p)q(olymorphic)h(comp)q(onen)o(ts.)
j(First,)14 b(the)g(comp)q(onen)o(ts)g(m)o(ust)f(really)i(b)q(e)g(p)q
(olymor-)0 1477 y(phic,)h(in)g(that)f(their)g(t)o(yp)q(es)h(mak)o(e)e
(no)h(men)o(tion)h(of)f(t)o(yp)q(e)g(v)m(ariables)h(b)q(ound)h(in)f(an)
f(outer)g(scop)q(e.)0 1569 y Fh(-|)21 b(fn)h(f)f(=>)h(A\(id,f\);)0
1619 y(Error:)f(The)g(term:)0 1669 y(A\(id,f\))0 1718
y(in)g(file)g('top)g(level')g(10)g(-)h(17)0 1768 y(Argument)e(of)i
(polymorphic)d(constructor)h(has)h(type)g(which)f(binds)h(its)0
1818 y(polymorphic)f(type)g(in)i(outer)f(scope)42 b('a)22
b(->)f(int)71 1910 y Fv(Or)15 b(that)f(they)i(b)q(ound)g(to)e(some)h(t)
o(yp)q(e)h(at)e(all,)i(no)f(longer)g(b)q(eing)i(p)q(olymorphic.)0
1991 y Fh(-|)k(A\(id,id\);)0 2041 y(Error:)g(The)g(term:)0
2090 y(A\(id,id\))0 2140 y(in)g(file)g('top)g(level')g(2)g(-)h(10)0
2190 y(Polymorphic)e(type)g(variable)h(in)g(argument)f(to)i
(polymorphic)d(function)h(gets)0 2240 y(bound)h(to:)g(int)0
2360 y FA(7.5)56 b(Lo)r(cal)17 b(Existen)n(tial)g(Quan)n(ti\014cation)0
2446 y Fv(MetaML)d(also)h(allo)o(ws)f(the)h(argumen)o(ts)f(to)g(data)g
(constructors)g(to)g(b)q(e)h(existen)o(tially)i(quan)o(ti\014ed.)k
(This)15 b(allo)o(ws)0 2503 y(the)22 b(construction)g(of)f(\014rst)g
(class)h(abstract)e(datat)o(yp)q(es.)39 b(Lo)q(cal)22
b(existen)o(tially)i(quan)o(ti\014ed)e(v)m(alues)h(use)f(the)0
2559 y(syn)o(tax)14 b(b)q(elo)o(w:)0 2651 y Fh(-|)21
b(datatype)g('a)g(T)g(=)h(C)g(of)f(\(exists['b].\('b)e(*)i(\('b)g(->)h
('a\)\)\);)0 2701 y(constructor)e(C)952 2825 y Fv(34)p
eop
%%Page: 35 41
35 40 bop 0 286 a Fv(This)17 b(de\014nes)g(a)f(new)h(constructor)e
Fr(C)h Fv(whic)o(h)i(tak)o(es)d(a)h(pair)h(as)f(an)g(argumen)o(t.)22
b(The)17 b(pair)f(consists)h(of)f(a)g(v)m(alue)0 336
y(of)i(t)o(yp)q(e)g Fr('b)g Fv(and)g(a)g(function)h(of)e(t)o(yp)q(e)i
Fr('b)k(->)h('a)p Fv(,)18 b(where)g(the)h(t)o(yp)q(e)f
Fr('b)g Fv(is)g(hidden)i(from)d(the)i(user.)28 b(Let)19
b(us)0 386 y(construct)c(sev)o(eral)h(suc)o(h)g(v)m(alues)h(and)f
(de\014ne)h(a)e(function)i(that)e(uses)h(the)g(comp)q(onen)o(ts)f
(encapsulated)i(b)o(y)f(the)0 436 y Fr(C)f Fv(constructor)f(function:)0
511 y Fh(-|)21 b(val)h(w1)f(=)h(C\(5,fn)e(x)i(=>)f(x)h(+)f(1\);)0
561 y(val)g(w1)h(=)f(C)h(Fn)43 b(:)21 b(int)h(T)0 661
y(-|)f(val)h(w2)f(=)h(C\("z",)e(size\);)0 710 y(val)h(w2)h(=)f(C)h(Fn)
43 b(:)21 b(int)h(T)0 810 y(-|)f(fun)h(f)f(\(C\(x,g\)\))f(=)i(g)f(x;)0
860 y(val)g(f)h(=)f(Fn)44 b(:)21 b(['a].'a)42 b(T)22
b(->)f('a)71 942 y Fv(One)d(nice)g(prop)q(ert)o(y)g(of)f(existen)o
(tially)i(quan)o(ti\014ed)f(constructors)f(is)h(that)e(their)i(t)o(yp)q
(e)g(do)q(es)g(not)f(men)o(tion)0 998 y(the)g(quan)o(ti\014ed)h(v)m
(ariable.)27 b(Th)o(us)17 b(its)g(is)h(p)q(ossible)g(to)f(construct)f
(homogeneous)h(lists)h(of)f Fr('b)23 b(T)17 b Fv(ob)s(jects,)g(ev)o(en)
0 1055 y(though)d(eac)o(h)g(one)h(encapsulates)g(a)f(di\013eren)o(t)g
(t)o(yp)q(e)g Fr('a)p Fv(.)20 b(Note)13 b(that)h(b)q(oth)g
Fr(w1)g Fv(and)g Fr(w2)g Fv(b)q(oth)h(ha)o(v)o(e)e(t)o(yp)q(e)i
Fr(int)23 b(T)0 1111 y Fv(ev)o(en)16 b(though)f Fr(w1)f
Fv(hides)j(the)e(t)o(yp)q(e)g Fr(int)g Fv(and)h Fr(w2)e
Fv(hides)j(the)e(t)o(yp)q(e)g Fr(string)p Fv(.)0 1197
y Fh(-|)21 b(val)h(L)f(=)h([w1,w2];)0 1246 y(val)f(L)h(=)f([C)h(\(5,fn)
e(\),C)i(\("z",fn)e(\)])h(:)h(int)f(T)h(list)0 1346 y(-|)f(map)h(f)f
(L;)0 1396 y(val)g(it)h(=)f([6,1])g(:)g(int)h(list)71
1488 y Fv(When)e(writing)g(a)g(function)h(that)e(pattern)h(matc)o(hes)f
(against)h(a)f(data)h(constructor)f(with)h(existen)o(tially)0
1544 y(quan)o(ti\014ed)c(comp)q(onen)o(ts,)e(care)h(m)o(ust)f(b)q(e)h
(tak)o(en)f(not)h(to)f(use)h(these)g(comp)q(onen)o(ts)f(in)i(a)e
(manner)h(whic)o(h)h(mak)o(es)0 1601 y(an)o(y)f(assumptions)g(ab)q(out)
g(the)h(quan)o(ti\014ed)g(t)o(yp)q(e.)k(T)l(o)15 b(do)g(so)f(causes)i
(a)f(t)o(yp)q(e)g(error:)0 1686 y Fh(-|)21 b(fun)h(f)f(\(C\(x,f\)\))f
(=)i(x;)0 1736 y(Error:)f(Existential)e(argument)h(of)i(Constructor)d
(bound)i(in)g(pattern:)0 1786 y(C\(x,f\))g(is)g(bound)g(in)g
(expression:)f(x)0 1885 y(-|)h(fun)h(f)f(a)h(\(C\(x,f\)\))e(=)h(\(f)h
(x,f)f(a\);)0 1935 y(Error:)g(Existential)e(argument)h(of)i
(Constructor)d(bound)i(in)g(pattern:)0 1985 y(a)h(is)f(bound)g(in)g
(expression:)f(\(f)h(x,f)g(a\))0 2104 y FA(7.6)56 b(Higher)17
b(Order)i(Kinds)0 2190 y Fv(Occasionally)c(one)e(wishes)h(to)e(write)h
(a)g(datat)o(yp)q(e)f(de\014nition)j(whic)o(h)f(is)g(parameterised)f(o)
o(v)o(er)f(a)h(t)o(yp)q(e)g(construc-)0 2247 y(tor,)k(rather)g(than)h
(a)f(t)o(yp)q(e.)28 b(In)18 b(order)g(to)f(do)g(this)i(one)e(m)o(ust)h
(tell)g(MetaML)f(that)g(the)h(parameter)f(is)h(a)g(t)o(yp)q(e)0
2303 y(constructor.)h(This)d(is)g(done)f(using)h Fn(kind)f
Fv(annotations.)71 2360 y(F)l(or)21 b(example)i(the)f(second)h
(parameter)f(to)f(the)h(datat)o(yp)q(e)g Fr(T)g Fv(b)q(elo)o(w)h(is)f
(kinded)i(b)o(y)e(the)h(kind)g Fr(*)h(->)f(*)0 2416 y
Fv(indicating)17 b(that)e(it)g(is)h(a)f(t)o(yp)q(e)g(constructor.)0
2502 y Fh(-|)21 b(datatype)g(\()g('a,)g('b)h(:)f(\()h(*)f(->)h(*)f(\))h
(\))g(T)f(=)h(C)f(of)h('a)f('b;)0 2551 y(constructor)f(C)0
2651 y(-|)h(val)h(q)f(=)h(C[2];)0 2701 y(val)f(q)h(=)f(C)h([2])f(:)h
(\(int,list\))d(T)952 2825 y Fv(35)p eop
%%Page: 36 42
36 41 bop 71 286 a Fv(Note)21 b(ho)o(w)f(the)i(t)o(yp)q(e)f(of)g
Fr(q)g Fv(includes)j(b)q(oth)d(a)g(t)o(yp)q(e)h(\()p
Fr(int)p Fv(\))e(and)i(a)f(t)o(yp)q(e)g(constructor)g(\()p
Fr(list)p Fv(\).)37 b(Other)0 336 y(examples)16 b(include:)0
434 y Fh(-|)21 b(datatype)g('a)g(Tree)g(=)g(Tip)h(of)f('a)g(|)h(Node)f
(of)g(\('a)g(Tree\))g(*)h(\('a)f(Tree\);)0 484 y(constructor)f(Tip)0
534 y(constructor)g(Node)0 633 y(-|)h(val)h(it)f(=)h(C)f(Tip)g("z")g(:)
h(\(string,Tree\))d(T)71 736 y Fv(It)11 b(is)i(p)q(ossible)g(to)e
(de\014ne)i(t)o(yp)q(e)f(constructors)e(parameterized)j(b)o(y)e(sev)o
(eral)h(higher)h(order)e(t)o(yp)q(e)h(constructors)0
792 y(b)o(y)j(de\014nitions)i(of)e(the)g(form:)0 848
y Fr(datatype)23 b(\('F)g(:)h(*)g(->)f(*,)h('G:)f(*)h(->)g(*\))f(T)h(=)
g(...)0 905 y Fv(or)15 b(b)o(y)g(a)g(t)o(yp)q(e)g(constructor)f(that)h
(tak)o(es)f(sev)o(eral)i(argumen)o(ts)e(b)o(y)h(a)g(de\014nition)i(of)e
(the)g(form:)0 961 y Fr(datatype)23 b(\('F)g(:)h(*)g(->)f(*)h(->)g(*)f
(\))h(S)g(=)f(...)p Fv(.)0 1095 y FA(7.7)56 b(P)n(artial)18
b(Application)g(of)h(T)n(yp)r(e)f(Constructors)0 1185
y Fv(The)11 b(p)q(ost\014x)f(application)i(\(e.g.)18
b Fr(\(int,string\))k(T)p Fv(\))10 b(of)g(t)o(yp)q(e)h(constructors)e
(in)j(ML)e(causes)h(a)f(little)i(subtlet)o(y)l(.)19 b(A)0
1241 y(unary)d(t)o(yp)q(e)h(constructor)e(can)h(b)q(e)h(constructed)g
(from)e(a)h(binary)h(t)o(yp)q(e)f(constructor)g(b)o(y)g(partial)h
(application.)0 1298 y(But)j(this)h(requires)g(some)e(sp)q(ecial)j(syn)
o(tax)e(since)h(in)g(ML)f(all)h(argumen)o(ts)e(are)h(\\group)q(ed)g
(together")f(inside)0 1354 y(paren)o(theses.)g(W)l(e)14
b(think)g(of)f(the)h(normal)f(\(paren)o(thesized\))h(notation)f(of)g
(ML)h(as)f(a)g(shorthand)g(for)g(our)g(sp)q(ecial)0 1411
y(syn)o(tax)18 b(whic)o(h)i(allo)o(ws)g(partial)f(application.)34
b(Th)o(us)19 b(the)g(normal)g Fr(\('a,'b,'c\))k(T)c Fv(is)g(a)g
(shorthand)g(for)g(the)0 1467 y(more)c(v)o(erb)q(ose)g(\(but)g(more)g
(\015exible)i(since)f(it)g(allo)o(ws)f(partial)h(application\))g
Fr('a)24 b(\('b)f(\('c)h(T\)\))p Fv(.)71 1526 y(F)l(or)14
b(example)i(b)o(y)f(de\014ning)i(the)e(binary)h(t)o(yp)q(e)f
(constructor)g Fr(state)0 1630 y(datatype)23 b(\('a,'b\))g(state)g(=)h
(St)f(of)h(\('a)f(->)h(\('b)f(*)h('a\)\);)0 1733 y Fv(w)o(e)e(can)g
(construct)g(an)g(instance:)34 b Fr(node\(St\(fn)23 b(x)g(=>)h
(\(4,x\)\)\))p Fv(,)e(whic)o(h)h(has)f(t)o(yp)q(e)g Fr(\(int)i(state\))
f(tree)0 1789 y Fv(where)15 b(the)h(parameter)e(to)h
Fr(tree)f Fv(is)i(a)f(partial)g(application)i(of)e Fr(state)0
1923 y FA(7.8)56 b(Monads)0 2013 y Fv(A)15 b(monad)g(is)h(a)f(w)o(a)o
(y)f(of)h(structuring)g(functional)h(programs)e(that)h(mak)o(es)g(them)
g(easier)g(to)g(mo)q(dify)l(.)71 2071 y(A)22 b(monad)h(is)g(a)f(t)o(yp)
q(e)h(constructor)f Fn(M)p Fv(,)g(and)g(t)o(w)o(o)g(p)q(olymorphic)i
(functions)f Fj(unit)j Fv(:)e Fj(a)h Fg(!)h Fj(M)5 b
Fv(\()p Fj(a)p Fv(\))22 b(and)0 2128 y Fj(bind)14 b Fv(:)h
Fj(M)5 b Fv(\()p Fj(a)p Fv(\))14 b Fg(!)i Fv(\()p Fj(a)f
Fg(!)g Fj(M)5 b Fv(\()p Fj(b)p Fv(\)\))14 b Fg(!)h Fj(M)5
b Fv(\()p Fj(b)p Fv(\).)24 b(The)16 b(w)o(a)o(y)g(to)g(in)o(terpret)h
(an)g(expression)g(with)g(t)o(yp)q(e)g Fj(M)5 b Fv(\()p
Fj(a)p Fv(\))16 b(is)h(as)f(a)0 2184 y(computation)f(that)g(represen)o
(ts)g(a)g(p)q(oten)o(tial)h Fn(action)f Fv(and)g(that)g(also)g(returns)
g(a)g(v)m(alue)h(of)f(t)o(yp)q(e)g Fj(a)p Fv(.)71 2243
y(An)h(action)h(migh)o(t)g(p)q(erform)f(I/O,)h(up)q(date)g(a)f(m)o
(utable)h(v)m(ariable,)h(or)e(raise)h(an)f(exception.)25
b(One)18 b(can)e(im-)0 2299 y(plemen)o(t)e(a)f(monad)g(in)h(a)f(purely)
h(functional)g(setting)g(b)o(y)f(em)o(ulating)g(the)h(actions.)19
b(This)14 b(is)f(done)h(b)o(y)f(explicitly)0 2356 y(threading)19
b(\\stores",)e(\\I/O)i(streams",)f(or)g(\\exception)h(con)o(tin)o
(uations")f(in)i(and)e(out)g(of)g(all)h(computations.)0
2412 y(The)c(t)o(w)o(o)f(p)q(olymorphic)j(functions)f
Fn(unit)f Fv(and)h Fn(bind)e Fv(m)o(ust)h(meet)g(the)g(follo)o(wing)h
(three)g(axioms:)501 2509 y Fo(\(left)e(id)o(\))252 b
Fa(bind)13 b Fo(\()p Fa(unit)h(x)p Fo(\))g(\()p Fa(\025y)q(:e)p
Fo(\))f(=)41 b Fa(e)p Fo([)p Fa(x=y)q Fo(])501 2572 y(\(righ)o(t)13
b(id\))258 b Fa(bind)13 b(e)i Fo(\()p Fa(\025y)q(:unit)f(y)q
Fo(\))f(=)41 b Fa(e)501 2634 y Fo(\(bind)14 b(asso)q(c\))42
b Fa(bind)14 b Fo(\()p Fa(bind)f(e)h Fo(\()p Fa(\025x:f)t
Fo(\)\))h(\()p Fa(\025y)q(:g)q Fo(\))e(=)779 2696 y Fa(bind)h(e)g
Fo(\()p Fa(\025z)r(:bind)g Fo(\()p Fa(f)t Fo([)p Fa(z)r(=x)p
Fo(]\)\()p Fa(\025w)q(:g)q Fo([)p Fa(w)q(=y)q Fo(]\)\))952
2825 y Fv(36)p eop
%%Page: 37 43
37 42 bop 16 286 a Fv(where)16 b Fj(e)p Fv([)p Fj(x=y)r
Fv(])f(is)i(the)f(result)g(of)g(the)g(substitution)h(of)f(the)g(free)g
(o)q(ccurrences)h(of)e(the)i(v)m(ariable)g Fj(x)f Fv(in)h
Fj(e)f Fv(b)o(y)g(the)0 343 y(v)m(ariable)h Fj(y)r Fv(.)71
400 y(The)f(monadic)g(op)q(erators,)f Fj(unit)h Fv(and)g
Fj(bind)p Fv(,)e(are)i(called)h(the)f(standard)f(morphisms)h(of)g(the)f
(monad.)22 b(The)0 457 y Fn(unit)17 b Fv(op)q(erator)f(tak)o(es)g(a)g
(pure)i(v)m(alue)g(and)f(turns)f(it)h(in)o(to)g(an)g(empt)o(y)f
(action.)25 b(The)17 b Fn(bind)g Fv(op)q(erator)f(sequences)0
513 y(t)o(w)o(o)h(actions.)28 b(A)18 b(useful)h(monad)f(will)h(also)f
(ha)o(v)o(e)g(non-standard)g(morphisms)g(that)f(describ)q(e)j(the)e
(primitiv)o(e)0 569 y(actions)i(of)f(the)g(monad)h(\(lik)o(e)g
Fn(r)n(e)n(ad)g Fv(the)f(v)m(alue)i(from)e(a)g(v)m(ariable)i(and)f
Fn(write)g Fv(a)f(v)m(ariable)i(in)f(the)g(monad)f(of)0
626 y(m)o(utable)d(state\).)71 683 y(F)l(or)e(more)h(bac)o(kground)g
(on)g(the)g(use)h(of)f(monads)g(see)g([W)l(ad90)o(,)g(W)l(ad95)o(,)g(W)
l(ad92)o(].)0 808 y Ft(7.8.1)52 b(Monads)17 b(in)h Fs(Met)m(aML)0
888 y Fv(In)h Fs(Met)m(aML)g Fv(a)f(monad)h(is)g(a)f(data)g(structure)g
(encapsulating)i(a)f(t)o(yp)q(e)f(constructor)g Fn(M)h
Fv(and)f(the)h Fn(unit)g Fv(and)0 938 y Fn(bind)c Fv(functions.)0
1029 y Fh(datatype)20 b(\('M)h(:)h(*)f(->)h(*)f(\))h(Monad)f(=)g(Mon)h
(of)65 1079 y(\(*)g(unit)f(function)f(*\))65 1129 y(\(['a].)h('a)g(->)h
('a)f('M\))g(*)65 1179 y(\(*)h(bind)f(function)f(*\))65
1228 y(\(['a,'b].)g('a)i('M)f(->)g(\('a)h(->)f('b)g('M\))h(->)f('b)g
(M\);)71 1325 y Fv(This)16 b(de\014nition)h(uses)e Fs(SML)p
Fv('s)g(p)q(ost\014x)h(notation)f(for)f(t)o(yp)q(e)i(application,)h
(and)e(t)o(w)o(o)f(non-standard)i(exten-)0 1382 y(sions)e(to)f(ML.)g
(First,)h(it)f(declares)i(that)e(the)h(argumen)o(t)e
Fr(\('M)24 b(:)g(*)f(->)h(*)g(\))13 b Fv(of)g(the)h(t)o(yp)q(e)g
(constructor)f Fr(Monad)f Fv(is)0 1438 y(itself)k(a)e(unary)h(t)o(yp)q
(e)g(constructor)f([Jon93)o(].)20 b(W)l(e)15 b(sa)o(y)f(that)g
Fr('M)h Fv(has)f Fn(kind)p Fv(:)20 b Fr(*)j(->)h(*)p
Fv(.)19 b(Second,)d(it)f(declares)h(that)0 1495 y(the)h(argumen)o(ts)e
(to)h(the)h(constructor)e Fr(Mon)i Fv(m)o(ust)e(b)q(e)j(p)q(olymorphic)
g(functions)f([OL96].)23 b(The)17 b(t)o(yp)q(e)g(v)m(ariables)0
1551 y(in)g(brac)o(k)o(ets,)f(e.g.)22 b Fr(['a,'b])p
Fv(,)16 b(are)g(univ)o(ersally)i(quan)o(ti\014ed)f(.)23
b(Because)17 b(of)f(the)g(explicit)j(t)o(yp)q(e)d(annotations)g(in)0
1608 y(the)d Fr(datatype)g Fv(de\014nitions)i(the)e(e\013ect)g(of)g
(these)h(extensions)g(on)f(the)g(Hindley-Mil)q(ner)j(t)o(yp)q(e)d
(inference)i(system)0 1664 y(is)h(w)o(ell)g(kno)o(wn)f(and)g(p)q(oses)h
(no)f(problems)h(for)e(the)h Fs(Met)m(aML)h Fv(t)o(yp)q(e)f(inference)i
(engine.)71 1721 y(In)h Fs(Met)m(aML)p Fv(,)f Fr(Monad)f
Fv(is)i(a)f(\014rst-class,)h(although)g Fn(pr)n(e-de\014ne)n(d)e
Fv(or)h Fn(built-in)g Fv(t)o(yp)q(e.)27 b(In)18 b(particular,)g(there)0
1778 y(are)f(t)o(w)o(o)f(syn)o(tactic)h(forms)g(whic)o(h)h(are)f(a)o(w)
o(are)f(of)h(the)h Fr(Monad)e Fv(datat)o(yp)q(e:)24 b
Fr(Do)17 b Fv(and)h Fr(Return)p Fv(.)25 b Fr(Do)17 b
Fv(and)h Fr(Return)0 1834 y Fv(are)d Fs(Met)m(aML)p Fv('s)h(syn)o
(tactic)f(in)o(terface)i(to)e(the)g Fn(unit)h Fv(and)g
Fn(bind)g Fv(of)f(a)g(monad.)22 b(W)l(e)15 b(ha)o(v)o(e)h(mo)q(deled)h
(them)f(after)0 1891 y(the)g(do-notation)h(of)e(Hask)o(ell)j([HPW92)n
(,)e(PH)801 1874 y Fm(+)831 1891 y Fv(96)o(].)23 b(An)17
b(imp)q(ortan)o(t)f(di\013erence)h(is)g(that)f Fs(Met)m(aML)p
Fv('s)g Fr(Do)g Fv(and)0 1947 y Fr(Return)g Fv(are)h(b)q(oth)g
(parameterized)g(b)o(y)g(an)g(expression)g(of)g(t)o(yp)q(e)g
Fr('M)23 b(Monad)p Fv(.)i Fr(Do)16 b Fv(and)h Fr(Return)f
Fv(are)h(syn)o(tactic)0 2004 y(sugar)e(for)f(the)h(follo)o(wing:)0
2108 y Fh(\(*)21 b(Syntactic)f(Sugar)304 b(Derived)21
b(Form)g(*\))0 2207 y(Do)g(\(Mon\(unit,bind\)\))e({)i(x)h(<-)f(e;)h(f)f
(})66 b(=)87 b(bind)20 b(e)i(\(fn)f(x)h(=>)f(f\))0 2307
y(Return)g(\(Mon\(unit,bind\))o(\))e(e)240 b(=)87 b(unit)20
b(e)71 2410 y Fv(In)c(addition)h(the)f(syn)o(tactic)f(sugar)h(of)f(the)
h Fr(Do)f Fv(allo)o(ws)h(a)g(sequence)h(of)e Fr(x)1336
2417 y Fd(i)1374 2410 y Fr(<-)23 b(e)1469 2417 y Fd(i)1499
2410 y Fv(forms,)15 b(and)h(de\014nes)h(this)0 2460 y(as)e(a)g(nested)g
(sequence)i(of)e Fr(Do)p Fv('s.)k(F)l(or)14 b(example:)0
2551 y Fh(Do)21 b(m)h({)g(x1)f(<-)g(e1;)g(x2)h(<-)f(e2)h(;)f(x3)h(<-)f
(e3)g(;)h(e4)f(})65 b(=)65 2601 y(Do)22 b(m)f({)h(x1)f(<-)h(e1;)218
2651 y(Do)f(m)h({)f(x2)h(<-)f(e2)h(;)370 2701 y(Do)g(m)f({)h(x3)f(<-)h
(e3)f(;)h(e4)f(}}})952 2825 y Fv(37)p eop
%%Page: 38 44
38 43 bop 71 286 a Fv(Users)18 b(ma)o(y)g(freely)h(construct)g(their)g
(o)o(wn)f(monads,)h(though)f(they)h(should)h(b)q(e)f(v)o(ery)f(careful)
i(that)d(their)0 336 y(instan)o(tiation)12 b(meets)f(the)g(monad)h
(axioms.)18 b(The)12 b(monad)f(axioms,)g(expressed)h(in)g
Fs(Met)m(aML)p Fv('s)f Fr(Do)g Fv(and)h Fr(Return)0 386
y Fv(notation)j(are:)0 485 y Fh(Do)21 b({)h(x)g(<-)f(Return)f(e)i(;)g
(z)f(})218 b(=)22 b(z[e/x])0 535 y(Do)f({)h(x)g(<-)f(m)h(;)f(Return)g
(x)g(})218 b(=)22 b(m)0 584 y(Do)f({)h(x)g(<-)f(Do)g({)h(y)f(<-)h(a)f
(;)h(b)g(})f(;)h(c)f(})h(=)65 634 y(Do)g({)f(y')h(<-)f(a)h(;)f(Do)h({)f
(x)h(<-)f(b[y'/y])g(;)g(c)h(})f(})h(=)65 684 y(Do)g({)f(y')h(<-)f(a)h
(;)f(x)h(<-)f(b[y'/y])g(;)g(c)h(})71 787 y Fv(Some)15
b(sample)h(monad)f(de\014nitions)h(follo)o(w:)0 900 y
Fh(-|)21 b(type)g('x)h(Id)f(=)h('x;)0 950 y(type)f(Id)0
1050 y(-|)g(val)h(Id)f(=)h(\(Mon)e(\(fn)i(x)f(=>)h(x,)f(fn)g(x)h(=>)f
(fn)h(f)f(=>)h(f)f(x\)\))g(:)h(Id)f(Monad;)0 1100 y(val)g(Id)h(=)f(Mon)
g(\(Fn)g(,Fn)h(\))f(:)h(\(FN)f(a)h(=>)f(a)h(\))43 b(Monad)0
1199 y(-|)21 b(datatype)g('a)g(intSt)g(=)g(C)h(of)f(\(int)g(->)h(\('a)f
(*)g(int\)\);)0 1249 y(constructor)f(C)0 1349 y(-|)h(val)h(intSt)e(=)0
1399 y(let)h(fun)g(unit)g(x)h(=)f(C\(fn)g(n)h(=>)f(\(x,n\)\))87
1448 y(fun)g(bind)g(\(C)h(x\))f(f)h(=)f(C)h(\(fn)f(n)h(=>)f(let)g(val)g
(\(a,n1\))g(=)g(x)h(n)828 1498 y(val)f(\(C)h(g\))f(=)h(f)f(a)741
1548 y(in)g(g)h(n1)f(end\))0 1598 y(in)g(\(Mon\(unit,bind\)\))e(end;)0
1648 y(val)i(intSt)g(=)h(Mon)f(\(Fn)g(,Fn)g(\))h(:)f(intSt)g(Monad)0
1747 y(-|)g(datatype)g('a)g(option)f(=)i(SOME)f(of)g('a)h(|)f(NONE;)0
1797 y(constructor)f(SOME)0 1847 y(constructor)g(NONE)0
1947 y(-|)h(val)h(except)e(=)0 1996 y(let)h(fun)g(bind)g(\(SOME)g(x\))g
(f)h(=)g(f)f(x)h(|)f(bind)g(NONE)g(f)h(=)f(NONE)0 2046
y(in)g(\(Mon\(SOME,bind\)\))e(:)i(option)g(Monad)g(end;)0
2096 y(val)g(except)g(=)g(Mon)g(\(Fn)h(,Fn)f(\))g(:)h(option)f(Monad)71
2214 y Fv(Some)15 b(sample)h(programs)e(using)h(the)h
Fr(Do)f Fv(notation)f(in)i(the)g(exception)g(monad)f(are:)0
2327 y Fh(val)21 b(q)h(=)f(Do)h(except)e({a)i(<-)f(Return)g(except)f
(45)i(;)f(Return)g(except)f(\(a)i(+)f(2\))h(};)0 2377
y(val)f(q)h(=)f(SOME)g(47)h(:)f(int)g(option)0 2477 y(-|)g(val)h(q)f(=)
h(Do)f(except)g({a)g(<-)g(NONE)g(;)h(Return)f(except)f(\(a)h(+)h(2\))f
(};)0 2527 y(val)g(q)h(=)f(NONE)43 b(:)22 b(int)f(option)71
2644 y Fv(In)16 b(the)g(in)o(teger)f(state)g(monad)h(the)f(result)i(of)
e(a)g(monad)h(computation)f(is)h(harder)g(to)f(observ)o(e)g(since)i
(some)0 2701 y(thing)f(of)e(t)o(yp)q(e)i Fr('a)23 b(intSt)15
b Fv(is)g(a)g(function)h(encapsulated)h(b)o(y)e(the)g
Fr(C)g Fv(data)g(constructor.)952 2825 y(38)p eop
%%Page: 39 45
39 44 bop 22 286 a Fh(-|)21 b(val)g(q)h(=)g(Do)f(intSt)g({a)g(<-)g
(Return)g(intSt)g(45)g(;)h(Return)e(intSt)h(\(a)g(+)h(2\))f(};)0
336 y(val)g(q)h(=)f(C)h(fn)43 b(:)22 b(int)f(intSt)0
436 y(-|)g(val)h(C)f(f)h(=)f(q;)0 486 y(val)g(f)h(=)f(fn)44
b(:)21 b(int)g(->)h(\(int)f(*)g(int\))0 585 y(-|)g(f)h(6;)0
635 y(val)f(it)h(=)f(\(47,6\))g(:)g(\(int)g(*)h(int\))0
778 y Fu(8)67 b(Exp)r(erimen)n(tal)25 b(F)-6 b(eatures)22
b(of)g(MetaML)0 880 y Fv(In)c(this)g(section)g(w)o(e)g(discuss)g(sev)o
(eral)g(exp)q(erimen)o(tal)h(features)f(of)f(MetaML.)f(W)l(e)i(include)
i(here)e(features)f(w)o(e)0 936 y(feel)f(are)e(\\not)h(quite)g(ready)g
(for)g(prime)g(time".)20 b(Suc)o(h)c(features)e(ma)o(y)h(ha)o(v)o(e)f
(incomplete)j(implemen)o(tations,)e(or)0 993 y(unsound)k(seman)o(tics)f
(in)h(the)f(presence)h(of)f(other)f(features,)h(or)g(other)f(problems.)
29 b(W)l(e)18 b(ha)o(v)o(e)g(found)g(most)f(of)0 1049
y(them)h(useful)h(for)e(something,)i(and)f(include)i(them)e(so)g(that)f
(others)g(ma)o(y)h(b)q(ene\014t)h(or)e(exp)q(erimen)o(t)i(with)f(our)0
1105 y(\\half-bak)o(ed")d(ideas.)0 1227 y FA(8.1)56 b(Delineated)16
b(Con)n(trol)j(Op)r(erators)0 1313 y Fv(Olivier)i(Dan)o(vy)e(and)g
(Andreas)g(Filinski)j(describ)q(e)e(an)f(mec)o(hanism)h(for)37
b(abstracting)19 b(con)o(trol)g(information)0 1369 y(using)j(a)g(set)f
(of)g(op)q(erators)g(called)j Fr(shift)c Fv(and)i Fr(reset)f
Fv([DF90)o(].)39 b(In)22 b(a)f(follo)o(w-on)h(pap)q(er)g([Fil94])g
(Filinski)0 1426 y(sho)o(ws)15 b(ho)o(w)h(these)g(op)q(erators)f(can)g
(b)q(e)i(implemen)o(ted)h(in)e(Standard)g(ML)g(of)f(New)h(Jersey,)g
(using)h(the)f(mo)q(dule)0 1482 y(system)g(\(to)f(encapsulate)j(p)q
(olymorphism\),)f(and)g(the)f(non-standard)h Fr(callcc)e
Fv(function)i(of)f(the)h(New)g(Jersey)0 1539 y(implemen)o(tation.)71
1595 y(In)k(MetaML)g(w)o(e)g(can)g(express)g(these)g(op)q(erators)g
(using)g(lo)q(cal)i(p)q(olymorphism)f(and)f(a)g(set)g(of)g(built)h(in)0
1652 y(primitiv)o(es.)f(A)15 b Fr(Control)g Fv(ob)s(ject)f(is)i(a)f
(pair)g(of)g(p)q(olymorphic)i(functions)f Fr(shift)e
Fv(and)i Fr(reset)p Fv(.)0 1750 y Fh(datatype)k('ans)h(Control)f(=)44
1800 y(Control)g(of)h(\(['a].)g(\(\('a)g(->)g('ans\))g(->)g('ans\))g
(->)g('a\))h(*)283 1850 y(\(\(unit)f(->)g('ans\))g(->)g('ans\);)0
1900 y(constructor)f(Control)71 2005 y Fv(W)l(e)13 b(encapsulate)i
(these)e(using)h(MetaML's)f(using)h(a)f(p)q(olymorphic)i(data)e
(constructor.)18 b(Then)c(construct)f(a)0 2062 y(function)i(whic)o(h)h
(returns)e(a)g(p)q(olymorphic)j(instance)e(of)f(one)h(of)f(these)h(con)
o(trol)f(encapsulations)i(from)e(the)g(t)o(w)o(o)0 2118
y(MetaML)h(primitiv)o(es)h Fr(shift)p 523 2118 15 2 v
16 w(prim)f Fv(and)g Fr(reset)p 858 2118 V 17 w(prim)p
Fv(.)0 2217 y Fh(-|)21 b(fun)h(SandR)e(\(\))i(=)f(Control\(shift_prim,)
o(reset)o(_pri)o(m\);)0 2267 y(val)g(SandR)g(=)h(Fn)43
b(:)21 b(['a].unit)f(->)i('a)43 b(Control)71 2365 y Fv(Sev)o(eral)15
b(examples)h(of)f(its)g(use)h(follo)o(w:)0 2452 y Fh(-|)21
b(let)h(val)f(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))0
2502 y(in)g(1)h(+)g(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f(shift)g(\(fn)g
(k)h(=>)f(3)h(*)f(\(\(k)h(4\))f(+)h(\(k)f(5\)\)\)\))g(end;)0
2601 y(val)g(it)h(=)f(55)h(:)f(int)0 2701 y(-|)g(let)h(val)f
(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))952 2825
y Fv(39)p eop
%%Page: 40 46
40 45 bop 0 286 a Fh(in)21 b(1)h(+)g(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f
(shift)g(\(fn)g(k)h(=>)f(3)h(*)f(\(k)h(4\)\)\))f(end;)0
336 y(val)g(it)h(=)f(25)h(:)f(int)0 436 y(-|)g(let)h(val)f
(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))0 486 y(in)g(1)h(+)g
(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f(shift)g(\(fn)g(k)h(=>)f(k)h(10\)\))
f(end;)0 535 y(val)g(it)h(=)f(21)h(:)f(int)0 635 y(-|)g(let)h(val)f
(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))0 685 y(in)g(1)h(+)g
(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f(shift)g(\(fn)g(k)h(=>)f(10\)\))g
(end;)0 735 y(val)g(it)h(=)f(11)h(:)f(int)0 834 y(-|)g(let)h(val)f
(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))0 884 y(in)g(1)h(+)g
(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f(1\))h(end;)0 934
y(val)f(it)h(=)f(3)h(:)f(int)0 1034 y(-|)g(let)h(val)f
(Control\(shift,re)o(set\))d(=)k(SandR)f(\(\))0 1083
y(in)g(1)h(+)g(reset)e(\(fn)h(\(\))h(=>)f(2)h(*)f(\(shift)g(\(fn)g(k)h
(=>)f(10\)\))g(-)h(\(shift)e(\(fn)h(k1)h(=>)f(k1)h(3\)\)\))e(end;)0
1133 y(val)h(it)h(=)f(11)h(:)f(int)71 1227 y Ft(W)l(arning.)i(The)17
b(shift)h(and)g(reset)f(op)q(erators)h(do)f(not)h(w)o(ork)e(inside)i
(co)q(de)h(construction.)0 1349 y FA(8.2)56 b(Dynamic)16
b(t)n(yp)r(e-c)n(hec)n(king)0 1434 y Ft(W)l(arning)h(this)g(section)g
(describ)q(es)g(an)g(exp)q(erimen)o(tal)f(extension)h(to)g
Fs(Met)m(aML)25 b Ft(whic)o(h)17 b(ma)o(y)e(not)0 1491
y(run)i(as)g(adv)o(ertised,)g(or)g(ma)o(y)g(not)h(run)f(at)h(all)h(in)f
(the)f(curren)o(t)g(implemen)o(tation.)71 1560 y Fv(T)o(yp)q(e-c)o(hec)
o(king)d(prev)o(en)o(ts)f(the)h(programmer)e(from)g(writing)i(some)f
(incorrect)h(programs.)k(It)13 b(thro)o(ws)g(a)o(w)o(a)o(y)0
1616 y(those)j(programs)f(whic)o(h)h(apply)h(functions)g(to)f(v)m
(alues)h(for)e(whic)o(h)i(they)f(are)g(not)f(de\014ned.)24
b(Mec)o(hanisms)17 b(suc)o(h)0 1673 y(as)h(p)q(olymorphism)i(allo)o(w)f
(the)g(system)f(to)g(c)o(hec)o(k)i(and)e(accept)h(more)g(programs.)29
b(Ho)o(w)o(ev)o(er,)18 b(when)i(dealing)0 1729 y(with)15
b(m)o(ultistage)f(programs,)f(this)h(t)o(yp)q(e)h(discipline)i(ma)o(y)d
(b)q(ecome)h(to)q(o)e(restrictiv)o(e.)20 b(W)l(e)15 b(illustrate)g
(this)f(p)q(oin)o(t)0 1785 y(b)o(y)h(the)g(function)h
Fr(sumN)f Fv(b)q(elo)o(w.)0 1885 y Fh(fun)21 b(sumN)g(n)h(body)f(=)87
1935 y(if)h(n=0)153 1984 y(then)f(body)153 2034 y(else)g(<)g(fn)g(x)h
(=>)f(~\(sumN)g(\(n-1\))g(<)g(x)h(+)g(~body)e(>\))i(>;)71
2140 y Fv(This)15 b(function)h(is)g(in)o(tend)g(to)f(input)h(an)f(in)o
(teger)h Fr(n)f Fv(and)g(compute)g(the)h(co)q(de:)0 2240
y Fh(<fn)21 b(x1)h(=>)f(fn)g(x2)h(=>)f(...)g(=>)h(fn)f(xn)g(=>)h(x1)f
(+)h(x2)f(+)h(...)f(+)g(xn>)71 2346 y Fv(Unfortunately)l(,)13
b(the)h(t)o(yp)q(e-c)o(hec)o(k)o(er)f(cannot)g(accept)h
Fr(SumN)p Fv(.)e(This)i(is)g(b)q(ecause)g(its)g(t)o(yp)q(e)f(cannot)g
(b)q(e)h(inferred)0 2402 y(at)h(compile-time,)h(it)g(dep)q(ends)h(on)e
(the)g(dynamic)h(v)m(alue)h(of)d Fr(n)p Fv(:)0 2502 y
Fh(-|)21 b(fun)h(sumN)f(n)g(body)g(=)153 2551 y(if)g(n=0)218
2601 y(then)g(body)218 2651 y(else)g(<)g(fn)h(x)f(=>)h(~\(sumN)e
(\(n-1\))h(<)h(x)f(+)h(~body)f(>\))g(>;)0 2701 y(Type)g(Error:)952
2825 y Fv(40)p eop
%%Page: 41 47
41 46 bop 44 286 a Fh(Cannot)20 b(unify)h(the)g(types:)g(occurs)f
(check)65 336 y(?)44 386 y(and)65 436 y(?)i(->)f(?)22
486 y(in)g(expression:)f(sumN)71 585 y Fv(This)15 b(b)q(ecomes)h
(crucial)h(when)f(dealing)g(with)g Fn(r)n(e\015e)n(ction)p
Fv(.)j(In)c(order)g(to)g(allo)o(w)g(self-applicable)k(in)o(terpreta-)0
642 y(tion)d(in)g Fs(Met)m(aML)g Fv(this)g(p)q(oin)o(t)g(m)o(ust)e(b)q
(e)j(addressed,)e(since)i(the)f(result)g(t)o(yp)q(e)f(of)g(an)h(in)o
(terpretation)f(dep)q(ends)0 698 y(on)g(the)g(input)i(program,)c(just)i
(as)g(the)g(result)h(of)f Fr(sumN)f Fv(dep)q(ends)j(on)e
Fr(n)p Fv(.)71 766 y(In)21 b(addition)g(to)f(the)h(normal)g(t)o(yp)q(e)
f(c)o(hec)o(king)i(for)e(co)q(de)h(describ)q(ed)i(earlier)e
Fs(Met)m(aML)g Fv(o\013ers)e(another)0 823 y(mec)o(hanism)g(denoted)g
Fn(dynamic)h(typ)n(e-che)n(cking)d Fv([SSJ98].)30 b(The)18
b(user)h(ma)o(y)f Fn(explicitly)g Fv(sp)q(ecify)i(that)d(a)i(piece)0
879 y(of)e(co)q(de)h(is)f(not)g(to)g(b)q(e)h Fn(ful)r(ly)f
Fv(t)o(yp)q(e-c)o(hec)o(k)o(ed)h(statically)l(.)27 b(This)17
b(is)h(done)g(b)o(y)f(enclosing)i(the)e(frozen)g(expression)0
935 y(b)o(y)i Fn(dynamic)h(br)n(ackets)f Fr(<|)k(|>)c
Fv(instead)h(of)e(usual)i(meta-brac)o(k)o(ets)e Fr(<)24
b(>)p Fv(.)31 b(When)20 b Fs(Met)m(aML)p Fv('s)f(t)o(yp)q(e-c)o(hec)o
(k)o(er)0 992 y(encoun)o(ters)e(suc)o(h)h(an)f(expression,)h(it)f(giv)o
(es)g(it)g(the)g(t)o(yp)q(e)h Fr(Dyn)p Fv(,)e(and)h(it)h(pre-pro)q
(cesses)g(it)f(so)g(the)g(actual)g(t)o(yp)q(e)0 1048
y(can)e(b)q(e)h(quic)o(kly)h(computed)e(at)g(run-time.)0
1141 y Fh(-|)21 b(<|)h(fn)f(x)h(=>)f(x)h(|>;)0 1191 y(val)f(it)h(=)f
(<|)h(fn)f(a)g(=>)h(a)f(:)h('b)f(->)h('b)f(with)g(\(\))h(|>)f(:)g(Dyn)
71 1291 y Fv(In)15 b(the)g(example)h(ab)q(o)o(v)o(e,)e(the)h(resulting)
h(t)o(yp)q(e)f(is)g Fr(Dyn)p Fv(.)20 b(Note)14 b(that)h(dynamic)g(co)q
(de)h(carries)f(it's)g(o)o(wn)f(t)o(yp)q(e.)0 1347 y(This)k(is)g
(indicated)i(b)o(y)d(the)h Fr(:)47 b('b)24 b(->)g('b)17
b Fv(inside)i(the)f(dynamic)g(co)q(de)h(brac)o(k)o(ets.)26
b(If)18 b(this)g(dynamic)g(co)q(de)g(is)0 1404 y(ev)o(er)e(used,)g
(either)h(in)f Fr(run)p Fv(,)f(or)h(spliced)i(using)e
Fr(esc)g Fv(in)o(to)g(a)f(larger)h(piece)h(of)e(co)q(de,)i(that)e(a)g
(dynamic)i(run-time)0 1460 y(c)o(hec)o(k)e(will)i(b)q(e)f(p)q
(erformed,)f(using)h(this)g(t)o(yp)q(e)f(annotation.)71
1528 y(Using)g(dynamic)h(brac)o(k)o(ets)f(w)o(e)g(can)g(write)g(a)g
Fr(sumN)g Fv(function)h(whic)o(h)g Fs(Met)m(aML)f Fv(accepts:)0
1621 y Fh(-|)21 b(fun)h(sumN)f(n)g(body)g(=)h(if)f(n=0)g(then)g(body)
610 1671 y(else)g(<|)h(fn)f(x)h(=>)f(`\(sumN)f(\(n-1\))h(\(<|)g(\(x)h
(+)f(`body\))g(|>\)\))g(|>;)0 1721 y(val)g(sumN)g(=)h(fn)f(:)h(int)f
(->)g(Dyn)g(->)h(Dyn)71 1821 y Fv(Bac)o(k)13 b(quote)h(\()p
Fr(`)p Fv(\))f(denotes)i(dynamic)g(escap)q(e.)20 b(It)14
b(has)g(to)f(b)q(e)i(use)f(instead)h(of)e(escap)q(e)i(\()l(~)l(\))f
(inside)h(a)f(dynamic)0 1877 y(brac)o(k)o(eted)j(expression.)28
b(Finally)l(,)19 b Fs(Met)m(aML)e Fv(also)h(o\013ers)e(a)h
Fn(dynamic)i(run)e Fv(op)q(erator)g(denoted)h Fr(drun)p
Fv(.)26 b Fr(drun)0 1933 y Fv(tak)o(es)18 b(to)g(argumen)o(ts:)26
b(a)18 b(dynamic)i(piece)g(of)e(co)q(de)i(to)e(b)q(e)h(ev)m(aluated)h
(and)f(an)f Fn(exc)n(eption)h(expr)n(ession)p Fv(.)30
b(The)0 1990 y(exception)13 b(expression)g(if)f(the)g(dynamic)h(co)q
(de)f(is)g(not)g(of)f(the)h(appropriate)g(t)o(yp)q(e.)19
b(Using)12 b Fr(drun)p Fv(,)g(w)o(e)f(can)h(execute)0
2046 y(the)j(function)h Fr(sumN)p Fv(:)0 2139 y Fh(-|)21
b(\(sumN)g(2)h(\(<|0|>\)\);)0 2189 y(val)f(it)h(=)f(<|)h(fn)f(a)g(=>)h
(fn)f(b)h(=>)f(b)h(\045+)f(a)h(\045+)f(0)h(:)f(int)g(->)h(int)f(->)g
(int)h(with)f(\(\))g(|>)g(:)h(Dyn)0 2289 y(-|)f(drun)g(\(it,)g(fn)h(x)f
(=>)h(fn)f(y)h(=>)f(~1\);)0 2339 y(val)g(it)h(=)f(fn)h(:)f(int)g(->)h
(int)f(->)g(int)0 2438 y(-|)g(it)h(4)f(5;)0 2488 y(val)g(it)h(=)f(9)h
(:)f(int)71 2588 y Fv(In)10 b(the)h(example)g(ab)q(o)o(v)o(e,)f(the)h
(function)g(\()p Fr(fn)23 b(x)h(=>)g(fn)f(y)h(=>)g Fv(~)p
Fr(1)p Fv(\))10 b(will)i(b)q(e)f(used)g(if)g(dynamic)g(t)o(yp)q(e-c)o
(hec)o(king)0 2644 y(fails.)20 b(By)13 b(making)h(the)f(exception)i
(function)f(return)f(the)g(particular)h(v)m(alue)h(~)q
Fr(1)e Fv(\(negativ)o(e)g(one\),)g(w)o(e)g(can)g(catc)o(h)0
2701 y(the)i(t)o(yp)q(e)h(error)e(in)i(an)o(y)f(call)h(to)f(the)g
(dynamic)h(function.)952 2825 y(41)p eop
%%Page: 42 48
42 47 bop 71 286 a Fv(This)15 b(mec)o(hanism,)h(although)g(quite)g
(useful,)g(should)g(b)q(e)g(used)g(as)f(rarely)g(as)g(p)q(ossible.)22
b(There)16 b(is)g(a)f(strong)0 343 y(temptation)h(for)g(the)h
(programmer)e(to)h(\\\014x")g(some)g(functions)i(b)o(y)e(deferring)i
(their)f(t)o(yp)q(e-c)o(hec)o(king.)25 b(Usually)0 399
y(all)19 b(this)f(accomplishes)h(is)f(that)f(it)h(also)f(defers)h(the)g
(errors.)26 b(Dynamic)18 b(t)o(yping)g(should)h(only)f(b)q(e)g(used)g
(when)0 456 y(functions)e(ha)o(v)o(e)f(t)o(yp)q(es)g(whic)o(h)h(dep)q
(end)h(up)q(on)f(the)f(v)m(alue)h(of)f(their)h(inputs.)71
512 y(It)g(is)i(a)e(goal)h(of)f Fs(SML)h Fv(to)f(c)o(hec)o(k)h(the)g
(consistency)h(of)f(expressions)g(completely)h(at)f(compile-time,)h
(when)0 569 y(p)q(ossible.)k(Av)o(oiding)16 b(compile)g(time)g(c)o(hec)
o(king)g(when)g(not)f(really)h(necessary)f(is)h(not)f(a)g(go)q(o)q(d)g
(idea.)0 689 y FA(8.3)56 b(In)n(tensional)18 b(Analysis)g(of)h(co)r(de)
0 775 y Fv(There)e(are)f(t)o(w)o(o)e(imp)q(ortan)o(t)i(kind)i(of)e
(meta-programming)f(scenarios:)22 b(program)15 b(generators,)h(and)g
(program)0 832 y(analyses.)37 b(A)21 b(program)f(analysis)i(\(a)e
(meta-program\))f(observ)o(es)i(the)g(structure)f(and)h(en)o(vironmen)o
(t)h(of)e(an)0 888 y(ob)s(ject-program)14 b(and)h(computes)g(some)g(v)m
(alue)h(as)f(a)g(result.)20 b(Results)c(can)f(b)q(e)h(data-)f(or)f(con)
o(trol-\015o)o(w)h(graphs,)0 945 y(or)22 b(ev)o(en)h(another)g(ob)s
(ject-program)e(with)i(prop)q(erties)g(based)g(on)g(the)g(prop)q
(erties)g(of)g(the)g(source)f(ob)s(ject-)0 1001 y(program.)35
b(Examples)22 b(of)e(these)h(kind)h(of)e(meta-systems)g(are:)30
b(program)20 b(transformers,)g(optimizers,)j(and)0 1058
y(partial)16 b(ev)m(aluation)g(systems.)71 1114 y(Analyses)i(are)f(an)g
(imp)q(ortan)o(t)h(class)f(of)h(meta-programs.)25 b(Unfortunately)17
b(there)h(is)g(a)f(con\015ict)i(b)q(et)o(w)o(een)0 1170
y(the)12 b(analysis)h(of)f(co)q(de)h(and)g(the)f(e\016cien)o(t)h
(construction)f(of)g(co)q(de.)20 b(If)12 b(one)h(can)f(ob)q(eserv)o(e)h
(the)f(structure)g(of)g(co)q(de,)0 1227 y(then)i(it)f(is)h(p)q(ossible)
i(to)c(distinguish)k(b)q(et)o(w)o(een:)j Fr(<)24 b(\(fn)f(x)h(=>)g(x)f
(+)h(1\))g(5)f(>)14 b Fv(and)f Fr(<5)24 b(+)g(1>)p Fv(,)13
b(whic)o(h)h(cannot)f(b)q(e)0 1283 y(distinguished)j(if)e(all)h(w)o(e)e
(can)h(do)g(is)g Fr(run)f Fv(co)q(de.)20 b(W)l(e)14 b(ha)o(v)o(e)g
(argued)f(in)i(Section)f(5)g(that)f(there)g(are)h(go)q(o)q(d)f(reasons)
0 1340 y(for)19 b(a)g(\\generator")f(system)h(to)g(automatically)h
(transform)e(the)h(\014rst)g(in)o(to)h(the)f(second,)i(th)o(us)e(in)h
(a)f(system)0 1396 y(with)c(analysis)g(of)g(co)q(de,)g(it)g(is)g(p)q
(ossible)h(to)e(lose)h(con\015uence.)21 b(That)14 b(is)i(wh)o(y)e(w)o
(e)g(include)j(this)f(section)f(on)f(co)q(de)0 1453 y(analysis)i(in)g
(the)f(exp)q(erimen)o(tal)i(features)e(of)f(MetaML.)71
1509 y(If)19 b(co)q(de)i(is)f(just)f(a)h(data)f(structure,)h(lik)o(e)h
(an)o(y)e(other,)h(then)g(it)g(should)h(b)q(e)f(p)q(ossible)h(to)e
(pattern)h(matc)o(h)0 1566 y(against)i(pieces)i(of)f(co)q(de.)43
b(Co)q(de)23 b(patterns)f(are)g(constructed)h(b)o(y)g(placing)h(brac)o
(k)o(ets)e(around)h(co)q(de.)43 b(F)l(or)0 1622 y(example)16
b(a)f(pattern)g(that)f(matc)o(hes)h(the)g(litteral)h
Fr(5)f Fv(can)h(b)q(e)g(constructed)f(b)o(y:)0 1715 y
Fh(-|)21 b(fun)h(is5)f(<5>)g(=)g(true)g(|)h(is5)f(_)h(=)f(false;)0
1765 y(val)g(is5)g(=)h(fn)f(:)h(<int>)f(->)g(bool)0 1865
y(-|)g(is5)h(\(lift)e(\(1+4\)\);)0 1915 y(val)h(it)h(=)f(true)43
b(:)21 b(bool)0 2014 y(-|)g(is5)h(<0>;)0 2064 y(val)f(it)h(=)f(false)43
b(:)21 b(bool)0 2164 y Fv(The)16 b(function)h Fr(is5)f
Fv(matc)o(hes)g(its)g(argumen)o(t)g(to)f(the)i(constan)o(t)e(pattern)h
Fr(<5>)g Fv(if)g(it)h(succeeds)g(it)f(returns)h Fr(true)0
2220 y Fv(else)f Fr(false)p Fv(.)71 2270 y(P)o(attern)e(v)m(ariables)i
(in)g(co)q(de)g(patterns)f(are)g(indicated)i(b)o(y)e(escaping)h(v)m
(ariables)g(in)g(the)g(co)q(de)f(pattern.)0 2352 y Fh(-|)21
b(fun)h(parts)e(<)i(~x)f(+)h(~y)f(>)h(=)f(SOME\(x,y\))109
2402 y(|)h(parts)e(_)i(=)f(NONE;)0 2452 y(val)g(parts)g(=)h(fn)43
b(:)21 b(<int>)g(->)g(\(<int>)g(*)h(<int>\))e(option)0
2551 y(-|)h(parts)g(<6)h(+)f(7>;)0 2601 y(val)g(it)h(=)f(SOME)g
(\(<6>,<7>\))f(:)i(\(<int>)e(*)i(<int>\))e(option)0 2701
y(-|)h(parts)g(<2>;)952 2825 y Fv(42)p eop
%%Page: 43 49
43 48 bop 0 286 a Fh(val)21 b(it)h(=)f(NONE)43 b(:)21
b(\(<int>)g(*)h(<int>\))e(option)0 379 y Fv(The)d(function)h
Fr(parts)e Fv(matc)o(hes)h(its)g(argumen)o(t)f(against)h(the)g(pattern)
f Fr(<)25 b Fv(~)p Fr(x)f(+)g Fv(~)p Fr(y)g(>)p Fv(.)h(If)17
b(its)h(argumen)o(t)e(is)h(a)0 436 y(piece)f(of)f(co)q(de)g(whic)o(h)h
(the)f(is)g(the)g(addition)h(of)e(t)o(w)o(o)g(sub)h(terms,)f(it)h
(binds)h(the)f(pattern)g(v)m(ariable)h Fr(x)e Fv(to)h(the)g(left)0
492 y(subterm)g(and)h(the)f(pattern)g(v)m(ariable)h Fr(y)f
Fv(to)g(the)g(righ)o(t)g(subterm.)71 549 y(Co)q(de)20
b(patterns)f(whic)o(h)i(con)o(tain)f(pieces)i(of)d(co)q(de)i(with)f
(binding)i(o)q(ccurrences)f(m)o(ust)f(use)g(higher-order)0
605 y(pattern)f(v)m(ariables.)33 b(A)19 b(higher-order)h(pattern)f(v)m
(ariable)i(is)e(indicated)i(b)o(y)e(an)h(escap)q(ed)g(application.)33
b(This)0 661 y(application)24 b(m)o(ust)d(ha)o(v)o(e)h(a)f(sp)q(ecial)j
(form.)40 b(It)22 b(m)o(ust)f(b)q(e)i(the)f(application)h(of)f(a)f(v)m
(ariable)j(to)d(argumen)o(ts.)0 718 y(This)e(in)o(tro)q(duces)g(a)f
(higher-order)h(pattern)f(v)m(ariable.)30 b(The)18 b(argumen)o(ts)g(of)
f(the)i(v)m(ariable)g(m)o(ust)f(b)q(e)h(explicit)0 774
y(brac)o(k)o(eted)i(v)m(ariables,)i(one)e(for)g(eac)o(h)g(v)m(ariable)h
(b)q(ound)g(in)g(the)f(co)q(de)h(pattern)f(at)f(the)h(con)o(text)g
(where)g(the)0 831 y(escap)q(ed)16 b(application)h(app)q(ears.)j(F)l
(or)15 b(example)h(consider)g(the)f(follo)o(wing)h(patterns:)263
928 y Fr(<fn)23 b(x)h(=>)g Fv(~)q Fr(\(f)f(<x>\)>)327
b Fv(legal)263 984 y Fr(<fn)23 b(x)h(=>)g Fv(~)q Fr(\(f)f(<2>\))351
b Fv(illegal,)17 b Fr(<2>)e Fv(is)h(not)f(a)g(brac)o(k)o(eted)1020
1041 y(v)m(ariable)263 1097 y Fr(<fn)23 b(x)h(=>)g Fv(~)q
Fr(f>)470 b Fv(illegal,)17 b Fr(f)p Fv(,)e(under)h(lam)o(b)q(da,)f(is)h
(not)1020 1154 y(applied)i(to)c(an)h(argumen)o(t)263
1210 y Fr(<fn)23 b(x)h(=>)g(fn)f(y)h(=>)g Fv(~)q Fr(\(f)f(<x>\)>)136
b Fv(illegal,)17 b Fr(f)e Fv(not)g(applied)i(to)e(all)h(b)q(ound)1020
1266 y(v)m(ariables)263 1323 y Fr(<fn)23 b(\(x,y\))h(=>)g
Fv(~)p Fr(\(f)g(<x>)f(<y>\))g(+)h(1>)41 b Fv(legal)71
1420 y(A)18 b(higher)i(order)f(pattern)f(v)m(ariable)i(is)g(used)f(lik)
o(e)h(a)f(function)g(on)g(the)g(righ)o(t)g(hand)g(side)h(of)e(a)h(matc)
o(hing)0 1476 y(construct.)24 b(F)l(or)16 b(example)h(a)f(function)i
(whic)o(h)f(applies)h(the)f(rule)h(that)e Fr(0)g Fv(is)h(the)g(iden)o
(tit)o(y)g(of)f(addition)i(to)e(the)0 1533 y(b)q(o)q(dy)g(of)f
(function)h(is)f(written)h(as:)0 1631 y Fh(-|)21 b(fun)h(f)f(<fn)g(x)h
(=>)f(~\(g)g(<x>\))g(+)h(0>)f(=)h(<fn)f(y)h(=>)f(~\(g)g(<y>\)>)109
1681 y(|)h(f)f(x)h(=)f(x;)0 1731 y(val)g(f)h(=)f(Fn)44
b(:)21 b(['b].<'b)42 b(->)21 b(int>)g(->)h(<'b)43 b(->)21
b(int>)0 1831 y(-|)g(f)h(<fn)f(x)h(=>)f(\(x-4\))g(+)g(0>;)0
1880 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)f(a)h(\045-)f(4\)>)g(:)h(<int)f
(->)g(int>)71 1985 y Fv(P)o(attern)14 b(matc)o(hing)h(against)g(co)q
(de)h(is)f(v)o(ery)g(useful,)h(and)f(is)h(used)g(to)f(great)f(b)q
(ene\014t)i(in)g(the)f(next)h(section.)0 2107 y FA(8.4)56
b(A)19 b(HOL-lik)n(e)d(Theorem)h(Pro)n(v)n(er)0 2193
y Fv(In)e(this)g(section)f(w)o(e)g(describ)q(e)i(extensions)f(w)o(e)f
(made)h(to)e(MetaML)h(in)h(order)f(to)f(build)k(an)d(HOL-lok)o(e)h
(theorem)0 2249 y(pro)o(v)o(er.)21 b(Our)16 b(motiv)m(ation)g(in)h
(this)f(endea)o(v)o(or)g(ws)g(three-fold.)22 b(First,)15
b(to)h(use)g(MetaML)f(for)g(something)h(other)0 2306
y(than)f(staging.)k(Second,)d(to)e(stress)h(the)g(implemen)o(tation,)h
(and)f(third)h(to)e(motiv)m(ate)h(the)h(in)o(tensional)g(analysis)0
2362 y(capabilites)24 b(describ)q(ed)f(in)g(the)f(previous)h(section.)
40 b(W)l(e)22 b(w)o(an)o(ted)f(to)g(kno)o(w)h(what)f(capabilites)j(w)o
(er)d(really)0 2418 y(necessary)l(,)15 b(and)h(what)e(capabilites)j(w)o
(ere)e(missing.)71 2475 y(Our)f(goals)g(in)h(building)i(the)e(HOL-lik)o
(e)h(system)e(w)o(ere)g(to)g(hac)o(k)g(the)g(curren)o(t)g(implemen)o
(tation)i(as)e(least)g(as)0 2531 y(p)q(ossible,)j(to)e(co)q(de)i(ev)o
(erything)f(else)g(using)h(MetaML)e(as)g(the)h(meta-language.)21
b(This)c(is)f(p)q(ossible)h(b)q(ecause)g(in)0 2588 y(MetaML)f(co)q(de)h
(is)g(a)f(\014rst)g(class)h(ob)s(ject,)e(but)i(will)h(require)f(some)f
(in)o(tensional)i(analysis.)25 b(Our)16 b(last)h(goal)f(w)o(as)0
2644 y(to)e(build)j(a)e(uni\014ed)i(system)e(where)g(one)g(can)g(write)
g(programs,)f(execute)i(them,)e(and)h(reason)g(ab)q(out)g(them)g(all)0
2701 y(in)h(the)f(same)g(system,)g(all)h(using)g(the)f(same)g
(language.)952 2825 y(43)p eop
%%Page: 44 50
44 49 bop 71 286 a Fv(Our)15 b(system)f(is)i(built)g(up)q(on)g(the)e
(follo)o(wing)i(ideas.)21 b(There)15 b(is)g(an)g(abstract)f(datat)o(yp)
q(e)g(for)g(theorems.)20 b(The)0 343 y(ADT)14 b(has)f(t)o(w)o(o)g
(kinds)i(of)e(in)o(terface)h(functions.)21 b Fn(Constructors)13
b Fv(-)h(whic)o(h)h(construct)e(only)i(true)f(theorems.)19
b(and)0 399 y Fn(c)n(ombinators)e Fv(-)g(whic)o(h)h(construct)f(new)g
(theorems)g(from)f(old.)26 b(The)18 b(form)e(of)h(a)g(tho)q(erem)g(is:)
24 b(it)17 b(premises)h Fr(|-)0 456 y Fn(c)n(onclusion)p
Fv(.)29 b(The)20 b Fn(principle)f(rule)g Fv(for)f(manipulating)i
(theorems)f(is)g(the)g(follo)o(wing:)28 b Fr(p)c(|-)f(q)h(=>)g(r)18
b Fv(can)h(b)q(e)0 512 y(transformed)14 b(to)h Fr(p,q)23
b(|-)h(r)p Fv(.)71 569 y(The)15 b(st)o(yle)h(of)g(pro)q(of)f(supp)q
(orted)h(b)o(y)g(the)g(system)f(is)h(to)f(use)h(com)o(binators)f(and)h
(constructors)f(to:)20 b(manip-)0 625 y(ulate)15 b(the)g(conclusion)h
(of)e(a)g(theorem,)g(to)g(pro)q(duce)h(new)g(theorems,)f(mo)o(v)o(e)g
(information)g(in)o(to)h(and)g(out)f(of)g(the)0 682 y(premises)i(b)o(y)
f(using)h(the)f(Principle)j(Rule.)71 738 y(When)g(building)i(our)d
(system)g(w)o(e)h(came)f(to)g(realize)i(some)e(crucial)i(di\013erences)
g(b)q(et)o(w)o(een)f(HOL)g(and)g(our)0 795 y(system.)68
880 y Fg(\017)23 b Fv(HOL)16 b(reasons)e(ab)q(out)h(mathematical)h
(sets.)68 970 y Fg(\017)23 b Fv(Our)15 b(system)g(reasons)g(ab)q(out)g
(ML)g(programs.)68 1061 y Fg(\017)23 b Fv(ML)15 b(Programs)f(ma)o(y)g
(not)h(terminate)68 1151 y Fg(\017)23 b Fv(ML)15 b(functions)h(ev)m
(aluate)g(their)g(argumen)o(ts)e(\(call)i(b)q(e)g(v)m(alue)g(-)g
(language\))71 1237 y(W)l(e)f(b)q(egan)g(our)g(implemen)o(tation)i(b)o
(y)e(in)o(tro)q(ducing)i(a)d(new)i Fr(theorem)e Fv(datat)o(yp)q(e.)0
1326 y Fh(datatype)20 b(theorem)g(=)87 1376 y(Thm)h(of)h(<bool>)e(list)
h(*)h(<bool>;)0 1476 y(fun)f(conclusion)f(\(Thm\(p,c\)\))g(=)h(c;)0
1575 y(fun)g(premises)64 b(\(Thm\(p,c\)\))20 b(=)h(p;)71
1672 y Fv(Note)i(that)g(w)o(e)g(co)q(de)i(of)e(t)o(yp)q(e)h
Fr(bool)f Fv(to)g(represen)o(t)h(theorems.)45 b(The)24
b(in)o(terpretation)g(of)f(a)g(theorem)0 1728 y Fr(Thm\([p1,p2,)f(...)
48 b(,)23 b(pn],)h(conc\))18 b Fv(is)i(if)f Fr(p1,)k(p2,)h(...)47
b(,)24 b(pn)19 b Fv(all)h(terminate)f(and)g(ev)m(aluate)h(to)e
Fr(true)p Fv(,)0 1784 y(then)e Fr(conc)e Fv(will)j(terminate)e(and)h
(ev)m(aluate)g(to)e Fr(true)p Fv(.)71 1841 y(W)l(e)h(can)g(construct)g
(sev)o(eral)g(primitiv)o(es)i(whic)o(h)f(alw)o(a)o(ys)e(return)i(true)f
(theorems)f(as)h(follo)o(ws:)0 1930 y Fh(fun)21 b(halts)g(t)h(=)f
(true;)0 2030 y(fun)g(HALTS_EVAL)f(t)h(=)65 2080 y(if)h(halts\(run)e
(t\))131 2130 y(then)h(Thm\([],)f(<halts)h(~t>\))131
2180 y(else)g(Thm\([],<true>\))0 2229 y(\(*)g(the)h(second)e(branch)h
(of)g(the)g(conditional)f(can't)g(happen)h(*\);)0 2329
y(fun)g(ASSUME)g(b)g(=)h(Thm)f(\([b],b\);)0 2425 y Fv(The)f(\014rst)g
(stage)g(function)h Fr(halts)e Fv(ev)m(aluates)i(its)g(argumen)o(t)e
(\(after)g(all)j(ML)e(is)h(a)e(strict)i(language\).)34
b(It)21 b(it)0 2482 y(terminates,)14 b(it)g(returns)g(true.)19
b Fr(HALTS)p 673 2482 15 2 v 17 w(EVAL)p Fv(,)13 b(tak)o(es)g(a)h(p)q
(eice)i(if)e(co)q(de,)h Fr(runs)e Fv(it)h(and)h(if)f(it)h(terminates,)e
(builds)j(a)0 2538 y(theorem)f(whic)o(h)i(states)e(this)h(fact.)21
b(If)16 b(the)g(piece)h(of)e(co)q(de)h(do)q(es)g(not)g(terminate,)f
(then)h(the)g(theorem)g(is)g(nev)o(er)0 2594 y(constructed)f(since)i
(in)f(that)e(case)h Fr(HALTS)p 727 2594 V 17 w(EVAL)g
Fv(do)q(es)g(not)g(terminate.)71 2651 y(The)g(theorem)g(constructor)f
Fr(ASSUME)h Fv(builds)i(the)e(trivial)h(theorem)f(that)g(if)g
Fr(b)g Fv(halts)h(then)f Fr(b)g Fv(halts.)71 2701 y(The)g(theorem)g
(com)o(binator)g Fr(RESOLVE)f Fv(can)h(b)q(e)h(built)h(as)d(follo)o
(ws:)952 2825 y(44)p eop
%%Page: 45 51
45 50 bop 0 286 a Fh(fun)21 b(RESOLVE\(t1)f(as)h
(Thm\(p,t\)\)\(Thm\(p',t')o(\)\))e(=)22 336 y(if)i(member)g(t')g(p)87
386 y(then)g(Thm\(union)f(\(delete)g(t')i(p\))f(p',)g(t\))87
436 y(else)g(error)131 486 y(\("Conclusion)e("^\(show)h(t'\)^)153
535 y(")h(is)h(not)f(a)g(member)g(hypoth)f(of\\n)65 b("^)153
585 y(\(show)20 b(t1\)\))71 673 y Fv(Sophisticated)14
b(constructors)e(and)h(com)o(binators)g(lik)o(e)h Fr(RESOLVE)e
Fv(need)h(to)g(analyse)g(their)h(co)q(de)f(argumen)o(ts.)0
729 y(In)j(order)f(to)f(do)h(this)h(w)o(e)f(needed)i(to)d(pro)o(vide)i
(sev)o(eral)f(co)q(de)h(insp)q(ecting)h(primitiv)o(es:)71
779 y(The)e(\014rst)g(primitv)o(e)h(w)o(as)e(a)h(function)h(for)f
(comparing)g(co)q(de)h(for)f(equalit)o(y)h(mo)q(dulo)g(alpha)f
(renaming.)21 b(W)l(e)0 829 y(supply)16 b(this)g(capabilit)o(y)h(via)e
(the)g(function)h Fr(expEq)p Fv(.)0 910 y Fh(-|)21 b(expEq;)0
960 y(val)g(it)h(=)f(Fn)43 b(:)22 b(['a].<'a)e(>)i(->)f(<'a)g(>)h(->)f
(bool)0 1060 y(-|)g(expEq)g(<fn)g(a)h(=>)f(a)h(+)f(1>)h(<fn)f(b)h(=>)f
(b)h(+)f(1>;)0 1109 y(val)g(it)h(=)f(true)43 b(:)21 b(bool)0
1209 y(-|)g(expEq)g(<fn)g(a)h(=>)f(a)h(+)f(1>)h(<fn)f(b)h(=>)f(1)h(+)f
(b>;)0 1259 y(val)g(it)h(=)f(false)43 b(:)21 b(bool)71
1347 y Fv(The)14 b(second)g(w)o(as)f(to)g(b)q(e)i(able)g(to)e(use)h
(the)g(de\014n)o(tions)h(of)e(functions.)21 b(This)14
b(is)g(done)h(b)o(y)f(the)f(meta-function)0 1403 y Fr(expand)p
Fv(.)36 b(Expand)21 b(can)g(replace)h(an)o(y)f(piece)h(of)f(co)q(de)g
(whic)o(h)h(is)f(a)g(lexically)i(captured)f(constan)o(t)e(with)h(its)0
1460 y(de\014nition.)h(Non)15 b(lexically)j(captured)d(constan)o(ts)f
(are)h(returned)h(unc)o(hanged.)0 1552 y Fh(-|)21 b(expand;)0
1602 y(val)g(it)h(=)f(Fn)43 b(:)22 b(['a].<'a)e(>)i(->)f(<'a)g(>)0
1701 y(-|)g(expand)g(<length>;)0 1751 y(val)g(it)h(=)0
1801 y(<\(fn)f([])g(=>)h(0)f(|)h(\(b::a\))e(=>)i(1)f(\045+)h
(\045length)e(a\)>)22 1851 y(:)h(<'1)43 b(list)21 b(->)h(int>)0
1950 y(-|)f(expand)g(<3>;)0 2000 y(val)g(it)h(=)f(<3>)g(:)h(<int>)0
2099 y Fv(Note)e(that)g(the)g(expansion)i(of)e(a)g(lexically)j
(captured)d(constan)o(t)g(me)g(in)o(tro)q(duce)i(other)e(lexically)j
(captured)0 2156 y(constan)o(ts.)71 2212 y(Man)o(y)16
b(more)h(details)i(of)d(the)i(HOL-lik)o(e)h(theorem)e(pro)o(v)o(er)g
(can)h(b)q(e)g(learned)g(from)f(the)g(p)q(o)o(w)o(er-p)q(oin)o(t)h
(pre-)0 2269 y(sen)o(tation)e Fn(A)i(HOL-like)e(The)n(or)n(em)i(Pr)n
(ove)f(Using)f(MetaML)h(as)h(a)g(Meta-L)n(anguage)e Fv(found)h(on)g
(the)g(MetaML)0 2325 y(home)e(page.)0 2446 y FA(8.5)56
b(Rei\014cation)0 2531 y Fv(Olivier)15 b(Dan)o(vy)d(in)o(tro)q(duced)i
(an)e(in)o(teresting)i(w)o(a)o(y)d(to)h(construct)g(a)h(partial)g(ev)m
(aluator)g(b)o(y)f(using)i(t)o(yp)q(e-directed)0 2588
y(computation[Dan95)o(].)k(In)13 b(1997)e(w)o(e)g(sho)o(w)o(ed)h(ho)o
(w)f(w)o(e)h(could)h(in)o(tegrate)e(this)i(idea)f(in)o(to)g(a)g
(meta-programming)0 2644 y(system)f(with)h(explicit)h(staging)e
(annotations[She97)o(].)18 b(The)12 b(crucial)h(op)q(eration)e(in)h(t)o
(yp)q(e-directed)h(partial)f(ev)m(al-)0 2701 y(uation)j(is)g(a)g(t)o
(yp)q(e-directed)h(function)f(called)h Fn(r)n(eify)p
Fv(.)k(Giv)o(en)15 b(a)f(t)o(yp)q(e,)h(and)g(v)m(alue)h(with)f(that)f
(t)o(yp)q(e,)g(it)h(pro)q(duces)952 2825 y(45)p eop
%%Page: 46 52
46 51 bop 0 286 a Fv(a)14 b(represen)o(tation)h(of)g(that)f(v)m(alue.)
21 b(In)15 b(our)f(pap)q(er)i(w)o(e)e(sho)o(w)o(ed)h(ho)o(w)f(in)h(a)g
(language)g(with)g(t)o(yp)q(e)g(inference,)h(the)0 343
y(t)o(yp)q(e)i(need)h(not)e(b)q(e)i(supplied)h(since,)f(since)g(the)f
(inference)i(mec)o(hanism)e(can)g(supply)h(it)f(automatically)l(.)29
b(W)l(e)0 399 y(ha)o(v)o(e)15 b(implemen)o(ted)i(these)e(features)g(in)
h(the)f(curren)o(t)g(v)o(ersion)h(of)f(MetaML.)f(F)l(or)g(example:)0
500 y Fh(-|)21 b(fun)h(f)f(x)h(=)f(x)h(+)f(3;)0 550 y(val)g(f)h(=)f(fn)
44 b(:)21 b(int)g(->)h(int)0 650 y(-|)f(reify)g(f;)0
700 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)f(a)h(\045+)f(3\)>)g(:)h(<int)f(->)
g(int>)0 807 y Fv(The)13 b(function)g Fr(reify)e Fv(is)i(lik)o(e)g(the)
g(annotation)f Fr(lift)p Fv(,)g(except)g(that)g(it)g(applies)i(to)e
(functions)h(as)f(w)o(ell)h(as)f(ground)0 864 y(t)o(yp)q(es.)71
914 y(Rei\014cation)k(can)f(b)q(e)g(used)g(to)f(construct)h(lifted)h(v)
o(ersions)f(of)f(functions)h(rather)f(than)h(staging)f(them)h(man-)0
963 y(ually)l(.)30 b(F)l(or)17 b(example)i(consider)g(writing)g(a)f
(staged)f Fn(app)n(end)h Fv(function)h(whose)f(\014rst)g(argumen)o(t)f
(is)i(static)f(and)0 1013 y(whose)d(second)h(is)g(dynamic.)0
1102 y Fh(fun)21 b(append2)g(x)g(=)44 1151 y(<fn)g(y)g(=>)h(~\(case)e
(x)i(of)349 1201 y([])f(=>)g(<y>)283 1251 y(|)h(w::ws)f(=>)g(<)h
(~\(lift)e(w\))i(::)f(\()h(~\(append2)d(ws\))j(y\))f(>\)>;)0
1301 y(-|)g(val)h(append2)e(=)h(Fn)44 b(:)21 b(['a^].'a)42
b(list)21 b(->)h(<'a)42 b(list)21 b(->)h('a)43 b(list>)0
1400 y(-|)21 b(append2)g([3,4];)0 1450 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)
f(3)h(::)f(4)h(::)f(a\)>)g(:)h(<int)f(list)g(->)g(int)g(list>)0
1538 y Fv(Using)14 b(rei\014cation)h(w)o(e)e(can)h(do)g(this)g(simply)h
(b)o(y)e(applying)i Fr(reify)e Fv(to)g(a)g(partially)i(applied)g(call)g
(to)e(the)h(existing)0 1588 y(1)h(stage)f(app)q(end)j(\()p
Fr(\(op)23 b(@\))p Fv(\))14 b(function.)0 1677 y Fh(-|)21
b(fn)h(x)f(=>)h([1,2,3])e(@)i(x;)0 1726 y(val)f(it)h(=)f(fn)43
b(:)22 b(int)f(list)g(->)g(int)h(list)0 1826 y(-|)f(reify)g(it;)0
1876 y(val)g(it)h(=)f(<\(fn)g(a)h(=>)f(1)h(::)f(2)h(::)f(3)h(::)f(a\)>)
g(:)h(<int)f(list)g(->)g(int)g(list>)0 1971 y Fv(While)g
Fr(reify)d Fv(is)i(useful,)i(it)d(is)h(also)g(dangerous.)32
b(Rei\014cation)21 b(can)f(easily)g(lead)g(to)f(non-termination,)i(and)
0 2027 y(our)16 b(implemen)o(tation)h(of)e Fr(reify)h
Fv(dep)q(ends)h(crucially)h(on)e(implemen)o(tation)h(details)g(whic)o
(h)g(con\015ict)g(with)f(our)0 2084 y(implemen)o(tation)g(of)f(the)h
(in)o(tensional)g(analysis)g(of)f(co)q(de.)71 2140 y(Applying)h(reify)f
(to)f(an)o(y)h(function)g(whic)o(h)h(uses)f(pattern)f(matc)o(hing)h
(against)g(co)q(de)g(\(Section)g(8.3\),)e(or)i(uses)0
2197 y(one)20 b(of)g(the)g(primitiv)o(es)h(whic)o(h)g(observ)o(e)f(the)
g(structure)g(of)g(co)q(de)g(\()p Fr(force)p Fv(,)g Fr(is)p
1418 2197 15 2 v 17 w(code)p Fv(,)g Fr(showCode)p Fv(,)g(etc\))g(can)0
2253 y(b)q(eha)o(v)o(e)c(in)g(a)e(non-deterministic)k(w)o(a)o(y)l(.)71
2310 y(It)c(is)g(ev)o(en)h(p)q(ossible)h(to)d(break)h(the)h(soundness)f
(of)g(the)g(t)o(yp)q(e)g(system)g(b)o(y)g(mixing)h(these)g(t)o(w)o(o)e
(exp)q(erimen)o(tal)0 2366 y(features.)20 b(See)15 b(section)h(9.18)e
(for)h(details.)0 2511 y Fu(9)67 b(The)22 b(MetaMl)g(Library)0
2614 y FA(9.1)56 b(Bo)r(ol)17 b(functions)0 2701 y Fv(Usual)f(b)q(o)q
(olean)g(v)m(alues)g(and)g(functions.)952 2825 y(46)p
eop
%%Page: 47 53
47 52 bop 0 286 a Fr(val)23 b(false)71 b(:)24 b(bool)0
343 y(val)f(true)95 b(:)24 b(bool)0 399 y(val)f(not)119
b(:)24 b(bool)f(->)h(bool)0 456 y(val)f(andAlse)g(:)h(\(bool)f(*)h
(bool\))f(->)h(bool)0 512 y(val)f(orElse)47 b(:)24 b(\(bool)f(*)h
(bool\))f(->)h(bool)0 607 y(andAlso)15 b Fv(and)i Fr(orElse)e
Fv(are)h(functions,)g(whereas)g Fr(andalso)g Fv(and)g
Fr(orelse)f Fv(are)h(constructs)g(in)h(MetaML)e(used)0
663 y(in)h(an)f(in\014x)h(fashion.)0 786 y FA(9.2)56
b(Num)17 b(op)r(erators)h(and)h(functions)0 872 y Fv(Num)14
b(t)o(yp)q(e)f(stands)g(for)g Fr(int)g Fv(and)h Fr(float)f
Fv(t)o(yp)q(es.)19 b(It)14 b(allo)o(ws)f(o)o(v)o(erloading)h(the)f
(common)g(arithmetic)i(functions,)0 929 y(and)20 b(uses)f(the)h
Fn(num)j Fv(quali\014cation)e(to)e(restrict)g(the)h(univ)o(ersal)g(p)q
(olymorphism.)34 b(A)20 b(n)o(um)f(t)o(yp)q(e)h(v)m(ariable)g(is)0
985 y(denoted)c(b)o(y)f Fr(a#)p Fv(.)0 1093 y Fr(val)23
b(op)h(+)119 b(:)24 b(['a#].\('a)f(*)g('a)h(\))g(->)f('a)0
1149 y(val)g(op)h(-)119 b(:)24 b(['a#].\('a)f(*)g('a)h(\))g(->)f('a)0
1206 y(val)g(op)h(*)119 b(:)24 b(['a#].\('a)f(*)g('a)h(\))g(->)f('a)0
1262 y(val)g(sign)119 b(:)24 b(['a#].'a)f(->)g(int)0
1318 y(val)g(min)143 b(:)24 b(['a#].\('a)f(*)g('a)h(\))g(->)f('a)0
1375 y(val)g(max)143 b(:)24 b(['a#].\('a)f(*)g('a)h(\))g(->)f('a)0
1431 y(val)g(sameSign)g(:)h(['a#].\('a)f(*)g('a)h(\))g(->)f(bool)0
1488 y(val)g(abs)143 b(:)24 b(['a#].'a)f(->)g('a)0 1611
y FA(9.3)56 b(Comparison)18 b(op)r(erators)0 1697 y Fv(Comparison)f(op)
q(erators)f(are)h(o)o(v)o(erloaded.)26 b(The)18 b(orderable)g
(quali\014cation)h Fr('a<)e Fv(con)o(tains)g Fr(int)p
Fv(,)g Fr(real)p Fv(,)g Fr(char)p Fv(,)0 1753 y(and)c
Fr(string)p Fv(.)18 b(Con)o(trast)11 b(this)j(with)f(the)g(equalit)o(y)
h(quali\014cation)g(on)f(t)o(yp)q(e)g(v)m(ariables)h(\(denoted)f(b)o(y)
g Fr('a=)p Fv(\))f(whic)o(h)0 1810 y(con)o(tains)j(all)h(basic)g(t)o
(yp)q(es)g(and)f(datat)o(yp)q(es)f(that)h(do)g(not)g(con)o(tain)g
(function)h(t)o(yp)q(es.)0 1917 y Fr(val)23 b(op)h(=)119
b(:)24 b(['a=].\('a)46 b(*)24 b('a)g(\))f(->)h(bool)0
1974 y(val)f(op)h('>')71 b(:)24 b(['a<].\('a)46 b(*)24
b('a)g(\))f(->)h(bool)0 2030 y(val)f(op)h(>=)95 b(:)24
b(['a<].\('a)46 b(*)24 b('a)g(\))f(->)h(bool)0 2086 y(val)f(op)h('<')71
b(:)24 b(['a<].\('a)46 b(*)24 b('a)g(\))f(->)h(bool)0
2143 y(val)f(op)h(<=)95 b(:)24 b(['a<].\('a)46 b(*)24
b('a)g(\))f(->)h(bool)0 2199 y(val)f(op)h(<>)95 b(:)24
b(['a=].\('a)46 b(*)24 b('a)g(\))f(->)h(bool)0 2322 y
FA(9.4)56 b(in)n(t)18 b(functions)0 2408 y Fr(val)23
b(op)h(div)119 b(:)24 b(\(int)f(*)h(int\))f(->)h(int)0
2465 y(val)f(op)h(mod)119 b(:)24 b(\(int)f(*)h(int\))f(->)h(int)0
2521 y(val)f(quot)167 b(:)24 b(\(int)f(*)h(int\))f(->)h(int)0
2578 y(val)f(rem)191 b(:)24 b(\(int)f(*)h(int\))f(->)h(int)0
2634 y(val)f(inteq)143 b(:)24 b(int)f(->)h(int)f(->)h(bool)0
2691 y(val)f(fromString)g(:)h(string)f(->)g(int)h(option)952
2825 y Fv(47)p eop
%%Page: 48 54
48 53 bop 0 286 a FA(9.5)56 b(real)18 b(functions)0 378
y Fr(val)23 b(op)h(/)191 b(:)24 b(\(real)f(*)g(real\))h(->)f(real)0
434 y(val)g(sin)215 b(:)24 b(real)f(->)g(real)0 491 y(val)g(cos)215
b(:)24 b(real)f(->)g(real)0 547 y(val)g(int2real)95 b(:)24
b(int)f(->)h(real)0 604 y(val)f(RfromString)g(:)h(string)f(->)g(real)g
(option)0 660 y(val)g(trunc)167 b(:)24 b(real)f(->)g(int)0
717 y(val)g(round)167 b(:)24 b(real)f(->)g(int)0 855
y FA(9.6)56 b(c)n(har)19 b(functions)0 947 y Fr(val)k(ord)215
b(:)24 b(char)f(->)g(int)0 1003 y(val)g(chr)215 b(:)24
b(int)f(->)h(char)0 1059 y(val)f(succ)191 b(:)24 b(char)f(->)g(char)0
1116 y(val)g(pred)191 b(:)24 b(char)f(->)g(char)0 1172
y(val)g(toLower)119 b(:)24 b(char)f(->)g(char)0 1229
y(val)g(toUpper)119 b(:)24 b(char)f(->)g(char)0 1285
y(val)g(isAlpha)119 b(:)24 b(char)f(->)g(bool)0 1342
y(val)g(isAlphaNum)47 b(:)24 b(char)f(->)g(bool)0 1398
y(val)g(isAscii)119 b(:)24 b(char)f(->)g(bool)0 1455
y(val)g(isCntrl)119 b(:)24 b(char)f(->)g(bool)0 1511
y(val)g(isDigit)119 b(:)24 b(char)f(->)g(bool)0 1568
y(val)g(isGraph)119 b(:)24 b(char)f(->)g(bool)0 1624
y(val)g(isHexdigit)47 b(:)24 b(char)f(->)g(bool)0 1680
y(val)g(isLower)119 b(:)24 b(char)f(->)g(bool)0 1737
y(val)g(isPrintr)95 b(:)24 b(char)f(->)g(bool)0 1793
y(val)g(isUpper)119 b(:)24 b(char)f(->)g(bool)0 1850
y(val)g(isSpace)119 b(:)24 b(char)f(->)g(bool)0 1906
y(val)g(isPunct)119 b(:)24 b(char)f(->)g(bool)0 1963
y(val)g(CtoString)71 b(:)24 b(char)f(->)g(string)0 2019
y(val)g(CfromString)g(:)h(string)f(->)g(char)g(option)0
2158 y FA(9.7)56 b(string)18 b(functions)0 2249 y Fr(val)23
b(size)191 b(:)24 b(string)f(->)g(int)0 2306 y(val)g(sub)215
b(:)24 b(\(string)e(*)i(int\))f(->)h(char)0 2362 y(val)f(substring)71
b(:)24 b(string)f(->)g(int)h(->)f(int)h(->)f(string)0
2418 y(val)g(op)h(^)191 b(:)24 b(\(string)e(*)i(string\))f(->)h(string)
0 2475 y(val)f(str)215 b(:)24 b(char)f(->)g(string)0
2531 y(val)g(streq)167 b(:)24 b(string)f(->)g(string)g(->)h(bool)0
2588 y(val)f(cat)215 b(:)24 b(string)f(->)g(string)g(->)h(string)0
2644 y(val)f(Sconcat)119 b(:)24 b(string)f(list)g(->)g(string)0
2701 y(val)g(implode)119 b(:)24 b(char)f(list)g(->)h(string)952
2825 y Fv(48)p eop
%%Page: 49 55
49 54 bop 0 286 a Fr(val)23 b(explode)119 b(:)24 b(string)f(->)g(char)g
(list)0 343 y(val)g(isPrefix)95 b(:)24 b(string)f(->)g(string)g(->)h
(bool)0 399 y(val)f(contains)95 b(:)24 b(string)f(->)g(char)g(->)h
(bool)0 456 y(val)f(notContains)g(:)h(string)f(->)g(char)g(->)h(bool)0
512 y(val)f(toString)g(:)h(['a<].)f('a)h(->)f(string)g(\(*)h(works)f
(on)h(int,)f(string,)g(char)g(and)h(real)f(*\))0 635
y FA(9.8)56 b(List)17 b(functions)0 721 y Fr(val)23 b(nil)167
b(:)24 b(['a].'a)47 b(list)0 777 y(val)23 b(op)h(::)119
b(:)24 b(['a].\('a)46 b(*)24 b('a)48 b(list\))23 b(->)g('a)48
b(list)0 834 y(val)23 b(tl)191 b(:)24 b(['a].'a)47 b(list)23
b(->)g('a)48 b(list)0 890 y(val)23 b(hd)191 b(:)24 b(['a].'a)47
b(list)23 b(->)g('a)0 946 y(val)g(null)143 b(:)24 b(['a].'a)47
b(list)23 b(->)g(bool)0 1003 y(val)g(op)h(@)143 b(:)24
b(['a].\('a)46 b(list)24 b(*)f('a)48 b(list\))23 b(->)h('a)47
b(list)0 1059 y(val)23 b(append)95 b(:)24 b(['a].'a)47
b(list)23 b(->)g('a)48 b(list)23 b(->)h('a)47 b(list)0
1116 y(val)23 b(length)95 b(:)24 b(['a].'a)47 b(list)23
b(->)g(int)0 1172 y(val)g(rev)167 b(:)24 b(['a].'a)47
b(list)23 b(->)g('a)48 b(list)0 1229 y(val)23 b(revappend)g(:)h
(['a].\('a)46 b(list)24 b(*)f('a)48 b(list\))23 b(->)h('a)47
b(list)0 1285 y(val)23 b(drop)143 b(:)24 b(['a].\('a)46
b(list)24 b(*)f(int\))h(->)f('a)48 b(list)0 1342 y(val)23
b(take)143 b(:)24 b(['a].\('a)46 b(list)24 b(*)f(int\))h(->)f('a)48
b(list)0 1398 y(val)23 b(concat)95 b(:)24 b(['a].'a)47
b(list)23 b(list)g(->)h('a)47 b(list)0 1455 y(val)23
b(nth)167 b(:)24 b(['a].\('a)46 b(list)24 b(*)f(int\))h(->)f('a)0
1511 y(val)g(last)143 b(:)24 b(['a].'a)47 b(list)23 b(->)g('a)0
1567 y(val)g(map)167 b(:)24 b(['a,'b].\('b)46 b(->)24
b('a)f(\))h(->)g('b)47 b(list)23 b(->)h('a)47 b(list)0
1690 y FA(9.9)56 b(V)-5 b(ector)18 b(primitiv)n(es)0
1776 y Fr(val)23 b(Vget)143 b(:)24 b(['a].\('a)46 b(vector)23
b(*)h(int\))g(->)f('a)0 1832 y(val)g(Vsub)143 b(:)24
b(['a].\('a)46 b(vector)23 b(*)h(int\))g(->)f('a)0 1889
y(val)g(Vlength)71 b(:)24 b(['a].'a)47 b(vector)23 b(->)g(int)0
1945 y(val)g(VfromList)g(:)h(['a].'a)47 b(list)23 b(->)g('a)48
b(vector)0 2002 y(val)23 b(Vconcat)71 b(:)24 b(['a].'a)47
b(vector)23 b(list)g(->)h('a)47 b(vector)0 2058 y(val)23
b(Vextract)47 b(:)24 b(['a].'a)47 b(vector)23 b(->)g(int)h(->)f(int)h
(option)f(->)g('a)48 b(vector)0 2181 y FA(9.10)56 b(Ref)18
b(primitiv)n(es)0 2267 y Fr(val)23 b(ref)72 b(:)23 b(['a].'a)47
b(->)24 b('a)47 b(ref)0 2323 y(val)23 b(!)h(:)g(['a].'a)47
b(ref)23 b(->)h('a)0 2379 y(val)f(op)h(:=)g(:)f(['a].\('a)47
b(ref)23 b(*)h('a)g(\))f(->)h(unit)0 2436 y(val)f(unref)h(:)f(['a].'a)
47 b(ref)24 b(->)f('a)95 b(\(*)24 b(like)f(!,)h(included)f(for)g
(compatibility)f(*\))811 2492 y(\(*)i(with)f(previous)g(versions)g(of)g
(MetaML)71 b(*\))0 2615 y FA(9.11)56 b(option)18 b(t)n(yp)r(e)0
2701 y Fr(datatype)23 b('a)g(option)g(=)h(SOME)f(of)h('a)g(|)f(NONE)952
2825 y Fv(49)p eop
%%Page: 50 56
50 55 bop 0 286 a Fr(val)23 b(SOME)h(:)f(['a].)h('a)f(->)h('a)f(option)
0 343 y(val)g(NONE)h(:)f(['a].)h('a)f(option)0 486 y
FA(9.12)56 b(sum)17 b(t)n(yp)r(e)0 580 y Fr(datatype)23
b(\('a,'b\))g(sum)g(=)h(Right)f(of)h('a)f(|)h(Left)f(of)h('b)0
636 y(val)f(Right)h(:)f(['a,'b].)g('b)h(->)f(\('b,'a\))g(sum)0
692 y(val)g(Lift)h(:)f(['a,'b].)g('b)h(->)f(\('a,'b\))g(sum)0
836 y FA(9.13)56 b(monad)18 b(t)n(yp)r(e)0 929 y Fr(datatype)23
b(\('T:)g(*)h(->)f(*)h(\))g(Monad)f(=)119 985 y(Mon)h(of)f(\(['a].)g
('a)h(->)g('a)f('T\))h(*)f(\(['a,'b].)g('a)h('T)f(->)h(\('a)f(->)h('b)f
('T\))h(->)f('b)h('T\);)0 1129 y FA(9.14)56 b(I/O)0 1222
y Fr(val)23 b(stdIn)191 b(:)23 b(instream)0 1279 y(val)g(stdOut)191
b(:)23 b(outstream)0 1335 y(val)g(stdErr)191 b(:)23 b(outstream)0
1391 y(val)g(openIn)167 b(:)23 b(string)g(->)h(instream)0
1448 y(val)f(openOut)143 b(:)23 b(string)g(->)h(outstream)0
1504 y(val)f(openAppend)71 b(:)23 b(string)g(->)h(outstream)0
1561 y(val)f(openString)71 b(:)23 b(string)g(->)h(instream)0
1617 y(val)f(closeOut)119 b(:)23 b(outstream)g(->)h(unit)0
1674 y(val)f(closeIn)143 b(:)23 b(instream)g(->)h(unit)0
1730 y(val)f(print)191 b(:)23 b(string)g(->)h(unit)0
1787 y(val)f(inputLine)95 b(:)23 b(instream)g(->)h(string)0
1843 y(val)f(outputString)g(:)g(\(outstream)g(*)h(string\))f(->)g(unit)
0 1900 y(val)g(flushOut)119 b(:)23 b(outstream)g(->)h(unit)0
1956 y(val)f(endOfStream)47 b(:)23 b(instream)g(->)h(bool)0
2012 y(val)f(cd)263 b(:)23 b(string)g(->)h(unit)0 2069
y(val)f(pwd)239 b(:)23 b(unit)h(->)f(string)0 2125 y(val)g(ls)263
b(:)23 b(unit)h(->)f(unit)0 2182 y(val)g(dir)239 b(:)23
b(unit)h(->)f(unit)95 b(\(*)24 b(synonym)f(of)g(ls)h(function)f(*\))0
2238 y(val)g(exit)215 b(:)23 b(unit)h(->)f(unit)0 2382
y FA(9.15)56 b(MetaML)18 b(System)e(in)n(terfaces)0 2475
y Fr(val)23 b(printEnv)119 b(:)23 b(unit)h(->)f(unit)167
b(\(*)23 b(describe)g(predefined)g(functions)f(*\))0
2531 y(val)h(use)239 b(:)23 b(string)g(->)h(unit)0 2588
y(val)f(show_type)47 b(:)24 b(bool)f(ref)310 b(\(*)23
b(to)h(print)f(types)g(in)h(more)f(detail)g(*\))0 2644
y(val)g(pp)215 b(:)24 b(['a].'a)46 b(->)24 b(unit)119
b(\(*)23 b(Attempts)g(to)h(print)f(anything)94 b(*\))0
2701 y(val)23 b(feature)g(:)h(int)g(->)f(bool)952 2825
y Fv(50)p eop
%%Page: 51 57
51 56 bop 0 286 a Fv(The)13 b(function)i Fr(feature)d
Fv(con)o(trols)h(optimizations)h(that)e(are)h(p)q(erformed)h(on)f(co)q
(de.)20 b(T)o(yp)q(e)13 b Fr(feature)23 b(0)13 b Fv(to)g(read)0
343 y(the)19 b(status)f(of)g(whether)h(these)g(optimizations)g(are)g(p)
q(erformed)g(or)f(not,)h(and)g(also)f(to)g(read)h(the)g(asso)q(ciated)0
399 y(in)o(teger)c(tag)g(that)f(switc)o(h)i(them)f(on)g(and)g(o\013.)0
520 y FA(9.16)56 b(General)17 b(functions)0 606 y Fr(val)23
b(op)h(o)167 b(:)24 b(['a,'b,'c].\(\('c)45 b(->)24 b('b)g(\))f(*)h
(\('a)47 b(->)24 b('c)f(\)\))h(->)g('a)47 b(->)24 b('b)0
662 y(val)f(K)239 b(:)24 b(['a,'b].'b)46 b(->)24 b('a)47
b(->)24 b('b)0 719 y(val)f(id)215 b(:)24 b(['a].'a)46
b(->)24 b('a)0 775 y(val)f(error)143 b(:)24 b(['a].string)e(->)i('a)0
832 y(val)f(Bottom)119 b(:)24 b(exn)0 888 y(val)f(bot)191
b(:)24 b(['a].'a)0 945 y(val)f(show)167 b(:)24 b(['a].'a)46
b(->)24 b(string)0 1065 y FA(9.17)56 b(Co)r(de)18 b(primitiv)n(es)0
1151 y Fr(val)23 b(lift)143 b(:)24 b(['a^].'a)46 b(->)24
b(<'a)f(>)0 1207 y(val)g(expand)95 b(:)24 b(['a].<'a)f(>)g(->)h(<'a)f
(>)0 1264 y(val)g(sc)191 b(:)24 b(['a].<'a)f(>)g(->)h(string)0
1320 y(val)f(showCode)47 b(:)24 b(['a].<'a)f(>)g(->)h(string)166
b(\(*)24 b(same)f(function)g(as)g(sc)h(*\))71 1420 y
Fv(The)10 b(function)i Fr(lift)e Fv(applies)i(to)e(t)o(yp)q(es)h(that)f
(are)g(liftable.)20 b(The)11 b(liftable)i(t)o(yp)q(es)d(corresp)q(ond)h
(to)f(the)h(equalit)o(y)0 1476 y(t)o(yp)q(es.)22 b Fr(expand)15
b Fv(attempts)g(to)g(inline)k(cross-stage)c(p)q(ersistence)i(v)m
(alues,)g(When)f(it)g(is)h(not)e(p)q(ossible)j(it)e(returns)0
1533 y(the)f(same)g(co)q(de.)21 b(See)15 b(section)h(8.4.)0
1653 y FA(9.18)56 b(Unsafe)19 b(functions)0 1739 y Fv(The)j(\014rst)g
(t)o(w)o(o)f(functions)i(b)q(elo)o(w)f(corresp)q(ond)h(to)e
Fn(shift)26 b Fv(and)c Fn(r)n(eset)k Fv(con)o(trol)c(op)q(erators,)g
(see)h(section)f(8.1.)0 1795 y(They)17 b(ha)o(v)o(e)e(an)i(unsafe)f(in)
o(teraction)h(with)g(co)q(de,)g(an)f(unexp)q(ectable)i(b)q(eha)o(vior)f
(migh)o(t)f(o)q(ccur)h(when)g(they)f(are)0 1852 y(com)o(bined.)29
b(The)18 b(function)h Fr(cast)e Fv(is)i(ob)o(viously)f(unsound)h(with)g
(resp)q(ect)f(to)f(the)h(t)o(yp)q(e)g(system,)g(its)g(use)g(will)0
1908 y(probably)e(pro)q(duce)g(a)f(run)g(time)h(error.)0
2008 y Fr(val)23 b(shift_prim)g(:)h(['a,'b].\(\('a)46
b(->)23 b('b)h(\))g(->)f('b)h(\))g(->)f('a)0 2064 y(val)g(reset_prim)g
(:)h(['a,'b].\(unit)e(->)h('b)h(\))g(->)f('b)0 2121 y(val)g(cast)167
b(:)24 b(['a,'b].'a)46 b(->)24 b('b)0 2177 y(val)f(force)119
b(:)24 b(['a,'b].<'b)46 b(->)24 b('a)f(>)h(->)g(<'b)f(>)h(->)f(<'a)h(>)
0 2233 y(val)f(is_code)71 b(:)24 b(['a].'a)47 b(->)23
b(bool)0 2290 y(val)g(is_lambda)g(:)h(['a,'b].<'a)46
b(->)24 b('b)f(>)h(->)g(bool)71 2389 y(force)18 b Fv(is)i(a)f(built-in)
j(function,)e(it)g(has)f(di\013eren)o(t)h(b)q(eha)o(vior)f(than)h(the)f
(follo)o(wing)h(function)g(whic)o(h)g(just)0 2446 y(builds)d(an)e
(application.)0 2545 y Fr(-|)24 b(fun)f(beta)g(f)h(x)g(=)47
b(<~f)24 b(~x>)0 2601 y(val)f(beta)h(=)f(Fn)48 b(:)24
b(['a,'b].<'b)46 b(->)23 b('a)h(>)g(->)f(<'b)h(>)g(->)f(<'a)h(>)0
2701 y Fv(The)15 b(follo)o(wing)h(example)g(demonstrates)f(this)g
(di\013erence:)952 2825 y(51)p eop
%%Page: 52 58
52 57 bop 0 286 a Fr(-|)24 b(force)47 b(<fn)23 b(x)h(=>)f(x)h(+)g(x)g
(>)f(<3+4>)g(;)24 343 y(val)g(it)h(=)g(<3)f(\045+)h(4)g(\045+)f(3)h
(\045+)f(4>)h(:)g(<int>)0 456 y(-|)g(beta)f(<fn)g(x)h(=>)g(x)f(+)h(x)g
(>)g(<3+4>)f(;)0 512 y(val)g(it)h(=)48 b(<\(\(fn)23 b(a)h(=>)f(a)h
(\045+)f(a\)\))h(\(3)f(\045+)h(4\)>)g(:)f(<int>)0 625
y(-|)h(let)f(val)g(f)h(=)g(<fn)f(x)h(=>)g(x)f(+)h(x)g(>)167
682 y(val)f(x)h(=)g(<3+4>)72 738 y(in)f(<~f)h(~x>)f(end;)0
795 y(val)g(it)h(=)g(<\(\(fn)f(a)h(=>)f(a)h(\045+)g(a\)\))f(\(3)h
(\045+)f(4\)>)h(:)f(<int>)0 907 y(-|)h(let)f(val)g(f)h(=)g(<fn)f(x)h
(=>)g(x)f(+)h(x)g(>)167 964 y(val)f(x)h(=)g(<3+4>)72
1020 y(in)f(force)g(f)h(x)g(end;)0 1077 y(val)f(it)h(=)g(<3)f(\045+)h
(4)g(\045+)f(3)h(\045+)g(4>)f(:)h(<int>)71 1191 y Fv(Ob)o(viously)c
(force)f(is)h(not)e(sound)i(with)f Fn(e\013e)n(cts)j
Fv(since)e(it)f(forces)g(the)g(application)i(of)e(its)g(\014rst)g
(argumen)o(t)0 1247 y(causing)c(duplication)i(of)d(the)h(its)f(second)h
(argumen)o(t.)k(This)c(mean)g(that)f(it)h(do)q(es)f(not)h(preserv)o(e)f
(the)h(seman)o(tics)0 1303 y(when)h(e\013ects)f(are)f(used.)21
b(The)15 b(safe-b)q(eta)h(optimization,)f(see)h(Section)g(5.1)e(do)q
(es)i(preserv)o(e)f(seman)o(tics.)71 1361 y(The)g(reify)h(function)g
(lifts)g(programs)e(at)g(lev)o(el)j(0)e(to)f(co)q(de)i(\(lev)o(el)g
(1\))0 1463 y Fr(val)23 b(reify)119 b(:)24 b(['a].)f('a)h(->)f(<a>)71
1562 y Fv(It)15 b(is)g(not)g(safe)f(to)h(reify)g(functions)h(that)e
(manipulate)i(co)q(de)g(or)e(do)h(in)o(ten)o(tional)h(analysis)g(on)f
(co)q(de.)20 b(Unex-)0 1619 y(p)q(ected)c(b)q(eha)o(vior)g(migh)o(t)f
(happ)q(en,)h(for)f(instance:)0 1734 y Fr(-|)24 b(reify)f(\()g(fn)h(x)g
(=>)f(is_code)g(x\))0 1791 y(val)g(it)h(=)0 1847 y(<\(fn)f(a)h(=>)g
(true\)>)47 b(:)23 b(<'1)48 b(->)23 b(bool>)0 1903 y(-|)h(reify)f(\(fn)
g(x)h(=>)g(show)f(x\))0 1960 y(val)g(it)h(=)0 2016 y(<\(fn)f(a)h(=>)g
("<x'566>"\)>)46 b(:)24 b(<'1)47 b(->)23 b(string>)0
2073 y(-|)h(reify)f(\(fn)g(x)h(=>)g(sc)f(x\);)0 2129
y(val)g(it)h(=)0 2186 y(<\(fn)f(a)h(=>)g("x'570"\)>)e(:)i(<<'1)f(>)h
(->)g(string>)71 2299 y Fv(Mixing)d(reify)g(and)g(in)o(tensional)i
(analyis)e(of)g(co)q(de)g(migh)o(t)g(corrupt)f(the)h(t)o(yp)q(e)g
(system.)36 b(The)21 b(follo)o(wing)0 2356 y(examples)16
b(demonstrate)e(this.)0 2471 y Fr(-|)24 b(reify)f(\(fn)g(x)h(=>)g(fn)f
(y)h(=>)f(force)h(x)f(y)h(\);)0 2528 y(val)f(it)h(=)g(<\(fn)f(a)h(=>)f
(a\)>)h(:)g(<<'1)47 b(->)23 b('2)h(>)g(->)f(<'1)h(>)f(->)h(<'2)f(>>)0
2641 y(-|)h(reify)f(\(fn)g(x)h(=>)g(reify)f(x\);)0 2697
y(val)g(it)h(=)48 b(<\(fn)23 b(a)h(=>)f(a\)>)h(:)f(<'1)48
b(->)23 b(<'1)h(>>)952 2825 y Fv(52)p eop
%%Page: 53 59
53 58 bop 0 286 a FA(9.19)56 b(Higher-Order)17 b(Logic)g(\(HOL\))h
(theorem)f(pro)n(v)n(er)h(functions)0 373 y Fr(val)23
b(haltsPrim)g(:)h(['a].<'a)f(>)g(->)h(bool)0 430 y(val)f(expEq)119
b(:)24 b(['a].<'a)f(>)g(->)h(<'a)f(>)h(->)g(bool)0 486
y(val)f(quant1)95 b(:)24 b(['a,'b].\(<'a)e(>)i(->)f('b)h(\))g(->)f('b)0
542 y(val)g(quant2)95 b(:)24 b(['a,'b,'c].\(<'a)e(>)h(->)h(<'b)f(>)h
(->)g('c)f(\))h(->)g('c)0 599 y(val)f(quant3)95 b(:)24
b(['a,'b,'c,'d].\(<'a)d(>)j(->)g(<'b)f(>)h(->)f(<'d)h(>)f(->)h('c)g(\))
f(->)h('c)0 655 y(val)f(verify1)g(:)h(['a].\(<'a)f(>)g(->)h(theorem\))f
(->)g(<'a)h(>)g(->)f(theorem)0 712 y(val)g(verify2)g(:)h(['a,'b].\(<'a)
e(>)i(->)g(<'b)f(>)h(->)f(theorem\))g(->)h(<'a)f(>)h(->)g(<'b)f(>)h(->)
f(theorem)0 768 y(val)g(Thm)119 b(:)24 b(\(<bool>)f(list)g(*)h
(<bool>\))f(->)h(theorem)0 825 y(val)f(box)119 b(:)24
b(['a].string)e(->)i('a)47 b(->)24 b('a)0 881 y(val)f(update)95
b(:)24 b(['a,'b].<'a)e(>)i(->)f(int)h(list)f(->)h(<'b)f(>)h(->)g(<'a)f
(>)0 938 y(val)g(get)167 b(:)24 b(['a,'b].<'a)e(>)i(->)f(int)h(list)f
(->)h(<'b)f(>)0 994 y(val)g(search)95 b(:)24 b(['a,'b].<'a)e(>)i(->)f
(<'b)h(>)g(->)f(int)h(list)f(list)0 1140 y Fu(References)0
1242 y Fv([Dan95])89 b(Olivier)12 b(Dan)o(vy)l(.)g(T)o(yp)q(e-directed)
g(partial)f(ev)m(aluation.)j(In)d Fn(Pr)n(o)n(c)n(e)n(e)n(dings)f(of)i
(the)g(A)o(CM)f(Symp)n(osium)244 1298 y(on)16 b(Principle)f(of)i(Pr)n
(o)n(gr)n(amming)e(L)n(anguages)p Fv(,)f(pages)h(242{257.)e(A)o(CM,)h
(1995.)0 1394 y([DF90])107 b(Olivier)14 b(Dan)o(vy)e(and)h(Andrzej)g
(Filinski.)18 b(Abstracting)13 b(con)o(trol.)i(In)e Fn(the)h(1990)h(A)o
(CM)e(Confer)n(enc)n(e)244 1450 y(on)j(Lisp)f(and)i(F)m(unctional)e(Pr)
n(o)n(gr)n(amming)p Fv(,)f(pages)h(151{160,)d(Nice,)k(F)l(rance,)f
(June)h(1990.)0 1546 y([Fil94])118 b(Andrzej)14 b(Filinski.)20
b(Represen)o(ting)c(monads.)h(In)e Fn(the)g(21st)g(A)o(CM)f
(SIGPLAN-SIGA)o(CT)e(Symp)n(o-)244 1602 y(sium)j(on)h(Principles)e(of)i
(Pr)n(o)n(gr)n(amming)f(L)n(anguages)p Fv(,)e(pages)i(446{457,)d(P)o
(ortland,)i(Oregon,)h(Jan)244 1659 y(1994.)0 1754 y([HPW92])60
b(P)o(aul)21 b(Hudak,)h(S.)f(L.)g(P)o(eyton)f(Jones,)j(and)e(Philip)i
(W)l(adler.)37 b(Rep)q(ort)22 b(on)f(the)g(programming)244
1811 y(language)g(hask)o(ell,)i(a)d(non-strict)h(purely-functional)j
(programming)c(language,)i(v)o(ersion)f(1.2.)244 1867
y Fn(SIGPLAN)14 b(Notic)n(es)p Fv(,)g(27\(5\),)f(Ma)o(y)i(1992.)0
1963 y([Jon93])101 b(Mark)12 b(P)l(.)h(Jones.)18 b(A)13
b(system)g(of)g(constructor)g(classes:)19 b(Ov)o(erloading)c(and)e
(implicit)j(higher-order)244 2019 y(p)q(olumorphism.)24
b(In)17 b Fn(FPCA'93:)22 b(Confer)n(enc)n(e)15 b(on)i(F)m(unctional)f
(Pr)n(o)n(gr)n(amming)h(L)n(anguages)f(and)244 2076 y(Computer)21
b(A)o(r)n(chite)n(ctur)n(e,)g(Cop)n(enhagen,)f(Denmark)p
Fv(,)h(pages)e(52{61,)h(New)f(Y)l(ork,)i(June)f(1993.)244
2132 y(A)o(CM)14 b(Press.)0 2228 y([Ler97])106 b(Xa)o(vier)17
b(Lero)o(y)l(.)27 b Fn(The)18 b(Caml)h(Light)f(system,)g(do)n
(cumentation)h(and)f(user's)g(guide,)i(r)n(e)n(alize)d(0.73)p
Fv(.)244 2284 y(h)o(ttp://pauillac.inria.fr/caml/man-caml/index.h)o
(tml,)f(1997.)0 2379 y([MTBS98])40 b(E.)15 b(Moggi,)g(W.)g(T)l(aha,)g
(Z.)g(Benaissa,)h(and)g(T.)f(Sheard.)22 b(An)16 b(idealized)i(MetaML:)d
(Simpler,)i(and)244 2436 y(more)i(expressiv)o(e)j(\(includes)g(pro)q
(ofs\).)34 b(T)l(ec)o(hnical)22 b(Rep)q(ort)e(CSE-98-017,)g(Oregon)h
(Graduate)244 2492 y(Institute,)15 b(Octob)q(er)h(1998.)i
Fr(ftp://cse.ogi.edu/pub/tech-rep)o(orts/)p Fv(.)0 2588
y([MTBS99])40 b(E.)15 b(Moggi,)g(W.)g(T)l(aha,)g(Z.)g(Benaissa,)h(and)g
(T.)f(Sheard.)22 b(An)16 b(idealized)i(MetaML:)d(Simpler,)i(and)244
2644 y(more)e(expressiv)o(e)h(\(includes)h(pro)q(ofs\).)i(In)d
Fn(Eur)n(op)n(e)n(an)g(Symp)n(osium)g(on)g(Pr)n(o)n(gr)n(amming)g
(\(ESOP\))p Fv(,)244 2701 y(v)o(olume)f(1576)f(of)h Fn(LNCS)p
Fv(.)e(Springer-V)l(erlag,)j(1999.)952 2825 y(53)p eop
%%Page: 54 60
54 59 bop 0 286 a Fv([MTHM97])21 b(Robin)d(Milner,)h(Mads)e(T)l(ofte,)g
(Rob)q(ert)h(Harp)q(er,)f(and)h(Da)o(vid)f(MacQueen.)28
b Fn(The)17 b(De\014nition)h(of)244 343 y(Standar)n(d)e(ML)f(\(R)n
(evise)n(d\))p Fv(.)j(MIT-Press,)d(1997.)0 442 y([NN93])104
b(Flemming)11 b(Nielson)h(and)f(Hanne)g(Riis)h(Nielson.)h(n)o(um)o(b)q
(er)e(34)f(in)i(cam)o(bridge)e(tracts)g(in)h(theoretical)244
498 y(computer)f(science.)k(In)d Fn(Two-level)g(functional)h(languages)
p Fv(.)d(Cam)o(bridge)i(Univ)o(ersit)o(y)g(Press,)f(1993.)0
597 y([OL96])109 b(Martin)16 b(Odersky)i(and)f(Konstan)o(tin)g(L\177)
-23 b(aufer.)25 b(Putting)17 b(t)o(yp)q(e)g(annotations)g(to)f(w)o
(ork.)24 b(In)18 b Fn(Pr)n(o)n(c.)244 654 y(23r)n(d)c(A)o(CM)e(Symp)n
(osium)h(on)g(Principles)f(of)i(Pr)n(o)n(gr)n(amming)e(L)n(anguages)p
Fv(,)g(pages)f(54{67,)g(Jan)o(uary)244 710 y(1996.)0
809 y([P)o(au96])94 b(La)o(wrence)19 b(C.)g(P)o(aulson.)32
b Fn(ML)20 b(for)g(the)g(Working)h(Pr)n(o)n(gr)n(ammer)f(\(2nd)f
(Edition\))p Fv(.)32 b(Cam)o(bridge)244 865 y(Univ)o(ersit)o(y)16
b(Press,)e(1996.)0 964 y([PH)78 948 y Fm(+)107 964 y
Fv(96])78 b(John)15 b(P)o(eterson,)f(Kevin)i(Hammond,)f(et)f(al.)20
b(Rep)q(ort)15 b(on)g(the)g(programming)f(language)h(hask)o(ell,)244
1021 y(a)k(non-strict)g(purely-functional)j(programming)d(language,)h
(v)o(ersion)f(1.3.)32 b(T)l(ec)o(hnical)21 b(rep)q(ort,)244
1077 y(Y)l(ale)16 b(Univ)o(ersit)o(y)l(,)f(Ma)o(y)g(1996.)0
1176 y([Plo75])106 b(G.)11 b(D.)g(Plotkin.)16 b(Call-b)o(y-name,)d
(call-b)o(y-v)m(alue-)i(and)d(the)h(lam)o(b)q(da-calculus.)k
Fn(The)n(or)n(etic)n(al)12 b(Com-)244 1232 y(puter)17
b(Scienc)n(e)p Fv(,)c(1:125{159,)f(1975.)0 1331 y([She97])102
b(Tim)19 b(Sheard.)32 b(A)20 b(t)o(yp)q(e-directed,)h(on-line)g
(partial)f(ev)m(aluator)f(for)f(a)h(p)q(olymorphic)i(language.)244
1388 y(In)14 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(A)o
(CM-SIGPLAN)d(Symp)n(osium)j(on)f(Partial)h(Evaluation)g(and)g
(semantic)244 1444 y(b)n(ase)n(d)g(pr)n(o)n(gr)n(am)i(manipulations)f
(PEPM'97,)f(A)o(mster)n(dam)p Fv(,)g(page)g(??)21 b(A)o(CM,)14
b(1997.)0 1543 y([SSJ98])99 b(Mark)14 b(Shields,)j(Tim)e(Sheard,)g(and)
h(Simon)f(P)o(eyton)g(Jones.)20 b(Dynamic)15 b(t)o(yping)h(through)e
(staged)244 1599 y(t)o(yp)q(e)19 b(inference.)32 b(In)20
b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)j(the)g(25th)g(A)o(CM)f
(SIGPLAN-SIGA)o(C)o(T)e(Symp)n(osium)i(on)244 1656 y(Principles)c(of)h
(Pr)n(o)n(gr)n(amming)g(L)n(anguages)p Fv(,)d(jan)i(1998.)0
1755 y([SW97])100 b(Amr)17 b(Sabry)h(and)h(Philip)h(W)l(adler.)29
b(A)18 b(re\015ection)h(on)f(call-b)o(y-v)m(alue.)31
b Fn(A)o(CM)18 b(T)m(r)n(ansactions)e(on)244 1811 y(Pr)n(o)n(gr)n
(amming)f(L)n(anguages)g(and)i(Systems)p Fv(,)c(9\(6\):916{941,)f(No)o
(v)i(1997.)0 1910 y([T)l(ah99])95 b(W)l(alid)23 b(T)l(aha.)42
b Fn(Multi-Stage)23 b(Pr)n(o)n(gr)n(amming:)34 b(Its)22
b(The)n(ory)h(and)g(Applic)n(ation)p Fv(.)41 b(PhD)23
b(thesis,)244 1967 y(Oregon)15 b(Graduate)f(Institute,)i(No)o(v)o(em)o
(b)q(er)f(1999.)0 2065 y([TBS98])82 b(W.)14 b(T)l(aha,)g(Z.)h
(Benaissa,)g(and)g(T.)f(Sheard.)20 b(Multi-stage)15 b(programming:)k
(Axiomatization)d(and)244 2122 y(t)o(yp)q(e-safet)o(y)l(.)j(In)d
Fn(25th)h(ICALP)p Fv(,)c(Aalb)q(org,)i(Denmark,)f(1998.)0
2221 y([TS97])114 b(W)l(alid)17 b(T)l(aha)e(and)i(Tim)f(Sheard.)23
b(Multi-stage)16 b(programming)f(with)h(explicit)j(annotations.)i(In)
244 2277 y Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)j(the)g(A)o(CM-SIGPLAN)d
(Symp)n(osium)j(on)g(Partial)g(Evaluation)g(and)g(semantic)244
2334 y(b)n(ase)n(d)15 b(pr)n(o)n(gr)n(am)i(manipulations)f(PEPM'97,)f
(A)o(mster)n(dam)p Fv(,)g(page)g(??)21 b(A)o(CM,)14 b(1997.)0
2433 y([W)l(ad90])81 b(Philip)17 b(W)l(adler.)k(Comprehending)c
(monads.)j Fn(Pr)n(o)n(c)n(e)n(e)n(dings)14 b(of)i(the)h(A)o(CM)e(Symp)
n(osium)i(on)f(Lisp)244 2489 y(and)g(F)m(unctional)f(Pr)n(o)n(gr)n(am)h
(ming,)g(Nic)n(e,)f(F)m(r)n(anc)n(e)p Fv(,)e(pages)i(61{78,)f(June)i
(1990.)0 2588 y([W)l(ad92])81 b(Philip)19 b(W)l(adler.)26
b(The)17 b(essence)h(of)e(functional)j(programming)d(\(in)o(vited)i
(talk\).)25 b(In)17 b Fn(19'th)i(A)o(CM)244 2644 y(Symp)n(osium)14
b(on)g(Principles)f(of)h(Pr)n(o)n(gr)n(amming)f(L)n(anguages)p
Fv(,)f(Albuquerque,)j(New)e(Mexico,)h(Jan-)244 2701 y(uary)h(1992.)952
2825 y(54)p eop
%%Page: 55 61
55 60 bop 0 286 a Fv([W)l(ad95])81 b(Philip)23 b(W)l(adler.)38
b(Monads)21 b(for)f(functional)j(programming.)37 b(In)22
b(J.)f(Jeuring)h(and)f(E.)g(Meijer,)244 343 y(editors,)i
Fn(A)n(dvanc)n(e)n(d)f(F)m(unctional)f(Pr)n(o)n(gr)n(amming)p
Fv(,)i(v)o(olume)f(925)f(of)h Fn(LNCS)p Fv(.)e(Springer)j(V)l(erlag,)
244 399 y(1995.)18 b(\(This)e(is)g(a)e(revised)j(v)o(ersion)e(of)g([)p
Ft(?)o Fv(].\).)0 493 y([W)l(ri95])99 b(A.)20 b(K.)h(W)l(righ)o(t.)36
b(Simple)23 b(imp)q(erativ)o(e)f(p)q(olymorphism.)38
b Fn(Lisp)21 b(and)g(Symb)n(olic)g(Computation)p Fv(,)244
550 y(8\(4\):343{35)o(6,)12 b(Decem)o(b)q(er)k(1995.)952
2825 y(55)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
