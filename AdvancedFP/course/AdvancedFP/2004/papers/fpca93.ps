%!PS-Adobe-2.0
%%Creator: dvips 5.495 Copyright 1986, 1992 Radical Eye Software
%%Title: fpca93.dvi
%%CreationDate: Thu Nov 10 14:19:56 1994
%%Pages: 10
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%EndComments
%DVIPSCommandLine: dvips -o fpca93.ps fpca93.dvi
%DVIPSSource:  TeX output 1993.05.12:1405
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask restore}B /D{/cc X dup
type /stringtype ne{]}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1
ne{dup dup length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}
B /I{cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage userdict
/eop-hook known{eop-hook}if}N /@start{userdict /start-hook known{start-hook}
if pop /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N 0 1 255
{IE S 1 string dup 0 3 index put cvn put}for 65781.76 div /vsize X 65781.76
div /hsize X}N /p{show}N /RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N
/ruley 0 N /v{/ruley X /rulex X V}B /V{}B /RV statusdict begin /product where{
pop product dup length 7 ge{0 7 getinterval dup(Display)eq exch 0 4
getinterval(NeXT)eq or}{pop false}ifelse}{false}ifelse end{{gsave TR -.1 -.1
TR 1 1 scale rulex ruley false RMat{BDot}imagemask grestore}}{{gsave TR -.1
-.1 TR rulex ruley scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{
gsave transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N
/tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{
p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos{/SS save
N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300
(/cs/u15g/archive/nott-fp/papers/fpca93.dvi) @start /Fa 1 88
df<FC3E1F301C06301C04301C041826081826080C43100C43100C43100681A00681A00781E003
00C00300C0180E7E8D1C>87 D E /Fb 9 121 df<0020004000C003C00CC00180018001800180
030003000300030006000600060006000C00FFC00B137C9212>49 D<007E1001C1300300E00400
60080060100060300040600000600000600000C00000C00000C00000C00080C001006001006002
0030040018180007E00014147B9318>67 D<00F1030F0406080208020802080008000F0007F000
F80018000C000C4008400840006010F0608F8010147D9313>83 D<7F83F80C00C0180080180080
180080180080300100300100300100300100600200600200600200600200C00400400400600800
6010003060000F800015147A9319>85 D<007C000C0018001800180018003007B00C7010703060
606060606060C0C0C0C8C0C841C862D03C700E147C9312>100 D<02060000000000384C4C8C98
181830326262643807147D930B>105 D<30F878590D8C4E0E0C9C0E0C980C0C180C0C180C0C30
181830181930183130183160303260301C180D7D8C1C>109 D<30F05B184C189C189818181818
183030303230623062606460380F0D7D8C13>I<071E09E311C221802180018001800300030403
044308C51078E0100D7F8C10>120 D E /Fc 1 49 df<181818303030606060C0C0050B7E8B09>
48 D E /Fd 3 62 df<07C01862303260326034C034C038C030403820DA1F0E0F0B7E8A14>11
D<10383048318032003C006FC0606060646064C068C0300E0B7E8A12>20
D<004000C00180018001800300030003000600060006000C000C000C0018001800180030003000
3000600060006000C000C0000A197D9210>61 D E /Fe 3 49 df<0C000C008C40EDC07F800C00
7F80EDC08C400C000C000A0B7D8B10>3 D<000020000010000008FFFFFFFFFFFF000008000010
00002018087D891E>33 D<081C1C3838383070706060C0C0060D7E8D09>48
D E /Ff 5 94 df<1F00318060C04040C060C060C060C060C060C060C060C060404060C031801F
000B107F8F0F>48 D<0C003C00CC000C000C000C000C000C000C000C000C000C000C000C000C00
FF8009107E8F0F>I<1F00618040C08060C0600060006000C00180030006000C00102020207FC0
FFC00B107F8F0F>I<F8F8C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0F8F805197E9209>
91 D<F8F8181818181818181818181818181818181818181818F8F80519809209>93
D E /Fg 23 118 df<00C001C0030006000C001C0038003000700070006000E000E000E000E000
E000E000E000600070007000300038001C000C000600030001C000C00A1D7A9914>40
D<8000C0006000300018001C000E00060007000700030003800380038003800380038003800300
0700070006000E001C00180030006000C0008000091D7C9914>I<01C00001C00001C00001C000
01C00001C00001C000FFFF80FFFF80FFFF8001C00001C00001C00001C00001C00001C00001C000
11117F9314>43 D<70F8FCFC7C0C1830E0C0060A798414>I<0300030007000F003F00F7004700
070007000700070007000700070007000700070007000700070007007FF07FF00C177C9614>49
D<0FC01FF03838701CE00EE00EE00E400E000E001C001C00380030007000E001C0030006000C00
180E300E7FFE7FFE0F177E9614>I<0FC01FF03838701C701C201C001C001C0038007007E007F0
0038001C000E000E400EE00EE00E701C78383FF00FC00F177E9614>I<00780000F80001B80001
B8000338000338000638000E38000C38001C3800383800303800703800E03800FFFF80FFFF8000
380000380000380000380000380001FF0001FF0011177F9614>I<70F8F8F87000000000000070
F8F8F8700510798F14>58 D<1FE03FF8701CE00EE00E400E003C007000E001C003800380038003
800300000000000000000003000780078003000F177E9614>63 D<07FC07FC0070007000700070
007000700070007000700070007000700070007000700070E070E070F0E07FC01F000E177D9614
>74 D<FF00FF003800380038003800380038003800380038003800380038003800380038003807
380738073807FFFFFFFF10177E9614>76 D<FFE0FFE0E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000FFE0FFE00B1D
799914>91 D<FFE0FFE000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E0FFE0FFE00B1D7F9914>93
D<04001F007FC0F1E0E0E00B057C9614>I<1FC0007FF000707800201800001C00001C0007FC00
1FFC003C1C00701C00E01C00E01C00E01C00707C003FFF800F8F8011107E8F14>97
D<07E00FF01C38301C700CE00EE00EFFFEFFFEE00060007000380E1C1E0FFC03F00F107E8F14>
101 D<007C00FE01CE03840380038003807FFEFFFE038003800380038003800380038003800380
0380038003807FFC7FFC0F177F9614>I<FB8E00FFDF003CF3803CF38038E38038E38038E38038
E38038E38038E38038E38038E38038E38038E380FEFBE0FE79E01310808F14>109
D<FCF800FDFE001F07001E03001C03801C01C01C01C01C01C01C01C01C01C01C01C01C03801E03
001F0E001DFC001CF8001C00001C00001C00001C00001C00001C0000FF8000FF80001218808F14
>112 D<0FD83FF86038C038C038F0007F803FF007F8001C6006E006F006F81CFFF8CFE00F107E
8F14>115 D<030007000700070007007FFCFFFC07000700070007000700070007000700070E07
0E070E070C03FC00F00F157F9414>I<FC3F00FC3F001C07001C07001C07001C07001C07001C07
001C07001C07001C07001C07001C07001C1F000FFFE003E7E01310808F14>I
E /Fh 21 122 df<00C003C0FFC0FFC003C003C003C003C003C003C003C003C003C003C003C003
C003C003C003C003C003C003C07FFE7FFE0F187D9716>49 D<0FF0003FFC00787E00FC1F00FC1F
80FC0F80FC0F80780F80001F80001F00001E00003C0000780000700000E0000180000301800601
800C01801003803FFF007FFF00FFFF00FFFF0011187E9716>I<07F0001FFC00383E007C3E007C
1F007C1F007C1F00383F00003E00003C0000780007F000003C00001E00001F00001F80781F80FC
1F80FC1F80FC1F00F81F00703E003FFC000FF00011187E9716>I<7FFFFF807FFFFF80781F0780
701F0380601F0180E01F01C0C01F00C0C01F00C0C01F00C0001F0000001F0000001F0000001F00
00001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F
0000001F000007FFFC0007FFFC001A1A7E991F>84 D<0FF0001C3C003E1E003E0E003E0F001C0F
00000F0000FF000FCF003E0F007C0F00F80F00F80F00F80F00F817007C27E01FC3E013117F9015
>97 D<03FC000F0E001C1F003C1F00781F00780E00F80000F80000F80000F80000F80000780000
7800003C01801C03000F060003FC0011117F9014>99 D<000FE0000FE00001E00001E00001E000
01E00001E00001E00001E003F9E00F07E01C03E03C01E07801E07801E0F801E0F801E0F801E0F8
01E0F801E07801E07801E03C01E01C03E00F0DFC03F9FC161A7F9919>I<03F0000E1C001C0E00
3C0700780700780780F80780F80780FFFF80F80000F800007800007800003C01801C03000E0600
03FC0011117F9014>I<00FE0003C700078F800F0F800F0F800F07000F00000F00000F0000FFF0
00FFF0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00
000F00007FE0007FE000111A80990E>I<FE0000FE00001E00001E00001E00001E00001E00001E
00001E00001E1F001E63C01E81C01F01E01F01E01E01E01E01E01E01E01E01E01E01E01E01E01E
01E01E01E01E01E01E01E0FFCFFCFFCFFC161A7F9919>104 D<3C007E007E007E007E003C0000
000000000000007E007E001E001E001E001E001E001E001E001E001E001E001E001E001E00FF80
FF80091B7F9A0D>I<FE00FE001E001E001E001E001E001E001E001E001E001E001E001E001E00
1E001E001E001E001E001E001E001E001E00FFC0FFC00A1A7F990D>108
D<FE1F01F000FE63C63C001E81C81C001F01F01E001F01F01E001E01E01E001E01E01E001E01E0
1E001E01E01E001E01E01E001E01E01E001E01E01E001E01E01E001E01E01E001E01E01E00FFCF
FCFFC0FFCFFCFFC022117F9025>I<FE1F00FE63C01E81C01F01E01F01E01E01E01E01E01E01E0
1E01E01E01E01E01E01E01E01E01E01E01E01E01E0FFCFFCFFCFFC16117F9019>I<03F8000E0E
003C07803803807803C07803C0F803E0F803E0F803E0F803E0F803E0F803E07803C07C07C03C07
800E0E0003F80013117F9016>I<FE7F00FFC3C01F01E01E00F01E00F81E00781E007C1E007C1E
007C1E007C1E007C1E00781E00F81E00F01F01E01F83C01E7F001E00001E00001E00001E00001E
0000FFC000FFC00016187F9019>I<FC78FC9C1D3E1D3E1E3E1E1C1E001E001E001E001E001E00
1E001E001E00FFC0FFC00F117F9012>114 D<1FB020704030C030C030F000FF807FE03FF807F8
003CC00CC00CE00CE008F830CFE00E117F9011>I<06000600060006000E000E001E003FF0FFF0
1E001E001E001E001E001E001E001E001E181E181E181E181E180F3003E00D187F9711>I<FF1F
E1F8FF1FE1F83C0780601E0780C01E07C0C01F0DC1C00F0DC1800F0DE1800798E3000798E30007
B8F70003F0760003F07E0001E03C0001E03C0001E03C0000C018001D117F9020>119
D<FF03F0FF03F01E01801E01801F03800F03000F070007860007860003CC0003CC0001FC0001F8
0001F80000F00000F00000600000600070C000F8C000F9C000F980007300003C000014187F9017
>121 D E /Fi 12 62 df<03E0000638101C1820381C20300E20700E40600E40E00E80E00E80E0
0F00E00E00C00E00E00E00603E0020C6401F038014107E8F19>11 D<0007800018600020600040
700080700080700100700100700200E00200C0023F80022300043F800401C00400C00401C00801
C00801C00801C0080180180380180300180700140E0022180021F0002000002000004000004000
0040000040000080000014217F9916>I<0C07000E0B801C33001C40001C80001D00003E00003F
E000387000383800703880703880703880703900E01900600E0011107E8F16>20
D<0F000003800001C00001C00001E00000E00000E00000F0000070000070000078000038000038
00003800003C00007C0000DC00019E00030E00060E000E0F001C0700380700700780E00380C003
C0121A7E9916>I<1FFFE03FFFE07FFFC06110008110000310000230000230000630000630000C
30000C38001C38001C3800383C0018180013107E8F16>25 D<007801C60306070306030E031C07
1C071C071C07380E380C381C3818747073C070007000E000E000E000E000C00010177E8F14>I<
03FFE007FFE00FFFC01C3C00381C00701C00601C00E01C00E01C00E01C00C03800C03800C07000
60600061C0001F000013107E8F16>I<1FFF803FFF807FFF006100008100000300000300000300
000600000600000600000E00000E00000E00001C00000C000011107E8F11>I<1E001027002047
804003804003C08001C10001C20001E40000E80000F00000E00000700000700000F00001780002
3800043800083800083C00101C00201E20400E4080078014177F8F18>31
D<60F0F06004047D830B>58 D<60F0F07010101020204080040B7D830B>I<0004000C00180018
001800300030003000600060006000C000C000C00180018001800300030003000600060006000C
000C000C00180018001800300030003000600060006000C000C0000E257E9B13>61
D E /Fj 19 111 df<0300030003000300E31C73381FE0078007801FE07338E31C030003000300
03000E107E9013>3 D<07801FE03FF07FF87FF8FFFCFFFCFFFCFFFCFFFCFFFC7FF87FF83FF01F
E007800E107E9013>15 D<007FFE03FFFE0780000C0000180000300000600000600000600000C0
0000C00000C00000C00000C000006000006000006000003000001800000C000007800003FFFE00
7FFE0000000000000000000000000000000000007FFFFE7FFFFE171F7D971E>18
D<7FFC007FFF800003C000006000003000001800000C00000C00000C0000060000060000060000
0600000600000C00000C00000C0000180000300000600003C07FFF807FFC000000000000000000
00000000000000000000FFFFFCFFFFFC171F7D971E>I<0F8000801FE000803FF0008070780180
E01C0380C00F07008007FE008003FC008000F80019097E8D1E>24 D<0400000004000000080000
001000000020000000FFFFFFFFFFFFFFFF2000000010000000080000000400000004000000200C
7D8E26>32 D<00000020000000002000000000100000000008000000000400FFFFFFFF80FFFFFF
FF8000000004000000000800000000100000000020000000002000210C7E8E26>I<0000100000
000018000000000C000000000C000000000600000000030000FFFFFF8000FFFFFFE00000000070
000000001E0000000007800000001E0000000038000000006000FFFFFFC000FFFFFF8000000003
0000000006000000000C000000000C00000000180000000010000021167E9326>41
D<007FE003FFE00780000C0000180000300000300000600000600000C00000C00000FFFFE0FFFF
E0C00000C000006000006000003000003000001800000C000007800003FFE0007FE013187D941A
>50 D<0000600000600000C00000C0000180000180000300000300000600000C00000C00001800
00180000300000300000600000600000C00000C000018000018000030000030000060000060000
0C0000180000180000300000300000600000600000C0000040000013227B9900>54
D<400010C000306000606000606000603000C03000C03000C01801801FFF800FFF000C03000C03
00060600060600060600030C00030C0001980001980001980000F00000F00000F0000060000060
00141A809915>56 D<000800000018000000180000001800000018000000180000001800000018
000000180000001800000018000000180000001800000018000000180000001800000018000000
180000001800000018000000180000001800000018000000180000FFFFFF80FFFFFF80191A7D99
1F>63 D<400008C00018C00018C00018C00018C00018C00018C00018C00018C00018C00018C000
18C00018C00018C00018C00018C000186000303000601E03C00FFF8001FC0015167E951A>91
D<01FC000FFF801E03C0300060600030C00018C00018C00018C00018C00018C00018C00018C000
18C00018C00018C00018C00018C00018C00018C00018C0001840000815167E951A>I<400000C0
0000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000FFFFC0FFFFC0C0
0000C00000C00000C00000C00000C00000C00000C00000C00000C00000C00000400000121A7E99
17>96 D<007001C0038007000700070007000700070007000700070007000700070007000E001C
00F0001C000E000700070007000700070007000700070007000700070007000700038001C00070
0C257D9B13>102 D<F0001C000E00070007000700070007000700070007000700070007000700
0700038001C0007001C0038007000700070007000700070007000700070007000700070007000E
001C00F0000C257D9B13>I<C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C002257C9B0B>106 D<C000C00060006000600030003000300018001800
18000C000C000C0006000600060003000300030001800180018000C000C000C000600060006000
3000300030001800180018000C00040E257E9B13>110 D E /Fk 66 127
df<0003FE000E03001C0700180600380000380000700000700000700000700007FFFC00E01C00
E03800E03800E03800E03801C07001C07001C07001C07001C0E403C0E40380E40380E403806803
8030030000070000070000660000E60000CC00007800001821819916>12
D<183C3C1C08080810204080060B78990C>39 D<000400180030006000C0008001800300030006
000E000C001C001800180038003000300070007000600060006000E000E000E000C000C000C000
C000C00060006000600020003000100008000E267B9B10>I<0040006000200030001000180018
001800180018001800180018001800180018003800380030003000700070006000E000C000C001
C0018003800300060006000C00180010002000400080000D267F9B10>I<183878380810102020
4080050B7D830C>44 D<FF80FF80FF0009037D880E>I<3078F06005047C830C>I<007C00018600
0303000603000C03801C03801C0380380380380380380380700700700700700700700700E00E00
E00E00E00E00E01C00E01C00E01800E0300060600030C0001F000011187C9714>48
D<000800180030007001F00E7000E000E000E000E001C001C001C001C003800380038003800700
0700070007000F00FFF00D187C9714>I<007C0001860002030004038004838008838010838010
83801083801107001207000C0E00001C000030000060000180000200000C00001001002001003C
060067FE00C1FC0080F00011187D9714>I<003E0000C3000101800201800481C00441C0088380
048380070300000600000C0001F000001800000C00000C00000E00000E00600E00E01C00E01C00
80380040300020E0001F800012187D9714>I<001F000060800180800303800603800E00001C00
0018000038000039F000721800740C00780E00700E00F00E00E00E00E00E00E00E00E01C00E01C
0060380060700030C0001F800011187C9714>54 D<003E0000C1000100800200C00600C00600C0
0E018007030007860003CC0001F00001F800067C000C3E00180E00300700600700600700C00600
C00600600C006018003070000FC00012187D9714>56 D<007C000186000703000E03000C03801C
0380380380380380380380380780380700380F001817000C270007CE00000E00000C00001C0000
1800E03000E0600080C000C380003E000011187C9714>I<060F1E0C00000000000000003078F0
6008107C8F0C>I<0000200000600000600000E00001E00001E000027000027000047000087000
087000107000107000207000207000407000807000FFF00100380100380200380400380400380C
00381C0038FF01FF181A7E991D>65 D<03FFF800700E00700600700700E00700E00700E00700E0
0701C00E01C01C01C03801C07003FFE003807003803803801C07001C07001C07001C07001C0E00
380E00380E00700E00E01C03C0FFFF00181A7D991B>I<000F8200706200C01603801E07000C0E
000C1C000C18000C380008300008700000700000E00000E00000E00000E00000E00020E00020E0
0020E000406000406000803001001006000C180003E000171A7A991B>I<03FFF80000700E0000
7007000070030000E0018000E0018000E0018000E001C001C001C001C001C001C001C001C001C0
03800380038003800380038003800300070007000700070007000E0007000C000E001C000E0038
000E0070000E00E0001C038000FFFE00001A1A7D991D>I<03FFFF00700700700300700100E001
00E00100E00100E00101C08001C08001C08001C18003FF00038100038100038100070200070004
0700040700080E00080E00180E00100E00301C00E0FFFFE0181A7D991A>I<03FFFF0070070070
0300700100E00100E00100E00100E00101C08001C08001C08001C18003FF000381000381000381
000702000700000700000700000E00000E00000E00000E00001E0000FFE000181A7D9919>I<00
0FC100302100C01301800F0700060E00060C0006180006380004300004700000700000E00000E0
0000E00000E007FEE00070E00070E00070E000706000E06000E03000E01801E00C064003F84018
1A7A991E>I<03FF1FF800700380007003800070038000E0070000E0070000E0070000E0070001
C00E0001C00E0001C00E0001C00E0003FFFC0003801C0003801C0003801C000700380007003800
07003800070038000E0070000E0070000E0070000E0070001C00E000FFC7FE001D1A7D991D>I<
01FF8000380000380000380000700000700000700000700000E00000E00000E00000E00001C000
01C00001C00001C0000380000380000380000380000700000700000700000700000E0000FFE000
111A7E990F>I<00FFC0000E00000E00000E00001C00001C00001C00001C000038000038000038
0000380000700000700000700000700000E00000E00000E00000E00061C000E1C000E180008380
004700003C0000121A7C9914>I<03FF07F0007001C0007001000070020000E0040000E0080000
E0100000E0400001C0800001C1000001C2000001C70000038F00000397000003C3800003838000
070380000701C0000701C0000701C0000E00E0000E00E0000E00E0000E00F0001C00F000FFC3FC
001C1A7D991D>I<03FF8000700000700000700000E00000E00000E00000E00001C00001C00001
C00001C0000380000380000380000380000700000700100700100700200E00200E00600E00400E
00C01C0380FFFF80141A7D9918>I<03F8001FC00078003C000078003C000078005C0000B800B8
0000B800B800009C013800009C013800011C027000011C027000011C047000011C087000021C08
E000021C10E000021C10E000021C20E000041C41C000041C41C000041C81C000041C81C000080F
038000080F038000080E038000180C038000380C070000FF083FF000221A7D9922>I<03F007F8
007801C00078008000780080009C0100009C0100009C0100008E0100010E020001060200010702
00010702000203840002038400020384000201C4000401C8000401C8000400E8000400E8000800
F00008007000080070001800700038002000FF0020001D1A7D991D>I<001F8000706001C03003
001806001C0E000C1C000C18000E38000E30000E70000E70000EE0001CE0001CE0001CE00038E0
0038E00030E00070E000E0E000C06001807003003806001C1C0007E000171A7A991D>I<03FFF8
00701C00700600700700E00700E00700E00700E00701C00E01C00E01C01C01C03803807003FF80
0380000380000700000700000700000700000E00000E00000E00000E00001C0000FFC000181A7D
991A>I<001F8000706001C03003801807001C0E000C1C000C18000E38000E30000E70000E7000
0EE0001CE0001CE0001CE00018E00038E00030E00070E00060E0E0C06111807213003A16001E1C
0007F0200010200010600010400038C0003F80001F00000E0017217A991D>I<03FFF000701C00
700E00700700E00700E00700E00700E00701C00E01C01C01C03801C0E003FF800380C003806003
80700700700700700700700700700E00E00E00E00E00E10E00E21C0062FFC03C181A7D991C>I<
003F1000609001807001007003002006002006002006002006000007000007C00003F80001FE00
007F00000F80000380000180000180200180200180600300600300600600700C00C8180087E000
141A7D9916>I<3FFFFC381C0C201C04401C044038048038048038048038040070000070000070
0000700000E00000E00000E00000E00001C00001C00001C00001C0000380000380000380000380
00078000FFF800161A79991B>I<7FE0FF0E00380E00100E00101C00201C00201C00201C002038
0040380040380040380040700080700080700080700080E00100E00100E00100E00200E00200E0
04006008006010003860000F8000181A78991D>I<FF803F801C001C001C0008001C0010001C00
10001C0020001C0040001E0040000E0080000E0080000E0100000E0200000E0200000E0400000E
0C00000E0800000E10000007100000072000000740000007400000078000000780000007000000
0600000006000000191A78991D>I<FF87FC3FC03C00E006001C00E004001C00E004001C01E008
001C03E008001C02E010001C04E030001C04E020001C08E040001C08E040001C10E080001C10E0
80001C20E100001C20E100001C40E200001C40E200001C80E400001D80E400001D00E800001E00
F800001E00F000001C00E000001C00E000001800C000001800C00000221A789926>I<01FF07F8
003C01C000380100003C0200001C0600001C0C00001E0800000E1000000E200000074000000780
000007800000038000000780000007C0000009C0000011C0000020E0000040E0000080E0000180
70000100700002007800040038001C007800FF01FF001D1A7E991D>I<03CC0E2E181C381C301C
701CE038E038E038E038C072C072C07260F261341E180F107C8F14>97 D<7E000E000E000E001C
001C001C001C00380038003BC03C307830701870187018E038E038E038E038C070C060C0E060C0
63801E000D1A7C9912>I<01F006080C181838301070006000E000E000E000E000E008E0106020
30C01F000D107C8F12>I<001F80000380000380000380000700000700000700000700000E0000
0E0003CE000E2E00181C00381C00301C00701C00E03800E03800E03800E03800C07200C07200C0
720060F2006134001E1800111A7C9914>I<01E006181C08380870087010FFE0E000E000E000E0
00E0086010602030C01F000D107C8F12>I<000700001980001B80003B00003000003000007000
00700000700000700007FF0000E00000E00000E00000E00000E00001C00001C00001C00001C000
01C000038000038000038000038000038000070000070000070000660000E40000CC0000700000
112181990C>I<00F300038B800607000E07000C07001C0700380E00380E00380E00380E00301C
00301C00301C00183C0018780007B800003800003800007000607000E0E000C1C0007F00001117
7E8F12>I<1F80000380000380000380000700000700000700000700000E00000E00000E7C000F
86001E07001E07001C07001C0700380E00380E00380E00381C00701C80701C80703880703900E0
1900600E00111A7E9914>I<030706000000000000384C4E8E9C9C1C3838707272E2E464380819
7C980C>I<000C000E000C00000000000000000000000000E00130023804380438043800700070
0070007000E000E000E000E001C001C001C001C003806380E700CE0078000F2081980C>I<1F80
03800380038007000700070007000E000E000E0E0E131C271C431C801F003C003F8039C038E070
E270E270E270E4E0646038101A7E9912>I<3F0707070E0E0E0E1C1C1C1C3838383870707070E4
E4E4E46830081A7D990A>I<307C1E00598663009E0783809E0703809C0703809C070380380E07
00380E0700380E0700380E0E00701C0E40701C0E40701C1C40701C1C80E0380C80601807001A10
7C8F1F>I<307C005986009E07009E07009C07009C0700380E00380E00380E00381C00701C8070
1C80703880703900E01900600E0011107C8F16>I<01F006180C0C180E300E700E600EE00EE00E
E00CE01CE018E030606030C01F000F107C8F14>I<030F000590C009E0C009C06009C06009C060
0380E00380E00380E00380E00701C00701800703800703000E8E000E78000E00000E00001C0000
1C00001C00001C0000FF00001317808F14>I<03C20E2E181C381C301C701CE038E038E038E038
C070C070C07060F061E01EE000E000E001C001C001C001C01FF00F177C8F12>I<30F059189E38
9C189C009C0038003800380038007000700070007000E00060000D107C8F10>I<03E004300830
187018601C001F801FC00FE000E00060E060E06080C041803E000C107D8F10>I<06000E000E00
0E000E001C001C00FFC01C0038003800380038007000700070007000E100E100E100E200640038
000A177C960D>I<38064C074E0E8E0E9C0E9C0E1C1C381C381C381C7039703970393079389A0F
0C10107C8F15>I<38184C1C4E1C8E0C9C0C9C0C1C08380838083808701070107020304018C00F
000E107C8F12>I<380C304C0E384E1C388E1C189C1C189C1C181C381038381038381038381070
702070702070704030704018B8800F0F0015107C8F19>I<078F0008D18010F38020E18020E000
20E00001C00001C00001C00001C000038200038200C38200E78400C5880078F00011107E8F12>
I<38064C074E0E8E0E9C0E9C0E1C1C381C381C381C703870387038307838F00F700070006060E0
E1C0C18047003C0010177C8F13>I<038207C40FFC100810100020004001800300040008081008
20187FF043E081C00F107E8F10>I<0C103E2063C083800C04779814>126
D E /Fl 81 127 df<00FC7C0183C607078E0607040E07000E07000E07000E07000E07000E0700
FFFFF00E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E07000E0700
0E07000E07007F0FF0171A809916>11 D<00FC000182000703000607000E02000E00000E00000E
00000E00000E0000FFFF000E07000E07000E07000E07000E07000E07000E07000E07000E07000E
07000E07000E07000E07000E07007F0FE0131A809915>I<00FF000387000707000607000E0700
0E07000E07000E07000E07000E0700FFFF000E07000E07000E07000E07000E07000E07000E0700
0E07000E07000E07000E07000E07000E07000E07007F9FE0131A809915>I<007E1F8001C17040
0703C060060380E00E0380400E0380000E0380000E0380000E0380000E038000FFFFFFE00E0380
E00E0380E00E0380E00E0380E00E0380E00E0380E00E0380E00E0380E00E0380E00E0380E00E03
80E00E0380E00E0380E00E0380E07F8FE3FC1E1A809920>I<60F0F868080808101020C0050B7D
990B>39 D<00800100020004000C00080018003000300030006000600060006000E000E000E000
E000E000E000E000E000E000E0006000600060006000300030003000180008000C000400020001
00008009267D9B0F>I<8000400020001000180008000C00060006000600030003000300030003
8003800380038003800380038003800380038003000300030003000600060006000C0008001800
100020004000800009267E9B0F>I<000C0000000C0000000C0000000C0000000C0000000C0000
000C0000000C0000000C0000000C0000000C0000000C0000FFFFFF80FFFFFF80000C0000000C00
00000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C
0000191A7E951E>43 D<60F0F07010101020204080040B7D830B>I<FFC0FFC00A0280880D>I<60
F0F06004047D830B>I<0004000C00180018001800300030003000600060006000C000C000C001
80018001800300030003000600060006000C000C000C0018001800180030003000300060006000
6000C000C0000E257E9B13>I<078018603030303060186018E01CE01CE01CE01CE01CE01CE01C
E01CE01CE01CE01CE01C6018601870383030186007800E187E9713>I<03000700FF0007000700
070007000700070007000700070007000700070007000700070007000700070007000700FFF00C
187D9713>I<0F80106020304038803CC01CE01C401C003C003800380070006000C00180010002
0004040804100430083FF87FF8FFF80E187E9713>I<0F8010E020706078703820380078007000
70006000C00F8000E000700038003C003CE03CE03CC03C4038407030E00F800E187E9713>I<00
300030007000F000F001700370027004700C7008701070307020704070C070FFFF007000700070
00700070007007FF10187F9713>I<30183FF03FE03FC02000200020002000200027C038602030
00380018001C001C401CE01CE01C80184038403030E00F800E187E9713>I<01E006100C181838
3038300070006000E000E7C0E860F030F018E018E01CE01CE01C601C601C701830183030186007
C00E187E9713>I<40007FFE7FFC7FFC4008801080108020004000400080018001800100030003
000300030007000700070007000700070002000F197E9813>I<07801860303020186018601860
1870103C303E600F8007C019F030F86038401CC00CC00CC00CC00C6008201018600FC00E187E97
13>I<07801860303070306018E018E018E01CE01CE01C601C603C303C185C0F9C001C00180018
003870307060604021801F000E187E9713>I<60F0F060000000000000000060F0F06004107D8F
0B>I<60F0F060000000000000000060F0F0701010102020408004177D8F0B>I<FFFFFF80FFFFFF
80000000000000000000000000000000000000000000000000FFFFFF80FFFFFF80190A7E8D1E>
61 D<007F00000180C000060030000800080010000400203E020020E1020041C0810043807100
83807080870070808700708087007080870070808700708087007080838070804380708041C0F1
0020E13100203E1E0010000000080000000600038001803E00007FE000191A7E991E>64
D<000C0000000C0000000C0000001E0000001E0000003F00000027000000270000004380000043
8000004380000081C0000081C0000081C0000100E0000100E00001FFE000020070000200700006
007800040038000400380008001C0008001C001C001E00FF00FFC01A1A7F991D>I<FFFF000E01
C00E00E00E00700E00780E00780E00780E00780E00780E00F00E00E00E03C00FFF800E01E00E00
700E00780E003C0E003C0E003C0E003C0E003C0E00380E00780E00F00E01E0FFFF80161A7E991B
>I<003F0201C0C603002E0E001E1C000E1C0006380006780002700002700002F00000F00000F0
0000F00000F00000F000007000027000027800023800041C00041C00080E000803003001C0C000
3F00171A7E991C>I<FFFF000E01C00E00E00E00300E00380E001C0E001C0E000E0E000E0E000F
0E000F0E000F0E000F0E000F0E000F0E000F0E000F0E000E0E000E0E001E0E001C0E00380E0038
0E00700E01C0FFFF00181A7E991D>I<FFFFF00E00700E00300E00100E00180E00080E00080E00
080E04000E04000E04000E0C000FFC000E0C000E04000E04000E04000E00040E00040E00080E00
080E00080E00180E00380E0070FFFFF0161A7E991A>I<FFFFE00E00E00E00600E00200E00300E
00100E00100E00100E04000E04000E04000E0C000FFC000E0C000E04000E04000E04000E00000E
00000E00000E00000E00000E00000E00000E0000FFF000141A7E9919>I<003F020001C0C60003
002E000E001E001C000E001C00060038000600780002007000020070000200F0000000F0000000
F0000000F0000000F0000000F001FFC070000E0070000E0078000E0038000E001C000E001C000E
000E000E000300160001C06600003F82001A1A7E991E>I<FFE7FF0E00700E00700E00700E0070
0E00700E00700E00700E00700E00700E00700E00700FFFF00E00700E00700E00700E00700E0070
0E00700E00700E00700E00700E00700E00700E0070FFE7FF181A7E991D>I<FFE00E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E00FFE00B1A7F990E>I<1FFC00E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E040E0E0E0E0E041C061801E000E1A7D9914>I<FFE07F800E001E
000E0018000E0010000E0020000E0040000E0080000E0100000E0200000E0400000E0800000E1C
00000E2E00000E4E00000E8700000F0380000E0380000E01C0000E00E0000E00E0000E0070000E
0070000E0038000E001C000E003E00FFE0FF80191A7E991E>I<FFF0000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E
00200E00200E00200E00600E00400E00400E00C00E03C0FFFFC0131A7E9918>I<FF0003FC0F00
03C00F0003C00B8005C00B8005C00B8005C009C009C009C009C009C009C008E011C008E011C008
E011C0087021C0087021C0083841C0083841C0083841C0081C81C0081C81C0081C81C0080F01C0
080F01C0080F01C0080601C01C0601C0FF861FFC1E1A7E9923>I<FE01FF0F00380F00100B8010
0B801009C01008E01008E010087010087010083810081C10081C10080E10080E10080710080390
0803900801D00801D00800F00800700800700800301C0030FF8010181A7E991D>I<007F000001
C1C000070070000E0038001C001C003C001E0038000E0078000F0070000700F0000780F0000780
F0000780F0000780F0000780F0000780F0000780F000078078000F0078000F0038000E003C001E
001C001C000E0038000700700001C1C000007F0000191A7E991E>I<FFFF000E03C00E00E00E00
700E00700E00780E00780E00780E00780E00700E00700E00E00E03C00FFF000E00000E00000E00
000E00000E00000E00000E00000E00000E00000E00000E0000FFE000151A7E991A>I<007F0000
01C1C000070070000E0038001C001C003C001E0038000E0078000F0070000700F0000780F00007
80F0000780F0000780F0000780F0000780F0000780F00007807000070078000F0038000E003C1C
1E001C221C000E4138000741F00001E1C000007F80800001C0800000C0800000E1800000FF0000
007F0000003E0000001C0019217E991E>I<FFFC00000E0780000E01C0000E00E0000E00F0000E
00F0000E00F0000E00F0000E00F0000E00E0000E01C0000E0780000FFC00000E0600000E030000
0E0180000E01C0000E01C0000E01C0000E01E0000E01E0000E01E0000E01E0800E00F0800E0071
00FFE03E00191A7E991C>I<0FC21836200E6006C006C002C002C002E00070007E003FE01FF807
FC003E000E00070003800380038003C002C006E004D81887E0101A7E9915>I<7FFFFF00701C07
00401C0100401C0100C01C0180801C0080801C0080801C0080001C0000001C0000001C0000001C
0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C000000
1C0000001C0000001C0000001C000003FFE000191A7F991C>I<FFE1FF0E00380E00100E00100E
00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E00100E
00100E00100E001006002007002003004001804000C180003E00181A7E991D>I<FF801FC01E00
0F001C0006000E0004000E000400070008000700080007000800038010000380100003C0300001
C0200001C0200000E0400000E0400000E040000070800000708000003900000039000000390000
001E0000001E0000001E0000000C0000000C00001A1A7F991D>I<FF83FF0FF03C007801C01C00
7800801C007800800E007801000E007801000E009C010007009C020007009C020007010E020007
010E020003810E04000382070400038207040001C207080001C403880001C403880000E4039000
00E403900000E801D000007801E000007801E000007000E000007000E000003000C00000200040
00241A7F9927>I<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0FEFE07257D9B0B>91 D<FEFE0606060606060606060606060606060606060606060606
06060606060606060606FEFE0725809B0B>93 D<183C66C38108057B9813>I<18204040808080
B0F87830050B7E990B>96 D<3F8070C070E020700070007007F01C7030707070E070E071E071E0
F171FB1E3C10107E8F13>I<FC00001C00001C00001C00001C00001C00001C00001C00001C0000
1C00001CF8001F0E001E07001C03801C01801C01C01C01C01C01C01C01C01C01C01C01C01C0380
1C03001E07001B0C0010F000121A7F9915>I<07F80C1C381C30087000E000E000E000E000E000
E0007000300438080C1807E00E107F8F11>I<007E00000E00000E00000E00000E00000E00000E
00000E00000E00000E0003CE000C3E00380E00300E00700E00E00E00E00E00E00E00E00E00E00E
00E00E00600E00700E00381E001C2E0007CFC0121A7F9915>I<07C01C3030187018600CE00CFF
FCE000E000E000E0006000300438080C1807E00E107F8F11>I<01F0031807380E100E000E000E
000E000E000E00FFC00E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE0
0D1A80990C>I<0FCE187330307038703870387038303018602FC02000600070003FF03FFC1FFE
600FC003C003C003C0036006381C07E010187F8F13>I<FC00001C00001C00001C00001C00001C
00001C00001C00001C00001C00001CF8001D0C001E0E001E0E001C0E001C0E001C0E001C0E001C
0E001C0E001C0E001C0E001C0E001C0E001C0E00FF9FC0121A7F9915>I<18003C003C00180000
0000000000000000000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C00FF80091A80990A>I<018003C003C001800000000000000000000000000FC001C001C001C0
01C001C001C001C001C001C001C001C001C001C001C001C001C001C001C041C0E180E3007E000A
2182990C>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C3F80
1C1E001C18001C10001C20001C40001DC0001FE0001CE0001C70001C78001C38001C1C001C1E00
1C1F00FF3FC0121A7F9914>I<FC001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C00FF80091A80990A>I<FC7C1F001D8E
63801E0781C01E0781C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C
0701C01C0701C01C0701C01C0701C0FF9FE7F81D107F8F20>I<FCF8001D0C001E0E001E0E001C
0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E00FF9FC012107F8F
15>I<07E01C38300C700E6006E007E007E007E007E007E0076006700E381C1C3807E010107F8F
13>I<FCF8001F0E001E07001C03801C03801C01C01C01C01C01C01C01C01C01C01C01C01C0380
1C03001E07001F0C001CF0001C00001C00001C00001C00001C00001C0000FF800012177F8F15>
I<03C2000C2600381E00300E00700E00E00E00E00E00E00E00E00E00E00E00E00E00700E00700E
00381E001C2E0007CE00000E00000E00000E00000E00000E00000E00007FC012177F8F14>I<FC
E01D701E701E201C001C001C001C001C001C001C001C001C001C001C00FFC00C107F8F0F>I<1F
2060E04020C020C020F0007F003FC01FE000F080708030C030C020F0408F800C107F8F0F>I<04
00040004000C000C001C003C00FFC01C001C001C001C001C001C001C001C001C201C201C201C20
1C200E4003800B177F960F>I<FC7E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E
001C0E001C0E001C0E001C0E001C1E000C2E0007CFC012107F8F15>I<FF1F803C06001C04001C
04001E0C000E08000E080007100007100007900003A00003A00001C00001C00001C00000800011
107F8F14>I<FF3F9F803C0E0700380E06001C1604001C1704001E170C000E2308000E2388000F
239800074190000741D00003C1E0000380E0000380E0000180C0000100400019107F8F1C>I<FF
3F803C1C001C18000E100007200007600003C00001C00001E00003E00002700004380008380018
1C00381E00FC3FC012107F8F14>I<FF1F803C06001C04001C04001E0C000E08000E0800071000
07100007900003A00003A00001C00001C00001C000008000008000010000010000E10000E20000
E4000078000011177F8F14>I<7FF86070407040E041C041C00380070007000E081C081C083810
70107030FFF00D107F8F11>I<FFFFC01201808913>I<1C103E2047C083800C047D9813>126
D E /Fm 43 123 df<0003C003F7E007F7E00FF7E01F13C01F00001F00001F00001F00001F0000
7FF3E0FFF3E0FFF3E01F03E01F03E01F03E01F03E01F03E01F03E01F03E01F03E01F03E01F03E0
1F03E01F03E01F03E00F03E0131B809A16>12 D<F8F8F8F8F8307060E005097D840B>44
D<F8F8F8F8F805057D840B>46 D<01C003C01FC0FFC0FFC067C007C007C007C007C007C007C007
C007C007C007C007C007C007C007C007C007C007C07FFCFFFC7FFC0E1A7D9915>49
D<0FE01FF03FFC7FFEF87EF03F603F201F001F003F003F003E007C007C00F801F003E007800F00
0E001C0038007FFFFFFFFFFF7FFF101A7E9915>I<0FE03FF87FFCFFFC707E407E003E007E007E
00FC07F807F007F8007E003E003F003F003F003F403F603FF87EFFFE7FFC3FF80FE0101A7E9915
>I<00FC0000FC0001FC0003FC0003BC0007BC00073C000F3C000F3C001E3C001E3C003C3C003C
3C00783C00783C00F03C00FFFFC0FFFFC0FFFFC0FFFFC0003C00003C00003C00003C00003C0000
3C00121A7F9915>I<1FFF003FFF003FFF003FFF003E00003E00003E00003E00003E00003E0000
3FF8003FFC003FFE003E1F001C1F80001F80001F80001F80201F80601F80701F80F83F007FFF00
3FFE001FFC0007F000111A7F9915>I<01F007F81FF81FF83F087C007C007800F800F8F0FBFCFF
FEFE3EFC1FF81FF81FF81FF81FF81F781F7C1F7C3E3FFE1FFC0FF807E0101A7E9915>I<00FC00
01FE0001FE0003FF0003FF0003DF0007DF8007DF80079F80078F800F8FC00F8FC00F0FC01F07E0
1F07E01E07E03E03F03FFFF03FFFF07FFFF87C01F87C01F8F800FCF800FCF800FCF0007C161A7E
991B>65 D<007FC003FFF00FFFF01FFFF03FC0603F00207F00007E00007E0000FC0000FC0000FC
0000FC0000FC0000FC0000FC0000FC00007E00007E00007F00003F00083FC0781FFFF80FFFF803
FFF0007F80151A7E991A>67 D<7FFE00FFFFC0FFFFE0FC07F0FC03F8FC01F8FC00FCFC00FCFC00
7EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007EFC007CFC00FCFC00FCFC01
F8FC07F0FFFFE0FFFFC07FFE00171A7C991E>I<007F8003FFF00FFFF81FFFF83FC0783F00307E
00007E00007E0000FC0000FC0000FC0000FC0000FC07F8FC07F8FC07F8FC07F87E00F87E00F87E
00F83F00F83FC0F81FFFF80FFFF803FFF0007F80151A7E991B>71 D<78003CF800FCF801F8F803
E0F807C0F80F80F81F00F83E00F87C00F8F800F9F000FBF000FFF800FFFC00FF7C00FE7E00FC3F
00F81F00F80F80F80FC0F807C0F803E0F803F0F801F0F800F87800F8161A7C991D>75
D<7E0007F0FF000FF0FF000FF0FF000FF0FF801FF0F7801DF0F7801DF0F7C03DF0F3C039F0F3C0
39F0F3E079F0F3E079F0F1E071F0F1F0F1F0F1F0F1F0F0F0E1F0F0F9E1F0F0F9E1F0F079C1F0F0
79C1F0F079C1F0F03F81F0F03F81F0F01F01F0F01F01F0700E01F01C1A7C9925>77
D<7FFC00FFFF00FFFF80FC0FC0FC07E0FC07E0FC07E0FC07E0FC07E0FC07E0FC0FC0FFFF80FFFF
00FFFC00FCFC00FC7E00FC7E00FC3F00FC3F00FC1F80FC1F80FC0FC0FC0FC0FC07E0FC07E07C03
E0131A7C991A>82 D<07F8001FFE003FFF007FFF007C0F00F80200F80000F80000FC0000FF8000
7FF8007FFC003FFF000FFF0007FF80007FC0000FC00007C00007C04007C0F007C0FC0F80FFFF80
7FFF001FFE0007F800121A7E9917>I<7FFFFFFFFFFFFFFFFFFFFFFF007E00007E00007E00007E
00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E
00007E00007E00007E00007E00003E00181A7F991B>I<7C01F0FC01F0FC01F0FC01F0FC01F0FC
01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC01F0FC
01F0FC01F07C01E07E03E03F07C03FFFC00FFF0003FC00141A7C991D>I<0FF03FFC3FFE381F20
1F001F00FF0FFF3F1F7C1FF81FF81FF81FFC7F7FFF3F9F1F1F10117F9014>97
D<780000F80000F80000F80000F80000F80000F80000F80000F80000F8F800FBFE00FFFF00FC1F
00F81F80F80F80F80F80F80F80F80F80F80F80F80F80F80F80F81F00FC3F00FFFE00FBFC0079F0
00111A7E9915>I<07F81FFE3FFE7C0E7C00F800F800F800F800F800F800F8007C027E0E3FFE1F
FE07F80F117F9012>I<000F80000F80000F80000F80000F80000F80000F80000F80000F800FCF
801FFF803FFF807E1F807C0F80F80F80F80F80F80F80F80F80F80F80F80F80F80F807C0F807C1F
803FFF801FEF800FCF80111A7F9915>I<07F01FFC3FFE7C1E780FF80FF80FFFFFFFFFF800F800
F80078007E033FFF1FFF03FC10117F9013>I<01FC07FC0FFC1F041F001F001F001F001F007FE0
FFE0FFE01F001F001F001F001F001F001F001F001F001F001F001F001F000F000E1A80990D>I<
0FE1C03FFFC07FFDC07C7C00F83E00F83E00F83E00F83E00F83E007C7C007FFC003FF8006FE000
6000007FFC007FFF003FFF807FFFC0F007C0F003C0F003C0F807C07FFF803FFF000FFC0012197F
9015>I<7800F800F800F800F800F800F800F800F800F8FCF9FEFBFFFE1FFC1FF81FF81FF81FF8
1FF81FF81FF81FF81FF81FF81FF81F781F101A7E9915>I<7CFCFCFCFCFC000000003C7C7C7C7C
7C7C7C7C7C7C7C7C7C7C7C3C061B7F9A0A>I<7000F000F000F000F000F000F000F000F000F07C
F0F8F1F8F3F0F7E0FFC0FF80FF80FF80FFC0FBE0F1E0F1F0F0F8F07CF03C703C0E1A7D9914>
107 D<78F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F878051A7E990A>I<78FC1F
80F9FE3FC0FBFF7FE0FE1FC3E0FC1F83E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F
03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0780F01E01B117E9020>I<78FCF9FEFBFF
FE1FFC1FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81F781F10117E9015>I<07F8001F
FE003FFF007E1F807C0F80F807C0F807C0F807C0F807C0F807C0F807C0F807C07C0F807E1F803F
FF001FFE0007F80012117F9015>I<78F800FBFE00FFFF00FC3F00F81F80F80F80F80F80F80F80
F80F80F80F80F80F80F80F80F81F00FC3F00FFFE00FBFC00F9F000F80000F80000F80000F80000
F80000F8000078000011187E9015>I<78C0FBC0FFC0FFC0FE00FC00F800F800F800F800F800F8
00F800F800F800F80078000A117E900E>114 D<1FC03FF07FF0F070F000F000FF007FE03FF01F
F003F80078C078F078FFF07FE01FC00D117F9010>I<1E003E003E003E003E007FE0FFE0FFE03E
003E003E003E003E003E003E003E003E003E003E203FF01FF00FC00C167F950F>I<781FF81FF8
1FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF87FFFFF7F9F3F1F10117E9015>I<E007F0
0FF00F781E781E781E3C3C3C3C3C3C1E781E781E780FF00FF00FF007E007E010117F9013>I<E0
3E0380F07F0780F07F0780F07F078078F70F0078E78F0078E78F0078E78F003CE39E003DC39E00
3DC3DE003DC3DE001FC3DC001FC1FC001F81FC001F81FC000F00F80019117F901C>I<F01EF81E
7C3C3E781EF80FF007E007C003C007E00FF01E701E783C3C781EF81FF00F10117F9013>I<F007
F80F780F781E3C1E3C1E1E3C1E3C1E3C0F380F78077007F003F003E001E001E001C001C003C087
80FF80FF00FC0010187F9013>I<3FFC7FFC7FFC00F801F001F003E007C007800F801F003E003E
007C00FFFCFFFCFFFC0E117F9012>I E /Fn 17 122 df<7FFF00FFFF80FFFF807FFF0011047D
8F18>45 D<3078FCFC78300606778518>I<007C0001FE0007FF000F87801E03C03C1DC0387FC0
70FFE071E3E071C1E0E1C1E0E380E0E380E0E380E0E380E0E380E0E380E0E1C1C071C1C071E3C0
70FF80387F003C1C001E00E00F83E007FFC001FF80007E00131C7E9B18>64
D<1FE0003FF8007FFC00781E00300E0000070000070000FF0007FF001FFF007F0700780700E007
00E00700E00700F00F00781F003FFFF01FFBF007E1F014147D9318>97 D<01FE0007FF001FFF80
3E0780380300700000700000E00000E00000E00000E00000E00000E000007000007001C03801C0
3E03C01FFF8007FF0001FC0012147D9318>99 D<001F80003F80001F8000038000038000038000
038000038003E3800FFB801FFF803C1F80380F80700780700380E00380E00380E00380E00380E0
0380E00380700780700780380F803C1F801FFFF00FFBF803E3F0151C7E9B18>I<01F00007FC00
1FFE003E0F00380780700380700380E001C0E001C0FFFFC0FFFFC0FFFFC0E000007000007001C0
3801C03E03C01FFF8007FF0001FC0012147D9318>I<0038007C007C007C003800000000000000
000FFC1FFC0FFC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C6038F078FFF07FE03F800E277E9C18>106
D<FE0000FE0000FE00000E00000E00000E00000E00000E00000E3FF00E7FF00E3FF00E07800E0F
000E1E000E3C000E78000EF0000FF8000FFC000F9C000F0E000E0F000E07000E03800E03C0FFC7
F8FFC7F8FFC7F8151C7F9B18>I<7FE000FFE0007FE00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E0007FFFC0FFFFE07FFFC0131C7E9B18>I<7CE0E000FFFBF8007FFFF800
1F1F1C001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C
001C1C1C001C1C1C001C1C1C001C1C1C007F1F1F00FFBFBF807F1F1F001914819318>I<7E3E00
FEFF807FFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E00E00E00E00E00E07FC3FCFFE7FE7FC3FC1714809318>I<01F0000FFE001FFF003E0F803803
807001C07001C0E000E0E000E0E000E0E000E0E000E0F001E07001C07803C03C07803E0F801FFF
000FFE0001F00013147E9318>I<7F87E0FF9FF07FBFF803F87803F03003E00003C00003C00003
80000380000380000380000380000380000380000380000380007FFE00FFFF007FFE0015147F93
18>114 D<07F7003FFF007FFF00780F00E00700E00700E007007C00007FE0001FFC0003FE0000
1F00600780E00380E00380F00380F80F00FFFF00FFFC00E7F00011147D9318>I<7E07E0FE0FE0
7E07E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E01E00F03E007FFFC03FFFE01FCFC1714809318>117 D<7F8FF0FF8FF87F8FF00E01C00E0380
0E0380070380070700070700038700038600038E0001CE0001CE0000CC0000CC0000DC00007800
00780000780000700000700000700000F00000E00079E0007BC0007F80003F00001E0000151E7F
9318>121 D E /Fo 41 122 df<70F8FCFC74040404080810102040060E7C840D>44
D<FFC0FFC00A027F8A0F>I<70F8F8F87005057C840D>I<03F0000E1C001C0E0018060038070070
0380700380700380700380F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0F0
03C0F003C0F003C0F003C07003807003807003807807803807001806001C0E000E1C0003F00012
1F7E9D17>48 D<018003800F80F380038003800380038003800380038003800380038003800380
03800380038003800380038003800380038003800380038007C0FFFE0F1E7C9D17>I<03F0000C
1C00100E00200700400780800780F007C0F803C0F803C0F803C02007C00007C000078000078000
0F00000E00001C0000380000700000600000C0000180000300000600400C00401800401000803F
FF807FFF80FFFF80121E7E9D17>I<1803001FFE001FFC001FF8001FE000100000100000100000
10000010000010000011F000161C00180E001007001007800003800003800003C00003C00003C0
7003C0F003C0F003C0E00380400380400700200600100E000C380003E000121F7E9D17>53
D<007C000182000701000E03800C07801C0780380300380000780000700000700000F1F000F21C
00F40600F80700F80380F80380F003C0F003C0F003C0F003C0F003C07003C07003C07003803803
803807001807000C0E00061C0001F000121F7E9D17>I<03F0000C0C0010060030030020018060
01806001806001807001807803003E03003F06001FC8000FF00003F80007FC000C7E00103F0030
0F806003804001C0C001C0C000C0C000C0C000C0C000806001802001001002000C0C0003F00012
1F7E9D17>56 D<FFFFE0000F80380007801E0007801F0007800F0007800F8007800F8007800F80
07800F8007800F8007800F0007801F0007801E0007803C0007FFF00007803C0007801E0007800F
0007800F8007800780078007C0078007C0078007C0078007C0078007C00780078007800F800780
0F0007801F000F803C00FFFFF0001A1F7E9E20>66 D<000FC040007030C001C009C0038005C007
0003C00E0001C01E0000C01C0000C03C0000C07C0000407C00004078000040F8000000F8000000
F8000000F8000000F8000000F8000000F8000000F8000000F8000000780000007C0000407C0000
403C0000401C0000401E0000800E000080070001000380020001C0040000703800000FC0001A21
7D9F21>I<FFFFE0000F803C0007801E000780070007800380078003C0078001E0078001E00780
01F0078000F0078000F0078000F8078000F8078000F8078000F8078000F8078000F8078000F807
8000F8078000F8078000F0078000F0078000F0078001E0078001E0078003C00780038007800700
07800E000F803C00FFFFE0001D1F7E9E23>I<FFF8FFF80F800F8007800F0007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007FFFF
0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F000780
0F0007800F0007800F0007800F0007800F000F800F80FFF8FFF81D1F7E9E22>72
D<0FFFC0007C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C
00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00203C00F83C00F83C
00F83C00F0380040780040700030E0000F800012207E9E17>74 D<FF80001FF80F80001F800780
001F0005C0002F0005C0002F0005C0002F0004E0004F0004E0004F000470008F000470008F0004
70008F000438010F000438010F000438010F00041C020F00041C020F00041C020F00040E040F00
040E040F00040E040F000407080F000407080F000407080F000403900F000403900F000401E00F
000401E00F000401E00F000E00C00F001F00C01F80FFE0C1FFF8251F7E9E2A>77
D<FF803FF807C007C007C0038005E0010005E0010004F001000478010004780100043C0100043C
0100041E0100040F0100040F010004078100040781000403C1000401E1000401E1000400F10004
00F1000400790004003D0004003D0004001F0004001F0004000F0004000700040007000E000300
1F000300FFE001001D1F7E9E22>I<001F800000F0F00001C0380007801E000F000F000E000700
1E0007803C0003C03C0003C07C0003E0780001E0780001E0F80001F0F80001F0F80001F0F80001
F0F80001F0F80001F0F80001F0F80001F0F80001F0780001E07C0003E07C0003E03C0003C03C00
03C01E0007800E0007000F000F0007801E0001C0380000F0F000001F80001C217D9F23>I<FFFF
E0000F80780007801C0007801E0007800F0007800F8007800F8007800F8007800F8007800F8007
800F8007800F0007801E0007801C000780780007FFE00007800000078000000780000007800000
0780000007800000078000000780000007800000078000000780000007800000078000000FC000
00FFFC0000191F7E9E1F>I<07E0800C1980100780300380600180600180E00180E00080E00080
E00080F00000F000007800007F00003FF0001FFC000FFE0003FF00001F800007800003C00003C0
0001C08001C08001C08001C08001C0C00180C00380E00300F00600CE0C0081F80012217D9F19>
83 D<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F0010800F0010800F0010
800F0010000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00
00000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F
0000001F800007FFFE001C1F7E9E21>I<FFFC3FF80FC007C00780038007800100078001000780
010007800100078001000780010007800100078001000780010007800100078001000780010007
800100078001000780010007800100078001000780010007800100078001000780010003800200
0380020001C0020001C0040000E008000070180000382000000FC0001D207E9E22>I<FFF003FF
1F8000F80F8000600780004007C0004003E0008001E0008001F0010000F0030000F80200007C04
00003C0400003E0800001E0800001F1000000FB0000007A0000007C0000003C0000003C0000003
C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000007C00000
7FFE00201F7F9E22>89 D<1FE000303000781800781C00300E00000E00000E00000E0000FE0007
8E001E0E00380E00780E00F00E10F00E10F00E10F01E10781E103867200F83C014147E9317>97
D<03F80E0C1C1E381E380C70007000F000F000F000F000F000F00070007000380138011C020E0C
03F010147E9314>99 D<03F0000E1C001C0E00380700380700700700700380F00380F00380FFFF
80F00000F00000F000007000007000003800801800800C010007060001F80011147F9314>101
D<007C00C6018F038F07060700070007000700070007000700FFF0070007000700070007000700
0700070007000700070007000700070007000700070007007FF01020809F0E>I<1C003E003E00
3E001C000000000000000000000000000E007E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E00FFC00A1F809E0C>105 D<0E0000FE00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E0FF00E03C00E03000E02000E04000E
08000E10000E30000E70000EF8000F38000E1C000E1E000E0E000E07000E07800E03800E03C00E
03E0FFCFF815207F9F18>107 D<0E00FE000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFE0
0B20809F0C>I<0E1F01F000FE618618000E81C81C000F00F00E000F00F00E000E00E00E000E00
E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E
00E00E000E00E00E000E00E00E000E00E00E000E00E00E00FFE7FE7FE023147F9326>I<0E3E00
FE43000E81800F01C00F01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C0FFE7FC16147F9319>I<01F800070E001C03803801C03801
C07000E07000E0F000F0F000F0F000F0F000F0F000F0F000F07000E07000E03801C03801C01C03
80070E0001F80014147F9317>I<0E3E00FEC3800F01C00F00E00E00E00E00F00E00700E00780E
00780E00780E00780E00780E00780E00700E00F00E00E00F01E00F01C00EC3000E3E000E00000E
00000E00000E00000E00000E00000E00000E0000FFE000151D7F9319>I<0E78FE8C0F1E0F1E0F
0C0E000E000E000E000E000E000E000E000E000E000E000E000E000E00FFE00F147F9312>114
D<1F9030704030C010C010C010E00078007F803FE00FF00070803880188018C018C018E030D060
8F800D147E9312>I<020002000200060006000E000E003E00FFF80E000E000E000E000E000E00
0E000E000E000E000E000E080E080E080E080E080610031001E00D1C7F9B12>I<0E01C0FE1FC0
0E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E03C00603C0030DC001F1FC16147F9319>I<FF83F81E01E01C00C00E00800E00800E00
8007010007010003820003820003820001C40001C40001EC0000E80000E8000070000070000070
0000200015147F9318>I<FF9FE1FC3C0780701C0300601C0380200E0380400E0380400E03C040
0707C0800704C0800704E080038861000388710003C8730001D0320001D03A0000F03C0000E01C
0000E01C0000601800004008001E147F9321>I<7FC3FC0F01E00701C007018003810001C20000
E40000EC00007800003800003C00007C00004E000087000107000303800201C00601E01E01E0FF
07FE1714809318>I<FF83F81E01E01C00C00E00800E00800E0080070100070100038200038200
03820001C40001C40001EC0000E80000E800007000007000007000002000002000004000004000
004000F08000F08000F100006200003C0000151D7F9318>I E /Fp 22 122
df<FFFEFFFEFFFE0F037F8E14>45 D<78FCFCFCFC78000000000000000000000000000078FCFC
FCFC78061A7B9911>58 D<00001800000000180000000018000000003C000000003C000000003C
000000007E000000007E00000000FF000000009F000000009F000000011F800000010F80000001
0F8000000207C000000207C000000207C000000403E000000403E000000403E000000801F00000
0801F000001801F800001000F800001000F800002000FC000020007C00003FFFFC00007FFFFE00
0040003E000040003E000080001F000080001F000080001F000100000F800100000F800100000F
8002000007C007000007C01F80000FE0FFF000FFFFFFF000FFFF282A7EA92D>65
D<01FC00000E0780001001C0003C00E0003E00F0003E0078001C00780008007800000078000000
780000007800007FF80003E078000F8078001F0078003E0078007C00780078007820F8007820F8
007820F8007820F800F8207C00F8203C013C401F063FC007F80F001B1A7E991E>97
D<007F8001C0700780080F003C1E007C3C007C3C00387C0010780000F80000F80000F80000F800
00F80000F80000F80000F800007800007C00003C00043C00041E00080F001007802001C0C0007F
00161A7E991B>99 D<00000F000001FF000001FF0000001F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00003F0F0001
C0CF0003802F000F001F001E001F001C000F003C000F007C000F0078000F0078000F00F8000F00
F8000F00F8000F00F8000F00F8000F00F8000F00F8000F0078000F0078000F003C000F003C000F
001E001F000E002F0007004F8001C18FF8007E0FF81D2A7EA921>I<007E0003C3800700E00E00
F01C00703C00783C003878003C78003CF8003CF8003CFFFFFCF80000F80000F80000F80000F800
007800007C00003C00043C00041E00080E001007002001C0C0007F00161A7E991B>I<001F0000
70C000E1E001C3E003C3E00381C007808007800007800007800007800007800007800007800007
8000078000FFFE00FFFE0007800007800007800007800007800007800007800007800007800007
800007800007800007800007800007800007800007800007800007800007800007800007C000FF
FE00FFFE00132A7FA912>I<0000078001FC1840070721C00E03C1C01E03C0803C01E0003C01E0
007C01F0007C01F0007C01F0007C01F0007C01F0003C01E0003C01E0001E03C0000E0380001707
000011FC0000300000003000000030000000380000001C0000001FFFC0000FFFF80007FFFC001C
003E0030000F007000070060000380E0000380E0000380E0000380E00003807000070070000700
38000E000C0018000780F00000FF80001A287E9A1E>I<07800000FF800000FF8000000F800000
078000000780000007800000078000000780000007800000078000000780000007800000078000
0007800000078000000783F800078C1C0007900E0007A0070007A0078007C0078007C007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800780078007800780078007800780FFFCFFFCFFFCFFFC1E2A7FA9
21>I<0F001F801F801F801F800F0000000000000000000000000000000000000007807F807F80
0F8007800780078007800780078007800780078007800780078007800780078007800780078007
800780FFF8FFF80D297FA811>I<0780FF80FF800F800780078007800780078007800780078007
800780078007800780078007800780078007800780078007800780078007800780078007800780
07800780078007800780078007800780FFFCFFFC0E2A7FA911>108 D<0781F800FC00FF860E03
0700FF98070C03800FA0079003C007A003D001E007C003E001E007C003E001E0078003C001E007
8003C001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C0
01E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E0078003C001E007
8003C001E0078003C001E0078003C001E0FFFC7FFE3FFFFFFC7FFE3FFF301A7F9933>I<0783F8
00FF8C1C00FF900E000FA0070007A0078007C0078007C007800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800780FFFCFFFCFFFCFFFC1E1A7F9921>I<007F000001C1C00007
0070000E0038001C001C003C001E003C001E0078000F0078000F00F8000F80F8000F80F8000F80
F8000F80F8000F80F8000F80F8000F80F8000F8078000F0078000F003C001E003C001E001E003C
000E0038000700700001C1C000007F0000191A7E991E>I<0783F000FF8C1C00FFB00F0007A007
8007C003C0078003E0078001E0078001F0078001F0078000F8078000F8078000F8078000F80780
00F8078000F8078000F8078000F0078001F0078001F0078001E0078003C007C003C007C0078007
A00E0007983C000787E00007800000078000000780000007800000078000000780000007800000
078000000780000007800000FFFC0000FFFC00001D267F9921>I<0787C0FF98E0FF91F00FA1F0
07C1F007C0E007C000078000078000078000078000078000078000078000078000078000078000
07800007800007800007800007800007800007C000FFFE00FFFE00141A7F9917>114
D<07F8401C06C03001C06000C06000C0E00040E00040F00040F800007E00007FF0003FFE000FFF
0003FF80003FC00007C08001E08001E0C000E0C000E0C000E0E000C0F001C0F80180C4070083F8
00131A7E9918>I<0080000080000080000080000180000180000180000380000380000780000F
80001FFF80FFFF8007800007800007800007800007800007800007800007800007800007800007
800007800007800007804007804007804007804007804007804007804003C08001C08000E10000
3E0012257FA417>I<07800780FF80FF80FF80FF800F800F800780078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
800780078007800780078007800F8007800F800380178001C027C000E047FC003F87FC1E1A7F99
21>I<FFF00FF8FFF00FF80F8003C0078003800780010003C0020003C0020003E0020001E00400
01E0040000F0080000F0080000F818000078100000781000003C2000003C2000003E6000001E40
00001E4000000F8000000F8000000700000007000000070000000200001D1A7F9920>I<FFF00F
F8FFF00FF80F8003C0078003800780010003C0020003C0020003E0020001E0040001E0040000F0
080000F0080000F818000078100000781000003C2000003C2000003E6000001E4000001E400000
0F8000000F80000007000000070000000700000002000000020000000400000004000000040000
0008000070080000F8100000F8100000F8200000F0400000608000001F0000001D267F9920>
121 D E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 553 42 a Fp(A)20 b(system)d(of)j(constructor)g(classes:)288
117 y(o)n(v)n(erloading)f(and)i(implicit)c(higher-order)j(p)r(olymorphism)827
231 y Fo(Mark)15 b(P)l(.)g(Jones)468 288 y(Y)l(ale)h(Univ)o(ersit)o(y)l(,)f
(Departmen)o(t)g(of)f(Computer)h(Science,)400 344 y(P)l(.O.)f(Bo)o(x)h(2158)f
(Y)l(ale)i(Station,)f(New)g(Ha)o(v)o(en,)g(CT)g(06520-2158.)708
401 y Fn(jones-mark@cs.yale.edu)-76 638 y Fm(Abstract)-76 727
y Fl(This)f(pap)q(er)f(describ)q(es)h(a)f(\015exible)i(t)o(yp)q(e)e(system)g
(whic)o(h)h(com)o(bines)-76 769 y(o)o(v)o(erloading)g(and)f(higher-order)g(p)
q(olymorphism)h(in)f(an)f(implicitly)-76 810 y(t)o(yp)q(ed)19
b(language)h(using)f(a)f(system)h(of)e Fk(c)n(onstructor)f(classes)i
Fl({)g(a)-76 852 y(natural)d(generalization)h(of)d(t)o(yp)q(e)g(classes)h(in)
g(Hask)o(ell.)-76 904 y(W)m(e)19 b(presen)o(t)g(a)f(wide)h(range)h(of)e
(examples)i(whic)o(h)f(demonstrate)-76 945 y(the)12 b(usefulness)i(of)e(suc)o
(h)h(a)f(system.)17 b(In)12 b(particular,)i(w)o(e)e(sho)o(w)g(ho)o(w)-76
987 y(constructor)f(classes)g(can)f(b)q(e)g(used)g(to)g(supp)q(ort)h(the)f
(use)g(of)f(monads)-76 1028 y(in)14 b(a)f(functional)i(language.)-76
1080 y(The)f(underlying)i(t)o(yp)q(e)e(system)g(p)q(ermits)g(higher-order)i
(p)q(olymor-)-76 1122 y(phism)g(but)g(retains)g(man)o(y)f(of)g(man)o(y)g(of)g
(the)g(attractiv)o(e)h(features)-76 1163 y(that)f(ha)o(v)o(e)f(made)h(the)f
(use)h(of)f(Hindley/Miln)q(er)j(t)o(yp)q(e)d(systems)h(so)-76
1205 y(p)q(opular.)k(In)12 b(particular,)i(there)e(is)h(an)f(e\013ectiv)o(e)h
(algorithm)h(whic)o(h)-76 1246 y(can)d(b)q(e)f(used)h(to)g(calculate)h
(principal)h(t)o(yp)q(es)e(without)g(the)g(need)f(for)-76 1288
y(explicit)18 b(t)o(yp)q(e)e(or)g(kind)h(annotations.)27 b(A)16
b(protot)o(yp)q(e)g(implemen-)-76 1329 y(tation)e(has)f(b)q(een)g(dev)o(elop)
q(ed)i(pro)o(viding,)g(amongst)e(other)g(things,)-76 1371 y(the)f(\014rst)g
(concrete)g(implemen)o(tation)j(of)d(monad)g(comprehensions)-76
1412 y(kno)o(wn)i(to)f(us)g(at)g(the)g(time)h(of)e(writing.)-76
1521 y Fm(1)41 b(An)14 b(overloaded)e Fk(map)j Fm(function)-76
1610 y Fl(Man)o(y)f(functional)h(programs)f(use)f(the)g Fk(map)i
Fl(function)f(to)f(apply)h(a)-76 1651 y(function)d(to)f(eac)o(h)g(of)f(the)h
(elemen)o(ts)h(in)f(a)g(giv)o(en)h(list.)17 b(The)9 b(t)o(yp)q(e)i(and)-76
1693 y(de\014nition)18 b(of)c(this)i(function)g(as)g(giv)o(en)g(in)f(the)g
(Hask)o(ell)i(standard)-76 1734 y(prelude)e([6])d(are)h(as)g(follo)o(ws:)81
1813 y Fk(map)212 b Fl(::)40 b(\()p Fk(a)14 b Fj(!)d Fk(b)r
Fl(\))f Fj(!)h Fl([)p Fk(a)s Fl(])f Fj(!)h Fl([)p Fk(b)r Fl(])81
1855 y Fk(map)16 b(f)21 b Fl([)6 b(])130 b(=)37 b([)7 b(])81
1896 y Fk(map)16 b(f)21 b Fl(\()p Fk(x)15 b Fl(:)c Fk(xs)s
Fl(\))36 b(=)h Fk(f)22 b(x)15 b Fl(:)10 b Fk(map)16 b(f)21
b(xs)-76 1976 y Fl(It)12 b(is)h(w)o(ell)h(kno)o(wn)f(that)f(the)h
Fk(map)h Fl(function)g(satis\014es)g(the)e(familiar)-76 2018
y(la)o(ws:)128 2059 y Fk(map)j(id)171 b Fl(=)37 b Fk(id)128
2101 y(map)15 b(f)22 b Fi(:)13 b Fk(map)j(g)40 b Fl(=)d Fk(map)16
b Fl(\()p Fk(f)21 b Fi(:)14 b Fk(g)s Fl(\))-76 2165 y(A)g(category)h
(theorist)g(will)h(recognize)g(these)f(observ)n(ations)h(as)f(in-)-76
2207 y(dicating)j(that)d(there)g(is)h(a)g(functor)f(from)g(t)o(yp)q(es)h(to)f
(t)o(yp)q(es)h(whose)-76 2249 y(ob)r(ject)f(part)g(maps)g(an)o(y)g(giv)o(en)h
(t)o(yp)q(e)f Fk(a)i Fl(to)e(the)f(list)i(t)o(yp)q(e)f([)p
Fk(a)s Fl(])f(and)-76 2290 y(whose)d(arro)o(w)g(part)g(maps)g(eac)o(h)g
(function)h Fk(f)19 b Fl(::)10 b Fk(a)j Fj(!)e Fk(b)i Fl(to)d(the)h(func-)-76
2332 y(tion)k Fk(map)i(f)k Fl(::)12 b([)p Fk(a)s Fl(])g Fj(!)i
Fl([)p Fk(b)r Fl(].)20 b(A)14 b(functional)i(programmer)g(will)f(rec-)-76
2373 y(ognize)h(that)e(similar)i(constructions)g(are)e(also)h(used)g(with)g
(a)f(wide)1020 638 y(range)19 b(of)f(other)g(data)h(t)o(yp)q(es,)h(as)e
(illustrated)j(b)o(y)e(the)f(follo)o(wing)1020 680 y(examples:)1039
755 y Fh(data)c Fk(T)m(r)n(e)n(e)j(a)166 b Fl(=)37 b Fk(L)n(e)n(af)21
b(a)27 b Fj(j)d Fk(T)m(r)n(e)n(e)16 b(a)d Fl(:)r(^)q(:)e Fk(T)m(r)n(e)n(e)16
b(a)1039 809 y(mapT)m(r)n(e)n(e)234 b Fl(::)41 b(\()p Fk(a)13
b Fj(!)e Fk(b)r Fl(\))g Fj(!)g Fl(\()p Fk(T)m(r)n(e)n(e)16
b(a)d Fj(!)e Fk(T)m(r)n(e)n(e)17 b(b)r Fl(\))1039 850 y Fk(mapT)m(r)n(e)n(e)f
(f)21 b Fl(\()p Fk(L)n(e)n(af)g(x)5 b Fl(\))37 b(=)g Fk(L)n(e)n(af)21
b Fl(\()p Fk(f)g(x)5 b Fl(\))1039 892 y Fk(mapT)m(r)n(e)n(e)16
b(f)21 b Fl(\()p Fk(l)15 b Fl(:)r(^:)c Fk(r)t Fl(\))52 b(=)37
b Fk(mapT)m(r)n(e)n(e)16 b(f)21 b(l)15 b Fl(:)r(^)q(:)10 b
Fk(mapT)m(r)n(e)n(e)16 b(f)22 b(r)1039 953 y Fh(data)14 b Fk(Opt)j(a)176
b Fl(=)37 b Fk(Just)16 b(a)27 b Fj(j)d Fk(Nothing)1039 1006
y(mapOpt)244 b Fl(::)41 b(\()p Fk(a)13 b Fj(!)e Fk(b)r Fl(\))g
Fj(!)g Fl(\()p Fk(Opt)17 b(a)c Fj(!)e Fk(Opt)17 b(b)r Fl(\))1039
1047 y Fk(mapOpt)f(f)22 b Fl(\()p Fk(Just)16 b(x)5 b Fl(\))51
b(=)37 b Fk(Just)16 b Fl(\()p Fk(f)22 b(x)5 b Fl(\))1039 1089
y Fk(mapOpt)16 b(f)22 b(Nothing)56 b Fl(=)37 b Fk(Nothing)1020
1166 y Fl(Eac)o(h)18 b(of)g(these)g(functions)h(has)g(a)e(similar)j(t)o(yp)q
(e)f(to)e(that)h(of)g(the)1020 1207 y(original)c Fk(map)g Fl(and)e(also)h
(satis\014es)g(the)f(functor)g(la)o(ws)g(giv)o(en)h(ab)q(o)o(v)o(e.)1020
1249 y(With)18 b(this)f(in)g(mind,)h(it)f(seems)g(a)g(shame)g(that)f(w)o(e)g
(ha)o(v)o(e)h(to)g(use)1020 1290 y(di\013eren)o(t)e(names)e(for)g(eac)o(h)g
(of)g(these)g(v)n(arian)o(ts.)1020 1342 y(A)i(more)h(attractiv)o(e)g
(solution)i(w)o(ould)e(allo)o(w)h(the)f(use)g(of)f(a)g(single)1020
1384 y(name)h Fk(map)r Fl(,)f(relying)i(on)f(the)f(t)o(yp)q(es)h(of)f(the)h
(ob)r(jects)f(in)o(v)o(olv)o(ed)j(to)1020 1425 y(determine)g(whic)o(h)f
(particular)i(v)o(ersion)f(of)e(the)g Fk(map)j Fl(function)f(is)1020
1467 y(required)f(in)e(a)g(giv)o(en)i(situation.)25 b(F)m(or)15
b(example,)h(it)g(is)f(clear)h(that)1020 1508 y Fk(map)21 b
Fl(\()p Fk(1)5 b Fl(+\))19 b([)p Fk(1)5 b Fi(;)g Fk(2)g Fi(;)h
Fk(3)f Fl(])18 b(should)i(b)q(e)f(a)g(list,)i(calculated)h(using)e(the)1020
1550 y(original)i Fk(map)e Fl(function)g(on)f(lists,)j(while)e
Fk(map)h Fl(\()p Fk(1)5 b Fl(+\))18 b(\()p Fk(Just)k(1)5 b
Fl(\))1020 1591 y(should)15 b(ev)n(aluate)f(to)f Fk(Just)k(2)g
Fl(using)e Fk(mapOpt)t Fl(.)1020 1643 y(Unfortunately)m(,)d(in)f(a)f
(language)i(using)g(standard)f(Hindley/Mil)q(ner)1020 1685
y(t)o(yp)q(e)j(inference,)g(there)g(is)g(no)g(w)o(a)o(y)f(to)g(assign)i(a)f
(t)o(yp)q(e)f(to)h(the)f Fk(map)1020 1726 y Fl(function)f(that)f(w)o(ould)h
(allo)o(w)g(it)f(to)g(b)q(e)g(used)h(in)f(this)h(w)o(a)o(y)m(.)k(F)m(urther-)
1020 1768 y(more,)c(ev)o(en)g(if)h(t)o(yping)g(w)o(ere)f(not)g(an)g(issue,)h
(use)g(of)e(the)h Fk(map)i Fl(func-)1020 1809 y(tion)g(w)o(ould)f(b)q(e)h
(rather)f(limited)i(unless)f(some)f(additional)j(mec)o(ha-)1020
1851 y(nism)d(w)o(as)f(pro)o(vided)j(to)d(allo)o(w)h(the)g(de\014nition)i(to)
d(b)q(e)h(extended)g(to)1020 1892 y(include)i(new)d(datat)o(yp)q(es)h(p)q
(erhaps)h(distributed)h(across)e(a)f(n)o(um)o(b)q(er)1020 1934
y(of)h(distinct)i(program)e(mo)q(dules.)1020 2038 y Fm(1.1)41
b(An)14 b(attempt)g(to)f(de\014ne)h Fk(map)h Fm(using)e(t)o(yp)q(e)g(classes)
1020 2114 y Fl(The)21 b(abilit)o(y)i(to)e(use)g(a)g(single)i(function)f(sym)o
(b)q(ol)g(with)f(an)h(in-)1020 2155 y(terpretation)c(that)g(dep)q(ends)g(on)f
(the)g(t)o(yp)q(e)h(of)e(its)i(argumen)o(ts)g(is)1020 2197
y(commonly)e(kno)o(wn)g(as)f Fk(overlo)n(ading)r Fl(.)20 b(While)d(some)e
(authors)g(dis-)1020 2238 y(miss)i(o)o(v)o(erloading)i(as)d(a)g(purely)i(syn)
o(tactic)f(con)o(v)o(enience,)i(this)e(is)1020 2280 y(certainly)h(not)e(the)g
(case)g(in)h(Hask)o(ell)g(whic)o(h)g(has)f(a)g(\015exible)i(t)o(yp)q(e)1020
2321 y(system)13 b(that)h(supp)q(orts)g(b)q(oth)f(\(parametric\))h(p)q
(olymorphi)q(sm)h(and)1020 2363 y(o)o(v)o(erloading)j(based)d(on)h(a)e
(system)i(of)e Fk(typ)n(e)g(classes)i Fl([13].)21 b(One)15
b(of)1020 2404 y(the)d(most)g(attractiv)o(e)h(features)g(of)e(this)i(system)f
(is)h(that,)f(although)1020 2446 y(eac)o(h)17 b(primitiv)o(e)i(o)o(v)o
(erloaded)g(op)q(erator)f(will)g(require)g(a)f(separate)1020
2487 y(de\014nition)e(for)d(eac)o(h)g(di\013eren)o(t)i(argumen)o(t)f(t)o(yp)q
(e,)g(there)f(is)h(no)f(need)1020 2529 y(for)h(these)g(to)g(b)q(e)g(in)h(the)
f(same)h(mo)q(dule.)1020 2581 y(T)o(yp)q(e)h(classes)h(in)g(Hask)o(ell)g(can)
g(b)q(e)f(though)o(t)h(of)e(as)h(sets)g(of)g(t)o(yp)q(es.)1020
2622 y(The)h(standard)i(example)f(is)g(the)f(class)i Fk(Eq)g
Fl(whic)o(h)f(includes)i(pre-)p eop
%%Page: 2 2
2 1 bop -76 -34 a Fl(cisely)19 b(those)f(t)o(yp)q(es)g(whose)g(elemen)o(ts)g
(can)g(b)q(e)f(compared)i(using)-76 7 y(the)13 b(\(==\))g(function.)18
b(A)13 b(simple)h(de\014nition)i(migh)o(t)e(b)q(e:)178 86 y
Fh(class)g Fk(Eq)i(a)h Fh(where)220 128 y Fl(\(==\))37 b(::)g
Fk(a)13 b Fj(!)e Fk(a)i Fj(!)f Fk(Bo)n(ol)-76 207 y Fl(The)18
b(equalit)o(y)i(op)q(erator)e(can)h(then)f(b)q(e)g(treated)g(as)g(ha)o(ving)i
(an)o(y)-76 249 y(of)c(the)g(t)o(yp)q(es)g(in)h(the)f(set)g
Fj(f)7 b Fk(a)18 b Fj(!)e Fk(a)i Fj(!)e Fk(Bo)n(ol)24 b Fj(j)e
Fk(a)c Fj(2)d Fk(Eq)10 b Fj(g)p Fl(.)25 b(The)-76 290 y(elemen)o(ts)18
b(of)f(a)g(t)o(yp)q(e)g(class)h(are)f(de\014ned)i(b)o(y)e(a)g(collection)j
(of)c Fk(in-)-76 332 y(stanc)n(e)11 b(de)n(clar)n(ations)g
Fl(whic)o(h)i(ma)o(y)f(b)q(e)h(distributed)h(across)f(a)f(n)o(um-)-76
374 y(b)q(er)19 b(of)f(distinct)i(program)f(mo)q(dules.)34
b(F)m(or)18 b(the)h(t)o(yp)q(e)f(class)i Fk(Eq)s Fl(,)-76 415
y(these)c(w)o(ould)g(t)o(ypically)i(include)f(de\014nitions)h(of)d(equalit)o
(y)j(for)d(in-)-76 457 y(tegers,)k(c)o(haracters,)h(lists,)h(pairs)e(and)g
(user-de\014ned)g(datat)o(yp)q(es.)-76 498 y(Only)c(a)e(single)j
(de\014nition)g(is)e(required)h(for)f(functions)h(de\014ned)g(ei-)-76
540 y(ther)d(directly)i(or)e(indirectly)j(in)e(terms)f(of)g(o)o(v)o(erloaded)
i(primitiv)o(es.)-76 581 y(F)m(or)j(example,)j(assuming)f(a)e(collection)j
(of)d(instances)h(as)g(ab)q(o)o(v)o(e,)-76 623 y(the)13 b Fk(memb)n(er)k
Fl(function)d(de\014ned)h(b)o(y:)-12 701 y Fk(memb)n(er)216
b Fl(::)41 b Fk(Eq)17 b(a)c Fj(\))e Fk(a)i Fj(!)e Fl([)p Fk(a)s
Fl(])f Fj(!)h Fk(Bo)n(ol)-12 743 y(memb)n(er)17 b(x)h Fl([)6
b(])131 b(=)37 b Fk(F)m(alse)-12 784 y(memb)n(er)17 b(x)h Fl(\()p
Fk(y)c Fl(:)c Fk(ys)s Fl(\))37 b(=)g Fk(x)15 b Fl(==)10 b Fk(y)28
b Fj(j)6 b(j)24 b Fk(memb)n(er)17 b(x)h(ys)-76 864 y Fl(can)h(b)q(e)h(used)f
(to)g(test)g(for)f(mem)o(b)q(ership)j(in)f(a)f(list)h(of)e(in)o(tegers,)-76
906 y(c)o(haracters,)h(lists,)g(pairs,)h(etc.)29 b(See)18 b([5,)f(13])g(for)g
(further)g(details)-76 947 y(ab)q(out)d(the)f(use)h(of)e(t)o(yp)q(e)i
(classes.)-76 999 y(Unfortunately)m(,)h(the)g(system)f(of)g(t)o(yp)q(e)g
(classes)h(is)g(not)f(su\016cien)o(tly)-76 1041 y(p)q(o)o(w)o(erful)g(to)g
(giv)o(e)g(a)g(satisfactory)g(treatmen)o(t)g(for)f(the)h Fk(map)h
Fl(func-)-76 1082 y(tion;)21 b(to)d(do)h(so)f(w)o(ould)h(require)h(a)e(class)
h Fk(Map)h Fl(and)f(a)f(t)o(yp)q(e)g(ex-)-76 1124 y(pression)g
Fk(m)s Fl(\()p Fk(t)t Fl(\))d(in)o(v)o(olving)k(the)c(t)o(yp)q(e)i(v)n
(ariable)g Fk(t)i Fl(suc)o(h)d(that)g Fk(S)k Fl(=)-76 1165
y Fj(f)7 b Fk(m)s Fl(\()p Fk(t)t Fl(\))16 b Fj(j)h Fk(t)d Fj(2)c
Fk(Map)f Fj(g)k Fl(includes)i(\(at)e(least\))h(the)f(t)o(yp)q(es:)173
1244 y(\()p Fk(a)g Fj(!)e Fk(b)r Fl(\))f Fj(!)h Fl(\([)p Fk(a)s
Fl(])f Fj(!)h Fl([)p Fk(b)r Fl(]\))173 1286 y(\()p Fk(a)i Fj(!)e
Fk(b)r Fl(\))f Fj(!)h Fl(\()p Fk(T)m(r)n(e)n(e)16 b(a)d Fj(!)e
Fk(T)m(r)n(e)n(e)16 b(b)r Fl(\))173 1327 y(\()p Fk(a)d Fj(!)e
Fk(b)r Fl(\))f Fj(!)h Fl(\()p Fk(Opt)17 b(a)c Fj(!)e Fk(Opt)16
b(b)r Fl(\))-76 1409 y(\(for)11 b(arbitrary)i(t)o(yp)q(es)f
Fk(a)i Fl(and)e Fk(b)r Fl(\).)k(The)11 b(only)i(p)q(ossibilit)o(y)i(is)d(to)f
(tak)o(e)-76 1451 y Fk(m)s Fl(\()p Fk(t)t Fl(\))k(=)f Fk(t)19
b Fl(and)d(c)o(ho)q(ose)h Fk(Map)g Fl(as)f(the)g(set)f(of)g(t)o(yp)q(es)i
Fk(S)i Fl(for)c(whic)o(h)-76 1492 y(the)e Fk(map)i Fl(function)f(is)g
(required:)-38 1571 y Fh(class)g Fk(Map)i(t)h Fh(where)5 1613
y Fk(map)39 b Fl(::)e Fk(t)-38 1674 y Fh(instance)13 b Fk(Map)j
Fl(\(\()p Fk(a)d Fj(!)e Fk(b)r Fl(\))f Fj(!)h Fl(\([)p Fk(a)s
Fl(])f Fj(!)h Fl([)p Fk(b)r Fl(]\)\))i Fh(where)13 1715 y Fi(:)6
b(:)h(:)-38 1757 y Fh(instance)13 b Fk(Map)j Fl(\(\()p Fk(a)d
Fj(!)e Fk(b)r Fl(\))f Fj(!)h Fl(\()p Fk(T)m(r)n(e)n(e)17 b(a)c
Fj(!)e Fk(T)m(r)n(e)n(e)17 b(b)r Fl(\)\))c Fh(where)13 1798
y Fi(:)6 b(:)h(:)-38 1840 y Fh(instance)13 b Fk(Map)j Fl(\(\()p
Fk(a)d Fj(!)e Fk(b)r Fl(\))f Fj(!)h Fl(\()p Fk(Opt)17 b(a)d
Fj(!)d Fk(Opt)17 b(b)r Fl(\)\))c Fh(where)13 1881 y Fi(:)6
b(:)h(:)-76 1961 y Fl(This)k(syn)o(tax)f(is)h(not)f(p)q(ermitted)h(in)g(the)f
(curren)o(t)g(syn)o(tax)h(of)f(Hask)o(ell)-76 2003 y(but)16
b(ev)o(en)g(if)g(it)g(w)o(ere,)f(it)h(do)q(es)g(not)g(giv)o(e)g(a)g
(su\016cien)o(tly)i(accurate)-76 2044 y(c)o(haracterization)e(of)c(the)h(t)o
(yp)q(e)g(of)f Fk(map)r Fl(.)17 b(F)m(or)c(example,)g(the)g(prin-)-76
2086 y(cipal)i(t)o(yp)q(e)e(of)g Fk(map)j(j)j Fi(:)13 b Fk(map)j(i)g
Fl(w)o(ould)e(b)q(e)13 2165 y(\()p Fk(Map)h Fl(\()p Fk(a)e
Fj(!)e Fk(c)h Fj(!)f Fk(e)s Fl(\))p Fi(;)h Fk(Map)j Fl(\()p
Fk(b)d Fj(!)g Fk(e)h Fj(!)e Fk(d)t Fl(\)\))f Fj(\))h Fk(c)h
Fj(!)f Fk(d)-76 2244 y Fl(where)i Fk(a)i Fl(and)f Fk(b)h Fl(are)e(the)g(t)o
(yp)q(es)g(of)g Fk(i)j Fl(and)e Fk(j)k Fl(resp)q(ectiv)o(ely)m(.)h(This)14
b(is)-76 2285 y(complicated)j(and)e(do)q(es)g(not)g(enforce)g(the)g
(condition)i(that)e Fk(i)j Fl(and)-76 2327 y Fk(j)h Fl(ha)o(v)o(e)c(function)
h(t)o(yp)q(es.)21 b(F)m(urthermore,)14 b(the)h(t)o(yp)q(e)f(is)h
Fk(ambiguous)-76 2368 y Fl(\(the)f(t)o(yp)q(e)f(v)n(ariable)j
Fk(e)f Fl(do)q(es)f(not)g(app)q(ear)g(to)g(the)f(righ)o(t)h(of)f(the)25
b Fj(\))-76 2410 y Fl(sym)o(b)q(ol)15 b(or)f(in)g(the)g(assumptions\).)21
b(Under)14 b(these)g(conditions,)i(w)o(e)-76 2451 y(cannot)10
b(guaran)o(tee)g(a)f(w)o(ell-de\014ned)i(seman)o(tics)g(for)d(this)i
(expression)-76 2493 y(\(see)17 b([8],)g(for)g(example\).)31
b(Other)17 b(attempts)g(to)g(de\014ne)h(the)g Fk(map)-76 2534
y Fl(function,)12 b(for)f(example)h(using)g(m)o(ultiple)i(parameter)d(t)o(yp)
q(e)g(classes,)-76 2576 y(ha)o(v)o(e)j(also)g(failed)g(for)f(essen)o(tially)j
(the)d(same)g(reasons.)1020 -34 y Fm(1.2)41 b(A)14 b(solution)d(using)i
(constructo)o(r)g(classes)1020 42 y Fl(A)g(m)o(uc)o(h)h(b)q(etter)g(approac)o
(h)h(is)f(to)f(notice)i(that)f(eac)o(h)g(of)f(the)h(t)o(yp)q(es)1020
83 y(for)f(whic)o(h)h(the)f Fk(map)i Fl(function)f(is)g(required)g(is)g(of)e
(the)i(form:)1318 155 y(\()p Fk(a)f Fj(!)f Fk(b)r Fl(\))e Fj(!)h
Fl(\()p Fk(f)21 b(a)13 b Fj(!)e Fk(f)20 b(b)r Fl(\))p Fi(:)1020
227 y Fl(The)11 b(v)n(ariables)i Fk(a)h Fl(and)e Fk(b)h Fl(here)e(represen)o
(t)h(arbitrary)h(t)o(yp)q(es)e(while)i Fk(f)1020 268 y Fl(ranges)g(o)o(v)o
(er)f(the)g(set)g(of)f(t)o(yp)q(e)i(constructors)g(for)e(whic)o(h)i(a)f
(suitable)1020 310 y Fk(map)21 b Fl(function)f(has)g(b)q(een)g(de\014ned.)36
b(In)19 b(particular,)k(w)o(e)18 b(w)o(ould)1020 351 y(exp)q(ect)11
b(to)g(include)i(the)d(list)i(constructor)g(\(whic)o(h)f(w)o(e)f(will)i
(write)f(as)1020 393 y Fk(List)t Fl(\),)e Fk(T)m(r)n(e)n(e)14
b Fl(and)d Fk(Opt)j Fl(as)d(elemen)o(ts)h(of)f(this)g(set)g(whic)o(h,)h
(motiv)n(ated)1020 434 y(b)o(y)i(our)f(earlier)i(commen)o(ts,)e(w)o(e)g(will)
h(call)h Fk(F)m(unctor)t Fl(.)g(With)g(only)f(a)1020 476 y(small)k(extension)
f(to)f(the)g(Hask)o(ell)i(syn)o(tax)f(for)f(t)o(yp)q(e)g(classes)h(this)1020
517 y(can)c(b)q(e)h(describ)q(ed)h(b)o(y:)1116 589 y Fh(class)f
Fk(F)m(unctor)i(f)21 b Fh(where)1158 630 y Fk(map)40 b Fl(::)c(\()p
Fk(a)13 b Fj(!)f Fk(b)r Fl(\))e Fj(!)h Fl(\()p Fk(f)22 b(a)13
b Fj(!)e Fk(f)21 b(b)r Fl(\))1116 691 y Fh(instance)13 b Fk(F)m(unctor)j
(List)g Fh(where)1158 733 y Fk(map)g(f)21 b Fl([)6 b(])130
b(=)37 b([)7 b(])1158 774 y Fk(map)16 b(f)21 b Fl(\()p Fk(x)15
b Fl(:)c Fk(xs)s Fl(\))36 b(=)h Fk(f)22 b(x)15 b Fl(:)10 b
Fk(map)16 b(f)21 b(xs)1116 836 y Fh(instance)13 b Fk(F)m(unctor)j(T)m(r)n(e)n
(e)g Fh(where)1158 877 y Fk(map)g(f)21 b Fl(\()p Fk(L)n(e)n(af)g(x)5
b Fl(\))37 b(=)g Fk(L)n(e)n(af)21 b Fl(\()p Fk(f)g(x)5 b Fl(\))1158
919 y Fk(map)16 b(f)21 b Fl(\()p Fk(l)15 b Fl(:)r(^)q(:)10
b Fk(r)t Fl(\))52 b(=)37 b Fk(map)16 b(f)21 b(l)14 b Fl(:)r(^)q(:)d
Fk(map)k(f)22 b(r)1116 980 y Fh(instance)13 b Fk(F)m(unctor)j(Opt)h
Fh(where)1158 1021 y Fk(map)f(f)21 b Fl(\()p Fk(Just)c(x)5
b Fl(\))36 b(=)h Fk(Just)17 b Fl(\()p Fk(f)k(x)5 b Fl(\))1158
1063 y Fk(map)16 b(f)21 b(Nothing)42 b Fl(=)37 b Fk(Nothing)1020
1135 y(F)m(unctor)14 b Fl(is)f(our)g(\014rst)f(example)i(of)e(a)g
Fk(c)n(onstructor)e(class)s Fl(.)15 b(The)d(fol-)1020 1177
y(lo)o(wing)j(extract)e(\(tak)o(en)h(from)f(a)g(session)i(with)e(the)h(Gofer)
f(system)1020 1218 y(whic)o(h)19 b(includes)i(supp)q(ort)f(for)e(constructor)
i(classes\))g(illustrates)1020 1260 y(ho)o(w)13 b(the)g(de\014nitions)j(for)d
Fk(F)m(unctor)i Fl(w)o(ork)e(in)h(practice:)1059 1335 y Fg(?)20
b(map)e(\(1+\))g([1,2,3])1059 1377 y([2,)h(3,)g(4])1059 1418
y(?)h(map)e(\(1+\))g(\(Leaf)g(1)h(:^:)f(Leaf)g(2\))1059 1460
y(Leaf)g(2)i(:^:)e(Leaf)g(3)1059 1501 y(?)i(map)e(\(1+\))g(\(Just)g(1\))1059
1543 y(Just)g(2)1020 1618 y Fl(F)m(urthermore,)e(b)o(y)f(sp)q(ecifying)i(the)
e(t)o(yp)q(e)h(of)e Fk(map)j Fl(function)f(more)1020 1660 y(precisely)m(,)11
b(w)o(e)d(a)o(v)o(oid)j(the)d(am)o(biguit)o(y)j(problems)g(men)o(tioned)f(ab)
q(o)o(v)o(e.)1020 1701 y(F)m(or)j(example,)i(the)e(principal)k(t)o(yp)q(e)d
(of)f Fk(map)j(j)j Fi(:)14 b Fk(map)i(i)g Fl(is)e(simply)1020
1743 y Fk(F)m(unctor)k(f)j Fj(\))14 b Fk(f)23 b(a)15 b Fj(!)f
Fk(f)23 b(c)16 b Fl(pro)o(vided)h(that)e Fk(i)j Fl(has)d(t)o(yp)q(e)g(\()p
Fk(a)h Fj(!)d Fk(b)r Fl(\))1020 1784 y(and)h(that)f Fk(j)18
b Fl(has)13 b(t)o(yp)q(e)h(\()p Fk(b)e Fj(!)f Fk(c)r Fl(\).)1020
1887 y Fm(1.3)41 b(The)14 b(kind)f(system)1020 1964 y Fl(Eac)o(h)k(instance)h
(of)e Fk(F)m(unctor)i Fl(can)f(b)q(e)g(though)o(t)g(of)f(as)g(a)h(function)
1020 2005 y(from)12 b(t)o(yp)q(es)g(to)g(t)o(yp)q(es.)17 b(It)11
b(w)o(ould)i(b)q(e)f(nonsense)i(to)e(allo)o(w)h(the)f(t)o(yp)q(e)1020
2047 y Fk(Int)k Fl(of)e(in)o(tegers)g(to)g(b)q(e)g(an)g(instance)h(of)e
Fk(F)m(unctor)t Fl(,)f(since)j(the)f(t)o(yp)q(e)1020 2088 y(\()p
Fk(a)k Fj(!)e Fk(b)r Fl(\))f Fj(!)h Fl(\()p Fk(Int)j(a)f Fj(!)e
Fk(Int)j(b)r Fl(\))c(is)i(ob)o(viously)h(not)e(w)o(ell-formed.)1020
2130 y(T)m(o)g(a)o(v)o(oid)h(un)o(w)o(an)o(ted)g(cases)f(lik)o(e)h(this,)g(w)
o(e)f(ha)o(v)o(e)g(to)g(ensure)h(that)1020 2171 y(all)d(of)f(the)g(elemen)o
(ts)h(in)g(an)o(y)g(giv)o(en)g(class)g(are)f(of)g(the)g(same)g(kind.)1020
2223 y(Our)h(approac)o(h)i(to)e(this)i(problem)f(is)g(to)f(formalize)i(the)f
(notion)g(of)1020 2265 y Fk(kind)20 b Fl(writing)e Fj(\003)g
Fl(for)f(the)g(kind)i(of)e(all)i(t)o(yp)q(es)f(and)g Fi(\024)1822
2269 y Ff(1)1857 2265 y Fj(!)h Fi(\024)1936 2269 y Ff(2)1970
2265 y Fl(for)1020 2306 y(the)14 b(kind)g(of)f(a)h(constructor)g(whic)o(h)g
(tak)o(es)g(something)h(of)e(kind)i Fi(\024)1999 2310 y Ff(1)1020
2348 y Fl(and)h(returns)f(something)i(of)e(kind)h Fi(\024)1573
2352 y Ff(2)1590 2348 y Fl(.)23 b(This)16 b(c)o(hoice)g(of)f(notation)1020
2389 y(is)d(motiv)n(ated)g(b)o(y)f(Barendregt's)h(description)i(of)c
(generalized)k(t)o(yp)q(e)1020 2431 y(systems)g([1].)k(Instead)c(of)g(t)o(yp)
q(e)g(expressions,)h(w)o(e)f(use)g(a)f(language)1020 2472 y(of)g
(constructors)h(giv)o(en)g(b)o(y:)1280 2543 y Fk(C)43 b Fl(::=)37
b Fi(\037)96 b Fk(c)n(onstants)1370 2584 y Fj(j)58 b Fk(a)100
b(variables)1370 2627 y Fj(j)58 b Fk(C)12 b(C)1510 2611 y Fe(0)1559
2627 y Fk(applic)n(ations)p eop
%%Page: 3 3
3 2 bop -76 -34 a Fl(This)19 b(corresp)q(onds)h(v)o(ery)f(closely)i(to)d(the)
g(w)o(a)o(y)h(that)f(most)h(t)o(yp)q(e)-76 7 y(expressions)i(are)e(already)h
(written)f(in)h(Hask)o(ell.)36 b(F)m(or)18 b(example,)-76 49
y Fk(Opt)g(a)f Fl(is)e(an)f(application)k(of)13 b(the)i(constructor)g
(constan)o(t)g Fk(Opt)i Fl(to)-76 90 y(the)f(constructor)h(v)n(ariable)g
Fk(a)s Fl(.)24 b(Eac)o(h)17 b(constructor)f(constan)o(t)h(has)-76
132 y(a)i(corresp)q(onding)j(kind.)36 b(F)m(or)19 b(example,)i(writing)f(\()p
Fj(!)p Fl(\))f(for)g(the)-76 173 y(function)c(space)e(constructor)h(and)g(\()
p Fi(;)6 b Fl(\))13 b(for)f(pairing)k(w)o(e)c(ha)o(v)o(e:)170
252 y Fk(Int)t Fi(;)18 b Fk(Flo)n(at)t Fi(;)g Fl(\(\))37 b(::)g
Fj(\003)170 294 y Fk(List)204 b Fl(::)37 b Fj(\003)11 b(!)g(\003)170
335 y Fl(\()p Fj(!)p Fl(\))p Fi(;)20 b Fl(\()p Fi(;)6 b Fl(\))123
b(::)37 b Fj(\003)11 b(!)g(\003)g(!)g(\003)-76 415 y Fl(The)k(kinds)h(of)f
(constructor)h(applications)i(are)d(describ)q(ed)i(b)o(y)e(the)-76
457 y(rule:)196 516 y Fk(C)i Fl(::)10 b Fi(\024)294 500 y Fe(0)316
516 y Fj(!)h Fi(\024)141 b Fk(C)560 500 y Fe(0)583 516 y Fl(::)10
b Fi(\024)637 500 y Fe(0)p 196 530 453 3 v 345 572 a Fk(C)19
b(C)423 556 y Fe(0)445 572 y Fl(::)10 b Fi(\024)-76 625 y Fl(The)16
b(task)h(of)f(c)o(hec)o(king)i(that)f(a)f(giv)o(en)i(t)o(yp)q(e)e(expression)
j(is)e(w)o(ell-)-76 666 y(formed)j(can)f(no)o(w)h(b)q(e)f(reform)o(ulated)i
(as)e(the)h(task)g(of)f(c)o(hec)o(king)-76 708 y(that)13 b(a)g(giv)o(en)h
(constructor)g(expression)g(has)g(kind)g Fj(\003)p Fl(.)j(In)12
b(a)h(similar)-76 749 y(w)o(a)o(y)m(,)e(all)i(of)f(the)f(elemen)o(ts)i(of)e
(a)h(constructor)h(class)f(m)o(ust)g(ha)o(v)o(e)g(the)-76 791
y(same)f(kind;)i(for)d(example,)i(a)f(constructor)h(class)f(constrain)o(t)i
(of)d(the)-76 832 y(form)j Fk(F)m(unctor)i(f)20 b Fl(is)14
b(only)f(v)n(alid)i(if)e Fk(f)20 b Fl(is)13 b(a)g(constructor)g(expression)
-76 874 y(of)g(kind)h Fj(\003)d(!)g(\003)p Fl(.)-76 926 y(The)h(language)i
(of)d(constructors)i(is)f(essen)o(tially)j(a)d(system)g(of)f(com-)-76
967 y(binators)20 b(without)g(an)o(y)f(reduction)h(rules.)35
b(As)19 b(suc)o(h,)h(standard)-76 1009 y(tec)o(hniques)i(can)e(b)q(e)g(used)g
(to)g(infer)h(the)e(kinds)j(of)d(constructor)-76 1050 y(v)n(ariables,)12
b(constructor)f(constan)o(ts)g(in)o(tro)q(duced)h(b)o(y)e(new)f(datat)o(yp)q
(e)-76 1092 y(de\014nitions)16 b(and)f(the)e(kind)i(of)e(the)h(elemen)o(ts)g
(held)h(in)f(an)o(y)g(partic-)-76 1133 y(ular)g(constructor)h(class.)j(The)c
(imp)q(ortan)o(t)g(p)q(oin)o(t)h(is)f(that)f(there)h(is)-76
1175 y(no)d(need)g({)g(and)g(indeed,)h(in)f(our)g(curren)o(t)g(implemen)o
(tation)q(,)i(no)e(op-)-76 1216 y(p)q(ortunit)o(y)k({)e(for)f(the)h
(programmer)h(to)e(supply)j(kind)f(information)-76 1258 y(explicitly)n(.)19
b(W)m(e)13 b(regard)g(this)g(as)f(a)h(signi\014can)o(t)i(adv)n(an)o(tage)e
(since)h(it)-76 1299 y(means)d(that)g(the)f(programmer)i(can)f(a)o(v)o(oid)g
(m)o(uc)o(h)g(of)f(the)h(complex-)-76 1341 y(it)o(y)17 b(that)f(migh)o(t)h
(otherwise)g(result)g(from)f(the)g(need)g(to)g(annotate)-76
1382 y(t)o(yp)q(e)f(expressions)i(with)e(kinds.)23 b(The)15
b(pro)q(cess)g(of)f Fk(kind)g(infer)n(enc)n(e)-76 1424 y Fl(is)g(describ)q
(ed)h(in)e(more)h(detail)g(in)g(Section)g(4.)-76 1476 y(The)i(use)h(of)f
(kinds)h(is)g(p)q(erhaps)h(the)e(most)g(imp)q(ortan)o(t)i(asp)q(ect)e(of)-76
1517 y(our)g(system,)h(pro)o(viding)i(a)d(lo)q(ose)h(seman)o(tic)g(c)o
(haracterization)h(of)-76 1559 y(the)e(elemen)o(ts)h(in)g(a)f(constructor)h
(class.)26 b(This)17 b(is)f(in)h(con)o(trast)f(to)-76 1600
y(the)i(system)g(of)g Fk(p)n(ar)n(ametric)e(typ)n(e)h(classes)h
Fl(describ)q(ed)i(b)o(y)e(Chen,)-76 1642 y(Hudak)11 b(and)f(Odersky)h([3])e
(whic)o(h)h(addresses)i(similar)g(issues)f(to)e(this)-76 1683
y(pap)q(er)h(but)g(relies)h(on)f(a)f(more)h(syn)o(tactic)g(approac)o(h)h
(that)f(in)o(v)o(olv)o(es)h(a)-76 1725 y(pro)q(cess)g(of)f(normalization.)19
b(Note)9 b(also)i(that)f(our)h(system)f(includes)-76 1766 y(Hask)o(ell)15
b(t)o(yp)q(e)e(classes)i(as)e(a)g(sp)q(ecial)i(case;)e(a)g(t)o(yp)q(e)h
(class)g(is)f(simply)-76 1808 y(a)g(constructor)h(class)g(for)f(whic)o(h)h
(eac)o(h)f(instance)i(has)e(kind)i Fj(\003)p Fl(.)-76 1916
y Fm(2)41 b(Monads)12 b(as)h(an)g(application)f(of)g(constructo)o(r)h
(classes)-76 2005 y Fl(Motiv)n(ated)e(b)o(y)f(the)g(w)o(ork)f(of)h(Moggi)h
([10])e(and)h(Spiv)o(ey)h([12],)f(W)m(adler)-76 2047 y([14,)20
b(15)q(])g(has)h(prop)q(osed)g(a)g(st)o(yle)g(of)g(functional)h(programming)
-76 2088 y(based)17 b(on)f(the)f(use)h(of)f Fk(monads)s Fl(.)23
b(While)18 b(the)e(theory)g(of)f(monads)-76 2130 y(had)g(already)h(b)q(een)f
(widely)h(studied)g(in)f(the)g(con)o(text)g(of)f(abstract)-76
2171 y(category)k(theory)m(,)g(W)m(adler)h(in)o(tro)q(duced)g(the)f(idea)g
(that)f(monads)-76 2213 y(could)f(b)q(e)e(used)h(as)f(a)g(practical)i(metho)q
(d)f(for)f(mo)q(deling)i(so-called)-76 2254 y(`impure')h(features)g(in)g(a)f
(purely)i(functional)h(programming)f(lan-)-76 2296 y(guage.)k(The)14
b(examples)i(in)f(this)g(section)h(illustrate)h(that)d(the)h(use)-76
2337 y(of)10 b(constructor)i(classes)f(can)g(b)q(e)g(particularly)j(con)o(v)o
(enien)o(t)e(for)e(pro-)-76 2379 y(gramming)15 b(in)e(this)h(st)o(yle.)-76
2483 y Fm(2.1)41 b(A)14 b(framew)o(o)o(rk)e(fo)o(r)g(p)o(rogramming)g(with)h
(monads)-76 2559 y Fl(The)i(basic)i(motiv)n(ation)g(for)e(the)g(use)g(of)g
(monads)h(is)g(the)g(need)f(to)-76 2601 y(distinguis)q(h)h(b)q(et)o(w)o(een)e
(computations)h(and)f(the)g(v)n(alues)g(that)g(they)1020 -34
y(pro)q(duce.)k(If)11 b Fk(m)k Fl(is)e(a)f(monad)g(then)h(an)f(ob)r(ject)g
(of)g(t)o(yp)q(e)g(\()p Fk(m)k(a)s Fl(\))11 b(rep-)1020 7 y(resen)o(ts)i(a)f
(computation)i(whic)o(h)f(is)g(exp)q(ected)g(to)f(pro)q(duce)i(a)e(v)n(alue)
1020 49 y(of)f(t)o(yp)q(e)g Fk(a)s Fl(.)k(These)c(t)o(yp)q(es)h(re\015ect)f
(the)g(fact)g(that)g(the)g(use)g(of)f(partic-)1020 90 y(ular)17
b(programming)g(language)h(features)d(in)i(a)e(giv)o(en)i(calculation)1020
132 y(is)c(a)g(prop)q(ert)o(y)g(of)f(the)h(computation)i(itself)e(and)g(not)g
(of)f(the)h(result)1020 173 y(that)g(it)h(pro)q(duces.)1020
225 y(T)m(aking)19 b(the)e(approac)o(h)i(outlined)h(in)e([15])f(w)o(e)g(in)o
(tro)q(duce)i(a)f(con-)1020 267 y(structor)13 b(class)i(of)d(monads)i(using)h
(the)e(de\014nition:)1133 338 y Fh(class)h Fk(F)m(unctor)j(m)d
Fj(\))d Fk(Monad)16 b(m)h Fh(where)1176 379 y Fk(r)n(esult)115
b Fl(::)41 b Fk(a)13 b Fj(!)e Fk(m)17 b(a)1176 421 y(bind)135
b Fl(::)41 b Fk(m)17 b(a)c Fj(!)e Fl(\()p Fk(a)i Fj(!)e Fk(m)18
b(b)r Fl(\))10 b Fj(!)h Fk(m)17 b(b)1176 462 y(join)141 b Fl(::)41
b Fk(m)17 b Fl(\()p Fk(m)g(a)s Fl(\))10 b Fj(!)h Fk(m)17 b(a)1176
543 y(x)h Fl(`)p Fk(bind)t Fl(`)12 b Fk(f)45 b Fl(=)37 b Fk(join)15
b Fl(\()p Fk(map)h(f)21 b(x)5 b Fl(\))1176 584 y Fk(join)16
b(x)103 b Fl(=)37 b Fk(x)18 b Fl(`)p Fk(bind)t Fl(`)11 b Fk(id)1020
656 y Fl(The)k(expression)i Fk(F)m(unctor)g(m)h Fj(\))c Fk(Monad)j(m)h
Fl(de\014nes)f Fk(Monad)g Fl(as)1020 698 y(a)e(sub)q(class)j(of)d
Fk(F)m(unctor)i Fl(ensuring)g(that,)f(for)f(an)o(y)h(giv)o(en)h(monad,)1020
739 y(there)11 b(will)h(also)g(b)q(e)f(a)g(corresp)q(onding)i(instance)g(of)d
(the)h(o)o(v)o(erloaded)1020 781 y Fk(map)16 b Fl(function.)24
b(The)14 b(use)h(of)f(a)h(hierarc)o(h)o(y)h(of)f(classes)h(enables)g(us)1020
822 y(to)f(capture)g(the)g(fact)g(that)g(not)g(ev)o(ery)g(instance)h(of)f
Fk(F)m(unctor)i Fl(can)1020 864 y(b)q(e)c(treated)h(as)f(an)g(instance)i(of)d
Fk(Monad)k Fl(in)e(a)f(natural)h(w)o(a)o(y)m(.)1020 916 y(By)i(includin)q(g)i
(default)f(de\014nitions)i(for)d Fk(bind)i Fl(and)e Fk(join)h
Fl(w)o(e)f(only)1020 957 y(need)j(to)g(giv)o(e)g(a)g(de\014nition)i(for)e
(one)g(of)f(these)h(\(in)g(addition)i(to)1020 999 y(a)16 b(de\014nition)j
(for)d Fk(r)n(esult)t Fl(\))e(to)i(completely)i(de\014ne)f(an)g(instance)g
(of)1020 1040 y Fk(Monad)t Fl(.)e(This)f(is)g(often)f(quite)h(con)o(v)o
(enien)o(t.)19 b(On)13 b(the)g(other)g(hand,)1020 1082 y(it)i(w)o(ould)h(b)q
(e)f(an)g(error)g(to)f(omit)i(de\014nitions)h(for)e(b)q(oth)g(op)q(erators)
1020 1123 y(since)g(the)e(default)i(de\014nitions)h(are)e(clearly)h
(circular.)21 b(W)m(e)13 b(should)1020 1165 y(also)k(men)o(tion)h(that)f(the)
f(mem)o(b)q(er)h(functions)h(in)f(an)f(instance)i(of)1020 1206
y Fk(Monad)f Fl(are)d(exp)q(ected)h(to)g(satisfy)g(a)f(n)o(um)o(b)q(er)h(of)f
(la)o(ws)h(whic)o(h)g(are)1020 1248 y(not)9 b(re\015ected)h(in)g(the)f(class)
h(de\014nition)i(ab)q(o)o(v)o(e.)k(See)10 b([15])e(for)h(further)1020
1289 y(details.)1020 1341 y(The)h(follo)o(wing)j(declaration)g(de\014nes)e
(the)g(standard)h(monad)f(struc-)1020 1383 y(ture)k(for)g(the)h(list)g
(constructor)g Fk(List)i Fl(whic)o(h)e(can)g(b)q(e)f(used)h(to)f(de-)1020
1424 y(scrib)q(e)d(computations)g(pro)q(ducing)h(m)o(ultiple)g(results,)f
(corresp)q(ond-)1020 1466 y(ing)i(to)f(a)g(simple)i(form)d(of)h
(non-determinism:)1246 1537 y Fh(instance)h Fk(Monad)i(List)g
Fh(where)1289 1578 y Fk(r)n(esult)g(x)42 b Fl(=)37 b([)p Fk(x)5
b Fl(])1289 1620 y Fk(join)102 b Fl(=)37 b Fk(foldr)17 b Fl(\(+)-16
b(+\))13 b([)6 b(])1020 1702 y(Another)k(in)o(teresting)h(use)f(of)f(monads)h
(is)g(to)f(mo)q(del)i(programs)f(that)1020 1743 y(mak)o(e)g(use)g(of)g(an)g
(in)o(ternal)h(state.)16 b(Computations)c(of)d(this)i(kind)g(can)1020
1785 y(b)q(e)f(represen)o(ted)g(b)o(y)g(functions)g(of)f(t)o(yp)q(e)h
Fk(s)j Fj(!)e Fl(\()p Fk(a)s Fi(;)6 b Fk(s)s Fl(\))j(\(often)g(referred)1020
1826 y(to)14 b(as)f Fk(state)g(tr)n(ansformers)s Fl(\))e(mapping)16
b(an)e(initial)i(state)e(to)g(a)f(pair)1020 1868 y(con)o(taining)g(the)d
(result)h(and)f(\014nal)h(state.)16 b(In)10 b(order)h(to)f(get)f(this)i(in)o
(to)1020 1909 y(the)16 b(appropriate)i(form)e(for)g(the)g(system)g(of)g
(constructor)h(classes)1020 1951 y(describ)q(ed)e(in)f(this)g(pap)q(er,)f(w)o
(e)g(in)o(tro)q(duce)h(a)f(new)g(datat)o(yp)q(e:)1188 2022
y Fh(data)h Fk(State)h(s)i(a)40 b Fl(=)d Fk(ST)18 b Fl(\()p
Fk(s)c Fj(!)d Fl(\()p Fk(a)s Fi(;)5 b Fk(s)s Fl(\)\))1020 2103
y(The)10 b(functor)g(and)h(monad)g(structures)g(for)e(state)h(transformers)h
(are)1020 2144 y(as)i(follo)o(ws:)1039 2215 y Fh(instance)g
Fk(F)m(unctor)j Fl(\()p Fk(State)f(s)s Fl(\))e Fh(where)1082
2257 y Fk(map)i(f)22 b Fl(\()p Fk(ST)c(st)t Fl(\))36 b(=)i
Fk(ST)18 b Fl(\()p Fj(n)p Fk(s)c Fj(!)d Fh(let)32 b Fl(\()p
Fk(x)5 b Fi(;)g Fk(s)1771 2242 y Fe(0)1782 2257 y Fl(\))37
b(=)h Fk(st)16 b(s)1616 2300 y Fh(in)39 b Fl(\()p Fk(f)21 b(x)5
b Fi(;)h Fk(s)1800 2284 y Fe(0)1811 2300 y Fl(\)\))1039 2341
y Fh(instance)13 b Fk(Monad)j Fl(\()p Fk(State)f(s)s Fl(\))e
Fh(where)1082 2383 y Fk(r)n(esult)i(x)157 b Fl(=)37 b Fk(ST)19
b Fl(\()p Fj(n)p Fk(s)13 b Fj(!)e Fl(\()p Fk(x)5 b Fi(;)g Fk(s)s
Fl(\)\))1082 2425 y Fk(ST)18 b(m)f Fl(`)p Fk(bind)t Fl(`)12
b Fk(f)45 b Fl(=)37 b Fk(ST)19 b Fl(\()p Fj(n)p Fk(s)13 b Fj(!)e
Fh(let)32 b Fl(\()p Fk(x)5 b Fi(;)h Fk(s)1767 2409 y Fe(0)1777
2425 y Fl(\))38 b(=)f Fk(m)17 b(s)1693 2467 y(ST)i(f)1781 2451
y Fe(0)1830 2467 y Fl(=)37 b Fk(f)21 b(x)1611 2509 y Fh(in)39
b Fk(f)1708 2493 y Fe(0)1733 2509 y Fk(s)1752 2493 y Fe(0)1763
2509 y Fl(\))1020 2581 y(Notice)15 b(that)f(the)g Fk(State)h
Fl(constructor)h(has)e(kind)i Fj(\003)d(!)g(\003)f(!)h(\003)h
Fl(and)1020 2622 y(that)h(the)f(declarations)j(ab)q(o)o(v)o(e)f(de\014ne)f
Fk(State)h(s)h Fl(as)e(a)f(monad)h(and)p eop
%%Page: 4 4
4 3 bop -76 -34 a Fl(functor)18 b(for)f(an)o(y)h(state)g(t)o(yp)q(e)g
Fk(s)i Fl(\(and)e(hence)g Fk(State)h(s)h Fl(has)e(kind)-76
7 y Fj(\003)11 b(!)g(\003)i Fl(as)f(required)i(for)e(an)h(instance)h(of)e
(these)h(classes\).)18 b(There)13 b(is)-76 49 y(no)g(need)h(to)e(assume)i(a)f
(\014xed)g(state)g(t)o(yp)q(e)g(as)g(in)h(W)m(adler's)g(pap)q(ers.)-76
101 y(F)m(rom)f(a)f(user's)h(p)q(oin)o(t)h(of)e(view,)h(the)f(most)h(in)o
(teresting)i(prop)q(erties)-76 142 y(of)f(a)h(monad)g(are)f(describ)q(ed,)i
(not)f(b)o(y)g(the)f Fk(r)n(esult)t Fl(,)e Fk(bind)17 b Fl(and)e
Fk(join)-76 184 y Fl(op)q(erators,)d(but)f(b)o(y)g(the)f(additional)k(op)q
(erations)f(that)d(it)h(supp)q(orts.)-76 225 y(The)i(follo)o(wing)i(examples)
f(are)f(often)g(useful)h(when)f(w)o(orking)h(with)-76 267 y(state)19
b(monads.)34 b(The)19 b(\014rst)f(can)h(b)q(e)g(used)g(to)g(`run')f(a)g
(program)-76 308 y(giv)o(en)g(an)f(initial)j(state)d(and)h(discarding)h(the)e
(\014nal)h(state,)g(while)-76 350 y(the)d(second)h(migh)o(t)f(b)q(e)g(used)h
(to)e(implemen)o(t)j(an)e(in)o(teger)h(coun)o(ter)-76 391 y(in)e(a)f
Fk(State)i(Int)g Fl(monad:)-14 454 y Fk(startingWith)214 b
Fl(::)41 b Fk(State)15 b(s)h(a)d Fj(!)e Fk(s)j Fj(!)d Fk(a)-14
495 y(ST)18 b(m)f Fl(`)p Fk(startingWith)s Fl(`)11 b Fk(v)41
b Fl(=)c Fk(fst)16 b Fl(\()p Fk(m)h(v)t Fl(\))-14 576 y Fk(incr)359
b Fl(::)41 b Fk(State)15 b(Int)h(Int)-14 618 y(incr)355 b Fl(=)37
b Fk(ST)19 b Fl(\()p Fj(n)p Fk(s)13 b Fj(!)e Fl(\()p Fk(s)s
Fi(;)6 b Fk(s)11 b Fl(+)e(1\)\))-76 681 y(T)m(o)15 b(illustrate)j(the)e(use)g
(of)f(state)h(monads,)h(consider)g(the)f(task)f(of)-76 723
y(lab)q(eling)22 b(eac)o(h)e(of)e(the)i(no)q(des)f(in)h(a)f(binary)i(tree)e
(with)g(distinct)-76 764 y(in)o(teger)14 b(v)n(alues.)k(One)c(simple)g
(de\014nition)i(is:)-17 827 y Fk(lab)n(el)121 b Fl(::)41 b
Fk(T)m(r)n(e)n(e)16 b(a)e Fj(!)d Fk(T)m(r)n(e)n(e)16 b Fl(\()p
Fk(a)s Fi(;)6 b Fk(Int)t Fl(\))-17 868 y Fk(lab)n(el)16 b(tr)n(e)n(e)40
b Fl(=)d Fk(fst)16 b Fl(\()p Fk(lab)f(tr)n(e)n(e)h Fl(0\))-3
910 y Fh(where)32 b Fk(lab)16 b Fl(\()p Fk(L)n(e)n(af)k(n)s
Fl(\))13 b Fk(c)40 b Fl(=)d(\()p Fk(L)n(e)n(af)21 b Fl(\()p
Fk(n)s Fi(;)5 b Fk(c)r Fl(\))p Fi(;)h Fk(c)k Fl(+)e(1\))144
952 y Fk(lab)16 b Fl(\()p Fk(l)e Fl(:)r(^)q(:)c Fk(r)t Fl(\))k
Fk(c)56 b Fl(=)37 b(\()p Fk(l)520 936 y Fe(0)541 952 y Fl(:)r(^)q(:)10
b Fk(r)615 936 y Fe(0)627 952 y Fi(;)c Fk(c)664 936 y Fe(00)684
952 y Fl(\))158 994 y Fh(where)33 b Fl(\()p Fk(l)335 978 y
Fe(0)346 994 y Fi(;)6 b Fk(c)383 978 y Fe(0)394 994 y Fl(\))53
b(=)37 b Fk(lab)15 b(l)i(c)306 1036 y Fl(\()p Fk(r)341 1021
y Fe(0)352 1036 y Fi(;)6 b Fk(c)389 1021 y Fe(00)409 1036 y
Fl(\))38 b(=)f Fk(lab)15 b(r)j(c)646 1021 y Fe(0)-76 1102 y
Fl(This)i(uses)g(an)g(explicit)i(coun)o(ter)e(\(represen)o(ted)g(b)o(y)g(the)
f(second)-76 1144 y(parameter)e(to)e Fk(lab)r Fl(\))g(and)i(great)f(care)g(m)
o(ust)g(b)q(e)g(tak)o(en)h(to)e(ensure)-76 1185 y(that)h(the)h(appropriate)h
(coun)o(ter)f(v)n(alue)g(is)g(used)g(in)g(eac)o(h)f(part)g(of)-76
1227 y(the)e(program;)h(simple)g(errors,)f(suc)o(h)h(as)f(writing)h
Fk(c)g Fl(in)g(place)g(of)f Fk(c)910 1211 y Fe(0)-76 1268 y
Fl(in)g(the)f(last)h(line,)g(are)f(easily)i(made)e(but)h(can)f(b)q(e)g(hard)h
(to)f(detect.)-76 1320 y(An)e(alternativ)o(e)i(de\014nition,)h(using)e(a)f
(state)g(monad)h(and)f(follo)o(wing)-76 1362 y(the)i(la)o(y)o(out)i
(suggested)f(in)g([15],)e(can)h(b)q(e)g(written)h(as)f(follo)o(ws:)-57
1424 y Fk(lab)n(el)121 b Fl(::)41 b Fk(T)m(r)n(e)n(e)16 b(a)d
Fj(!)e Fk(T)m(r)n(e)n(e)17 b Fl(\()p Fk(a)s Fi(;)6 b Fk(Int)t
Fl(\))-57 1466 y Fk(lab)n(el)16 b(tr)n(e)n(e)39 b Fl(=)f Fk(lab)15
b(tr)n(e)n(e)h Fl(`)p Fk(startingWith)r Fl(`)11 b(0)-43 1507
y Fh(where)-11 1549 y Fk(lab)k Fl(\()p Fk(L)n(e)n(af)21 b(n)s
Fl(\))37 b(=)g Fk(incr)289 b Fl(`)p Fk(bind)t Fl(`)20 b Fj(n)9
b Fk(c)j Fj(!)302 1590 y Fk(r)n(esult)k Fl(\()p Fk(L)n(e)n(af)21
b Fl(\()p Fk(n)s Fi(;)5 b Fk(c)r Fl(\)\))-11 1633 y Fk(lab)15
b Fl(\()p Fk(l)f Fl(:)r(^)q(:)d Fk(r)t Fl(\))54 b(=)37 b Fk(lab)15
b(l)284 b Fl(`)p Fk(bind)t Fl(`)20 b Fj(n)9 b Fk(l)819 1617
y Fe(0)840 1633 y Fj(!)302 1675 y Fk(lab)15 b(r)278 b Fl(`)p
Fk(bind)t Fl(`)20 b Fj(n)9 b Fk(r)825 1659 y Fe(0)847 1675
y Fj(!)302 1717 y Fk(r)n(esult)16 b Fl(\()p Fk(l)439 1701 y
Fe(0)460 1717 y Fl(:)r(^)q(:)10 b Fk(r)534 1701 y Fe(0)546
1717 y Fl(\))-76 1781 y(While)16 b(this)f(program)g(is)g(p)q(erhaps)h(a)e
(little)i(longer)f(than)g(the)f(pre-)-76 1822 y(vious)g(v)o(ersion,)g(the)e
(use)h(of)f(monad)i(op)q(erations)g(ensures)f(that)g(the)-76
1864 y(correct)e(coun)o(ter)g(v)n(alue)h(is)f(passed)h(from)e(one)h(part)g
(of)f(the)g(program)-76 1905 y(to)15 b(the)g(next.)23 b(There)15
b(is)h(no)f(need)h(to)f(men)o(tion)h(explicitly)i(that)d(a)-76
1947 y(state)h(monad)h(is)f(required:)25 b(The)16 b(use)g(of)g
Fk(startingWith)g Fl(and)g(the)-76 1988 y(initial)e(v)n(alue)d
Fk(0)k Fl(\(or)10 b(indeed,)j(the)d(use)h(of)f Fk(incr)k Fl(on)c(its)h(o)o
(wn\))g(are)f(suf-)-76 2030 y(\014cien)o(t)h(to)f(determine)i(the)e(monad)h
Fk(State)h(Int)g Fl(needed)f(for)f(the)g Fk(bind)-76 2071 y
Fl(and)15 b Fk(r)n(esult)i Fl(op)q(erators.)23 b(It)14 b(is)h(not)g
(necessary)h(to)e(distinguish)k(b)q(e-)-76 2113 y(t)o(w)o(een)12
b(di\013eren)o(t)i(v)o(ersions)f(of)f(the)g(monad)h(op)q(erators)g
Fk(bind)t Fl(,)d Fk(r)n(esult)-76 2154 y Fl(and)19 b Fk(join)h
Fl(as)e(in)h([15])f(or)g(to)g(rely)i(on)e(the)g(use)h(of)f(explicit)j(t)o(yp)
q(e)-76 2196 y(declarations.)-76 2297 y Fm(2.2)41 b(Monad)12
b(comp)o(rehensions)-76 2373 y Fl(Sev)o(eral)k(functional)g(programming)g
(languages)g(pro)o(vide)g(supp)q(ort)-76 2415 y(for)j(list)i(comprehensions,)
i(enabling)f(some)e(common)g(forms)f(of)-76 2456 y(computation)12
b(with)e(lists)g(to)g(b)q(e)g(written)g(in)g(a)f(concise)i(form)e(resem-)-76
2498 y(bling)14 b(the)f(standard)g(syn)o(tax)h(for)e(set)g(comprehensions)j
(in)e(mathe-)-76 2539 y(matics.)18 b(In)12 b([14],)f(W)m(adler)j(made)e(the)h
(observ)n(ation)h(that)e(the)g(com-)-76 2581 y(prehension)20
b(notation)g(can)e(b)q(e)g(generalized)i(to)e(arbitrary)h(mon-)-76
2622 y(ads,)12 b(of)g(whic)o(h)h(the)f(list)h(constructor)g(is)f(just)g(one)g
(sp)q(ecial)i(case.)j(In)1020 -34 y(W)m(adler's)c(notation,)h(a)e(monad)h
(comprehension)i(is)e(written)g(using)1020 7 y(the)f(syn)o(tax)g(of)f(a)h
(list)g(comprehension)i(but)e(with)g(a)g(sup)q(erscript)h(to)1020
49 y(indicate)i(the)d(monad)i(in)f(whic)o(h)g(the)g(comprehension)i(is)e(to)g
(b)q(e)g(in-)1020 90 y(terpreted.)19 b(This)c(is)f(a)f(little)j(a)o(wkw)o
(ard)e(and)g(mak)o(es)g(the)g(notation)1020 132 y(less)k(p)q(o)o(w)o(erful)f
(than)g(migh)o(t)h(b)q(e)f(hop)q(ed)g(since)h(eac)o(h)f(comprehen-)1020
173 y(sion)i(is)g(restricted)g(to)f(a)f(particular)k(monad.)32
b(Using)19 b(the)f(o)o(v)o(er-)1020 215 y(loaded)d(op)q(erators)f(describ)q
(ed)g(in)g(the)f(previous)i(section,)f(w)o(e)f(ha)o(v)o(e)1020
256 y(implemen)o(ted)j(a)d(more)g(\015exible)j(form)c(of)h(monad)i
(comprehension)1020 298 y(whic)o(h)d(relies)h(on)f(o)o(v)o(erloading)j
(rather)c(than)h(sup)q(erscripts.)19 b(A)o(t)11 b(the)1020
339 y(time)j(of)f(writing,)h(this)g(is)g(the)f(only)h(concrete)g(implemen)o
(tation)i(of)1020 381 y(monad)e(comprehensions)i(kno)o(wn)d(to)g(us.)1020
433 y(In)i(our)g(system,)g(a)g(monad)g(comprehension)i(is)f(an)f(expression)h
(of)1020 474 y(the)f(form)f([)6 b Fk(e)22 b Fj(j)d Fk(gs)9
b Fl(])14 b(where)h Fk(e)i Fl(is)e(an)g(expression)h(and)g
Fk(gs)g Fl(is)f(a)g(list)1020 516 y(of)i(generators)i(of)e(the)h(form)f
Fk(p)j Fj( )f Fk(exp)r Fl(.)30 b(As)17 b(a)h(sp)q(ecial)h(case,)g(if)1020
557 y Fk(gs)e Fl(is)e(empt)o(y)g(then)g(the)g(comprehension)j([)6
b Fk(e)22 b Fj(j)e Fk(gs)8 b Fl(])14 b(is)i(written)f(as)1020
599 y([)6 b Fk(e)j Fl(].)15 b(The)c(implemen)o(tation)i(of)d(monad)h
(comprehensions)i(is)e(based)1020 640 y(on)k(the)f(follo)o(wing)j
(translation)f(of)e(the)h(comprehension)i(notation)1020 682
y(in)g(terms)e(of)h(the)g Fk(r)n(esult)i Fl(and)e Fk(bind)i
Fl(op)q(erators)f(describ)q(ed)g(in)g(the)1020 723 y(previous)e(section:)1077
797 y([)6 b Fk(e)j Fl(])288 b(=)37 b Fk(r)n(esult)16 b(e)1077
838 y Fl([)6 b Fk(e)20 b Fj(j)d Fk(p)12 b Fj( )f Fk(exp)r Fi(;)19
b Fk(gs)9 b Fl(])37 b(=)g Fk(exp)15 b Fl(`)p Fk(bind)t Fl(`)20
b Fj(n)9 b Fk(p)k Fj(!)e Fl([)6 b Fk(e)19 b Fj(j)e Fk(gs)9
b Fl(])1020 923 y(In)i(this)g(notation,)h(the)f Fk(lab)n(el)i
Fl(function)f(from)e(the)h(previous)h(section)1020 964 y(can)h(b)q(e)h
(rewritten)f(as:)1039 1038 y Fk(lab)n(el)121 b Fl(::)41 b Fk(T)m(r)n(e)n(e)16
b(a)d Fj(!)e Fk(T)m(r)n(e)n(e)17 b Fl(\()p Fk(a)s Fi(;)6 b
Fk(Int)t Fl(\))1039 1079 y Fk(lab)n(el)16 b(tr)n(e)n(e)39 b
Fl(=)f Fk(lab)15 b(tr)n(e)n(e)g Fl(`)p Fk(startingWith)s Fl(`)c(0)1052
1121 y Fh(where)1085 1162 y Fk(lab)k Fl(\()p Fk(L)n(e)n(af)21
b(n)s Fl(\))37 b(=)g([)6 b Fk(L)n(e)n(af)21 b Fl(\()p Fk(n)s
Fi(;)5 b Fk(c)r Fl(\))17 b Fj(j)g Fk(c)12 b Fj( )f Fk(incr)f
Fl(])1085 1204 y Fk(lab)15 b Fl(\()p Fk(l)f Fl(:)r(^)q(:)c
Fk(r)t Fl(\))55 b(=)37 b([)6 b Fk(l)1429 1189 y Fe(0)1450 1204
y Fl(:)r(^)q(:)11 b Fk(r)1525 1189 y Fe(0)1553 1204 y Fj(j)17
b Fk(l)1595 1189 y Fe(0)1616 1204 y Fj( )11 b Fk(lab)k(l)t
Fi(;)20 b Fk(r)1793 1189 y Fe(0)1815 1204 y Fj( )11 b Fk(lab)k(r)c
Fl(])1020 1279 y(Applying)i(the)e(translation)i(rules)e(for)g(monad)g
(comprehensions)i(to)1020 1320 y(this)d(de\014nition)h(yields)g(the)e
(previous)i(de\014nition)h(in)e(terms)e(of)h Fk(r)n(esult)1020
1362 y Fl(and)18 b Fk(bind)t Fl(.)29 b(The)18 b(principal)j(adv)n(an)o(tage)d
(of)g(the)g(comprehension)1020 1403 y(syn)o(tax)e(is)f(that)g(it)g(is)g
(often)f(more)h(concise)h(and,)f(in)h(the)e(author's)1020 1445
y(opinion,)h(sometimes)f(more)f(attractiv)o(e.)1020 1548 y
Fm(2.3)41 b(Monads)12 b(with)h(a)g(zero)1020 1624 y Fl(An)o(y)o(one)20
b(familiar)i(with)e(the)f(use)h(of)g(list)g(comprehensions)j(will)1020
1666 y(kno)o(w)17 b(that)g(it)g(is)g(also)h(p)q(ossible)h(to)d(include)j(b)q
(o)q(olean)g(guards)e(in)1020 1707 y(addition)e(to)e(generators)g(in)g(the)g
(de\014nition)i(of)e(a)f(list)i(comprehen-)1020 1749 y(sion.)k(Once)11
b(again,)i(W)m(adler)f(sho)o(w)o(ed)g(that)f(this)h(w)o(as)f(also)i(p)q
(ossible)1020 1790 y(in)19 b(the)f(more)g(general)h(setting)g(of)f(monad)g
(comprehensions,)k(so)1020 1832 y(long)14 b(as)f(w)o(e)f(restrict)i(suc)o(h)f
(comprehensions)j(to)d(monads)g(that)h(in-)1020 1873 y(clude)19
b(a)e(sp)q(ecial)j(elemen)o(t)e Fk(zer)n(o)h Fl(satisfying)h(a)d(small)i(n)o
(um)o(b)q(er)f(of)1020 1915 y(la)o(ws.)j(This)15 b(can)g(b)q(e)f(dealt)i
(with)e(in)i(our)e(framew)o(ork)g(b)o(y)h(de\014ning)1020 1956
y(a)e(sub)q(class)i(of)e Fk(Monad)t Fl(:)1197 2030 y Fh(class)h
Fk(Monad)i(m)e Fj(\))d Fk(Monad)t Fl(0)h Fk(m)17 b Fh(where)1239
2071 y Fk(zer)n(o)39 b Fl(::)e Fk(m)17 b(a)1020 2145 y Fl(F)m(or)f(example,)h
(the)f Fk(List)i Fl(monad)e(has)g(the)g(empt)o(y)g(list)h(as)e(a)h
Fk(zer)n(o)1020 2187 y Fl(elemen)o(t:)1258 2228 y Fh(instance)e
Fk(Monad)t Fl(0)e Fk(List)17 b Fh(where)1301 2270 y Fk(zer)n(o)39
b Fl(=)e([)6 b(])1020 2331 y(Note)k(that)g(not)h(there)f(are)g(also)h(some)g
(monads)g(whic)o(h)g(do)f(not)h(ha)o(v)o(e)1020 2373 y(a)j(zero)g(elemen)o(t)
g(and)g(hence)h(cannot)f(b)q(e)g(de\014ned)h(as)f(instances)h(of)1020
2414 y Fk(Monad0)5 b Fl(.)18 b(The)c Fk(State)i(s)h Fl(monads)e(describ)q(ed)
h(in)e(Section)i(2)e(are)g(a)1020 2456 y(simple)h(example)f(of)f(this.)1020
2508 y(W)m(orking)g(in)f(a)f(monad)h(with)g(a)f(zero,)g(a)g(comprehension)j
(in)o(v)o(olving)1020 2549 y(a)f(b)q(o)q(olean)i(guard)f(can)f(b)q(e)h
(implemen)o(ted)h(using)f(the)f(translation:)1040 2622 y([)6
b Fk(e)20 b Fj(j)d Fk(guar)n(d)t Fi(;)h Fk(gs)9 b Fl(])37 b(=)g
Fh(if)12 b Fk(guar)n(d)17 b Fh(then)c Fl([)6 b Fk(e)19 b Fj(j)e
Fk(gs)9 b Fl(])k Fh(else)h Fk(zer)n(o)p eop
%%Page: 5 5
5 4 bop -76 -34 a Fl(Notice)20 b(that,)h(as)e(far)h(as)f(the)h(t)o(yp)q(e)f
(system)h(is)g(concerned,)i(the)-76 7 y(use)c(of)e Fk(zer)n(o)j
Fl(in)f(the)f(translation)j(of)d(a)g(comprehension)i(suc)o(h)f(as)-76
49 y([)6 b Fk(e)24 b Fj(j)e Fk(x)d Fj( )d Fk(xs)s Fi(;)22 b
Fk(b)8 b Fl(])15 b(automatically)k(captures)e(the)f(restriction)h(to)-76
90 y(monads)j(with)f(a)g(zero.)35 b(There)18 b(is)i(no)f(need)g(to)g(in)o
(tro)q(duce)i(an)o(y)-76 132 y(additional)16 b(mec)o(hanism)f(to)e(deal)h
(with)f(this.)-76 184 y(The)c(inclusion)j(of)d(a)g Fk(zer)n(o)i
Fl(elemen)o(t)f(also)g(allo)o(ws)g(a)f(sligh)o(tly)j(di\013eren)o(t)-76
225 y(translation)k(for)c(generators)i(in)g(comprehensions:)-33
303 y([)7 b Fk(e)19 b Fj(j)e Fk(p)12 b Fj( )g Fk(exp)r Fi(;)19
b Fk(gs)8 b Fl(])37 b(=)h Fk(exp)15 b Fl(`)p Fk(bind)t Fl(`)c
Fk(f)378 345 y Fh(where)32 b Fk(f)22 b(p)39 b Fl(=)e([)6 b
Fk(e)20 b Fj(j)d Fk(gs)8 b Fl(])525 386 y Fk(f)p 561 386 12
2 v 81 w Fl(=)37 b Fk(zer)n(o)-76 465 y Fl(This)10 b(corresp)q(onds)h
(directly)g(to)e(the)g(seman)o(tics)h(of)f(list)h(comprehen-)-76
507 y(sions)k(in)g(the)e(curren)o(t)h(v)o(ersion)i(of)d(Hask)o(ell.)18
b(The)13 b(only)h(time)f(when)-76 548 y(there)j(is)g(an)o(y)h(di\013erence)g
(b)q(et)o(w)o(een)f(this)h(and)f(the)g(translation)i(in)-76
590 y(Section)11 b(2.2)e(is)i(when)e Fk(p)j Fl(is)e(a)f Fk(r)n(efutable)h
Fl(pattern)g(whic)o(h)g(ma)o(y)g(not)g(al-)-76 631 y(w)o(a)o(ys)g(matc)o(h)g
(v)n(alues)i(generated)f(b)o(y)f Fk(exp)r Fl(.)15 b(F)m(or)10
b(example,)i(using)f(the)-76 673 y(original)18 b(translation,)f(the)f
(expression)h([)6 b Fk(x)24 b Fj(j)c Fl([)p Fk(x)5 b Fl(])13
b Fj( )h Fl([[)p Fk(1)5 b Fl(])p Fi(;)g Fl([)h(])p Fi(;)g Fl([)p
Fk(2)f Fl(]])g(])-76 714 y(ev)n(aluates)20 b(to)e([)p Fk(1)5
b Fl(]+)-16 b(+)o Fj(?)p Fl(,)18 b(whereas)g(the)g(corresp)q(onding)j(list)e
(com-)-76 756 y(prehension)f(giv)o(es)g([)p Fk(1)5 b Fi(;)g
Fk(2)g Fl(].)25 b(T)m(o)15 b(preserv)o(e)i(the)f(Hask)o(ell)i(seman)o(tics)
-76 797 y(for)13 b(list)i(comprehensions,)h(the)e(curren)o(t)g(implemen)o
(tation)i(alw)o(a)o(ys)-76 839 y(uses)g(the)g(second)h(translation)h(to)d
(implemen)o(t)j(a)e(generator)g(con-)-76 881 y(taining)d(a)f(refutable)g
(pattern.)17 b(Cases)11 b(where)g(a)g(refutable)i(pattern)-76
922 y(is)i(required)h(without)g(b)q(eing)g(restricted)g(to)e(monads)i(with)f
(a)f(zero)-76 964 y(are)d(easily)h(dealt)g(with)f(b)o(y)f(rewriting)i(the)f
(generator)g(as)5 b Fk(~p)12 b Fj( )f Fk(exp)r Fl(.)-76 1005
y(\(In)k(Hask)o(ell,)h(an)o(y)f(pattern)g Fk(p)h Fl(can)f(b)q(e)g(treated)g
(as)g(an)f(irrefutable)-76 1047 y(pattern)e(b)o(y)g(rewriting)h(it)f(as)6
b Fk(~)o(p)r Fl(.\))16 b(An)c(alternativ)o(e)h(approac)o(h)g(that)-76
1088 y(w)o(e)h(exp)q(erimen)o(ted)j(with)e(in)g(earlier)h(v)o(ersions)g(of)e
(this)h(w)o(ork)g([9])f(is)-76 1130 y(to)e(use)h(a)f(sligh)o(tly)j
(di\013eren)o(t)f(syn)o(tax)f(for)f(monad)h(comprehensions)-76
1171 y(so)i(that)h(there)f(is)h(no)f(clash)h(with)g(the)f(seman)o(tics)i(of)d
(Hask)o(ell)j(list)-76 1213 y(comprehensions.)-76 1317 y Fm(2.4)41
b(Generic)14 b(op)q(erations)e(on)h(monads)-76 1393 y Fl(The)j(com)o
(bination)i(of)d(p)q(olymorphis)q(m)j(and)e(constructor)h(classes)-76
1434 y(in)f(our)f(system)g(mak)o(es)g(it)h(p)q(ossible)h(to)e(de\014ne)h
(generic)g(functions)-76 1476 y(whic)o(h)f(can)g(b)q(e)f(used)h(on)g(a)f
(wide)h(range)g(of)f(di\013eren)o(t)i(monads.)22 b(A)-76 1517
y(simple)13 b(example)f(of)f(this)h(is)f(the)g Fk(Kleisli)g(c)n(omp)n
(osition)g Fl(for)f(an)h(arbi-)-76 1559 y(trary)k(monad,)g(similar)i(to)d
(the)h(usual)h(comp)q(osition)h(of)d(functions)-76 1600 y(except)i(that)f(it)
h(also)g(tak)o(es)f(care)h(of)e(`side)i(e\013ects'.)24 b(The)15
b(general)-76 1642 y(de\014nition)h(is)d(as)h(follo)o(ws:)-57
1720 y(\(@@\))37 b(::)f Fk(Monad)9 b(m)14 b Fj(\))e Fl(\()p
Fk(b)6 b Fj(!)t Fk(m)k(c)r Fl(\))t Fj(!)t Fl(\()p Fk(a)d Fj(!)t
Fk(m)k(b)r Fl(\))t Fj(!)t Fl(\()p Fk(a)c Fj(!)t Fk(m)k(c)r
Fl(\))-57 1762 y Fk(f)21 b Fl(@@)14 b Fk(g)27 b Fl(=)d Fk(join)16
b Fi(:)d Fk(map)j(f)21 b Fi(:)14 b Fk(g)-76 1841 y Fl(F)m(or)d(example,)i(in)
f(a)f(monad)h(of)f(the)h(form)f Fk(State)i(s)s Fl(,)e(the)g(expression)-76
1882 y Fk(f)d Fl(@@)p Fk(g)13 b Fl(denotes)f(a)f(state)g(transformer)g(in)h
(whic)o(h)f(the)g(\014nal)i(state)d(of)-76 1924 y(the)g(computation)i(asso)q
(ciated)g(with)f Fk(g)h Fl(is)f(used)g(as)f(the)g(initial)j(state)-76
1965 y(for)i(the)g(computation)i(asso)q(ciated)g(with)e Fk(f)8
b Fl(.)22 b(More)15 b(precisely)m(,)i(for)-76 2007 y(this)g(particular)g
(kind)g(of)e(monad,)i(the)f(general)h(de\014nition)h(giv)o(en)-76
2048 y(ab)q(o)o(v)o(e)c(is)g(equiv)n(alen)o(t)h(to:)-31 2126
y(\()p Fk(f)8 b Fl(@@)p Fk(g)s Fl(\))13 b Fk(a)40 b Fl(=)e
Fk(ST)18 b Fl(\()p Fj(n)p Fk(s)358 2130 y Ff(0)386 2126 y Fj(!)11
b Fh(let)32 b Fk(ST)19 b(g)606 2110 y Fe(0)654 2126 y Fl(=)38
b Fk(g)16 b(a)517 2168 y Fl(\()p Fk(b)r Fi(;)6 b Fk(s)585 2172
y Ff(1)602 2168 y Fl(\))37 b(=)h Fk(g)743 2153 y Fe(0)768 2168
y Fk(s)784 2172 y Ff(0)517 2211 y Fk(ST)19 b(f)605 2195 y Fe(0)654
2211 y Fl(=)38 b Fk(f)21 b(b)517 2253 y Fl(\()p Fk(c)r Fi(;)6
b Fk(s)585 2257 y Ff(2)602 2253 y Fl(\))37 b(=)h Fk(f)741 2237
y Fe(0)766 2253 y Fk(s)782 2257 y Ff(1)435 2294 y Fh(in)h Fl(\()p
Fk(c)r Fi(;)6 b Fk(s)580 2298 y Ff(2)597 2294 y Fl(\)\))-76
2373 y(The)12 b(biggest)h(adv)n(an)o(tage)g(of)e(the)h(generic)h
(de\014nition)h(is)e(that)g(there)-76 2415 y(is)18 b(no)f(need)h(to)f
(construct)h(new)f(de\014nitions)j(of)d(\(@@\))f(for)h(ev)o(ery)-76
2456 y(di\013eren)o(t)g(monad.)25 b(On)16 b(the)f(other)h(hand,)h(if)e(sp)q
(eci\014c)i(de\014nitions)-76 2498 y(w)o(ere)g(required)h(for)e(some)h
(instances,)j(p)q(erhaps)e(in)f(the)g(in)o(terests)-76 2539
y(of)h(e\016ciency)m(,)j(w)o(e)d(could)h(simply)i(include)f(\(@@\))e(as)h(a)f
(mem)o(b)q(er)-76 2581 y(function)11 b(of)f Fk(Monad)i Fl(and)e(use)g(the)g
(generic)h(de\014nition)i(as)c(a)h(default)-76 2622 y(implemen)o(tation)q(.)
1020 -34 y(Generic)19 b(op)q(erations)g(can)f(also)g(b)q(e)g(de\014ned)g
(using)h(the)f(compre-)1020 7 y(hension)d(notation:)1039 86
y Fk(mapl)199 b Fl(::)41 b Fk(Monad)9 b(m)f Fj(\))t Fl(\()p
Fk(a)f Fj(!)t Fk(m)k(b)r Fl(\))t Fj(!)t Fl(\([)p Fk(a)s Fl(])t
Fj(!)t Fk(m)f Fl([)p Fk(b)r Fl(]\))1039 128 y Fk(mapl)17 b(f)k
Fl([)6 b(])117 b(=)37 b([)6 b([)h(])f(])1039 169 y Fk(mapl)17
b(f)k Fl(\()p Fk(x)9 b Fl(:)t Fk(xs)s Fl(\))36 b(=)h([)6 b
Fk(y)14 b Fl(:)c Fk(ys)20 b Fj(j)d Fk(y)c Fj( )e Fk(f)22 b(x)5
b Fi(;)11 b Fk(ys)i Fj( )e Fk(mapl)17 b(f)22 b(xs)9 b Fl(])1020
249 y(The)15 b(expression)i Fk(mapl)h(f)23 b(xs)17 b Fl(represen)o(ts)f(a)f
(computation)i(whose)1020 290 y(result)e(is)g(the)g(list)g(obtained)h(b)o(y)f
(applying)i Fk(f)k Fl(to)15 b(eac)o(h)f(elemen)o(t)h(of)1020
332 y(the)c(list)h Fk(xs)s Fl(,)e(starting)i(on)f(the)g(left)g(\(i.e.)17
b(mo)o(ving)12 b(from)e(the)h(fron)o(t)g(to)1020 374 y(the)k(bac)o(k)g(of)f
(the)h(list\).)23 b(Unlik)o(e)16 b(the)f(normal)h Fk(map)g
Fl(function,)g(the)1020 415 y(direction)g(is)f(signi\014can)o(t)h(b)q(ecause)
f(the)f(function)h Fk(f)22 b Fl(ma)o(y)14 b(pro)q(duce)1020
457 y(a)d(`side-e\013ect'.)17 b(The)10 b Fk(mapl)k Fl(function)e(has)f
(application)q(s)i(in)f(sev)o(eral)1020 498 y(kinds)k(of)f(monad)g(with)g(ob)
o(vious)i(examples)f(in)o(v)o(olving)i(state)c(and)1020 540
y(output.)1020 592 y(The)j(comprehension)j(notation)f(can)f(also)g(b)q(e)g
(used)g(to)f(de\014ne)h(a)1020 633 y(generalization)e(of)d(Hask)o(ell's)h
Fk(\014lter)h Fl(function)g(whic)o(h)e(w)o(orks)g(in)h(an)1020
675 y(arbitrary)g(monad)g(with)g(a)f(zero:)1039 753 y Fk(\014lter)130
b Fl(::)41 b Fk(Monad)t Fl(0)13 b Fk(m)h Fj(\))d Fl(\()p Fk(a)i
Fj(!)e Fk(Bo)n(ol)t Fl(\))e Fj(!)i Fk(m)17 b(a)d Fj(!)d Fk(m)17
b(a)1039 795 y(\014lter)f(p)g(xs)40 b Fl(=)d([)6 b Fk(x)21
b Fj(j)c Fk(x)e Fj( )c Fk(xs)s Fi(;)19 b Fk(p)d(x)11 b Fl(])1020
875 y(There)17 b(are)g(man)o(y)h(other)g(general)g(purp)q(ose)h(functions)f
(that)g(can)1020 916 y(b)q(e)e(de\014ned)g(in)g(the)g(curren)o(t)f(framew)o
(ork)h(and)g(used)g(in)g(arbitrary)1020 958 y(monads.)h(Unfortunately)m(,)c
(space)f(prohibits)i(the)d(inclusion)k(of)c(an)o(y)1020 999
y(further)i(examples)i(here.)1020 1104 y Fm(2.5)41 b(A)14 b(family)e(of)h
(state)g(monads)1020 1180 y Fl(W)m(e)f(ha)o(v)o(e)h(already)g(describ)q(ed)h
(the)e(use)g(of)g(monads)h(to)f(mo)q(del)h(pro-)1020 1221 y(grams)e(with)h
(state)f(using)h(the)g Fk(State)g Fl(datat)o(yp)q(e)g(in)f(Section)i(2.)j
(The)1020 1263 y(essen)o(tial)c(prop)q(ert)o(y)f(of)f(an)o(y)g(suc)o(h)h
(monad)g(is)f(the)h(abilit)o(y)h(to)e(up)q(date)1020 1304 y(the)17
b(state)g(and)h(w)o(e)f(migh)o(t)h(therefore)f(consider)i(a)e(more)g(general)
1020 1346 y(class)d(of)f(state)g(monads)h(giv)o(en)g(b)o(y:)1117
1425 y Fh(class)g Fk(Monad)i Fl(\()p Fk(m)h(s)s Fl(\))10 b
Fj(\))h Fk(StateMonad)k(m)i(s)f Fh(where)1159 1466 y Fk(up)n(date)38
b Fl(::)f(\()p Fk(s)13 b Fj(!)f Fk(s)s Fl(\))e Fj(!)h Fk(m)17
b(s)f(s)1020 1546 y Fl(An)10 b(expression)i(of)e(the)g(form)g
Fk(up)n(date)i(f)18 b Fl(denotes)11 b(the)f(computation)1020
1588 y(whic)o(h)i(up)q(dates)h(the)f(state)f(using)i Fk(f)19
b Fl(and)12 b(returns)g(the)g(old)g(state)g(as)1020 1629 y(its)k(result.)25
b(F)m(or)15 b(example,)i(the)f Fk(incr)i Fl(function)f(describ)q(ed)g(ab)q(o)
o(v)o(e)1020 1671 y(can)c(b)q(e)h(de\014ned)g(as)f Fk(up)n(date)i
Fl(\()p Fk(1)5 b Fl(+\))12 b(in)i(this)g(more)f(general)h(setting.)1020
1712 y(Op)q(erations)j(to)e(set)h(the)f(state)h(to)f(a)h(particular)h(v)n
(alue)g(or)f(return)1020 1754 y(the)d(curren)o(t)h(state)f(are)g(easily)i
(describ)q(ed)g(in)e(terms)g(of)g Fk(up)n(date)s Fl(.)1020
1806 y(The)h Fk(StateMonad)g Fl(class)h(has)f(t)o(w)o(o)g(parameters;)g(the)g
(\014rst)g(should)1020 1847 y(b)q(e)e(a)g(constructor)g(of)g(kind)h(\()p
Fj(\003)d(!)h(\003)g(!)g(\003)p Fl(\))h(while)h(the)e(second)i(giv)o(es)1020
1889 y(the)j(state)h(t)o(yp)q(e)f(\(of)g(kind)i Fj(\003)p Fl(\);)f(b)q(oth)g
(are)f(needed)h(to)g(sp)q(ecify)g(the)1020 1930 y(t)o(yp)q(e)d(of)f
Fk(up)n(date)s Fl(.)i(The)f(implemen)o(tation)i(of)d Fk(up)n(date)h
Fl(for)f(a)g(monad)1020 1972 y(of)g(the)h(form)f Fk(State)i(s)h
Fl(is)e(straigh)o(tforw)o(ard)h(and)f(pro)o(vides)h(us)f(with)1020
2013 y(our)f(\014rst)h(instance)g(of)f Fk(StateMonad)t Fl(:)1181
2092 y Fh(instance)g Fk(StateMonad)i(State)g(s)h Fh(where)1224
2134 y Fk(up)n(date)e(f)45 b Fl(=)38 b Fk(ST)18 b Fl(\()p Fj(n)p
Fk(s)c Fj(!)24 b Fl(\()p Fk(s)s Fi(;)6 b Fk(f)22 b(s)s Fl(\)\))1020
2214 y(A)c(rather)h(more)f(in)o(teresting)j(family)e(of)f(state)h(monads)g
(can)g(b)q(e)1020 2255 y(describ)q(ed)c(using)f(the)g(follo)o(wing)h(datat)o
(yp)q(e)f(de\014nition:)1122 2334 y Fh(data)h Fk(StateM)j(m)f(s)f(a)40
b Fl(=)e Fk(STM)20 b Fl(\()p Fk(s)13 b Fj(!)e Fk(m)17 b Fl(\()p
Fk(a)s Fi(;)6 b Fk(s)s Fl(\)\))1020 2413 y(Note)11 b(that)g(the)g(\014rst)h
(parameter)g(to)f Fk(StateM)k Fl(has)d(kind)g(\()p Fj(\003)f(!)g(\003)p
Fl(\),)g(a)1020 2454 y(signi\014can)o(t)h(extension)f(from)e(Hask)o(ell)i
(where)f(all)g(of)g(the)f(argumen)o(ts)1020 2496 y(to)i(a)g(t)o(yp)q(e)h
(constructor)g(m)o(ust)f(b)q(e)h(t)o(yp)q(es.)17 b(This)11
b(is)h(another)g(b)q(ene\014t)1020 2537 y(of)h(the)g(kind)h(system.)p
eop
%%Page: 6 6
6 5 bop -76 -34 a Fl(The)10 b(functor)h(and)f(monad)h(structure)g(of)f(a)g
Fk(StateM)16 b(m)e(s)f Fl(construc-)-76 7 y(tor)g(are)g(giv)o(en)h(b)o(y:)-57
86 y Fh(instance)f Fk(Monad)j(m)e Fj(\))d Fk(F)m(unctor)17
b Fl(\()p Fk(StateM)h(m)f(s)s Fl(\))c Fh(where)-14 128 y Fk(map)i(f)22
b Fl(\()p Fk(STM)e(xs)s Fl(\))64 170 y(=)37 b Fk(STM)20 b Fl(\()p
Fj(n)p Fk(s)14 b Fj(!)d Fl([)6 b(\()p Fk(f)21 b(x)5 b Fi(;)h
Fk(s)471 154 y Fe(0)482 170 y Fl(\))17 b Fj(j)d Fl(~)m(\()p
Fk(x)5 b Fi(;)g Fk(s)628 154 y Fe(0)639 170 y Fl(\))11 b Fj( )g
Fk(xs)16 b(s)9 b Fl(]\))-57 250 y Fh(instance)k Fk(Monad)j(m)e
Fj(\))d Fk(Monad)17 b Fl(\()p Fk(StateM)h(m)f(s)s Fl(\))c Fh(where)-14
292 y Fk(r)n(esult)j(x)41 b Fl(=)c Fk(STM)20 b Fl(\()p Fj(n)p
Fk(s)14 b Fj(!)d Fl([\()p Fk(x)5 b Fi(;)g Fk(s)s Fl(\)]\))-14
333 y Fk(STM)20 b(xs)c Fl(`)p Fk(bind)t Fl(`)11 b Fk(f)153
376 y Fl(=)37 b Fk(STM)20 b Fl(\()p Fj(n)p Fk(s)14 b Fj(!)d
Fk(xs)16 b(s)h Fl(`)p Fk(bind)t Fl(`)j Fj(n)8 b Fl(\()p Fk(xs)s
Fi(;)e Fk(s)752 360 y Fe(0)763 376 y Fl(\))k Fj(!)436 418 y
Fh(let)32 b Fk(STM)20 b(f)641 402 y Fe(0)690 418 y Fl(=)37
b Fk(f)21 b(x)436 460 y Fh(in)39 b Fk(f)533 444 y Fe(0)558
460 y Fk(s)577 444 y Fe(0)588 460 y Fl(\))-76 540 y(Note)10
b(the)f(condition)k(that)c Fk(m)k Fl(is)d(an)g(instance)i(of)d
Fk(Monad)j Fl(in)e(eac)o(h)g(of)-76 581 y(these)h(de\014nitions.)19
b(The)11 b(de\014nition)i(of)e Fk(StateM)16 b(m)e Fl(as)d(an)g(instance)-76
623 y(of)i Fk(StateMonad)h Fl(is)f(also)h(straigh)o(tforw)o(ard:)46
702 y Fh(instance)g Fk(StateMonad)g Fl(\()p Fk(StateM)k(m)s
Fl(\))c Fk(s)j Fh(where)89 743 y Fk(up)n(date)e(f)45 b Fl(=)37
b Fk(STM)20 b Fl(\()p Fj(n)p Fk(s)13 b Fj(!)f Fl([\()p Fk(s)s
Fi(;)5 b Fk(f)21 b(s)s Fl(\)]\))-76 823 y(Supp)q(ort)d(for)f(monads)h(lik)o
(e)g Fk(StateM)k(m)f(s)e Fl(seems)f(to)e(b)q(e)i(an)f(im-)-76
865 y(p)q(ortan)o(t)i(step)g(to)o(w)o(ards)f(solving)j(the)d(problem)i(of)e
(constructing)-76 906 y(monads)13 b(b)o(y)f(com)o(bining)i(features)e(from)f
(simpler)i(monads,)g(in)f(this)-76 948 y(case)j(com)o(bining)i(the)e(use)g
(of)f(state)h(with)g(the)g(features)g(of)f(an)h(ar-)-76 989
y(bitrary)f(monad)g Fk(m)s Fl(.)-76 1094 y Fm(2.6)41 b(Monads)12
b(and)h(substitution)-76 1170 y Fl(The)f(previous)i(sections)f(ha)o(v)o(e)g
(concen)o(trated)g(on)f(the)g(use)g(of)g(mon-)-76 1211 y(ads)18
b(to)e(describ)q(e)j(computations.)31 b(Monads)18 b(also)g(ha)o(v)o(e)f(a)g
(useful)-76 1253 y(in)o(terpretation)h(as)e(a)g(general)h(approac)o(h)g(to)f
(substitution.)28 b(This)-76 1294 y(in)13 b(turn)f(pro)o(vides)i(another)f
(application)i(for)d(constructor)h(classes.)-76 1346 y(T)m(aking)g(a)f
(fairly)h(general)g(approac)o(h,)g(a)e(substitution)k(can)d(b)q(e)g(con-)-76
1388 y(sidered)17 b(as)f(a)g(function)h Fk(s)h Fl(::)d Fk(v)k
Fj(!)d Fk(t)j(w)h Fl(where)c(the)g(t)o(yp)q(es)g Fk(v)k Fl(and)-76
1429 y Fk(w)f Fl(represen)o(t)c(sets)g(of)f(v)n(ariables)j(and)f(the)e(t)o
(yp)q(e)h Fk(t)k(a)e Fl(represen)o(ts)e(a)-76 1471 y(set)g(of)f(terms,)h(t)o
(ypically)j(in)o(v)o(olving)g(elemen)o(ts)d(of)g(t)o(yp)q(e)g
Fk(a)s Fl(.)22 b(If)14 b Fk(t)k Fl(is)-76 1512 y(a)f(monad)h(and)g
Fk(x)j Fl(::)c Fk(t)j(v)t Fl(,)e(then)f Fk(x)22 b Fl(`)p Fk(bind)t
Fl(`)15 b Fk(s)k Fl(giv)o(es)f(the)g(result)f(of)-76 1554 y(applying)f(the)c
(substitution)k Fk(s)f Fl(to)e(the)g(term)f Fk(x)17 b Fl(b)o(y)c(replacing)i
(eac)o(h)-76 1595 y(o)q(ccurrence)e(of)f(a)h(v)n(ariable)h
Fk(v)h Fl(in)e Fk(x)k Fl(with)12 b(the)g(corresp)q(onding)j(term)-76
1637 y Fk(s)i(v)f Fl(in)e(the)f(result.)18 b(F)m(or)13 b(example:)-29
1716 y Fh(instance)g Fk(Monad)k(T)m(r)n(e)n(e)f Fh(where)14
1757 y Fk(r)n(esult)g(x)182 b Fl(=)37 b Fk(L)n(e)n(af)21 b(x)14
1799 y(L)n(e)n(af)g(n)16 b Fl(`)p Fk(bind)t Fl(`)11 b Fk(s)54
b Fl(=)37 b Fk(s)16 b(n)14 1840 y Fl(\()p Fk(l)e Fl(:)r(^)q(:)c
Fk(r)t Fl(\))k(`)p Fk(bind)t Fl(`)e Fk(s)40 b Fl(=)d(\()p Fk(l)17
b Fl(`)p Fk(bind)t Fl(`)12 b Fk(s)s Fl(\))e(:)r(^)q(:)g(\()p
Fk(r)18 b Fl(`)p Fk(bind)t Fl(`)p Fk(s)s Fl(\))-76 1920 y(With)i(this)f(in)o
(terpretation)i(in)e(mind,)h(the)f(Kleisli)i(comp)q(osition)-76
1962 y(\(@@\))14 b(in)h(Section)h(2.4)e(is)h(just)g(the)f(standard)i(w)o(a)o
(y)e(of)g(comp)q(osing)-76 2003 y(substitutions,)g(while)d(the)g
Fk(r)n(esult)i Fl(function)e(corresp)q(onds)i(to)d(a)g(n)o(ull)-76
2045 y(substitution.)25 b(The)14 b(fact)g(that)h(\(@@\))f(is)h(asso)q(ciativ)
o(e)i(with)e Fk(r)n(esult)-76 2086 y Fl(as)g(b)q(oth)h(a)f(left)g(and)h(righ)
o(t)f(iden)o(tit)o(y)i(follo)o(ws)f(from)f(the)g(standard)-76
2128 y(algebraic)g(prop)q(erties)g(of)e(a)g(monad.)-76 2236
y Fm(3)41 b(A)14 b(fo)o(rmal)e(treatment)i(of)f(the)h(t)o(yp)q(e)f(system)-76
2325 y Fl(Ha)o(ving)i(outlined)g(a)f(n)o(um)o(b)q(er)g(of)f(di\013eren)o(t)i
(examples)g(motiv)n(ating)-76 2366 y(the)g(use)g(of)f(constructor)h(classes,)
h(this)g(section)f(pro)o(vides)i(a)d(more)-76 2408 y(formal)e(description)j
(of)c(the)h(underlying)j(t)o(yp)q(e)d(system.)17 b(In)11 b(partic-)-76
2449 y(ular,)j(w)o(e)f(sho)o(w)h(ho)o(w)f(the)h(use)g(of)f(constructor)h
(classes)h(is)f(suitable)-76 2491 y(for)e(use)g(in)g(a)g(language)h(where)f
(t)o(yp)q(e)g(inference)h(is)f(used)g(to)g(replace)-76 2533
y(the)j(need)g(for)f(explicit)j(t)o(yp)q(e)e(annotations.)23
b(This)15 b(is)g(particularly)-76 2574 y(in)o(teresting)j(from)e(a)g
(theoretical)i(p)q(oin)o(t)g(of)e(view)g(since)i(the)e(t)o(yp)q(e)1020
-34 y(system)k(includes)h(b)q(oth)f(higher-order)h(p)q(olymorphism)h(\(for)d
(ex-)1020 7 y(ample,)i(allo)o(wing)g(univ)o(ersal)g(quan)o(ti\014cation)g(o)o
(v)o(er)e(constructors)1020 49 y(of)13 b(kind)h Fj(\003)d(!)g(\003)p
Fl(\))i(and)h(o)o(v)o(erloading.)1020 101 y(F)m(or)c(reasons)h(of)f(space,)h
(man)o(y)g(of)e(the)i(tec)o(hnical)h(details)g(ha)o(v)o(e)e(b)q(een)1020
142 y(omitted)g(from)e(this)i(presen)o(tation.)18 b(Ho)o(w)o(ev)o(er,)9
b(the)g(de\014nitions)i(and)1020 184 y(o)o(v)o(erall)h(approac)o(h)g(used)f
(here)f(are)h(v)o(ery)g(closely)h(based)f(on)g(our)f(ear-)1020
225 y(lier)h(w)o(ork)f(with)g Fk(quali\014e)n(d)e(typ)n(es)j
Fl(except)g(that)f(w)o(e)f(allo)o(w)i(predicates)1020 267 y(o)o(v)o(er)j(t)o
(yp)q(e)f(constructors)i(in)f(addition)i(to)d(predicates)i(o)o(v)o(er)f(t)o
(yp)q(es.)1020 308 y(This)e(previous)g(w)o(ork)f(is)h(describ)q(ed)h(in)f
([7])e(and)i(do)q(cumen)o(ted)g(more)1020 350 y(fully)j(in)e([8].)1020
454 y Fm(3.1)41 b(Constructo)o(rs,)13 b(substitutions)e(and)j(p)o(redicates)
1020 530 y Fl(In)g(order)g(to)f(w)o(ork)h(more)f(formally)i(with)f(the)g(use)
g(of)f(constructor)1020 571 y(classes)g(it)g(is)g(con)o(v)o(enien)o(t)h(to)e
(explicitly)k(annotate)d(eac)o(h)f(construc-)1020 613 y(tor)h(expression)i
(with)f(its)f(kind.)19 b(Th)o(us)13 b(for)g(eac)o(h)g(kind)h
Fi(\024)p Fl(,)f(w)o(e)g(ha)o(v)o(e)1020 654 y(a)h(collection)i(of)d
(constructors)i Fk(C)1519 638 y Fd(\024)1553 654 y Fl(\(including)i
Fk(c)n(onstructor)11 b(vari-)1020 696 y(ables)j Fi(\013)1141
680 y Fd(\024)1161 696 y Fl(\))f(of)g(kind)h Fi(\024)f Fl(giv)o(en)h(b)o(y)f
(the)h(grammar:)1220 773 y Fk(C)1252 757 y Fd(\024)1310 773
y Fl(::=)37 b Fi(\037)1423 757 y Fd(\024)1619 773 y Fk(c)n(onstants)1330
815 y Fj(j)58 b Fi(\013)1424 799 y Fd(\024)1619 815 y Fk(variables)1330
865 y Fj(j)g Fk(C)1431 849 y Fd(\024)1449 839 y Fc(0)1461 849
y Fe(!)p Fd(\024)1518 865 y Fk(C)1550 849 y Fd(\024)1568 839
y Fc(0)1619 865 y Fk(applic)n(ations)1020 943 y Fl(The)9 b(apparen)o(t)i
(mismatc)o(h)f(b)q(et)o(w)o(een)g(these)f(explicitl)q(y)j(kinded)f(con-)1020
984 y(structors)h(and)f(the)h(implicit)i(kinding)f(used)f(in)g(the)f
(preceding)i(sec-)1020 1026 y(tions)i(will)h(b)q(e)e(addressed)h(in)g
(Section)g(4.)20 b(Note)14 b(that,)g(other)h(than)1020 1067
y(requiring)e(that)e(the)g(function)i(space)e(constructor)h
Fj(!)f Fl(b)q(e)h(included)1020 1109 y(as)h(an)h(elemen)o(t)g(of)f
Fk(C)1339 1093 y Fe(\003!\003!\003)1450 1109 y Fl(,)g(w)o(e)g(do)g(not)h(mak)
o(e)f(an)o(y)h(assumption)1020 1150 y(ab)q(out)g(the)f(constructor)h(constan)
o(ts)g Fi(\037)1593 1134 y Fd(\024)1626 1150 y Fl(in)g(the)f(grammar)g(ab)q
(o)o(v)o(e.)1020 1202 y(A)g Fk(substitution)g Fl(is)h(a)f(mapping)j(from)d(v)
n(ariables)j(to)d(constructors.)1020 1244 y(An)o(y)f(suc)o(h)h(function)g
(can)g(b)q(e)f(extended)h(in)g(a)f(natural)h(w)o(a)o(y)f(to)g(giv)o(e)1020
1285 y(a)i(mapping)i(from)e(constructors)i(to)e(constructors.)21
b(F)m(or)14 b(the)h(pur-)1020 1327 y(p)q(oses)i(of)f(this)h(w)o(ork,)g(w)o(e)
f(will)h(restrict)g(ourselv)o(es)h(to)e(the)h(use)f(of)1020
1368 y Fk(kind-pr)n(eservin)o(g)c(substitution)o(s)j Fl(whic)o(h)g(map)g(eac)
o(h)h(v)n(ariable)g(to)f(a)1020 1410 y(constructor)c(of)e(the)h(same)g(kind.)
18 b(A)9 b(simple)i(induction)i(sho)o(ws)d(that)1020 1451 y(eac)o(h)h(of)f
(the)h(collections)i Fk(C)1424 1435 y Fd(\024)1456 1451 y Fl(is)e(closed)h
(with)f(resp)q(ect)g(to)g(suc)o(h)g(sub-)1020 1493 y(stitutions.)1020
1545 y(A)g(constructor)h(class)h(represen)o(ts)f(a)g(set)f(of)g(constructors)
i(or,)e(more)1020 1586 y(generally)m(,)20 b(when)d(the)g(class)h(has)g(m)o
(ultiple)h(parameters,)g(a)e(rela-)1020 1628 y(tion)j(b)q(et)o(w)o(een)f
(constructors.)35 b(The)18 b(kinds)i(of)f(the)g(elemen)o(ts)g(in)1020
1669 y(the)c(relations)h(for)e(a)h(giv)o(en)g(class)h Fk(P)i
Fl(are)c(sp)q(eci\014ed)j(b)o(y)d(a)h(tuple)g(of)1020 1711
y(kinds)h(\()p Fi(\024)1160 1715 y Ff(1)1178 1711 y Fi(;)6
b(:)g(:)g(:)g(;)g(\024)1285 1715 y Fb(n)1309 1711 y Fl(\))15
b(called)h(the)f Fk(arity)i Fl(of)e Fk(P)t Fl(.)22 b(F)m(or)14
b(example,)j(an)o(y)1020 1752 y(standard)g(t)o(yp)q(e)e(class)h(has)g(arit)o
(y)g(\()p Fj(\003)p Fl(\),)f(the)g Fk(F)m(unctor)j Fl(and)e
Fk(Monad)1020 1794 y Fl(classes)j(ha)o(v)o(e)f(arit)o(y)g(\()p
Fj(\003)g(!)h(\003)p Fl(\))e(and)h(the)g Fk(StateMonad)g Fl(class)h(has)1020
1835 y(arit)o(y)c(\()p Fj(\003)d(!)h(\003)p Fi(;)f Fj(\003)p
Fl(\).)20 b(A)13 b Fk(pr)n(e)n(dic)n(ate)h Fl(\(or)g(class)h(constrain)o(t\))
g(is)g(an)f(ex-)1020 1877 y(pression)j(of)e(the)g(form)g Fk(P)j(C)1448
1881 y Ff(1)1488 1877 y Fi(:)6 b(:)g(:)21 b Fk(C)1581 1881
y Fb(n)1620 1877 y Fl(\(where)15 b(eac)o(h)g Fk(C)1863 1883
y Fb(i)1893 1877 y Fj(2)f Fk(C)1965 1861 y Fd(\024)1983 1871
y Fb(i)2001 1877 y Fl(\))1020 1918 y(represen)o(ting)k(the)e(assertion)h
(that)f(the)g(constructors)h Fk(C)1875 1922 y Ff(1)1893 1918
y Fl(,)p Fi(:)5 b(:)h(:)g Fl(,)p Fk(C)1992 1922 y Fb(n)1020
1960 y Fl(are)13 b(related)h(b)o(y)g Fk(P)t Fl(.)1020 2012
y(The)h(prop)q(erties)h(of)e(predicates)i(are)f(captured)h(abstractly)g(b)o
(y)f(an)1020 2053 y(en)o(tailmen)o(t)f(relation)f Fk(P)i Fj(`)-14
b(`)11 b Fk(Q)k Fl(b)q(et)o(w)o(een)e(\014nite)f(sets)g(of)g(predicates.)1020
2095 y(F)m(or)i(our)g(purp)q(oses,)h(the)f Fj(`)-14 b(`)14
b Fl(relation)h(m)o(ust)f(b)q(e)g(transitiv)o(e,)i(closed)1020
2136 y(under)e(substitution)i(and)e(monotonic)h(in)f(the)f(sense)h(that)f
Fk(P)i Fj(`)-14 b(`)11 b Fk(Q)1020 2178 y Fl(whenev)o(er)h
Fk(P)i Fj(\023)d Fk(Q)s Fl(.)17 b(The)11 b(precise)h(de\014nition)i(of)d(en)o
(tailmen)o(t)i(is)f(de-)1020 2219 y(termined)h(b)o(y)f(the)g(class)g(and)h
(instance)g(declarations)h(that)e(app)q(ear)1020 2261 y(in)17
b(a)f(giv)o(en)h(program.)26 b(The)16 b(follo)o(wing)i(examples)g(are)e
(based)h(on)1020 2302 y(the)c(de\014nitions)j(giv)o(en)e(in)g(the)f
(preceding)i(sections:)1039 2379 y Fk(P)415 b Fj(`)-14 b(`)38
b(f)p Fk(F)m(unctor)16 b(List)t Fi(;)c Fk(Monad)k(List)t Fj(g)1039
2420 y(f)p Fk(Monad)g(m)1224 2405 y Fe(\003!\003)1289 2420
y Fj(g)172 b(`)-14 b(`)38 b(f)p Fk(F)m(unctor)16 b(m)1751 2405
y Fe(\003!\003)1816 2420 y Fj(g)1039 2462 y(f)p Fk(StateMonad)f(m)1309
2446 y Fe(\003!\003)1387 2462 y Fk(s)1406 2446 y Fe(\003)1424
2462 y Fj(g)37 b(`)-14 b(`)38 b(f)p Fk(Monad)17 b Fl(\()p Fk(m)1751
2446 y Fe(\003!\003)1829 2462 y Fk(s)1848 2446 y Fe(\003)1866
2462 y Fl(\))p Fj(g)1020 2539 y Fl(In)i(practice,)j(some)e(restrictions)h(on)
f(the)f(de\014nition)j(of)d Fj(`)-14 b(`)20 b Fl(will)1020
2581 y(b)q(e)15 b(needed)g(to)g(ensure)g(decidabili)q(t)o(y)j(of)c(t)o(yp)q
(e)h(c)o(hec)o(king.)23 b(W)m(e)15 b(will)1020 2622 y(return)f(to)e(this)i(p)
q(oin)o(t)h(in)e(Section)i(3.5.)p eop
%%Page: 7 7
7 6 bop -76 -34 a Fm(3.2)41 b(T)m(yp)q(es)13 b(and)g(terms)-76
42 y Fl(F)m(ollo)o(wing)19 b(the)d(de\014nition)j(of)d(t)o(yp)q(es)h(and)g(t)
o(yp)q(e)g(sc)o(hemes)g(in)g(ML)-76 83 y(w)o(e)11 b(use)g(a)g(structured)h
(language)h(of)e(t)o(yp)q(es,)h(with)f(the)g(principal)k(re-)-76
125 y(striction)e(b)q(eing)g(the)e(inabili)q(t)o(y)j(to)d(supp)q(ort)h
(functions)h(with)e(either)-76 166 y(p)q(olymorphic)16 b(or)d(o)o(v)o
(erloaded)i(argumen)o(ts:)157 242 y Fi(\034)44 b Fl(::=)37
b Fk(C)339 226 y Fe(\003)455 242 y Fk(typ)n(es)157 284 y Fi(\032)k
Fl(::=)c Fk(P)14 b Fj(\))d Fi(\034)42 b Fk(quali\014e)n(d)11
b(typ)n(es)157 325 y Fi(\033)39 b Fl(::=)e Fj(8)p Fk(T)5 b
Fi(:\032)64 b Fk(typ)n(e)12 b(schemes)-76 406 y Fl(\()p Fk(P)k
Fl(and)c Fk(T)17 b Fl(range)c(o)o(v)o(er)f(\014nite)h(sequences)g(of)f
(predicates)h(and)g(con-)-76 447 y(structor)h(v)n(ariables)h(resp)q(ectiv)o
(ely\).)-76 499 y(It)h(will)h(also)g(b)q(e)f(con)o(v)o(enien)o(t)i(to)e(in)o
(tro)q(duce)i(some)e(abbreviations)-76 541 y(for)f(quali\014ed)j(t)o(yp)q(es)
d(and)h(t)o(yp)q(e)g(sc)o(hemes.)24 b(In)15 b(particular,)i(if)f
Fi(\032)e Fl(=)-76 582 y(\()p Fk(P)j Fj(\))c Fi(\034)t Fl(\))i(and)g
Fi(\033)f Fl(=)f Fj(8)p Fk(T)5 b Fi(:\032)p Fl(,)14 b(then)h(w)o(e)f(write)g
Fi(\031)h Fj(\))e Fi(\032)h Fl(and)h Fj(8)p Fi(\013:\033)g
Fl(as)-76 624 y(abbreviations)j(for)c(\()p Fj(f)p Fi(\031)q
Fj(g)d([)e Fk(P)t Fl(\))k Fj(\))h Fi(\034)k Fl(and)e Fj(8)p
Fl(\()p Fj(f)p Fi(\013)p Fj(g)9 b([)h Fk(T)5 b Fl(\))p Fi(:\032)14
b Fl(resp)q(ec-)-76 665 y(tiv)o(ely)m(.)-76 717 y(T)m(erms)19
b(are)g(written)g(using)h(the)f(standard)h(language)h(based)f(on)-76
759 y(simple)f(un)o(t)o(yp)q(ed)g Fi(\025)p Fl(-calculus)h(with)d(the)h
(addition)i(of)d(a)g Fk(let)j Fl(con-)-76 800 y(struct)13 b(to)g(enable)h
(the)f(de\014nition)j(and)d(use)g(of)g(p)q(olymorphic)j(\(and)-76
842 y(in)e(this)g(case,)f(o)o(v)o(erloaded\))i(terms:)106 919
y Fk(E)g Fl(::=)10 b Fk(x)15 b Fj(j)10 b Fk(EF)16 b Fj(j)10
b Fi(\025)p Fk(x)5 b Fi(:)p Fk(E)15 b Fj(j)10 b Fh(let)j Fk(x)h
Fl(=)d Fk(E)17 b Fh(in)12 b Fk(F)5 b Fi(:)-76 996 y Fl(The)13
b(sym)o(b)q(ol)i Fk(x)i Fl(ranges)c(o)o(v)o(er)h(a)f(giv)o(en)h(set)f(of)f
Fk(\(term\))h(variables)s Fl(.)-76 1100 y Fm(3.3)41 b(T)m(yping)12
b(rules)-76 1176 y Fl(A)e Fk(typ)n(e)g(assignment)h Fl(is)g(a)f(\(\014nite\))
i(set)e(of)g(pairs)i(of)e(the)g(form)h Fk(x)d Fl(:)t Fi(\033)j
Fl(in)-76 1217 y(whic)o(h)j(no)e(term)h(v)n(ariable)h Fk(x)j
Fl(app)q(ears)c(more)g(than)g(once.)k(If)12 b Fk(A)g Fl(is)h(a)-76
1259 y(t)o(yp)q(e)g(assignmen)o(t,)g(then)g(w)o(e)e(write)i
Fk(dom)h(A)c Fl(=)h Fj(f)6 b Fk(x)21 b Fj(j)c Fl(\()p Fk(x)9
b Fl(:)t Fi(\033)q Fl(\))h Fj(2)h Fk(A)6 b Fj(g)p Fl(,)-76
1300 y(and)15 b(if)g Fk(x)j Fl(is)d(a)f(term)g(v)n(ariable)j(with)e
Fk(x)i Fj(62)12 b Fk(dom)17 b(A)p Fl(,)c(then)i(w)o(e)f(write)-76
1342 y Fk(A)p Fi(;)6 b Fk(x)k Fl(:)c Fi(\033)14 b Fl(as)g(an)h(abbreviation)h
(for)e(the)g(t)o(yp)q(e)g(assignmen)o(t)i Fk(A)9 b Fj([)g(f)p
Fk(x)h Fl(:)-76 1383 y Fi(\033)q Fj(g)p Fl(.)17 b(The)12 b(t)o(yp)q(e)h
(assignmen)o(t)h(obtained)g(from)e Fk(A)f Fl(b)o(y)i(remo)o(ving)h(an)o(y)-76
1425 y(t)o(yping)h(statemen)o(t)e(for)g(the)g(v)n(ariable)i
Fk(x)i Fl(is)d(denoted)g Fk(A)739 1429 y Fb(x)760 1425 y Fl(.)-76
1477 y(A)j Fk(typing)g Fl(is)h(an)f(expression)i(of)d(the)h(form)g
Fk(P)d Fj(j)c Fk(A)17 b Fj(`)g Fk(E)22 b Fl(:)16 b Fi(\033)i
Fl(rep-)-76 1519 y(resen)o(ting)e(the)e(assertion)h(that)g(a)f(term)f
Fk(E)19 b Fl(has)14 b(t)o(yp)q(e)h Fi(\033)g Fl(when)f(the)-76
1560 y(predicates)i(in)e Fk(P)k Fl(are)c(satis\014ed)i(and)e(the)g(t)o(yp)q
(es)h(of)e(free)h(v)n(ariables)-76 1602 y(in)d Fk(E)k Fl(are)10
b(as)h(sp)q(eci\014ed)h(in)f(the)g(t)o(yp)q(e)g(assignmen)o(t)h
Fk(A)p Fl(.)j(The)10 b(set)h(of)f(all)-76 1643 y(deriv)n(able)17
b(t)o(ypings)g(is)e(de\014ned)i(b)o(y)e(the)g(rules)h(in)g(Figure)g(1.)22
b(Note)-76 1685 y(the)12 b(use)h(of)e(the)h(sym)o(b)q(ols)i
Fi(\034)t Fl(,)e Fi(\032)f Fl(and)i Fi(\033)g Fl(to)f(restrict)h(the)f
(application)-76 1726 y(of)h(certain)h(rules)g(to)f(sp)q(eci\014c)i(sets)e
(of)f(t)o(yp)q(e)i(expressions.)-76 1778 y(Most)f(of)f(these)g(are)g(similar)
j(to)d(the)g(usual)i(rules)f(for)f(the)h(ML)f(t)o(yp)q(e)-76
1820 y(system;)f(only)f(the)g(rules)g(\()p Fj(\))p Fk(I)c Fl(\))k(and)g(\()p
Fj(\))p Fk(E)t Fl(\))f(for)h(dealing)h(with)f(qual-)-76 1861
y(i\014ed)k(t)o(yp)q(es)f(and)g(the)g(\()p Fj(8)p Fk(I)6 b
Fl(\))12 b(rule)h(for)f(p)q(olymorphic)k(generalization)-76
1903 y(in)o(v)o(olv)o(e)d(the)f(predicate)g(set.)k(An)11 b(expression)i(of)e
(the)h(form)e Fk(CV)d Fl(\()p Fk(X)f Fl(\))-76 1944 y(is)13
b(used)g(to)g(denote)g(the)g(set)f(of)g(all)i(the)f(constructor)g(v)n
(ariables)i(ap-)-76 1986 y(p)q(earing)h(free)d(in)i Fk(X)6
b Fl(.)18 b(F)m(or)c(example,)h(in)f(rule)h(\()p Fj(8)p Fk(I)6
b Fl(\),)13 b(the)h(condition)-76 2027 y Fi(\013)-51 2011 y
Fd(\024)-17 2027 y Fj(62)f Fk(CV)7 b Fl(\()p Fk(A)p Fl(\))i
Fj([)g Fk(CV)e Fl(\()p Fk(P)t Fl(\))15 b(is)g(needed)h(to)f(ensure)g(that)g
(w)o(e)g(do)g(not)-76 2069 y(univ)o(ersally)h(quan)o(tify)f(o)o(v)o(er)e(a)g
(v)n(ariable)i(whic)o(h)e(is)h(constrained)h(ei-)-76 2110 y(ther)e(b)o(y)h
(the)f(t)o(yp)q(e)g(assignmen)o(t)i Fk(A)d Fl(or)h(the)g(predicate)i(set)e
Fk(P)t Fl(.)-76 2214 y Fm(3.4)41 b(T)m(yp)q(e)13 b(inference)-76
2290 y Fl(The)d(rules)i(in)f(Figure)g(1)f(are)g(useful)i(as)e(a)g(means)h(of)
f(explaining)k(and)-76 2332 y(understanding)20 b(the)e(t)o(yp)q(e)f(system,)h
(but)g(they)f(are)h(not)f(suitable)-76 2373 y(as)f(a)f(basis)i(for)e(a)h(t)o
(yp)q(e)g(inference)h(algorithm:)24 b(There)15 b(are)h(man)o(y)-76
2415 y(di\013eren)o(t)c(w)o(a)o(ys)d(in)i(whic)o(h)g(the)f(rules)h(migh)o(t)f
(b)q(e)g(applied)j(to)c(\014nd)i(the)-76 2456 y(t)o(yp)q(e)g(of)g(a)g(giv)o
(en)h(term)f(and)g(it)h(is)f(not)g(alw)o(a)o(ys)h(clear)g(whic)o(h)g(\(if)f
(an)o(y\))-76 2498 y(will)17 b(giv)o(e)f(the)f(b)q(est)h(result.)25
b(An)15 b(alternativ)o(e)i(set)e(of)g(rules)h(whic)o(h)-76
2539 y(a)o(v)o(oids)d(these)e(problems)i(is)f(presen)o(ted)g(in)g(Section)h
(3.4.2)e(follo)o(wing)-76 2581 y(a)16 b(preliminary)j(description)f(of)d
(uni\014cation)k(for)d(constructors)g(in)-76 2622 y(Section)f(3.4.1.)p
1020 -75 1015 2 v 1020 1043 2 1118 v 1143 62 a(\()p Fk(var)t
Fl(\))1514 29 y(\()p Fk(x)8 b Fl(:)t Fi(\033)q Fl(\))j Fj(2)f
Fk(A)p 1499 52 200 3 v 1499 92 a(P)e Fj(j)t Fk(A)i Fj(`)h Fk(x)k
Fl(:)c Fi(\033)1143 190 y Fl(\()p Fj(!)p Fk(E)t Fl(\))1322
157 y Fk(P)d Fj(j)t Fk(A)j Fj(`)g Fk(E)k Fl(:)10 b Fi(\034)1528
142 y Fe(0)1550 157 y Fj(!)h Fi(\034)43 b Fk(P)8 b Fj(j)t Fk(A)i
Fj(`)h Fk(F)16 b Fl(:)10 b Fi(\034)1864 142 y Fe(0)p 1322 180
554 3 v 1483 221 a Fk(P)e Fj(j)t Fk(A)i Fj(`)h Fk(EF)16 b Fl(:)10
b Fi(\034)1143 320 y Fl(\()p Fj(!)p Fk(I)c Fl(\))1440 286 y
Fk(P)i Fj(j)t Fk(A)1518 290 y Fb(x)1539 286 y Fi(;)e Fk(x)i
Fl(:)t Fi(\034)1618 270 y Fe(0)1640 286 y Fj(`)j Fk(E)16 b
Fl(:)10 b Fi(\034)p 1422 309 354 3 v 1422 351 a Fk(P)e Fj(j)t
Fk(A)i Fj(`)i Fi(\025)p Fk(x)5 b Fi(:)p Fk(E)14 b Fl(:)c Fi(\034)1683
335 y Fe(0)1705 351 y Fj(!)h Fi(\034)1143 447 y Fl(\()p Fk(let)t
Fl(\))1320 414 y Fk(P)d Fj(j)t Fk(A)i Fj(`)h Fk(E)k Fl(:)c
Fi(\033)39 b Fk(Q)8 b Fj(j)t Fk(A)1647 418 y Fb(x)1668 414
y Fi(;)e Fk(x)j Fl(:)t Fi(\033)j Fj(`)f Fk(F)k Fl(:)c Fi(\034)p
1320 437 559 3 v 1329 477 a Fk(P)h Fj([)d Fk(Q)f Fj(j)t Fk(A)i
Fj(`)h Fl(\()p Fh(let)h Fk(x)j Fl(=)c Fk(E)17 b Fh(in)12 b
Fk(F)5 b Fl(\))10 b(:)h Fi(\034)1143 573 y Fl(\()p Fj(\))p
Fk(E)t Fl(\))1363 541 y Fk(P)d Fj(j)t Fk(A)i Fj(`)i Fk(E)j
Fl(:)10 b Fi(\031)i Fj(\))f Fi(\032)38 b Fk(P)15 b Fj(`)-14
b(`)11 b(f)p Fi(\031)q Fj(g)p 1363 564 472 3 v 1497 604 a Fk(P)d
Fj(j)t Fk(A)i Fj(`)h Fk(E)k Fl(:)10 b Fi(\032)1143 700 y Fl(\()p
Fj(\))p Fk(I)c Fl(\))1444 667 y Fk(P)13 b Fj([)8 b(f)p Fi(\031)q
Fj(g)t(j)t Fk(A)j Fj(`)g Fk(E)k Fl(:)c Fi(\032)p 1444 690 309
3 v 1455 731 a Fk(P)d Fj(j)t Fk(A)i Fj(`)h Fk(E)16 b Fl(:)10
b Fi(\031)i Fj(\))f Fi(\032)1143 826 y Fl(\()p Fj(8)p Fk(E)t
Fl(\))1371 794 y Fk(P)d Fj(j)t Fk(A)i Fj(`)h Fk(E)k Fl(:)c
Fj(8)p Fi(\013)1602 778 y Fd(\024)1622 794 y Fi(:\033)39 b
Fk(C)17 b Fj(2)10 b Fk(C)1806 778 y Fd(\024)p 1371 817 457
3 v 1436 857 a Fk(P)e Fj(j)t Fk(A)i Fj(`)h Fk(E)k Fl(:)c([)p
Fk(C)5 b Fi(=\013)1708 841 y Fd(\024)1728 857 y Fl(])p Fi(\033)1143
953 y Fl(\()p Fj(8)p Fk(I)h Fl(\))1287 921 y Fk(P)i Fj(j)t
Fk(A)i Fj(`)h Fk(E)k Fl(:)10 b Fi(\033)40 b(\013)1558 905 y
Fd(\024)1589 921 y Fj(62)10 b Fk(CV)d Fl(\()p Fk(A)p Fl(\))h
Fj([)g Fk(CV)e Fl(\()p Fk(P)t Fl(\))p 1287 943 625 3 v 1456
984 a Fk(P)j Fj(j)t Fk(A)h Fj(`)h Fk(E)k Fl(:)10 b Fj(8)p Fi(\013)1687
968 y Fd(\024)1707 984 y Fi(:\033)p 2033 1043 2 1118 v 1020
1044 1015 2 v 1072 1116 a Fl(Figure)k(1:)j(ML-lik)o(e)d(t)o(yping)h(rules)f
(for)e(constructor)i(classes)1020 1238 y Fm(3.4.1)41 b(Uni\014cation)11
b(of)i(constructo)o(r)g(exp)o(ressions)1020 1315 y Fl(Uni\014cation)18
b(algorithms)g(are)d(often)h(required)h(in)f(t)o(yp)q(e)g(inference)1020
1356 y(algorithms)e(to)e(ensure)h(that)f(that)g(the)g(argumen)o(t)g(t)o(yp)q
(e)h(of)e(a)h(func-)1020 1398 y(tion)k(coincides)h(with)e(the)g(t)o(yp)q(e)g
(of)g(the)g(argumen)o(t)g(that)g(it)h(is)f(ap-)1020 1439 y(plied)g(to.)j(In)
13 b(the)h(con)o(text)f(of)g(this)i(pap)q(er,)e(w)o(e)g(need)h(to)f(deal)i
(with)1020 1481 y(uni\014cation)g(of)c(constructors)i(whic)o(h)g(is)f(a)g
(little)i(more)e(tric)o(ky)h(than)1020 1522 y(uni\014cation)20
b(of)c(simple)j(t)o(yp)q(es)e(since)h(w)o(e)e(need)h(to)g(k)o(eep)g(trac)o(k)
g(of)1020 1564 y(the)i(kinds)h(of)e(the)g(constructors)i(in)o(v)o(olv)o(ed.)
35 b(Nev)o(ertheless,)21 b(the)1020 1605 y(follo)o(wing)14
b(presen)o(tation)f(follo)o(ws)g(the)f(standard)h(approac)o(h)g(\(as)f(in-)
1020 1647 y(tro)q(duced)g(b)o(y)g(Robinson)i([11]\))c(extended)j(to)e(deal)i
(with)e(the)h(use)f(of)1020 1688 y(kind-preserving)16 b(substitutions.)1020
1740 y(W)m(e)21 b(b)q(egin)h(with)f(t)o(w)o(o)g(fairly)h(standard)g
(de\014nitions.)43 b(A)20 b(kind-)1020 1782 y(preserving)g(substitution)h
Fk(S)h Fl(is)c(a)g Fk(uni\014er)j Fl(of)c(t)o(w)o(o)h(constructors)1020
1823 y Fk(C)5 b Fi(;)i Fk(C)1102 1807 y Fe(0)1136 1823 y Fj(2)22
b Fk(C)1216 1807 y Fd(\024)1257 1823 y Fl(if)e Fk(SC)28 b Fl(=)22
b Fk(SC)1482 1807 y Fe(0)1493 1823 y Fl(.)38 b(A)19 b(kind-preservin)q(g)k
(substitu-)1020 1865 y(tion)15 b Fk(U)k Fl(is)c(called)g(a)f
Fk(most)g(gener)n(al)f(uni\014er)j Fl(for)e(the)g(constructors)1020
1906 y Fk(C)5 b Fi(;)i Fk(C)1102 1890 y Fe(0)1125 1906 y Fj(2)j
Fk(C)1193 1890 y Fd(\024)1227 1906 y Fl(if:)1076 1987 y Fj(\017)18
b Fk(U)h Fl(is)13 b(a)g(uni\014er)i(for)e Fk(C)18 b Fl(and)c
Fk(C)1562 1971 y Fe(0)1574 1987 y Fl(,)e(and)1076 2058 y Fj(\017)18
b Fl(ev)o(ery)12 b(uni\014er)g Fk(S)j Fl(of)c Fk(C)17 b Fl(and)11
b Fk(C)1557 2042 y Fe(0)1580 2058 y Fl(can)h(b)q(e)f(written)g(in)h(the)f
(form)1113 2100 y Fk(R)o(U)19 b Fl(for)12 b(some)i(kind-preserving)i
(substitution)g Fk(R)q Fl(.)1020 2197 y(W)m(riting)g Fk(C)1195
2175 y Fb(U)1195 2197 y Fj(\030)1225 2201 y Fd(\024)1245 2197
y Fk(C)1277 2181 y Fe(0)1303 2197 y Fl(for)e(the)g(assertion)i(that)e
Fk(U)19 b Fl(is)c(a)f(uni\014er)i(of)e(the)1020 2238 y(constructors)g
Fk(C)5 b Fi(;)h Fk(C)1319 2222 y Fe(0)1342 2238 y Fj(2)k Fk(C)1410
2222 y Fd(\024)1431 2238 y Fl(,)i(the)h(rules)g(in)g(Figure)h(2)e(de\014ne)h
(a)g Fk(uni-)1020 2280 y(\014c)n(ation)d(algorithm)j Fl(that)f(can)g(b)q(e)g
(used)h(to)e(calculate)j(a)e(uni\014er)h(for)1020 2321 y(a)i(giv)o(en)g(pair)
h(of)e(constructors.)23 b(It)14 b(is)h(straigh)o(tforw)o(ard)h(to)e(v)o
(erify)1020 2363 y(that)d(an)o(y)h(substitution)i Fk(U)i Fl(obtained)d(using)
g(these)f(rules)g(is)f(indeed)1020 2404 y(a)i(uni\014er)i(for)d(the)h
(corresp)q(onding)j(pair)e(of)f(constructors.)1020 2456 y(Notice)i(that)g
(there)g(are)g(t)o(w)o(o)f(distinct)j(w)o(a)o(ys)e(in)g(whic)o(h)h(the)f
(uni\014-)1020 2498 y(cation)i(algorithm)g(ma)o(y)f(fail;)i(\014rst)e(in)g
(the)g(rules)g(\()p Fk(bindV)m(ar)t Fl(\))d(and)1020 2539 y(\()p
Fk(bindV)m(ar')5 b Fl(\))j(where)k(uni\014cation)i(w)o(ould)e(result)h(in)f
(an)f(in\014nite)j(con-)1020 2581 y(structor)i(\(i.e.)23 b(pro)q(ducing)17
b(a)f(regular)g(tree\).)23 b(Second,)17 b(the)e(uni\014-)1020
2622 y(cation)h(of)f(a)g(constructor)g(of)g(the)g(form)g Fk(CC)1687
2607 y Fe(0)1714 2622 y Fl(with)g(another)h(con-)p eop
%%Page: 8 8
8 7 bop -76 -75 1015 2 v -76 592 2 667 v 39 22 a Fl(\()p Fk(idV)m(ar)t
Fl(\))205 b Fi(\013)397 0 y Fb(id)398 22 y Fj(\030)427 26 y
Fd(\024)447 22 y Fi(\013)39 123 y Fl(\()p Fk(idConst)t Fl(\))169
b Fi(\037)396 101 y Fb(id)397 123 y Fj(\030)427 127 y Fd(\024)447
123 y Fi(\037)39 226 y Fl(\()p Fk(bindV)m(ar)t Fl(\))135 b
Fi(\013)367 201 y Ff([)p Fb(C)t Fd(=\013)p Ff(])393 226 y Fj(\030)449
230 y Fd(\024)469 226 y Fk(C)130 b Fi(\013)11 b Fj(62)f Fk(CV)d
Fl(\()p Fk(C)e Fl(\))39 329 y(\()p Fk(bindV)m(ar')g Fl(\))122
b Fk(C)374 305 y Ff([)p Fb(C)t Fd(=\013)p Ff(])401 329 y Fj(\030)457
333 y Fd(\024)477 329 y Fi(\013)i(\013)11 b Fj(62)f Fk(CV)d
Fl(\()p Fk(C)e Fl(\))39 508 y(\()p Fk(apply)s Fl(\))217 458
y Fk(C)254 436 y Fb(S)250 458 y Fj(\030)280 464 y Fd(\024)298
457 y Fc(0)309 464 y Fe(!)p Fd(\024)360 458 y Fk(D)42 b(SC)485
442 y Fe(0)496 436 y Fb(S)518 425 y Fc(0)498 458 y Fj(\030)530
464 y Fd(\024)548 457 y Fc(0)561 458 y Fk(SD)615 442 y Fe(0)p
217 477 410 3 v 312 538 a Fk(CC)371 522 y Fe(0)383 516 y Fb(S)405
506 y Fc(0)417 516 y Fb(S)396 538 y Fj(\030)439 542 y Fd(\024)459
538 y Fk(DD)520 522 y Fe(0)p 937 592 2 667 v -76 593 1015 2
v 109 665 a Fl(Figure)14 b(2:)j(Kind-preserving)f(uni\014cation)-76
789 y(structor)d(of)e(the)h(form)g Fk(DD)327 773 y Fe(0)351
789 y Fl(is)g(only)h(p)q(ossible)i(if)d Fk(C)18 b Fl(and)12
b Fk(D)k Fl(can)c(b)q(e)-76 830 y(uni\014ed)18 b(whic)o(h)g(in)f(turn)f
(requires)i(that)f(these)f(t)o(w)o(o)g(constructors)-76 872
y(ha)o(v)o(e)i(the)g(same)g(kind,)i(whic)o(h)f(m)o(ust)f(b)q(e)g(of)f(the)h
(form)g Fi(\024)801 856 y Fe(0)831 872 y Fj(!)h Fi(\024)p Fl(.)-76
913 y(This)f(is)f(a)g(consequence)h(of)e(the)h(fact)g(that)g(there)g(are)f
(non)i(non-)-76 955 y(trivial)h(equiv)n(alences)g(b)q(et)o(w)o(een)d
(constructor)i(expressions.)29 b(This)-76 996 y(prop)q(ert)o(y)14
b(w)o(ould)f(b)q(e)g(lost)h(if)f(w)o(e)f(had)h(included)i(abstractions)g(o)o
(v)o(er)-76 1038 y(constructor)e(v)n(ariables)g(in)f(the)g(language)h(of)f
(constructors)g(requir-)-76 1079 y(ing)e(the)g(use)f(of)g(higher-order)i
(uni\014cation)h(and)e(ultimately)i(leading)-76 1121 y(to)h(undecidabil)q(i)q
(t)o(y)j(in)d(the)h(t)o(yp)q(e)f(system.)-76 1173 y(Giv)o(en)f(these)f
(observ)n(ations,)i(w)o(e)d(can)h(use)g(standard)h(tec)o(hniques)g(to)-76
1214 y(pro)o(v)o(e)i(the)f(follo)o(wing)i(theorem:)-76 1296
y Fh(Theorem)g(1)k Fk(If)13 b(ther)n(e)f(is)h(a)g(uni\014er)f(for)h(two)g
(given)f(c)n(onstructors)-76 1354 y(C)5 b Fi(;)i Fk(C)6 1338
y Fe(0)35 1354 y Fj(2)16 b Fk(C)109 1338 y Fd(\024)130 1354
y Fk(,)i(then)e(C)282 1331 y Fb(U)282 1354 y Fj(\030)312 1358
y Fd(\024)332 1354 y Fk(C)364 1338 y Fe(0)393 1354 y Fk(using)f(the)i(rules)f
(in)g(Figur)n(e)g(2)h(for)-76 1395 y(some)11 b(U)17 b(and)11
b(this)g(substitutio)o(n)d(is)k(a)f(most)g(gener)n(al)f(uni\014er)g(for)i(C)
-76 1437 y(and)f(C)29 1421 y Fe(0)41 1437 y Fk(.)16 b(Conversely,)10
b(if)h(no)g(uni\014er)f(exists,)g(then)g(the)h(uni\014c)n(ation)-76
1478 y(algorithm)h(fails.)-76 1560 y Fl(The)i(rules)i(in)f(Figure)g(2)g
(require)g(that)g(the)f(t)o(w)o(o)g(constructors)i(in-)-76
1601 y(v)o(olv)o(ed)g(at)e(eac)o(h)g(stage)h(in)g(the)f(uni\014cation)j(m)o
(ust)d(ha)o(v)o(e)h(the)f(same)-76 1643 y(kind.)38 b(In)20
b(practice)h(ho)o(w)o(ev)o(er,)g(it)f(is)g(only)h(necessary)g(to)f(c)o(hec)o
(k)-76 1685 y(that)d(the)g(constructor)g Fk(C)23 b Fl(has)17
b(the)g(same)g(kind)h(as)e(the)h(v)n(ariable)-76 1726 y Fi(\013)12
b Fl(in)i(the)f(rules)g(\()p Fk(bindV)m(ar)t Fl(\))d(and)k(\()p
Fk(bindV)m(ar')5 b Fl(\))k(\(in)14 b(other)f(w)o(ords,)f(to)-76
1768 y(ensure)19 b(that)f(the)f(substitution)k([)p Fk(C)5 b
Fi(=\013)p Fl(])17 b(in)i(these)f(rules)h(is)f(kind-)-76 1809
y(preserving\).)-76 1861 y(The)11 b(pro)q(cess)g(of)f(\014nding)j(the)d(kind)
i(of)f(the)f(constructor)i Fk(C)k Fl(to)10 b(com-)-76 1903
y(pare)20 b(with)f(the)g(kind)i(of)d(the)i(v)n(ariable)h Fi(\013)d
Fl(to)h(whic)o(h)h(it)f(will)i(b)q(e)-76 1944 y(b)q(ound)e(can)f(b)q(e)g
(implemen)o(ted)i(relativ)o(ely)h(e\016cien)o(tly)m(.)33 b(Supp)q(ose)-76
1986 y(that)18 b Fk(C)25 b Fl(=)19 b Fk(H)12 b(C)181 1990 y
Ff(1)211 1986 y Fi(:)6 b(:)g(:)13 b Fk(C)296 1990 y Fb(n)338
1986 y Fl(where)18 b Fk(H)23 b Fl(is)18 b(either)h(a)f(v)n(ariable)i(or)e(a)
-76 2027 y(constan)o(t.)35 b(Since)20 b Fk(C)25 b Fl(is)19
b(a)g(w)o(ell-formed)h(constructor,)h Fk(H)j Fl(m)o(ust)-76
2069 y(ha)o(v)o(e)15 b(kind)h(of)d(the)i(form)f Fi(\024)328
2073 y Ff(1)358 2069 y Fj(!)f Fi(:)6 b(:)g(:)13 b Fj(!)g Fi(\024)540
2073 y Fb(n)576 2069 y Fj(!)g Fi(\024)h Fl(where)h Fi(\024)798
2075 y Fb(i)827 2069 y Fl(is)g(the)-76 2110 y(kind)k(of)e(the)g(corresp)q
(onding)j(constructor)e Fk(C)618 2116 y Fb(i)634 2110 y Fl(.)29
b(It)17 b(follo)o(ws)h(that)-76 2152 y Fk(C)23 b Fl(has)18
b(kind)g Fi(\024)p Fl(.)30 b(Th)o(us)18 b(the)f(only)i(information)g(needed)f
(to)f(\014nd)-76 2193 y(the)c(kind)i(of)e Fk(C)19 b Fl(is)14
b(the)f(kind)i(of)e(the)g(head)h Fk(H)k Fl(and)c(the)f(n)o(um)o(b)q(er)h(of)
-76 2235 y(argumen)o(ts)g Fk(n)i Fl(that)e(it)f(is)h(applied)i(to.)i(There)13
b(is)h(no)g(need)g(for)f(an)o(y)-76 2276 y(more)g(sophisticated)j(form)d(of)g
(kind)h(inference)g(in)g(this)g(situation.)-76 2328 y(The)e(need)h(to)e(c)o
(hec)o(k)i(the)f(kinds)h(of)f(constructors)h(in)g(this)g(w)o(a)o(y)e(cer-)-76
2370 y(tainly)16 b(increases)f(the)f(cost)g(of)f(uni\014cation.)22
b(On)14 b(the)g(other)g(hand,)-76 2411 y(w)o(e)g(w)o(ould)i(exp)q(ect)f
(that,)f(in)i(man)o(y)f(cases,)f(this)i(w)o(ould)f(b)q(e)g(signif-)-76
2453 y(ican)o(tly)j(less)e(than)g(that)g(of)f(the)h(o)q(ccurs)g(c)o(hec)o(k)g
({)f Fi(\013)g Fj(62)f Fk(CV)7 b Fl(\()p Fk(C)e Fl(\))16 b({)-76
2494 y(whic)o(h)e(will)h(t)o(ypically)g(in)o(v)o(olv)o(e)g(a)e(complete)i
(tra)o(v)o(ersal)f(of)e Fk(C)5 b Fl(.)1020 -34 y Fm(3.4.2)41
b(A)14 b(t)o(yp)q(e)f(inference)g(algo)o(rithm)1020 42 y Fl(The)f(rules)h(in)
f(Figure)h(3)f(pro)o(vide)h(an)f(alternativ)o(e)i(to)e(those)g(of)g(Fig-)1020
83 y(ure)j(1)g(with)g(a)g(single)i(rule)f(for)e(eac)o(h)h(syn)o(tactic)i
(construct)e(in)h(the)1020 125 y(language)g(of)e(terms.)21
b(Eac)o(h)14 b(judgemen)o(t)h(is)g(an)g(expression)h(of)e(the)1020
166 y(form)g Fk(P)c Fj(j)c Fk(T)m(A)11 b Fj(`)1239 147 y Fa(W)1283
166 y Fk(E)17 b Fl(:)12 b Fi(\034)18 b Fl(where)c Fk(P)k Fl(is)c(a)g(set)g
(of)g(predicates,)h Fk(T)20 b Fl(is)14 b(a)1020 208 y(\(kind-preserving)q(\))
h(substitution,)f Fk(A)e Fl(is)h(a)f(t)o(yp)q(e)h(assignmen)o(t,)h
Fk(E)j Fl(is)1020 249 y(a)c(term)g(and)h Fi(\034)j Fl(is)c(an)g(elemen)o(t)h
(of)f Fk(C)1562 233 y Fe(\003)1581 249 y Fl(.)1020 301 y(These)18
b(rules)g(can)g(b)q(e)g(in)o(terpreted)h(as)f(an)f(algorithm)j(for)d(calcu-)
1020 343 y(lating)g(t)o(ypings.)24 b(Starting)16 b(with)g(a)f(term)f
Fk(E)20 b Fl(and)15 b(an)g(assignmen)o(t)1020 384 y Fk(A)i
Fl(w)o(e)f(can)i(use)g(the)f(structure)h(of)f Fk(E)22 b Fl(to)17
b(guide)i(the)e(calculation)1020 426 y(of)e(v)n(alues)j(for)d
Fk(P)t Fl(,)h Fk(T)21 b Fl(and)16 b Fi(\034)k Fl(suc)o(h)c(that)g
Fk(P)c Fj(j)d Fk(T)m(A)15 b Fj(`)1777 407 y Fa(W)1822 426 y
Fk(E)k Fl(:)c Fi(\034)t Fl(.)25 b(The)1020 467 y(only)18 b(w)o(a)o(y)e(that)g
(this)h(pro)q(cess)g(can)g(ev)o(er)f(fail)i(is)e(if)h Fk(E)j
Fl(con)o(tains)e(a)1020 509 y(free)e(v)n(ariable)i(whic)o(h)g(is)e(not)h(men)
o(tioned)h(in)f Fk(A)f Fl(or)g(if)g(one)h(of)f(the)1020 550
y(uni\014cations)g(fails.)1020 602 y(The)c(t)o(yp)q(e)h(inference)h
(algorithm)g(has)f(sev)o(eral)h(imp)q(ortan)o(t)f(prop)q(er-)1020
644 y(ties.)22 b(First)16 b(of)e(all,)i(the)f(t)o(yping)h(that)e(it)h
(calculates)i(is)e(v)n(alid)i(with)1020 685 y(resp)q(ect)d(to)e(the)i
(original)h(set)e(of)g(t)o(yping)i(rules:)1020 764 y Fh(Theorem)g(2)k
Fk(If)13 b(P)8 b Fj(j)t Fk(T)m(A)j Fj(`)1410 745 y Fa(W)1447
764 y Fk(E)e Fl(:)h Fi(\034)t Fk(,)k(then)e(P)c Fj(j)t Fk(T)m(A)j
Fj(`)t Fk(E)e Fl(:)i Fi(\034)t Fk(.)1020 843 y Fl(Giv)o(en)g(a)g(term)e
Fk(E)15 b Fl(and)c(an)f(assignmen)o(t)i Fk(A)d Fl(it)i(is)g(particularly)i
(useful)1020 884 y(to)18 b(\014nd)h(a)g(concise)g(c)o(haracterization)i(of)d
(the)h(set)f(of)g(pairs)i(\()p Fk(P)d Fj(j)1020 926 y Fi(\033)q
Fl(\))g(suc)o(h)h(that)f Fk(P)e Fj(j)10 b Fk(A)17 b Fj(`)h
Fk(E)k Fl(:)17 b Fi(\033)q Fl(.)29 b(This)18 b(information)h(migh)o(t,)f(for)
1020 967 y(example,)j(b)q(e)d(used)h(to)f(determine)h(if)g
Fk(E)j Fl(is)d(w)o(ell-t)o(yp)q(ed)g(\(i.e.)33 b(if)1020 1009
y(the)14 b(set)g(of)g(pairs)i(is)f(non-empt)o(y\))g(or)f(to)g(v)n(alidate)i
(a)e(programmer)1020 1050 y(supplied)i(t)o(yp)q(e)d(signature)i(for)e
Fk(E)t Fl(.)1020 1102 y(F)m(ollo)o(wing)g(the)d(approac)o(h)i(of)e(Damas)h
(and)h(Milner)g([4],)e(this)h(can)g(b)q(e)1020 1144 y(ac)o(hiev)o(ed)h(b)o(y)
e(de\014ning)i(an)e(ordering)h(on)g(the)f(set)f(of)h(all)h(pairs)g(\()p
Fk(P)d Fj(j)t Fi(\033)q Fl(\))1020 1185 y(to)j(describ)q(e)i(when)f(one)g
(pair)g(is)g(more)g(general)h(than)f(another.)17 b(W)m(e)1020
1227 y(can)f(then)f(sho)o(w)h(that)f(the)g(set)h(of)f(all)h(\()p
Fk(P)c Fj(j)7 b Fi(\033)q Fl(\))16 b(for)f(whic)o(h)h(a)f(giv)o(en)1020
1268 y(term)f(is)h(w)o(ell-t)o(yp)q(ed)h(is)f(equal)g(to)f(the)h(set)f(of)g
(all)i(pairs)f(whic)o(h)g(are)1020 1310 y(less)10 b(than)g(a)g
Fk(princip)n(al)e(typ)n(e)s Fl(,)g(calculated)k(using)f(the)e(t)o(yp)q(e)h
(inference)1020 1351 y(algorithm.)18 b(This)10 b(allo)o(ws)h(us)f(to)f
(establish)j(the)d(follo)o(wing)j(theorem:)1020 1430 y Fh(Theorem)j(3)k
Fk(L)n(et)c(E)21 b(b)n(e)15 b(a)h(term)g(and)f(A)h(an)f(arbitr)n(ary)g(typ)n
(e)f(as-)1020 1471 y(signment.)h(The)f(fol)r(lowing)e(c)n(ondition)o(s)f(ar)n
(e)i(e)n(quivalent:)1076 1550 y Fj(\017)18 b Fk(E)h(is)13 b(wel)r(l-typ)n(e)n
(d)e(under)h(A.)1076 1620 y Fj(\017)18 b Fk(P)f Fj(j)c Fk(T)m(A)20
b Fj(`)1270 1600 y Fa(W)1314 1620 y Fk(E)k Fl(:)19 b Fi(\034)k
Fk(for)18 b(some)g(P)23 b(and)17 b Fi(\034)23 b Fk(and)17 b(ther)n(e)h(is)g
(a)1113 1661 y(substitution)10 b(R)15 b(such)e(that)f(R)m(T)m(A)f
Fl(=)f Fk(A.)1076 1731 y Fj(\017)18 b Fk(E)h(has)12 b(a)i(princip)n(al)d(typ)
n(e)h(under)g(A.)1020 1809 y Fl(The)h(de\014nition)j(of)c(the)h(ordering)i(b)
q(et)o(w)o(een)e(pairs)h(\()p Fk(P)8 b Fj(j)t Fi(\033)q Fl(\))13
b(and)h(the)1020 1851 y(full)i(pro)q(of)f(of)f(the)h(ab)q(o)o(v)o(e)g
(theorem)g(are)g(essen)o(tially)i(the)e(same)g(as)1020 1892
y(used)d(in)f([7,)f(8)q(])g(to)h(whic)o(h)h(w)o(e)e(refer)h(the)g(reader)g
(for)g(further)g(details.)1020 1996 y Fm(3.5)41 b(Coherence)14
b(and)f(decidabilit)o(y)e(of)i(t)o(yp)q(e)h(checking)1020 2072
y Fl(Upto)h(this)g(p)q(oin)o(t,)h(w)o(e)e(ha)o(v)o(e)h(not)f(made)h(an)o(y)g
(attempt)g(to)f(discuss)1020 2114 y(ho)o(w)h(programs)i(in)f(the)g(curren)o
(t)f(system)h(of)f(constructor)i(classes)1020 2155 y(migh)o(t)h(b)q(e)f
(implemen)o(ted.)31 b(One)17 b(fairly)i(general)f(approac)o(h)h(is)e(to)1020
2197 y(\014nd)d(a)g Fk(tr)n(anslation)f Fl(for)h(eac)o(h)g(source)g(term)f
(in)i(whic)o(h)f(o)o(v)o(erloaded)1020 2238 y(functions)i(ha)o(v)o(e)f
(additional)j Fk(evidenc)n(e)d Fl(parameters)g(whic)o(h)h(mak)o(e)1020
2280 y(the)f(use)f(of)h(o)o(v)o(erloading)i(explicit.)24 b(Di\013eren)o(t)16
b(forms)e(of)g(evidence)1020 2321 y(v)n(alue)d(can)e(b)q(e)h(used.)16
b(F)m(or)9 b(example,)j(in)e(theoretical)h(w)o(ork,)f(it)f(migh)o(t)1020
2363 y(b)q(e)15 b(sensible)i(to)e(use)g(predicates)i(themselv)o(es)f(as)f
(evidence,)i(while)1020 2404 y(practical)12 b(w)o(ork)d(migh)o(t)i(b)q
(ene\014t)g(from)e(a)h(more)g(concrete)g(approac)o(h,)1020
2446 y(suc)o(h)15 b(as)g(the)g(use)g(of)f Fk(dictionaries)g
Fl(as)h(prop)q(osed)h(b)o(y)f(W)m(adler)h(and)1020 2487 y(Blott)e([13].)1020
2539 y(In)j(order)h(to)f(justify)h(this)g(approac)o(h,)i(it)d(is)h(imp)q
(ortan)o(t)h(to)e(sho)o(w)1020 2581 y(that)k(an)o(y)h(t)o(w)o(o)e(p)q(oten)o
(tially)k(distinct)f(translations)g(of)e(a)g(giv)o(en)1020
2622 y(term)e(are)g(seman)o(tically)j(equiv)n(alen)o(t.)37
b(F)m(ollo)o(wing)21 b([2)o(],)f(w)o(e)e(refer)p eop
%%Page: 9 9
9 8 bop -76 -75 2083 2 v -76 574 2 649 v 20 77 a Fl(\()p Fk(var)t
Fl(\))108 62 y Fa(W)514 35 y Fl(\()p Fk(x)9 b Fl(:)t Fj(8)p
Fi(\013)617 12 y Fd(\024)635 22 y Fb(i)617 48 y(i)652 35 y
Fi(:)p Fk(P)14 b Fj(\))d Fi(\034)t Fl(\))g Fj(2)g Fk(A)p 422
62 536 3 v 422 108 a Fl([)p Fi(\014)457 85 y Fd(\024)475 95
y Fb(i)455 121 y(i)491 108 y Fi(=\013)535 85 y Fd(\024)553
95 y Fb(i)535 121 y(i)571 108 y Fl(])p Fk(P)d Fj(j)t Fk(A)i
Fj(`)678 89 y Fa(W)722 108 y Fk(x)15 b Fl(:)10 b([)p Fi(\014)811
85 y Fd(\024)829 95 y Fb(i)809 121 y(i)846 108 y Fi(=\013)890
85 y Fd(\024)908 95 y Fb(i)890 121 y(i)925 108 y Fl(])p Fi(\034)1502
77 y(\014)1526 54 y Fd(\024)1544 65 y Fb(i)1524 90 y(i)1574
77 y Fl(new)20 227 y(\()p Fj(!)p Fk(E)t Fl(\))118 211 y Fa(W)250
193 y Fk(P)e Fj(j)t Fk(T)m(A)j Fj(`)371 174 y Fa(W)415 193
y Fk(E)k Fl(:)10 b Fi(\034)43 b Fk(Q)8 b Fj(j)t Fk(T)621 177
y Fe(0)633 193 y Fk(T)m(A)i Fj(`)704 174 y Fa(W)748 193 y Fk(F)16
b Fl(:)10 b Fi(\034)831 177 y Fe(0)881 193 y Fk(T)913 177 y
Fe(0)925 193 y Fi(\034)946 171 y Fb(U)946 193 y Fj(\030)976
197 y Fe(\003)994 193 y Fi(\034)1015 177 y Fe(0)1037 193 y
Fj(!)h Fi(\013)1111 177 y Fe(\003)p 250 216 879 3 v 397 258
a Fk(U)6 b Fl(\()p Fk(T)479 242 y Fe(0)490 258 y Fk(P)12 b
Fj([)c Fk(Q)s Fl(\))t Fj(j)t Fk(UT)689 242 y Fe(0)701 258 y
Fk(T)m(A)j Fj(`)773 239 y Fa(W)817 258 y Fk(EF)k Fl(:)c Fk(U)6
b Fi(\013)965 242 y Fe(\003)1510 227 y Fi(\013)1535 211 y Fe(\003)1566
227 y Fl(new)20 354 y(\()p Fj(!)p Fk(I)g Fl(\))109 338 y Fa(W)485
321 y Fk(P)i Fj(j)t Fk(T)d Fl(\()p Fk(A)610 325 y Fb(x)631
321 y Fi(;)h Fk(x)j Fl(:)t Fi(\013)715 305 y Fe(\003)732 321
y Fl(\))i Fj(`)766 302 y Fa(W)810 321 y Fk(E)k Fl(:)10 b Fi(\034)p
470 344 439 3 v 470 385 a Fk(P)e Fj(j)t Fk(T)m(A)j Fj(`)591
365 y Fa(W)635 385 y Fi(\025)p Fk(x)5 b Fi(:)p Fk(E)14 b Fl(:)d
Fk(T)5 b Fi(\013)810 369 y Fe(\003)838 385 y Fj(!)11 b Fi(\034)1510
354 y(\013)1535 338 y Fe(\003)1566 354 y Fl(new)20 484 y(\()p
Fk(let)t Fl(\))95 468 y Fa(W)193 450 y Fk(P)d Fj(j)t Fk(T)m(A)j
Fj(`)314 430 y Fa(W)358 450 y Fk(E)k Fl(:)10 b Fi(\034)43 b
Fk(P)510 434 y Fe(0)525 450 y Fj(j)t Fk(T)572 434 y Fe(0)583
450 y Fl(\()p Fk(T)m(A)651 454 y Fb(x)673 450 y Fi(;)6 b Fk(x)i
Fl(:)t Fk(Gen)s Fl(\()p Fk(T)m(A)p Fi(;)d Fk(P)15 b Fj(\))c
Fi(\034)t Fl(\)\))f Fj(`)1047 430 y Fa(W)1091 450 y Fk(F)16
b Fl(:)10 b Fi(\034)1174 434 y Fe(0)p 193 472 993 3 v 403 515
a Fk(P)433 499 y Fe(0)448 515 y Fj(j)t Fk(T)495 499 y Fe(0)507
515 y Fk(T)m(A)g Fj(`)578 495 y Fa(W)622 515 y Fl(\()p Fh(let)j
Fk(x)i Fl(=)10 b Fk(E)18 b Fh(in)11 b Fk(F)5 b Fl(\))11 b(:)f
Fi(\034)964 499 y Fe(0)1230 484 y Fl(where)k Fk(Gen)s Fl(\()p
Fk(A)p Fi(;)t(\032)p Fl(\))c(=)h Fj(8)p Fl(\()p Fk(CV)c Fl(\()p
Fi(\032)p Fl(\))h Fj(n)h Fk(CV)e Fl(\()p Fk(A)p Fl(\)\))p Fi(:\032)p
2006 574 2 649 v -76 575 2083 2 v 649 647 a Fl(Figure)14 b(3:)j(T)o(yp)q(e)c
(inference)h(algorithm)h(W)-76 770 y(to)g(this)h(as)f(a)g Fk(c)n(oher)n(enc)n
(e)f Fl(prop)q(ert)o(y)i(of)f(the)g(t)o(yp)q(e)g(system.)23
b(As)15 b(w)o(e)-76 812 y(hin)o(ted)j(in)f(Section)h(1.1,)e(the)h(same)f
(problem)i(o)q(ccurs)f(in)g(Hask)o(ell)-76 853 y(unless)d(w)o(e)f(restrict)g
(our)g(atten)o(tion)h(to)f(terms)f(with)h(unam)o(biguous)-76
895 y(t)o(yp)q(e)h(sc)o(hemes.)k(F)m(ortunately)m(,)d(the)e(same)h(solution)i
(w)o(orks)d(for)g(the)-76 936 y(system)19 b(describ)q(ed)h(in)f(this)g(pap)q
(er;)i(w)o(e)d(can)h(sho)o(w)f(that,)i(if)e(the)-76 978 y(principal)h(t)o(yp)
q(e)d(sc)o(heme)f Fj(8)p Fi(\013)355 984 y Fb(i)371 978 y Fi(:)p
Fk(P)j Fj(\))d Fi(\032)g Fl(of)g(a)h(giv)o(en)g(term)g(satis\014es)-76
1019 y Fj(f)p Fi(\013)-32 1025 y Fb(i)-17 1019 y Fj(g)10 b(\\)e
Fk(CV)f Fl(\()p Fk(P)t Fl(\))12 b Fj(\022)g Fk(CV)7 b Fl(\()p
Fi(\032)p Fl(\),)13 b(then)h(all)h(translations)i(of)c(that)h(term)-76
1061 y(are)f(equiv)n(alen)o(t.)-76 1113 y(This)h(restriction)i(also)f
(simpli\014es)h(the)e(conditions)i(needed)f(to)e(en-)-76 1154
y(sure)19 b(decidabil)q(it)o(y)j(of)c(t)o(yp)q(e)h(c)o(hec)o(king.)36
b(In)19 b(particular,)j(w)o(e)c(can)-76 1196 y(sho)o(w)c(that)h(t)o(yp)q(e)f
(c)o(hec)o(king)i(for)e(terms)g(with)g(unam)o(biguous)j(prin-)-76
1237 y(cipal)g(t)o(yp)q(es)e(is)h(decidable)h(if)e(and)h(only)g(if,)f(for)g
(eac)o(h)g(c)o(hoice)h(of)f Fk(P)-76 1279 y Fl(and)c Fk(Q)s
Fl(,)h(the)e(task)h(of)f(determining)j(whether)e Fk(P)k Fj(`)-14
b(`)11 b Fk(Q)j Fl(is)d(decidable.)-76 1320 y(Simple)18 b(syn)o(tactic)f
(conditions)i(on)d(the)g(form)f(of)h(instance)h(decla-)-76
1362 y(rations)i(can)e(b)q(e)h(used)g(to)f(guaran)o(tee)h(this)g(prop)q(ert)o
(y)h(\(the)e(same)-76 1403 y(approac)o(h)e(is)e(used)h(in)g(the)f
(de\014nition)i(of)e(Hask)o(ell)i([6]\).)-76 1455 y(Once)d(again,)h(w)o(e)e
(refer)g(the)h(reader)g(to)f([8])g(for)g(further)h(details)i(and)-76
1497 y(bac)o(kground)h(on)e(the)h(issues)g(raised)g(in)g(this)g(section.)-76
1605 y Fm(4)41 b(Kind)13 b(inference)-76 1694 y Fl(The)i(biggest)h
(di\013erence)h(b)q(et)o(w)o(een)e(the)g(formal)h(t)o(yp)q(e)f(system)g(de-)
-76 1736 y(scrib)q(ed)g(in)e(Section)h(3)f(and)h(its)f(`user)g(in)o(terface')
h(describ)q(ed)g(in)g(the)-76 1777 y(op)q(ening)j(sections)f(of)f(the)g(pap)q
(er)h(is)g(the)f(need)g(to)g(annotate)h(con-)-76 1819 y(structor)f(v)n
(ariables)h(with)f(their)g(kinds.)22 b(As)14 b(w)o(e)g(ha)o(v)o(e)h(already)h
(in-)-76 1860 y(dicated,)h(w)o(e)f(regard)g(the)g(fact)f(that)h(the)f
(programmer)i(do)q(es)f(not)-76 1902 y(supply)c(kind)g(information)h
(explicitly)h(as)c(a)h(signi\014can)o(t)i(adv)n(an)o(tage)-76
1943 y(of)g(the)g(system.)18 b(A)o(t)12 b(the)h(same)h(time,)f(this)h(also)g
(means)f(an)h(imple-)-76 1985 y(men)o(tation)h(of)d(this)i(systems)g(needs)f
(to)g(b)q(e)h(able)g(to)f(determine:)-31 2066 y(1.)19 b(The)13
b(kind)h(of)f(eac)o(h)g(user-de\014ned)i(constructor)f Fi(\037)p
Fl(,)-31 2137 y(2.)19 b(the)13 b(arit)o(y)h(of)e(eac)o(h)i(constructor)g
(class)g Fk(P)t Fl(,)e(and)-31 2209 y(3.)19 b(the)f(kind)h(of)f(eac)o(h)g
(univ)o(ersally)j(quan)o(ti\014ed)f(v)n(ariable)g(in)f(a)18
2250 y(t)o(yp)q(e)14 b(sc)o(heme,)h(needed)g(to)f(generate)h(new)g(v)n
(ariables)h(of)e(the)18 2292 y(appropriate)k(kind)f(when)f(a)g(t)o(yp)q(e)h
(sc)o(heme)f(is)h(instan)o(tiated)18 2333 y(using)d(\()p Fk(var)t
Fl(\))206 2317 y Fa(W)235 2333 y Fl(.)-76 2415 y(F)m(ortunately)m(,)i(giv)o
(en)g(the)f(simple)h(structure)g(of)e(the)h(languages)h(of)-76
2456 y(constructors)k(and)g(kinds,)h(it)e(is)h(relativ)o(ely)h(straigh)o
(tforw)o(ard)f(to)-76 2498 y(calculate)c(suitable)g(v)n(alues)f(in)g(eac)o(h)
f(of)g(these)g(cases)g(using)h(a)f(pro-)-76 2539 y(cess)i(of)g
Fk(kind)f(infer)n(enc)n(e)s Fl(.)24 b(T)m(reating)17 b(the)f(set)g(of)g
(constructors)h(as)-76 2581 y(a)h(system)f(of)h(com)o(binators,)i(w)o(e)d
(can)h(use)f(standard)i(tec)o(hniques)-76 2622 y({)e(analogous)h(to)f(t)o(yp)
q(e)f(inference)i({)f(to)f(disco)o(v)o(er)i(constrain)o(ts)g(on)1020
770 y(the)12 b(kinds)h(of)e(eac)o(h)h(ob)r(ject)f(app)q(earing)j(in)e(a)g
(giv)o(en)g(\(unannotated\))1020 812 y(constructor)17 b(expression)i(and)e
(then)g(solv)o(e)g(these)g(constrain)o(ts)h(to)1020 853 y(obtain)d(the)e
(required)h(kinds.)1020 905 y(Item)9 b(\(1\))h(will)h(b)q(e)f(dealt)h(with)g
(more)e(fully)j(in)e(Sections)i(4.1)d(and)i(4.2.)1020 947 y(T)m(o)i
(illustrate)i(the)f(basic)g(ideas)h(for)e(an)g(example)i(in)o(v)o(olving)h
(items)1020 988 y(\(2\))j(and)h(\(3\),)g(recall)h(the)f(de\014nition)h(of)e
(the)h(constructor)g(class)1020 1030 y Fk(F)m(unctor)15 b Fl(from)e(Section)h
(1.2:)1207 1106 y Fh(class)h Fk(F)m(unctor)h(f)21 b Fh(where)1250
1147 y Fk(map)40 b Fl(::)c(\()p Fk(a)13 b Fj(!)f Fk(b)r Fl(\))e
Fj(!)h Fl(\()p Fk(f)22 b(a)13 b Fj(!)e Fk(f)21 b(b)r Fl(\))1020
1226 y(Using)14 b(the)g(fact)f(that)g(\()p Fj(!)p Fl(\))f(::)e
Fj(\003)i(!)f(\003)h(!)f(\003)p Fl(,)i(and)h(that)g(b)q(oth)g
Fk(a)h Fl(and)1020 1267 y Fk(b)i Fl(are)e(used)h(as)f(argumen)o(ts)h(to)29
b Fj(!)15 b Fl(in)h(the)f(expression)i(\()p Fk(a)f Fj(!)f Fk(b)r
Fl(\),)1020 1309 y(it)e(follo)o(ws)g(that)f(b)q(oth)h(of)f(these)h(v)n
(ariables)h(m)o(ust)f(ha)o(v)o(e)g(kind)g Fj(\003)p Fl(.)k(By)1020
1351 y(a)e(similar)j(argumen)o(t,)e Fk(f)23 b(a)18 b Fl(also)e(has)g(kind)g
Fj(\003)g Fl(and)f(hence)h Fk(f)23 b Fl(m)o(ust)1020 1392 y(ha)o(v)o(e)14
b(kind)g Fj(\003)d(!)g(\003)i Fl(as)g(exp)q(ected.)18 b(Th)o(us)13
b Fk(map)i Fl(has)e(t)o(yp)q(e:)1081 1468 y Fj(8)p Fk(f)1122
1450 y Fe(\003!\003)1186 1468 y Fi(:)p Fj(8)p Fk(a)1241 1450
y Fe(\003)1259 1468 y Fi(:)p Fj(8)p Fk(b)1311 1450 y Fe(\003)1329
1468 y Fi(:)p Fk(F)m(unctor)i(f)j Fj(\))11 b Fl(\()p Fk(a)i
Fj(!)e Fk(b)r Fl(\))g Fj(!)g Fl(\()p Fk(f)21 b(a)13 b Fj(!)e
Fk(f)20 b(b)r Fl(\))1020 1544 y(and)14 b(the)f Fk(F)m(unctor)i
Fl(class)f(has)g(arit)o(y)f(\()p Fj(\003)p Fl(\).)1020 1647
y Fm(4.1)41 b(Datat)o(yp)q(e)12 b(de\014nitions)1020 1724 y
Fl(Man)o(y)20 b(programs)f(include)i(de\014nitions)h(of)d(new)f(datat)o(yp)q
(es)i(and)1020 1765 y(it)f(is)f(imp)q(ortan)o(t)i(to)e(determine)h(suitable)h
(kinds)g(for)e(the)g(corre-)1020 1807 y(sp)q(onding)c(t)o(yp)q(e)d
(constructors.)18 b(The)11 b(general)i(form)e(of)g(a)g(datat)o(yp)q(e)1020
1848 y(declaration)16 b(in)d(Hask)o(ell)i(is:)1107 1924 y Fh(data)g
Fi(\037)e Fk(a)1263 1928 y Ff(1)1300 1924 y Fi(:)6 b(:)g(:)20
b Fk(a)1385 1928 y Fb(m)1454 1924 y Fl(=)38 b Fk(c)n(onstr)1625
1928 y Ff(1)1665 1924 y Fj(j)24 b Fi(:)6 b(:)g(:)24 b Fj(j)g
Fk(c)n(onstr)1907 1928 y Fb(n)1020 2000 y Fl(This)16 b(in)o(tro)q(duces)g(a)f
(new)g(constructor)h Fi(\037)f Fl(that)g(exp)q(ects)h Fk(m)i
Fl(argu-)1020 2041 y(men)o(ts,)e(represen)o(ted)g(b)o(y)f(the)g(\(distinct\))
i(v)n(ariables)g Fk(a)1827 2047 y Fb(1)1850 2041 y Fl(,)e Fi(:)7
b(:)f(:)g Fl(,)15 b Fk(a)1974 2045 y Fb(m)2006 2041 y Fl(.)1020
2083 y(Eac)o(h)h Fk(c)n(onstr)h Fl(on)e(the)h(righ)o(t)g(hand)g(side)g(is)g
(an)f(expression)i(of)e(the)1020 2124 y(form)i Fk(F)22 b Fi(\034)1179
2130 y Fb(1)1226 2124 y Fi(:)6 b(:)g(:)23 b(\034)1311 2128
y Fb(n)1351 2124 y Fl(whic)o(h)18 b(allo)o(ws)g(the)f(sym)o(b)q(ol)h
Fk(F)k Fl(to)16 b(b)q(e)h(used)1020 2166 y(as)g(a)f(function)i(of)f(t)o(yp)q
(e)g Fi(\034)1415 2172 y Fb(1)1455 2166 y Fj(!)g Fi(:)6 b(:)g(:)16
b Fj(!)h Fi(\034)1643 2170 y Fb(n)1683 2166 y Fj(!)g Fi(\037)g
Fk(a)1799 2172 y Fb(1)1846 2166 y Fi(:)6 b(:)g(:)23 b Fk(a)1934
2170 y Fb(m)1982 2166 y Fl(to)1020 2207 y(construct)14 b(v)n(alues)g(of)f
(the)g(new)g(t)o(yp)q(e.)1020 2259 y(In)f(our)g(more)g(general)h(setting,)g
(w)o(e)f(can)g(treat)g Fi(\037)f Fl(as)h(a)g(constructor)1020
2301 y(of)h(kind:)1350 2342 y Fi(\024)1372 2346 y Ff(1)1400
2342 y Fj(!)e Fi(:)6 b(:)g(:)k Fj(!)h Fi(\024)1575 2346 y Fb(m)1618
2342 y Fj(!)h(\003)1020 2404 y Fl(where)j Fi(\024)1155 2410
y Fb(1)1178 2404 y Fl(,)p Fi(:)6 b(:)g(:)g Fl(,)p Fi(\024)1273
2408 y Fb(m)1320 2404 y Fl(are)15 b(appropriate)i(kinds)f(for)f
Fk(a)1779 2410 y Fb(1)1802 2404 y Fl(,)g Fi(:)6 b(:)g(:)g Fl(,)15
b Fk(a)1925 2408 y Fb(m)1971 2404 y Fl(re-)1020 2446 y(sp)q(ectiv)o(ely)i
(that)e(can)g(b)q(e)h(determined)g(b)o(y)f(a)g(pro)q(cess)h(of)e(kind)j(in-)
1020 2487 y(ference.)1020 2539 y(W)m(e)c(ha)o(v)o(e)h(already)g(seen)g(sev)o
(eral)g(examples)h(ab)q(o)o(v)o(e)e(for)g(whic)o(h)h(the)1020
2581 y(kind)e(of)f(the)g(t)o(yp)q(e)g(constructor)h(ma)o(y)f(b)q(e)g
(determined)h(b)o(y)f(this)h(pro-)1020 2622 y(cess.)k(In)11
b(some)g(cases,)g(the)f(de\014nition)j(of)e(a)f(t)o(yp)q(e)h(constructor)g
(do)q(es)p eop
%%Page: 10 10
10 9 bop -76 -34 a Fl(not)16 b(uniquely)i(determine)f(its)f(kind;)i(just)d
(as)h(some)f Fi(\025)p Fl(-terms)h(can)-76 7 y(b)q(e)d(assigned)i(p)q
(olymorphic)h(t)o(yp)q(es,)d(some)g(t)o(yp)q(e)h(constructors)g(can)-76
49 y(b)q(e)d(treated)h(as)f(ha)o(ving)h(p)q(olymorphic)i(kinds.)k(F)m(or)11
b(example,)h(giv)o(en)-76 90 y(the)h(de\014nition:)-17 161
y Fh(data)i Fk(F)m(ork)i(a)40 b Fl(=)d Fk(Pr)n(ong)27 b Fj(j)d
Fk(Split)15 b Fl(\()p Fk(F)m(ork)j(a)s Fl(\))13 b(\()p Fk(F)m(ork)k(a)s
Fl(\))-76 232 y(w)o(e)i(can)g(infer)h(that)f Fk(F)m(ork)j Fl(has)e(kind)g
Fi(\024)h Fj(!)g(\003)e Fl(for)g(an)o(y)g(kind)i Fi(\024)p
Fl(.)-76 274 y(In)c(the)g(curren)o(t)g(implemen)o(tation,)k(w)o(e)16
b(a)o(v)o(oid)i(the)f(need)g(to)g(deal)-76 315 y(with)f(p)q(olymorphic)i
(kinds)e(b)o(y)g(replacing)h(an)o(y)f(unkno)o(wn)g(part)f(of)-76
357 y(an)j(inferred)g(kind)g(with)g Fj(\003)p Fl(.)29 b(Hence)17
b(the)g Fk(F)m(ork)k Fl(constructor)d(will)-76 398 y(actually)c(b)q(e)e
(treated)g(as)g(ha)o(ving)i(kind)f Fj(\003)e(!)g(\003)p Fl(.)17
b(This)12 b(is)h(consisten)o(t)-76 440 y(with)20 b(the)f(in)o(terpretation)i
(of)e(datat)o(yp)q(e)h(de\014nitions)i(in)e(Hask)o(ell)-76
481 y(where)13 b(all)i(v)n(ariables)g(are)e(exp)q(ected)h(to)f(ha)o(v)o(e)g
(kind)i Fj(\003)p Fl(.)-76 584 y Fm(4.2)41 b(Synonym)13 b(de\014nitions)-76
660 y Fl(In)j(addition)j(to)c(de\014ning)j(new)e(datat)o(yp)q(es,)i(it)e(is)h
(common)g(for)e(a)-76 702 y(program)g(to)e(in)o(tro)q(duce)j(new)d(names)i
(for)e(existing)j(t)o(yp)q(es)e(using)h(a)-76 743 y(t)o(yp)q(e)f(synon)o(ym)g
(declaration)h(of)e(the)g(form:)187 814 y Fh(t)o(yp)q(e)i Fi(\037)e
Fk(a)344 818 y Ff(1)381 814 y Fi(:)6 b(:)g(:)20 b Fk(a)466
818 y Fb(m)535 814 y Fl(=)38 b Fk(rhs)-76 885 y Fl(The)15 b(in)o(ten)o(tion)i
(here)e(is)g(that)g(an)o(y)h(t)o(yp)q(e)f(expression)i(of)e(the)f(form)-76
926 y Fi(\037)j Fk(C)-8 932 y Fb(1)40 926 y Fi(:)6 b(:)g(:)23
b Fk(C)135 930 y Fb(m)185 926 y Fl(abbreviates)18 b(the)f(t)o(yp)q(e)h
(obtained)g(from)f Fk(rhs)i Fl(b)o(y)-76 968 y(replacing)h(eac)o(h)d(o)q
(ccurrence)h(of)f(a)g(v)n(ariable)j Fk(a)631 974 y Fb(i)662
968 y Fl(with)e(the)f(corre-)-76 1009 y(sp)q(onding)e(constructor)f
Fk(C)317 1015 y Fb(i)333 1009 y Fl(.)j(The)12 b(curren)o(t)i(implemen)o
(tation)i(do)q(es)-76 1051 y(not)i(allo)o(w)g(the)f(use)h(of)f(a)g(t)o(yp)q
(e)h(synon)o(ym)g(constructor)h Fi(\037)e Fl(to)g(b)q(e)-76
1092 y(used)h(without)f(the)g(full)h(n)o(um)o(b)q(er)f(of)g(argumen)o(ts.)29
b(This)17 b(ensures)-76 1134 y(that)12 b(w)o(e)g(do)g(not)g(in)o(v)n(alidate)
j(the)d(conditions)i(needed)f(to)f(establish)-76 1176 y(the)17
b(coherence)h(prop)q(ert)o(y)g(describ)q(ed)h(in)e(Section)i(3.5.)28
b(In)17 b(addi-)-76 1217 y(tion,)e(follo)o(wing)h(the)e(de\014nition)j(of)c
(Hask)o(ell,)j(it)e(is)h(not)f(p)q(ermitted)-76 1259 y(to)h(de\014ne)g(m)o
(utually)i(recursiv)o(e)f(t)o(yp)q(e)e(synon)o(yms)i(without)g(an)f(in-)-76
1300 y(terv)o(ening)j(datat)o(yp)q(e)f(de\014nition.)30 b(These)16
b(conditions)j(guaran)o(tee)-76 1342 y(that)14 b(it)h(is)g(alw)o(a)o(ys)f(p)q
(ossible)j(to)d(expand)h(an)o(y)g(giv)o(en)g(t)o(yp)q(e)g(expres-)-76
1383 y(sion)g(to)e(eliminate)j(all)e(t)o(yp)q(e)g(synon)o(yms.)19
b(Ho)o(w)o(ev)o(er,)13 b(for)g(practical)-76 1425 y(purp)q(oses,)g(it)g(is)f
(sensible)i(to)e(calculate)i(a)e(kind)h(for)f(eac)o(h)g(synon)o(ym)-76
1466 y(constructor)20 b Fi(\037)e Fl(and)h(hence)g(a)o(v)o(oid)h(the)e(need)i
(to)e(expand)i(t)o(yp)q(es)-76 1508 y(in)o(v)o(olving)e(synon)o(yms)e(during)
h(the)d(kind)j(inference)e(pro)q(cess.)23 b(F)m(or)-76 1549
y(example,)14 b(giv)o(en)h(the)e(synon)o(ym)h(de\014nitions:)77
1620 y Fh(t)o(yp)q(e)g Fk(Chur)n(ch)i(a)39 b Fl(=)f(\()p Fk(a)13
b Fj(!)e Fk(a)s Fl(\))f Fj(!)h Fl(\()p Fk(a)i Fj(!)e Fk(a)s
Fl(\))77 1662 y Fh(t)o(yp)q(e)j Fk(Subst)h(t)i(v)42 b Fl(=)c
Fk(v)14 b Fj(!)d Fk(t)17 b(v)-76 1733 y Fl(w)o(e)c(\014nd)g(that,)g(for)g
(the)g(purp)q(oses)i(of)d(kind)j(inference:)165 1804 y Fk(Chur)n(ch)39
b Fl(::)e Fj(\003)11 b(!)g(\003)165 1846 y Fk(Subst)69 b Fl(::)37
b(\()p Fj(\003)11 b(!)g(\003)p Fl(\))g Fj(!)g(\003)g(!)g(\003)p
Fi(:)-76 1954 y Fm(5)41 b(Additional)12 b(comments)-76 2043
y Fl(Based)17 b(on)f(the)g(examples)h(in)f(this)h(pap)q(er)g(and)f(our)g
(initial)j(exp)q(e-)-76 2084 y(rience)e(with)e(the)h(protot)o(yp)q(e)g
(implemen)o(tation)q(,)i(w)o(e)d(b)q(eliev)o(e)i(that)-76 2126
y(there)12 b(are)g(man)o(y)h(useful)g(applications)i(for)d(a)g(system)g(of)g
(construc-)-76 2167 y(tor)k(classes.)27 b(Of)15 b(course,)i(since)f(the)g
(use)h(of)e(constructor)i(classes)-76 2209 y(is)h(lik)o(ely)i(to)d(lead)h(to)
g(a)f(greater)g(use)h(of)f(o)o(v)o(erloading)j(in)e(t)o(ypical)-76
2250 y(programs,)j(further)e(w)o(ork)g(to)g(in)o(v)o(estigate)i(new)e(tec)o
(hniques)h(for)-76 2292 y(the)d(e\016cien)o(t)h(implemen)o(tation)j(of)c(t)o
(yp)q(e)g(and)h(constructor)g(class)-76 2333 y(o)o(v)o(erloading)e(w)o(ould)e
(b)q(e)f(particularly)j(useful.)-76 2385 y(The)h(decision)i(to)e(exclude)i
(an)o(y)e(form)g(of)g(abstraction)h(from)f(the)-76 2427 y(language)d(of)e
(constructors)i(is)f(essen)o(tial)h(to)e(ensure)h(the)g(tractabil-)-76
2468 y(it)o(y)h(of)f(the)g(whole)h(system.)j(A)o(t)c(the)g(same)g(time,)g
(this)h(also)g(results)-76 2510 y(in)g(some)g(limitations)i(for)d(the)h
(programmer.)k(F)m(or)13 b(example,)i(ha)o(v-)-76 2551 y(ing)f(de\014ned:)92
2622 y Fh(data)h Fk(State)f(s)j(a)40 b Fl(=)d Fk(ST)19 b Fl(\()p
Fk(s)13 b Fj(!)e Fl(\()p Fk(a)s Fi(;)6 b Fk(s)s Fl(\)\))1020
-34 y(w)o(e)15 b(w)o(ere)g(able)i(to)e(de\014ne)i Fk(State)f
Fl(as)g(a)f(functor)h(in)h(its)f(second)g(ar-)1020 7 y(gumen)o(t.)24
b(This)16 b(w)o(ould)g(not)f(ha)o(v)o(e)h(b)q(een)f(p)q(ossible)j(if)d(the)g
(t)o(w)o(o)g(pa-)1020 49 y(rameters)f Fk(s)j Fl(and)e Fk(a)h
Fl(on)f(the)f(left)g(hand)h(side)h(b)q(een)e(written)h(in)g(the)1020
90 y(rev)o(erse)10 b(order.)16 b(Of)9 b(course,)i(this)g(problem)g(can)f(alw)
o(a)o(ys)g(b)q(e)g(a)o(v)o(oided)1020 132 y(b)o(y)k(de\014ning)h(a)e(new)h
(data)f(t)o(yp)q(e.)18 b(Indeed,)c(this)g(w)o(as)g(precisely)h(the)1020
173 y(motiv)n(ation)d(for)d(in)o(tro)q(ducing)j(the)e Fk(State)h
Fl(data)f(t)o(yp)q(e)g(since)g(the)g(con-)1020 215 y(structor)j(expression)j
Fk(s)d Fj(!)e Fl(\()p Fk(a)s Fi(;)6 b Fk(s)s Fl(\))12 b(is)i(not)f(in)h(a)f
(suitable)i(form.)1020 321 y Fm(References)1039 410 y Fl([1])j(H.)h
(Barendregt.)h(In)o(tro)q(duction)h(to)e(generalized)i(t)o(yp)q(e)f(sys-)1098
452 y(tems.)e Fk(Journal)f(of)g(F)m(unctional)f(Pr)n(o)n(gr)n(amming)p
Fl(,)h(v)o(olume)i(1,)1098 493 y(part)14 b(2,)e(1991.)1039
560 y([2])18 b(V.)e(Breazu-T)m(annen,)i(T.)e(Co)q(quand,)i(C.A.)d(Gun)o(ter)i
(and)g(A.)1098 601 y(Scedro)o(v.)11 b(Inheritance)h(and)f(co)q(ercion.)h(In)e
Fk(IEEE)h(Symp)n(osium)1098 643 y(on)i(L)n(o)n(gic)g(in)g(Computer)g(Scienc)n
(e)p Fl(,)d(1989.)1039 710 y([3])18 b(K.)c(Chen,)g(P)m(.)f(Hudak,)i(and)g(M.)
e(Odersky)m(.)i(P)o(arametric)g(t)o(yp)q(e)1098 751 y(classes)g(\(Extended)g
(abstract\).)e Fk(A)o(CM)i(c)n(onfer)n(enc)n(e)c(on)i(LISP)1098
793 y(and)k(F)m(unctional)e(Pr)n(o)n(gr)n(amming)p Fl(,)i(San)i(F)m
(rancisco,)g(Califor-)1098 834 y(nia,)14 b(June)f(1992.)1039
901 y([4])18 b(L.)g(Damas)g(and)h(R.)f(Milner.)h(Principal)i(t)o(yp)q(e)d(sc)
o(hemes)g(for)1098 942 y(functional)h(programs.)e(In)f Fk(8th)g(A)o(nnual)e
(A)o(CM)j(Symp)n(osium)1098 984 y(on)c(Principles)f(of)h(Pr)n(o)n(gr)n
(amming)g(languages)o Fl(,)d(1982.)1039 1050 y([5])18 b(P)m(.)10
b(Hudak)g(and)g(J.)f(F)m(asel.)i(A)e(gen)o(tle)i(in)o(tro)q(duction)h(to)e
(Hask)o(ell.)1098 1092 y Fk(A)o(CM)15 b(SIGPLAN)c(notic)n(es)p
Fl(,)f(27,)j(5,)g(Ma)o(y)g(1992.)1039 1159 y([6])18 b(P)m(.)12
b(Hudak,)h(S.L.)e(P)o(eyton)i(Jones)g(and)f(P)m(.)g(W)m(adler)h(\(eds.\).)f
(Re-)1098 1200 y(p)q(ort)f(on)g(the)g(programming)h(language)h(Hask)o(ell,)f
(v)o(ersion)g(1.2.)1098 1242 y Fk(A)o(CM)j(SIGPLAN)c(notic)n(es)p
Fl(,)f(27,)j(5,)g(Ma)o(y)g(1992.)1039 1308 y([7])18 b(M.P)m(.)f(Jones.)g(A)g
(theory)h(of)f(quali\014ed)j(t)o(yp)q(es.)d(In)g Fk(Eur)n(op)n(e)n(an)1098
1350 y(symp)n(osium)22 b(on)h(pr)n(o)n(gr)n(amming)p Fl(.)f(Springer)j(V)m
(erlag)f(LNCS)1098 1391 y(582,)14 b(1992.)1039 1458 y([8])k(M.P)m(.)d(Jones.)
h(Quali\014ed)i(t)o(yp)q(es:)k(Theory)16 b(and)g(Practice.)g(D.)1098
1499 y(Phil.)23 b(Thesis.)f(Programming)h(Researc)o(h)f(Group,)i(Oxford)1098
1541 y(Univ)o(ersit)o(y)15 b(Computing)g(Lab)q(oratory)m(.)e(July)h(1992.)
1039 1608 y([9])k(M.P)m(.)26 b(Jones.)h(Programming)h(with)f(constructor)h
(classes)1098 1649 y(\(preliminary)e(summary\).)d(In)f Fk(Dr)n(aft)g(Pr)n(o)n
(c)n(e)n(e)n(dings)e(of)h(the)1098 1691 y(Fifth)f(A)o(nnual)d(Glasgow)i
(Workshop)f(on)i(F)m(unctional)d(Pr)n(o-)1098 1732 y(gr)n(amming)p
Fl(,)12 b(Ayr,)h(Scotland,)h(July)g(1992.)1020 1799 y([10])k(E.)9
b(Moggi.)i(Computational)g(lam)o(b)q(da-calcul)q(us)h(and)e(monads.)1098
1840 y Fk(IEEE)i(Symp)n(osium)d(on)i(L)n(o)n(gic)f(in)h(Computer)f(Scienc)n
(e)p Fl(,)e(Asilo-)1098 1882 y(mar,)13 b(California,)i(June)e(1989.)1020
1949 y([11])18 b(J.A.)c(Robinson.)i(A)f(mac)o(hine-orien)o(ted)i(logic)f
(based)g(on)f(the)1098 1990 y(resolution)h(principle.)f Fk(Journal)e(of)g
(the)f(A)o(CM)p Fl(,)h(12,)g(1965.)1020 2057 y([12])18 b(M.)e(Spiv)o(ey)m(.)h
(A)f(functional)j(theory)d(of)g(exceptions.)i Fk(Scienc)n(e)1098
2098 y(of)c(Computer)e(Pr)n(o)n(gr)n(amming)p Fl(,)g(14\(1\),)h(June)g(1990.)
1020 2165 y([13])18 b(P)m(.)13 b(W)m(adler)h(and)f(S.)g(Blott.)g(Ho)o(w)f(to)
h(mak)o(e)g(ad-ho)q(c)h(p)q(olymor-)1098 2206 y(phism)h(less)e(ad-ho)q(c.)g
(In)g Fk(16th)f(A)o(CM)i(annual)d(symp)n(osium)h(on)1098 2248
y(Principles)j(of)h(Pr)n(o)n(gr)n(amming)f(L)n(anguages)p Fl(,)f(Austin,)j(T)
m(exas,)1098 2289 y(Jan)o(uary)d(1989.)1020 2356 y([14])k(P)m(.)f(W)m(adler.)
h(Comprehending)i(Monads.)d Fk(A)o(CM)h(c)n(onfer)n(enc)n(e)1098
2398 y(on)g(LISP)g(and)f(F)m(unctional)f(Pr)n(o)n(gr)n(amming)p
Fl(,)i(Nice,)h(F)m(rance,)1098 2439 y(June)14 b(1990.)1020
2506 y([15])k(P)m(.)c(W)m(adler.)i(The)e(essence)h(of)f(functional)j
(programming.)f(In)1098 2547 y Fk(19th)11 b(A)o(nnual)f(Symp)n(osium)h(on)h
(Principles)e(of)h(Pr)n(o)n(gr)n(amming)1098 2589 y(L)n(anguages)p
Fl(,)f(San)o(ta)k(F)m(e,)e(New)h(Mexico,)g(Jan)o(uary)h(1992.)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
