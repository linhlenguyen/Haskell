%!PS-Adobe-2.0
%%Creator: dvipsk 5.58c Copyright 1986, 1994 Radical Eye Software
%%Title: body.dvi
%%Pages: 15
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -f body.dvi
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1997.11.10:1436
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (body.dvi)
@start /Fa 1 51 df<387FFFF0B512F838C00018B1B512F8A215157D971C>50
D E /Fb 1 51 df<EA7FFE12FFEAC006ABEAFFFE127F0F0F7D8F15>50
D E /Fc 6 119 df<EA0390EA0C701218EA303013601260A3EAC0C013C812401241EA62
D0EA1C700D0E7C8D12>97 D<EA0780EA1840EA302012601340EAFF80EAC000A413201340
EA6180EA3E000B0E7C8D10>101 D<123E120CA41218A41230A41260A412C012C8A312D0
126007177D9609>108 D<EA3078EA498CEA4E04124CEA9C0C1218A3EA301813191331A2
EA6012131C100E7D8D14>110 D<1206A25AA4EAFF80EA1800A35AA45A1261A212621264
123809147D930C>116 D<EA3810EA2C18124CA2EA8C101218A3EA3020A21340A2EA1880
EA0F000D0E7D8D10>118 D E /Fd 59 127 df<EA4040EAE0E0A7EA40400B097D9312>
34 D<EA3018EA783812FC1370A313E0A21278EA31C01201A2EA0380A2EA0700A3EA0E18
133C137E121CA31238133CEA18180F1A7F9612>37 D<126012F012F812781218A31230A2
126012C01280050C799312>39 D<EA01801203EA06005A5A123812301270A25AA71270A2
1230123812187E7EEA0380120109197B9612>I<128012C0126012301218121C120C120E
A21207A7120EA2120C121C12181230126012C0128008197C9612>I<1207A3EAE738EAFF
F8EA7FF0EA1FC0A2EA7FF0EAFFF8EAE738EA0700A30D0E7E9012>I<EA0380A6EAFFFEA3
EA0380A60F0F7F9112>I<126012F012F8127812181230A212E012C00509798312>I<EAFF
F8A30D037E8B12>I<EA07C0EA0FE0EA1C70EA3838EA701CA2EAE00EA7131EEA701CA2EA
3838EA1C70EA0FE0EA07C00F147F9312>48 D<1206A2120E121E12FE12EE120EACEAFFE0
A20B147D9312>I<EA0F80EA3FC0EA70E0EAE0701338A2124012001330137013E013C0EA
0180EA030012065AEA18381230EA7FF8A20D147E9312>I<126012F0A212601200A61260
12F0A21260040E798D12>58 D<126012F0A212601200A6126012F0A212701230A2126012
C012800413798D12>I<13381378EA01F0EA03E0EA0F80EA1F00123C12F85A7E123C121F
EA0F80EA03E0EA01F0EA007813380D117E9212>I<EAFFFEA2127FC7FCA3EA7FFE12FFA2
0F097F8E12>I<124012E07E127C7EEA0F80EA07C0EA01E0EA00F8137813F8EA01E0EA07
C0EA0F80EA3E005A12F05A12400D137E9312>I<EA0380EA07C0A21206A2EA0EE0A4EA0C
60EA1C70A3EA1FF0A2EA3838A3EAFC7EA20F147F9312>65 D<EA03E6EA0FFEEA1C3EEA38
1EEA700EA21260EAE000A6EA600E1270A2EA381CEA1C38EA0FF0EA03E00F147F9312>67
D<EAFFE0A2EA0E00B0EAFFE0A20B147D9312>73 D<EA07F8A2EA00E0AD124012E0EAE1C0
EA7F80EA3F000D147E9312>I<B4FCA21238AC1304130EA3EAFFFEA20F147F9312>76
D<EAFC7EA2EA7C7CEA745CEA76DCA61277EA739CA2EA701CA5EAF83EA20F147F9312>I<
EAFEFEA2EA3E38123A123BA6EA39B8A6123813F812FEA20F147F9312>I<EA3FE0EA7FF0
EA7070EAE038AEEA7070EA7FF0EA3FE00D147E9312>I<EAFF8013E0EA38F013781338A3
137813F0EA3FE013C0EA38E01370A41377A2EAFE3E131C10147F9312>82
D<EA1F30EA3FF01270EAE070A313001270127FEA3FC0EA0FE0EA00F013781338126012E0
1330EAF070EAFFE0EACF800D147E9312>I<EA7FFE12FFEAE38EA3EA0380ADEA0FE0A20F
147F9312>I<EAFC7EA2EA783CEA3838A4EA1C70A4EA0C60EA0EE0A3EA06C0A21207A2EA
03800F147F9312>86 D<EAFFC0A2EAE000B3A4EAFFC0A20A1A7A9612>91
D<EAFFC0A21201B3A412FFA20A1A7F9612>93 D<EAFFF8A30D037E7F12>95
D<EA1FC0EA3FF0EA3838EA101C1200EA07FC123FEA781C12E0A3EA703C383FFF80EA1FCF
110E7F8D12>97 D<12F8A21238A4EA3BE0EA3FF0EA3C38EA381C130C130EA4130C131CEA
3C38EA3FF0EA1BC00F147F9312>I<EA07F0EA1FF8EA3838EA7010EA600012E0A41260EA
70381238EA1FF0EA07E00D0E7E8D12>I<13F8A21338A4EA07B8EA1FF8EA3878EA703812
6012E0A41260EA70781238EA1FFEEA0FBE0F147F9312>I<EA0780EA1FE0EA38701270EA
603812E0EAFFF8A2EAE0001260EA70381238EA1FF0EA07C00D0E7E8D12>I<137E13FFEA
01C7EA03821380A2EA7FFE12FFEA0380AAEA3FF8A21014809312>I<EA0F9EEA1FFFEA38
E7EA7070A4EA38E0EA3FC01380EA7000EA3FE013F813FCEA701EEAE00EA3EA600CEA783C
EA1FF0EA0FE010167F8D12>I<12F8A21238A4EA39E0EA3FF0EA3E38123C1238A8EAFE3E
A20F147F9312>I<1206120FA21206C7FCA3127FA21207AAEAFFF0A20C157D9412>I<12F8
A21238A4EA3BFCA2EA38F0EA39E0EA3BC0EA3F80A213C0EA3DE0123813701338EAFC7EA2
0F147F9312>107 D<B4FCA21207B0EAFFF8A20D147E9312>I<EAF71CEAFFBEEA79E7A2EA
71C7A838F9E780EAF8E3110E808D12>I<EAF9E0EAFFF0EA3E38123C1238A8EAFE3EA20F
0E7F8D12>I<EA0F80EA3FE01238EA7070EAE038A5EAF078EA7070EA38E0123FEA0F800D
0E7E8D12>I<EAFBE0EAFFF0EA3C38EA381C130C130EA4130C131CEA3C38EA3FF0EA3BC0
EA3800A512FEA20F157F8D12>I<EA079CEA1FFCEA387CEA703CEA601C12E0A41260EA70
3CEA387CEA1FFCEA079CEA001CA5137FA210157F8D12>I<EAFC78EAFDFCEA1F9CEA1E08
1300121CA7EAFFC0A20E0E7E8D12>I<EA1FF0123FEA607012C0EAE000127FEA3FE0EA0F
F0EA0078EA601812E0EAF030EAFFE0EADFC00D0E7E8D12>I<1206120EA3EA7FF812FFEA
0E00A7131CA3EA07F8EA01E00E127F9112>I<EAF8F8A2EA3838A91378EA1FFEEA0FBE0F
0E7F8D12>I<EAFC7EA2EA3838A2EA1C70A3EA0EE0A4EA07C0A2EA03800F0E7F8D12>I<EA
FEFEA2EA701CA3EA3018EA3BB8EA3FF8A2EA3AB81238EA1CF0A30F0E7F8D12>I<EA7C7C
A2EA1CF0EA0EE0EA0FC01207EA0380120713C0EA0EE0EA1EF0EA1C70EAFC7EA20F0E7F8D
12>I<EAFC7EA2EA3838121C1370A2120E136013E01206A2EA07C01203A21380A3EA7700
127F127E12380F157F8D12>I<EA3FFC127FEA70381370EA00E0EA01C0EA0380EA070012
0EEA1C1C12381270EAFFFCA20E0E7F8D12>I<12E0B3A8031A799612>124
D<EA1840EA3CE0EAE780EA43000B047D9312>126 D E /Fe 17 122
df<EA03C0380C3040EA101800201380EA600C12C0EB0D00130E1280130CEAC01C132C38
60C480381F0300120E7E8D17>11 D<120E1203A2EA0180A213C01200A21360A31330A213
781398EA0118EA020C1204EA080EEA18061230EAE00312C010177E9615>21
D<EA0FFF123FEA2080124012801201A21300A25AA31206A2100E7F8D10>28
D<1238127812C0A612781238050A7E900A>44 D<126012F0A2126004047D830A>58
D<126012F0A212701210A21220A21240A2040A7D830A>I<130813181330A31360A313C0
A3EA0180A3EA0300A21206A35AA35AA35AA35AA35AA20D217E9812>61
D<7FA638F08780381FFC00EA07F0EA01C0EA0360EA0220EA0630487EEA0808487E111080
8F12>63 D<0007B512803800E003EC0100A3EA01C0A21440A248485A138113FF1381D807
01C7FCA390C8FC120EA45AEAFFC019177F9616>70 D<38FF807F381C0018141014301420
001E1340120E1480EB0100A213025B120F6C5A5BA25B136013405B120390C7FC12021817
7E9615>86 D<127C1218A45AA4EA6780EA68C0EA7040EA606012C0A4EA80C0A2EA8180EA
C1001246123C0B177E960F>98 D<EA07C0EA1C20EA301012601320EAFFC0EAC000A41310
EA4020EA60C0EA1F000C0E7E8D10>101 D<120313801300C7FCA6121C12241246A25A12
0C5AA31231A21232A2121C09177F960C>105 D<EA383CEA44C6EA47021246EA8E06120C
A3485A144013181480EA3009EB0E00120E7F8D15>110 D<EA1C04EA26061246A2EA8604
120CA3EA1808A213101320EA0C60EA07800F0E7F8D11>118 D<EA0F1F3811A180EA20C3
1400EA41801201A348C7FC130212C3EAE704EAC508EA78F0110E7F8D14>120
D<EA1C02EA26061246A2EA860C120CA3EA1818A31338EA0C70EA07B0EA00301360127013
C0EA2180EA1E000F147F8D11>I E /Ff 38 122 df<B512C0EA1C01EB0040A21420A314
00AFEAFFC013177F9616>0 D<1318A2133CA2134EA21387A238010380000313C0EA0201
000613E0EA04004813F01470481378143848133C141C48131E387FFFFEB6FCA218177E96
1D>I<B512E0EA700000781360003813206C1330001E1310120E6C13007F12036C7E7F6C
5A5B48C7FC000213105A481330A24813604813E0EA7FFFB5FC14177E9619>6
D<120112021204120C1218A21230A212701260A312E0AA1260A312701230A21218A2120C
12041202120108227D980E>40 D<12801240122012301218A2120CA2120E1206A31207AA
1206A3120E120CA21218A2123012201240128008227E980E>I<1330ABB512FCA2380030
00AB16187E931B>43 D<EA07C0EA1830EA3018EA701CEA600CA2EAE00EA9EA600CA2EA70
1CEA3018EA1C70EA07C00F157F9412>48 D<1206120E12FE120EB1EAFFE00B157D9412>
I<EA0F80EA30E0EA4070EA8030EAC03812E0124012001370A2136013C0EA0180EA030012
06EA0C081208EA1018EA3FF0127F12FF0D157E9412>I<126012F0A212601200A6126012
F0A21260040E7D8D0A>58 D<126012F0A212601200A6126012F0A212701210A21220A212
40A204147D8D0A>I<B512FCA2C8FCA6B512FCA2160A7E8C1B>61
D<EAFFFC381C0380EB00C014E01470A414E014C0EB0380381FFE00381C0780EB01C0EB00
E0A514E1A2147238FF803C18177F961A>82 D<EA0FC4EA302CEA601CEA400CEAC004A3EA
E0001270127FEA3FE0EA0FF8EA01FCEA001C130E13061280A3EAC004EAE008EAD810EA87
E00F177E9614>I<12FCA212C0B3AB12FCA206217D980A>91 D<12FCA2120CB3AB12FCA2
062180980A>93 D<EA3FC0EA70601330EA20381200EA03F8EA1E3812301270EAE039A213
79EA70FFEA1F1E100E7F8D12>97 D<12F81238A8EA39F0EA3E0CEA380613077F1480A414
005B1306EA361CEA21F011177F9614>I<EA07F0EA18381230EA7010EA600012E0A41260
EA70081230EA1830EA07C00D0E7F8D10>I<133E130EA8EA07CEEA1C3EEA300E12701260
12E0A412601270EA301EEA182E3807CF8011177F9614>I<EA0FC0EA1860EA3030EA7038
EAE018EAFFF8EAE000A31260EA7008EA3010EA1830EA07C00D0E7F8D10>I<EA03E0EA06
70120EEA1C201300A5EAFF80EA1C00ACEA7F800C1780960B>I<EA0F9EEA18E3EA3060EA
7070A3EA3060EA18C0EA2F80EA20001260EA3FE013F813FCEA600EEAC006A3EA600CEA38
38EA0FE010157F8D12>I<12F81238A813F8EA3B1CEA3C0E1238AA38FE3F8011177F9614>
I<12301278A212301200A512F81238AC12FE07177F960A>I<12F81238A8133E13381330
134013801239EA3FC0EA39E0123813F01378133CA2EAFE7F10177F9613>107
D<12F81238B3A312FE07177F960A>I<38F8F83E383B1CC7393C0F0380EA380EAA39FE3F
8FE01B0E7F8D1E>I<EAF8F8EA3B1CEA3C0E1238AA38FE3F80110E7F8D14>I<EA07C0EA18
30EA3018EA600CA2EAE00EA5EA701CEA3018EA1830EA07C00F0E7F8D12>I<EAF9F0EA3E
1CEA380613077F1480A414005B130EEA3E1CEA39F00038C7FCA512FE11147F8D14>I<EA
F9E0EA3A70123CEA38201300A9B4FC0C0E7F8D0E>114 D<EA1F40EA60C0EAC040A2EAE0
00B4FCEA7F80EA1FC0EA01E0EA8060A212C0EAE0C0EA9F000B0E7F8D0E>I<1208A31218
A21238EAFFC0EA3800A71340A4EA1C80EA0F000A147F930E>I<EAF83EEA380EAA131EEA
1C2E3807CF80110E7F8D14>I<EAFE1FEA380EEA3C0CEA1C08A2EA0E10A2EA0720A213E0
EA03C0A2EA0180A2100E7F8D13>I<EAFE3FEA3C1CEA1C10EA0E20EA074013C0EA0380EA
01C0EA02E0EA04F0EA0870EA1838EA383CEAFC7F100E7F8D13>120
D<EAFE1FEA380EEA3C0CEA1C08A2EA0E10A2EA0720A213E0EA03C0A2EA0180A21300A212
E2A212A4127810147F8D13>I E /Fg 33 120 df<1380EA0100120212065A121C121812
3812301270A312F0A91270A3123012381218121C120C7E12027EEA008009217C9810>40
D<7E12407E12307E121C120C120E12061207A31380A91300A31206120E120C121C12185A
12205A5A09217E9810>I<130EACB612E0A3D8000EC7FCAC1B1B7E9520>43
D<EA07F0EA1C1C487EEA780FEA7007A200F01380A900701300A2EA780FEA380E6C5AEA07
F011157F9414>48 D<EA0180120712FFA21207AFEAFFF8A20D157D9414>I<EA0FC0EA3F
F8EA70FCEAF83C133E131E1270EA003E133C1338137013E0EA01C0EA0380EA0606120CEA
180EEA3FFC127F12FFA20F157E9414>I<127012F8A312701200A5127012F8A31270050F
7D8E0B>58 D<1306130FA2497EA2497E1337A2EB63E0A2EBC3F013C100017F1380A248B4
7EA23806003EA2000E133F000C7F39FF80FFF0A21C177F961F>65
D<B512C014F0381F00FC143C143EA4143C1478EBFFF014F8EB003C143E141FA5143E147C
B512F814E018177E961D>I<EB7F813803FFF73807E03F380F000F001E13075A007C1303
127800F81300A700781303127C123C6C13066C130C3807E0383803FFF038007FC018177E
961D>I<B512F8A2381F00781438141CA2EB060CA21400130E13FEA2130E13061406A2EB
000CA2141C143C147CB512F8A217177E961B>69 D<EAFFE0A2EA1F00B3EAFFE0A20B177E
960F>73 D<B4EC7F806D13FF001FECFC00391BC001BCA23919E0033CA33818F006A2EB78
0CA2EB3C18A2EB1E30A2EB0F60A3EB07C0A23AFF0381FF80A221177E9626>77
D<EB7F803803C0F0380F003C001E7F487FA2007C14800078130700F814C0A70078148000
7C130F003C1400003E5B001E131E6C5B3803C0F038007F801A177E961F>79
D<B5FC14E0381F01F06D7E147CA4147814F8EB01E0EBFF80EB03E06D7E6D7EA51560A239
FFE07C40EC1F801B177E961E>82 D<3807F080EA1FFDEA380FEA700312F01301A26CC7FC
B47EEA7FF8EA3FFE6C7E00071380EA007FEB0FC01307EAC003A338E0078038F80F00EADF
FEEA87F812177E9617>I<39FFE00FF0A2391F800180000FEB030013C000071306A26C6C
5AA26C6C5AA2EBF83800001330EBFC70EB7C60EB7EE0EB3EC0133F6D5AA26DC7FCA21306
1C177F961F>86 D<EA0FE0EA3838EA3C1C131E1218120013FEEA0F9EEA3C1E127812F0A3
38786FC0EA1F87120F7F8E14>97 D<12FCA2123CA6EA3DFCEA3F0F383C038014C0130114
E0A514C013031480383B0F00EA31F813177E9617>I<EA07F8EA1C0EEA381E1278EA700C
EAF000A512701278EA3806EA1C0CEA07F80F0F7F8E12>I<EA07F0EA1C18EA380CEA7806
EA700712F0A2B5FCEAF000A212701278EA3803EA1E06EA03FC100F7F8E13>101
D<12FCA2123CA6137CEA3D8EEA3E0FA2123CA938FF3FC0A212177E9617>104
D<1238127CA312381200A412FCA2123CAB12FFA208187F970B>I<12FCA2123CA6EB1F80
A2EB1C005B1360EA3DC0EA3FE0A2EA3E70EA3C787F7F130E38FF1FC0A212177F9615>
107 D<12FCA2123CB312FFA208177F960B>I<EAFC7CEAFD8EEA3E0FA2123CA938FF3FC0
A2120F7E8E17>110 D<EA07F0EA1C1C487E487EA200F01380A500701300A2EA380E6C5A
EA07F0110F7F8E14>I<EAFDFCEAFF0F383C038014C0130114E0A514C01303EB0780383F
0F00EA3DF8003CC7FCA4B4FCA213157E8E17>I<EAF870EAF99CEA3A3CA2EA3C181300A8
EAFF80A20E0F7F8E11>114 D<EA1FF0EA6070EA403012C0EAE000B4FCEA7FE0EA3FF0EA
0FF8EA0078EAC018A2EAE010EAF020EACFC00D0F7F8E10>I<120CA4121CA2EA3FE012FF
EA3C00A71330A4EA1E60EA07C00C157F9410>I<EAFC3FA2EA3C0FAA5B381C2FC0EA0FCF
120F7E8E17>I<39FE3F8FC0A2393C0E0300EB0F07381E1F06A2380F3F8C133314DC3807
E1D8A2000313F013C0A2380180601A0F7F8E1D>119 D E /Fh 7
119 df<EA07C0EA1862EA30321260133CEAC01C1318A2EA4038EA20DAEA1F0E0F0B7E8A
14>11 D<EA3FF8127FEAC20012861204A2120CA35AA20D0B7E8A0E>28
D<1204120C1200A5123012581298A21230A212601264A21268123006127E910B>105
D<3871F1F0389A1A18EA9C1CEA9818121838303030A214321462386060641438170B7E8A
1B>109 D<EA71F0EA9A18129C12981218EA3030A213321362EA606413380F0B7E8A13>I<
12081218A312FF1230A41260A212621264A21238080F7E8E0C>116
D<EA38601248EA8C2012981218EA3040A31380EA3100120E0B0B7E8A10>118
D E /Fi 4 78 df<12021207EA0D80EA18C0EA3060EA6030EAC018A2EA6030EA3060EA18
C0EA0D80EA070012020D0E7E8C10>5 D<137E3801FF80380781E0380E00700018131848
130C481306A2481303A600601306A26C130C6C1318000E1370380781E03801FF8038007E
0018167D901E>13 D<1208121CA21238A312301270A21260A212C0A2060D7E8D09>48
D<012013040170130C151C1538157801B8135801981398140190389C031039010C063014
0CEB0E1838020630EB0760380403C0004C138000F8C7123C003014001E127E9024>77
D E /Fj 15 119 df<1206120E12181230A21260A312C0A71260A31230A21218120E1206
07177B930F>40 D<128012C012601230A21218A3120CA71218A31230A2126012C0128006
177D930F>I<120CA3EACCC012FFEA3F00121E123FEAFFC012CCEA0C00A30A0D7E8E0F>I<
EAFFC0A30A037E890F>45 D<EA7FE0EAFFF0A2C7FCA3EAFFF0A2EA7FE00C097F8C0F>61
D<124012E07E12787E7E7EEA07C012031207EA0F00121E5A5A5A5A12400A117E900F>I<
12FCA21230AB1330A3EAFFF0A20C127F910F>76 D<12F0A21230A3EA3380EA3FE0EA3C70
EA3830EA3018A5EA3830EA3C70EA3FE0EA13800D1280910F>98 D<1208121C1208C7FCA3
127CA2120CA9EAFF80A209137D920F>105 D<12FCA2120CAEEAFFC0A20A127E910F>108
D<EAF3C0EAFFE0EA3C3012381230A7EAFCFCA20E0D808C0F>110
D<121E123FEA73801261EAC0C0A5EA61801273EA3F00121E0A0D7E8C0F>I<EA3F80127F
12C1A2EAE000127E121FEA0180EA40C012C012E0EAFF80EADF000A0D7E8C0F>115
D<12081218A2EA7FC012FFEA1800A61360A3EA0FC0EA07800B107F8F0F>I<EAF9F0A2EA
30C0A31239EA1980A3EA0F00A312060C0D7F8C0F>118 D E /Fk
40 122 df<90387F87F83901E0DE0C390780F80E390F01F01FA30100130E92C7FCA2B7FC
A2390F00F00FAD3A3FC3FC3FC0A2221A809925>14 D<EAFFF0A30C0380890F>45
D<127812FCA4127806067D850C>I<90381FE0209038FFFCE03803F80F3807C003381F80
0190C7FC123E007E1460127C00FC1400A8007C1460127E123E6C14C07F3907C003803903
F80F003800FFFCEB1FF01B1A7E9920>67 D<B512F014FC380F803FEC0F80EC07C0EC03E0
A2EC01F0A215F8A815F0A2140315E0EC07C0EC0F80EC3F00B512FC14F01D1A7E9922>I<
B512FEA2380F803E140E1406140780EB8183A21480138313FFA213831381A2EC8180EB80
01EC0300A35C5C143EB512FEA2191A7E991D>I<B512FCA2380F803C141C140C140E1406
A2EB81861480A2138313FFA213831381A3EB8000A6EAFFFCA2171A7E991C>I<90381FE0
209038FFFCE03803F80F3807C003381F800190C7FC123E007E1460127C00FC1400A6EC7F
FCA2007CEB03E0127E123E7E1380EA07C03803F8073800FFFC90381FF0601E1A7E9923>
I<39FFF87FFCA2390F8007C0A990B5FCA2EB8007AB39FFF87FFCA21E1A7E9923>I<EAFF
F8A2EA0F80B3A4EAFFF8A20D1A7E9911>I<EAFFFCA2EA0F80AE140CA3141CA214381478
14F8B5FCA2161A7E991B>76 D<B46CEB0FF86D131F000F1580D80DE01337A3D80CF01367
A2017813C7A290383C0187A290381E0307A3EB0F06A2EB078CA2EB03D8A2EB01F0A33AFF
C0E07FF8A2251A7E992A>I<EB3FC03801E0783807801E48487E481480003EEB07C0A248
EB03E0A200FC14F0A8007C14E0007E1307003E14C0A26CEB0F80390F801F003807C03E38
01E07838003FC01C1A7E9921>79 D<B512E014F8380F807E80801580A51500143E5CEBFF
F80180C7FCAAEAFFF8A2191A7E991E>I<B512C014F8380F807E80801580A41500143E14
FCEBFFE01381EB80F01478147CA3147EA3150C143F39FFF81F18EC07F01E1A7E9921>82
D<3807F040381FFDC0EA3C0FEA7803EA700112F01300A26C1300B4FCEA7FF86CB4FC6C13
806C13C0000113E0EA000FEB03F01301EAC000A36C13E0EAF00138FC03C038EFFF803883
FE00141A7E9919>I<007FB51280A238781F07007013030060130100E014C000C01300A3
00001400AF3807FFFCA21A1A7E991F>I<EA1FF0EA383CEA7C1E7FA21238120013FFEA0F
CFEA3E0F127C12F8A31317387C27E0EA1FC313117F9015>97 D<12FCA2123CA713FE383F
8780383E01C0003C13E0EB00F0A214F8A514F0A2EB01E0003E13C0383B07803830FE0015
1A7E9919>I<EA03FCEA0F0EEA1C1F123C1278130E00F8C7FCA51278A2383C0180381C03
00EA0F06EA03FC11117F9014>I<EB07E0A21301A7EA03F9EA0F07EA1C03EA3C011278A2
12F8A51278A2123CEA1C03380F0DF8EA03F9151A7F9919>I<EA03F0EA0E1C487EEA3C07
1278148012F8A2B5FC00F8C7FCA21278A2383C0180381C0300EA0E06EA03FC11117F9014
>I<13FEEA03C738078F80EA0F0FA2EB070090C7FCA3EAFFF0A2000FC7FCADEA3FE0A211
1A80990E>I<3807F1C0381C1EE0EA380E38780FC01400A4EA380E6C5AEA37F00020C7FC
1230A2EA3FFE381FFF8014C0EA700338E000E0A4387001C0383C07803807FC0013197F90
16>I<12FCA2123CA7133EEBC780EA3D03003E13C0A2123CAA38FF0FF0A2141A7E9919>I<
123C127EA4123C1200A412FCA2123CAD12FFA2081B7E9A0D>I<12FCA2123CB3A412FFA2
081A7E990D>108 D<39FC3E03E09038C78C78393D039038003EEBE03CA2003C13C0AA39
FF0FF0FFA220117E9025>I<EAFC3EEBC780EA3D03003E13C0A2123CAA38FF0FF0A21411
7E9019>I<EA03F8EA0E0E383C0780EA3803007813C0A200F813E0A6007813C0EA7C0700
3C1380380E0E00EA03F813117F9016>I<EAFCFE38FF8780383E03C0383C01E014F01300
14F8A514F0130114E0383E03C0383F0780383CFE0090C7FCA5B4FCA215187E9019>I<38
03F0C0EA0F0DEA1E07EA3C03127C127812F8A51278127C123CEA1C07EA0F0BEA03F3EA00
03A5EB0FF0A214187F9017>I<EAF8F0EAF938EA3A7CA2123C13381300A9EAFF80A20E11
7E9012>I<EA1FD8EA2078EA401812C0A2EAF000EAFF80EA7FE0EA3FF0EA07F8EA003CEA
C00CA212E01308EAF830EACFE00E117F9011>I<1206A4120EA2121EEA3FF012FFEA1E00
A81318A5EA0F30EA03E00D187F9711>I<38FC0FC0A2EA3C03AB1307A2381E0BF0EA07F3
14117E9019>I<38FF03F0A2383E01C0001E1380EA1F03000F1300A2EA0786A2EA03CCA2
13FC6C5AA26C5AA2136014117F9017>I<39FF1FE1F8A2393C078060001E14C014C0EB0D
C1000F1480EB1DE1390798E30014F3EBB0733803F076147EEBE03E0001133CA23800C018
1D117F9020>I<38FF07F0A2001E1300EA0F06EA078CEA03DC13F86C5A1200487E13BCEA
031E1207EA0E0F381C078038FE0FF0A214117F9017>I<38FF03F0A2383E01C0001E1380
EA1F03000F1300A2EA0786A2EA03CCA213FC6C5AA26C5AA21360A2EA70C012F812F95B00
77C7FC123C14187F9017>I E /Fl 4 119 df<EA07B0EA0C701210EA30601260A3EAC0C0
13C8A21241EA62D0EA3C700D0D7E8C12>97 D<EA0780EA1840EA3020EA604012C0EAFF80
EAC0005AA2EAC0201340EA6180EA3E000B0D7E8C10>101 D<123C120C1218A41230A412
60A412C012C8A312D0126006147F930A>108 D<EA3810EA4C181310128C12981218A2EA
3020A21340A2EA1880EA0F000D0D7F8C11>118 D E /Fm 2 51 df<121812F81218AA12
FF080D7D8C0E>49 D<123EEA4180EA80C012C01200A2EA0180EA03001204EA08401230EA
7F8012FF0A0D7E8C0E>I E /Fn 8 117 df<13C0A9B51280A23800C000A911147E8F17>
43 D<121FEA3180EA60C0EA4040EAC060A8EA4040EA60C0EA3180EA1F000B107F8F0F>
48 D<1218127812981218AC12FF08107D8F0F>I<121FEA6180EA40C0EA806012C01200A2
13C0EA0180EA030012065AEA10201220EA7FC012FF0B107F8F0F>I<121FEA2180EA60C0
A212001380EA0100121FEA00801340136012C0A2EA8040EA6080EA1F000B107F8F0F>I<
EA0180A212031205120D121912111221124112C1EAFFE0EA0180A4EA0FE00B107F8F0F>
I<12F01230A5EA33C0EA3C601230A8EAFCF80D117F9011>104 D<1208A212181238B4FC
1218A51380A4EA0F00090F808E0C>116 D E /Fo 68 127 df<EAC060EAE0E0A4EAC060
A5EA40400B0B7C9614>34 D<EA3806EA7C0E126CEAEE1CA25BA2126CEA7C70123812005B
A2485AA3485AA248C7FC130E131FEA0E1BEB3B80A2121CA238381B00131FEA180E111D7F
9914>37 D<126012F012F812781218A31230A2126012C01280050C789614>39
D<EA01801203EA06005A121C121812385AA35AA91270A37E1218121C120C7EEA03801201
091D799914>I<128012C01260123012381218121C120EA31207A9120EA3121C12181238
1230126012C01280081D7C9914>I<EA0380A3EA638CEAF39EEA7FFCEA3FF8EA0FE0A2EA
3FF8EA7FFCEAF39EEA638CEA0380A30F107E9214>I<EA01C0A7B51280A33801C000A711
117F9314>I<127012F812FCA2127C120C1218123012E012C0060A798414>I<EAFFFEA30F
037E8C14>I<127012F8A312700505798414>I<1306130EA2131CA21338A21370A213E0A2
EA01C0A2EA0380A3EA0700A2120EA25AA25AA25AA25AA25A0F1D7E9914>I<EA07C0EA0F
E0EA1C70EA3838EA3018EA701CA2EAE00EA9EA701CA2EA3838A2EA1C70EA0FE0EA07C00F
177E9614>I<1203A25A5A123F12F712471207AEEA7FF0A20C177C9614>I<EA0FC0EA1FF0
EA3838EA701CEAE00EA312401200131CA213381330137013E0EA01C0EA030012065AEA18
0E1230EA7FFEA20F177E9614>I<EA0FC0EA1FF0EA3838EA701CA2122012001318133813
70EA0FE013F0EA0038131C130EA2124012E0A2EA701CEA7838EA3FF0EA0FC00F177E9614
>I<137813F8EA01B8A2EA0338A21206120E120C121C12381230127012E0B51280A23800
3800A548B4FCA211177F9614>I<EA7FFCA2EA7000A7EA77C0EA7FF0EA7838EA601CEA00
0C130EA2124012E0131C1260EA7878EA3FF0EA0FC00F177E9614>I<12E0EAFFFEA2EAE0
1C1338EA0030137013E013C0120113801203A2EA0700A4120EA612040F187E9714>55
D<EA0FE0EA3FF8EA783CEA701CEAE00EA4EA701CEA1EF0EA0380EA1FF0EA3838EA701CEA
E00EA4EAF01EEA701CEA3838EA1FF0EA07C00F177E9614>I<127012F8A312701200A612
7012F8A312700510798F14>58 D<127012F8A312701200A6126012F012F8A21278121812
30127012E012800515798F14>I<130E133E137C13F0EA03E0EA07C0EA1F00123E12F85A
7E123E7EEA07C0EA03E0EA00F0137C133E130E0F137E9414>I<B51280A27EC8FCA3387F
FF80B5FCA211097F8F14>I<124012E012F8127C121EEA0F80EA07C0EA01F0EA00F8133E
131E133E13F8EA01F0EA07C0EA0F80EA1E00127C5A12E012400F157E9514>I<EA1FE0EA
3FF8EA701CEAE00EA21240EA003C137013E0EA01C0EA0380A41300C7FCA41203EA0780A2
EA03000F177E9614>I<EA01C0487EA21360A2EA0770A4EA0630EA0E38A4487EEA1FFCA2
EA1C1CA2487EA238FE3F80A211177F9614>65 D<EAFFF013FCEA381E130E1307A4130E13
1EEA3FFCA2EA381E130E1307A5130E131EEAFFFC13F810177F9614>I<3801F180EA07FF
EA0E1FEA1C071238EA7003A348C7FCA738700380A338380700121CEA0E0EEA07FCEA01F0
11177F9614>I<EAFFF8A2EA0700B3EAFFF8A20D177D9614>73 D<EA07FCA2EA0070B012
E0A2EAF0E0EA7FC0EA1F000E177D9614>I<B4FCA21238AF1307A4B5FCA210177E9614>
76 D<38FC1F80A2007C1300EA7637A4EA7777A2EA7367A313E7EA71C7A2EA7007A638F8
0F80A211177F9614>I<38FE3F80A2383E0E00123BA4138E1239A213CEA31238A213EE13
6EA4133E12FEA211177F9614>I<EA1FF0EA7FFCEA783CEA701CEAE00EAFEA701CEA783C
EA7FFCEA1FF00F177E9614>I<EAFFE013F8EA383C131C7FA45B133CEA3FF85BEA38387F
A51480EB1DC0A238FE0F80EB070012177F9614>82 D<EA0FCCEA1FFCEA307CEA603CEAE0
1CA313001270127EEA3FE0EA0FF0EA01F8EA001C131E130E126012E0A2EAF01CEAF838EA
FFF0EAC7E00F177E9614>I<387FFF80B5FCEAE1C3A43801C000AFEA0FF8A211177F9614>
I<38FC1F80A238380E00A3EA3C1EEA1C1CA46C5AA4EA0630EA0770A3EA0360A213E0A26C
5A11177F9614>86 D<EAFFE0A2EAE000B3A7EAFFE0A20B1D799914>91
D<EAFFE0A21200B3A712FFA20B1D7F9914>93 D<EAFFFEA30F037E7E14>95
D<EA1FC0EA7FF0EA7078EA2018EA001CA2EA07FC121FEA3C1C127012E0A3EA707C383FFF
80EA0F8F11107E8F14>97 D<12FCA2121CA513F8EA1DFEEA1F07EA1E03001C1380EB01C0
A6EB0380001E1300EA1F0EEA1DFCEA0CF81217809614>I<EA03F8EA0FFEEA1C0EEA3804
EA7000126012E0A412601270EA380EEA1C1EEA0FFCEA03F00F107E8F14>I<137EA2130E
A5EA07CEEA0FFEEA1C3EEA301EEA700E12E0A61270EA301EEA383E381FEFC0EA07CF1217
7F9614>I<EA07E0EA0FF0EA1C38EA301CEA700CEAE00EA2EAFFFEA2EAE00012601270EA
380EEA1C1EEA0FFCEA03F00F107E8F14>I<13FCEA01FEEA038EEA07041300A3EA7FFE12
FFEA0700ACEAFFF8A20F177F9614>I<EA07CF381FFF80EA383B38301800EA701CA3EA30
18EA3838EA3FF0EA37C00070C7FCA2EA3FF86C7E487EEA700F38E00380A438700700EA3C
1EEA1FFCEA07F011197F8F14>I<12FCA2121CA51378EA1DFEEA1F86EA1E07121CAA38FF
8FE0A21317809614>I<1206120FA21206C7FCA4B4FCA21207ACEAFFF8A20D187C9714>I<
12FCA2121CA5EBFF80A2EB1C005B5B5BEA1DC0EA1FE0A2EA1E70EA1C38133C131C7F38FF
1F80A21117809614>107 D<EAFF80A21203B3EAFFFEA20F177E9614>I<EAFB8EEAFFDF38
3CF380A2EA38E3AA38FEFBE013791310808F14>I<EAFC78EAFDFEEA1F86EA1E07121CAA
38FF8FE0A21310808F14>I<EA07C0EA1FF0EA3C78EA701CA2EAE00EA6EA701CEA783CEA
3C78EA1FF0EA07C00F107E8F14>I<EAFCF8EAFDFEEA1F07EA1E03001C1380EB01C0A6EB
0380001E1300EA1F0EEA1DFCEA1CF890C7FCA6B47EA21218808F14>I<EA03E7EA0FF7EA
1C1FEA300F1270487EA6EA700F1230EA1C3FEA0FF7EA07C7EA0007A6EB3FE0A213187F8F
14>I<EAFE1FEB7F80EA0EE3380F810090C7FCA2120EA8EAFFF0A211107F8F14>I<EA0FD8
EA3FF8EA603812C0A2EAF000EA7F80EA3FF0EA07F8EA001CEA600612E012F0EAF81CEAFF
F8EACFE00F107E8F14>I<1206120EA4EA7FFC12FFEA0E00A8130EA3131CEA07F8EA01F0
0F157F9414>I<EAFC3FA2EA1C07AB131F380FFFE0EA03E71310808F14>I<38FE3F80A238
3C1E00EA1C1CA36C5AA3EA0630EA0770A36C5AA311107F8F14>I<38FE3F80A238700700
EA380EA3EA39CEA3EA1B6C121AA3EA1E7CA2EA0E3811107F8F14>I<EA7E3FA2EA1E3CEA
0E78EA07705B12036C5A12037FEA0770EA0E781338487E38FE3F80A211107F8F14>I<38
FE3F80A2381C0E005BA2120E5BA212071330A2EA0370A25B1201A25BA3485A12730077C7
FC127E123C11187F8F14>I<EA3FFF5AEA700E131C1338EA007013E0EA01C0EA0380EA07
00120EEA1C0712381270B5FCA210107F8F14>I<12E0B3AB031D789914>124
D<EA1C10EA3F38EAE7E0EA41C00D047D9614>126 D E /Fp 13 107
df<EB07F0EB3FFEEB780F3901C001C048486C7E0006C7123048804880A248804880A348
EC0180A70060EC0300A36C14066C5CA26C5C6C5C6C6C13E06C6C485A2600780FC7FCEB3F
FEEB07F021217E9926>13 D<EA0780EA1FE0EA3FF0EA7FF8A2EAFFFCA6EA7FF8A2EA3FF0
EA1FE0EA07800E107E9013>15 D<B612807EC9FCA6B61280A2C9FCA6007FB51280B6FC19
127E911E>17 D<1406141E1478EB01E0EB0780EB1E001378EA01E0EA0780001EC7FC1278
12E01278121EEA0780EA01E0EA0078131EEB0780EB01E0EB0078141E14061400A6387FFF
FCB512FE171F7D971E>20 D<4A7EA26E7EA21560A2818181B71280A2C8EA0C005D5D5DA2
5DA24A5AA221147E9226>33 D<134013C0A3487E487EA2EA0EDCEA3CCF38F0C3C03840C0
8000001300B3A41221809913>I<141880A280140780B612C081C81238151EED0780ED0E
0015385DB612C05DC70003C7FC1406A25CA25C21167E9326>41 D<124012C0ABB512C0A2
00C0C7FCAB1240121A7E9917>96 D<133C13E0EA01C0EA0380ADEA0700121E12F8121E12
07EA0380ADEA01C0EA00E0133C0E257E9B13>102 D<12F8121E1207EA0380ADEA01C0EA
00E0133C13E0EA01C0EA0380ADEA0700121E12F80E257E9B13>I<13801201EA0300A312
06A25AA35AA35AA25AA35AA21260A37EA27EA37EA37EA27EA3EA0180120009267D9B0F>
I<12C0A21260A37EA27EA37EA37EA27EA3EA0180A2EA0300A31206A25AA35AA35AA25AA3
5AA209267E9B0F>I<12C0B3B302257C9B0B>I E /Fq 30 123 df<EA01F038070C08380C
0E10EA1807123000701320126000E01340A214801400A3EA601B383063A0380F81C01510
7F8F19>11 D<EB03C0EB0C301310EB203813401380EA0100A2000213701460EB1FC01311
38041F60EB0070A35AA31460001813E014C0EB018038140300EA230EEA20F890C7FCA25A
A45A1521809916>I<EA703EEA58C7389D0380129E129CA238380700A4EA700EA4485A12
601200A25BA4133011177E8F13>17 D<120FEA03807F1201A27F1200A27F1370A2137813
38A2133C137C13DEEA018EEA030EEA060F487E121C00381380EA700312E038C001C0121A
7E9916>21 D<3803FFE05A4813C0381C3C00EA381C1270126012E0A3485AA25BEA6060EA
61C0001FC7FC13107E8F16>27 D<381FFF805A481300EA408012801201A348C7FCA35AA3
120E120611107E8F11>I<121C123C126012C0A41260123C121C060A7E910B>44
D<126012F0A2126004047D830B>58 D<126012F0A212701210A31220A21240A2040B7D83
0B>I<140E143C14F0EB03C0EB0F00133C13F0EA03C0000FC7FC123C12F0A2123C120FEA
03C0EA00F0133C130FEB03C0EB00F0143C140E17167D931E>I<1304130C1318A31330A3
1360A313C0A3EA0180A3EA0300A31206A35AA35AA35AA35AA35AA20E257E9B13>I<12E0
1278121EEA0780EA01E0EA0078131EEB0780EB01E0EB0078141EA21478EB01E0EB0780EB
1E001378EA01E0EA0780001EC7FC127812E017167D931E>I<3803FFFC38007007EC0380
15C013E0A43901C00780EC0F00141E5C3803FFF8EB803C8080EA0700A4000E131EA25C5C
381C01E0B512801A1A7E991D>66 D<EA03E6EA0617EA1C0E123812301270EA601C12E0A3
133912C012E0EA6079EA219AEA1E0E10107F8F14>97 D<127E120EA35AA45AA2EA39E0EA
3E10EA7818EA701C130C131C12E0A313181338EAC030EAE070EA60E0EA2180EA1F000E1A
7F9910>I<EA01F0EA070C120CEA181CEA3008EA7000126012E0A413041308EA6010EA30
60EA0F800E107F8F11>I<EB0FC01301A3EB0380A4EB0700A2EA03E7EA0617EA1C0E1238
12301270EA601C12E0A3133912C012E0EA6079EA219AEA1E0E121A7F9914>I<EA01F0EA
0608EA1C04123812701308EAFFF0EAE000A41304EA60081310EA3060EA0F800E107F8F12
>I<120313801300C7FCA7123C124EA2128EA2129C121CA25AA212391271A21272A2123C
091A7E990D>105 D<123F1207A3120EA4121CA41238A41270A412E2A312E41264123808
1A7F990B>108 D<39383E0F80394CC330C0398F03C0E0A2008E1380A2391C0701C0A3EC
0380D8380E1388A2EC0708151039701C032039300C01C01D107E8F22>I<EA703EEA58C7
389D0380129E129CA238380700A3130E00701340A2131C1480EAE00C3860070012107E8F
17>I<EA01F0EA070CEA0C06EA180712301270126012E0A21306130E130C1318EA6030EA
30E0EA0F8010107F8F13>I<EA30F0EA5918EA9E38EA9C181300A25AA45AA45A12600D10
7E8F11>114 D<EA03E0EA06181208EA18381330EA1C00EA1FC0EA0FE0EA07F0EA007013
3012E0A2EA8060EA40C0EA3F000D107E8F12>I<1206120EA45AA2EAFFE0EA1C005AA45A
A4EAE080A2EAE100A2126612380B177E960E>I<EA380CEA4C0E124EEA8E06129CA2EA1C
041238A213081270A2EA3010EA3820EA1840EA0F800F107E8F13>118
D<380787803808C8C0EA10F1EA20E01400A2EA01C0A4EA0381A212C3EAE582EAC584EA78
7812107F8F16>120 D<EA3803004C1380384E0700128E129CA2EA1C0E1238A3485AA3EA
303C6C5AEA0FB8EA00385B1260EAE0E0485AEA4380003EC7FC11177E8F13>I<EA0381EA
07C2EA0FFCEA10041308EA003013401380EA01001202EA0C041210EA200CEA3FF8EA41F0
EA80E010107F8F12>I E /Fr 18 122 df<EA0180120F12FF12F71207ADEA7FF8A20D13
7D9213>49 D<1260EA7FFFA213FE13FCEAE018EAC0301360EA00C0120113801203EA0700
A35AA4120610147E9313>55 D<EA07E0EA1FF8EA383CEA701EEAF00E130FA31270131FEA
382FEA0FCFEA000FEA300EEA781E131CEA7078EA3FF0EA0FC010137F9213>57
D<EBFF0C000313DC380FC07C381F003C003C131C007C130C127800F81300A60078130C12
7C003C131C001F1318380FC0703803FFE0C6130016147E931B>67
D<387FFFFCA238703C1C0060130C00E0130E00C01306A200001300AB3803FFC0A217147F
931A>84 D<EA1FE0EA78707F133C1230EA01FCEA1F3C127812F0A338785F80EA3F8F110D
7F8C12>97 D<133FA2130FA5EA07EFEA1C1F487E127012F0A512701238381C3FC0EA07EF
12147F9315>100 D<EA0FC0EA1C70EA3838EA7018EAF01CA2EAFFFCEAF000A21270EA38
0CEA1C18EA07F00E0D7F8C11>I<EA0FCF38387380EA703BEB3800A36C5AEA2FC00020C7
FC1260EA3FF013FC7FEA700F487EA3EA700E6C5AEA0FF011147F8C13>103
D<12FCA2123CA5137CEA3D8EEA3E0F123CA838FF3FC0A212147F9315>I<1238127CA312
381200A312FCA2123CA912FFA208157F940B>I<EAFC7CEAFD8EEA3E0F123CA838FF3FC0
A2120D7F8C15>110 D<EA07E0EA1C38EA781EEA700EEAF00FA5EA700EEA781EEA3C3CEA
07E0100D7F8C13>I<EAFDF8EAFF0EEA3C07EB038014C0A5EB07801400EA3E0EEA3DF800
3CC7FCA4B4FCA212137F8C15>I<EAF8E0EAF978123AA2EA3C301300A6B4FCA20D0D7F8C
10>114 D<EA1FE01260EAC060A2EAFE00EA7FC0EA3FE0EA1FF0EA0070EAC030A2EAF060
EADF800C0D7F8C0F>I<120CA3121CA2EA3FC012FFEA3C00A61360A3EA1C40EA0F800B12
7F910F>I<38FE0F80A2383C06006C5AA26C5AA2EA07B0A2EA03E0A26C5AA25B126112F3
90C7FC12E6127811137F8C14>121 D E /Fs 63 122 df<EA01F8EA0604EA0C0E121890
C7FCA3EAFFFEEA1806AB387E1F801114809313>12 D<1241EAE38012611220A3EA4100A2
128209097F9311>34 D<EB3060A3EB60C0A4EBC180387FFFF8B512FC38018300A3EA0306
A3B512FC6C13F838060C00485AA4485AA3161A7E931B>I<120212041208121812101230
122012601240A212C0AA1240A212601220123012101218120812041202071E7D950D>40
D<1280124012201230121012181208120C1204A21206AA1204A2120C1208121812101230
122012401280071E7E950D>I<1360AAB512F0A238006000AA14167E9119>43
D<124012E012601220A31240A2128003097D8209>I<12FFA2080280860B>I<124012E012
4003037D8209>I<131013301360A313C0A3EA0180A2EA0300A31206A35AA35AA25AA35A
A35AA20C1D7E9511>I<120FEA30C0EA6060A2EA4020EAC030A9EA4020EA6060A2EA30C0
EA0F000C137E9211>I<120C121C12EC120CAFEAFFC00A137D9211>I<121FEA60C01360EA
F07013301260EA0070A2136013C012011380EA02005AEA08101210EA2020EA7FE012FF0C
137E9211>I<EA0FC0EA3070EA7038A31200133013E0EA0FC0EA007013381318131C1260
12F01318EAE038EA6070EA1FC00E137F9211>I<136013E0A2EA016012021206120C1208
12101220126012C0EAFFFCEA0060A5EA03FC0E137F9211>I<EA6060EA7FC01380EA4400
1240A3124FEA70C0EA40E0EA00601370A212E0A21360EA40E0EA21C0EA1F000C137E9211
>I<EA07C0EA0C20EA10701220EA6000A25A12CFEAD0C0EAE060EAC0201330A31240EA60
20EA2060EA10C0EA0F000C137E9211>I<1240EA7FFC13F8EA4010EA80301320EA004013
80EA0100A25A12021206A2120EA512040E147E9311>I<EA0FC0EA1070EA20181260A212
70EA3C30EA3F60EA0F8013E0EA31F0EA6078EAC01C130CA3EA6018EA3030EA0FC00E137F
9211>I<120FEA3080EA6040EA4060EAC0201330A31240EA6070EA30B0EA0F3012001320
1360EAE0401380EA4100123E0C137E9211>I<EA01F8EA0606EA0801381000803820F040
38430820EA460738840310128CA41284EA460738430B203820F1C06CC7FC7E000613F038
01FF8014147E9319>64 D<1330A21378A3139CA2EA019E130EA2EA0207A200061380EA07
FFEA0403380801C0A2001813E0EA380038FE07FC16147F9319>I<EAFFFCEA1C07EB0380
EB01C0A4EB0380EB0700EA1FFE381C0380EB01C0EB00E0A5EB01C0EB038038FFFE001314
7F9317>I<EBFC2038070360380C00E04813605A00701320126000E01300A60060132012
7012306C13406C138038070300EA00FC13147E9318>I<EAFFFCEA1C07EB01C0EB00E014
60147014301438A614301470146014E0EB01C0EB038038FFFC0015147F9319>I<B51280
EA1C031300A21440A2130814001318EA1FF8EA1C18130814201300A21460144014C01301
B5FC13147F9316>I<B51280EA1C031300A21440A2130814001318EA1FF8EA1C181308A2
90C7FCA6EAFFC012147F9315>I<EBFC2038070360380C00E04813605A00701320126000
E01300A4EB0FF8EB00E01260127012307E7E380703603800FC2015147E931A>I<EAFF80
EA1C00B2EAFF8009147F930C>73 D<EA0FF8EA00E0AE126012F013C0EA6180EA3F000D14
7F9311>I<EAFFC0001CC7FCAB1440A314C0148013011303B5FC12147F9315>76
D<00FEEB0FE0001E140000171317A338138027A23811C047A23810E087A3EB7107A2133A
A2131CA2123839FE083FE01B147F931E>I<38FC01FC381E00700017132013801213EA11
C0EA10E01370A21338131C130E130F1307EB03A0EB01E01300A20038136000FE13201614
7F9319>I<EAFFFCEA1C07EB0380EB01C0A5EB0380EB0700EA1FFC001CC7FCA8B47E1214
7F9316>80 D<EAFFF8EA1C07EB0380EB01C0A4EB0380EB0700EA1FF8EA1C0E7FEB0380A4
1484A2EB01CC38FF80F816147F9318>82 D<EA1F10EA30F0EA603012C01310A2EAE00012
70127FEA3FC0EA0FE0EA00F0133813181280A3EAC030EAF060EA8FC00D147E9312>I<38
7FFFF03860703000401310A200801308A300001300ACEA07FF15147F9318>I<38FF81FC
381C00701420AD120C000E13400006138038038300EA00FC16147F9319>I<EA2080EA41
00A21282A312C3EAE380EA410009097A9311>92 D<127FEAE1C0EAE040EA40601200EA07
E0EA3860126012C01364A2EA61E4EA3E380E0D7E8C11>97 D<12F01230A6EA33E0EA3430
EA3808EA300C1306A5130CEA3808EA3430EA23E00F147F9312>I<EA0FE0EA18701220EA
6020EAC000A51260EA2010EA1820EA0FC00C0D7F8C0F>I<13781318A6EA0F98EA1878EA
2038EA601812C0A51260EA2038EA1858EA0F9E0F147F9312>I<EA0F80EA1040EA2020EA
6030EAC010EAFFF0EAC000A31260EA2010EA1820EA0FC00C0D7F8C0F>I<EA03C0EA0CE0
121813401300A3B4FC1218AB127F0B1480930A>I<EA0F3CEA30E6EA2040EA6060A3EA20
40EA30C0EA2F001260A2EA3FE013F0EA6018EAC00CA3EA6018EA3030EA0FC00F147F8C11
>I<12F01230A6EA33E0EA3430EA38181230A9EAFC7E0F147F9312>I<1220127012201200
A512F01230AB12FC06157F9409>I<12F01230A6137C133013601380EA31001233EA3F80
1231EA30C0136013701330EAFC7C0E147F9311>107 D<12F01230B212FC06147F9309>I<
38F3E1F03834321838381C0CEA3018A938FC7E3F180D7F8C1B>I<EAF3E0EA3430EA3818
1230A9EAFC7E0F0D7F8C12>I<EA0FC0EA1860EA2010EA6018EAC00CA5EA6018A2EA3870
EA0FC00E0D7F8C11>I<EAF3E0EA3430EA3808EA300C1306A5130CEA3808EA3430EA33E0
EA3000A512FC0F137F8C12>I<EA0F88EA1848EA2038EA601812C0A51260EA2038EA1858
EA0F98EA0018A5137E0F137F8C11>I<EAF3C0EA34E01238EA30401300A812FE0B0D7F8C
0D>I<EA3E80126112C0A2EAE000127EEA3F80EA03C01280A212C0EAE180EA9F000A0D7F
8C0D>I<1210A312301270EAFF80EA3000A71380A3EA1100120E09127F910D>I<EAF078EA
3018A91338EA1858EA0F9E0F0D7F8C12>I<EAF83CEA30181310EA3830EA1820A2EA0C40
A2EA0680A3EA0300A20E0D7F8C11>I<38F87CF83870703038305820A238188840138CA2
380D04801306A238060300A3150D7F8C18>I<EAF87CEA3030EA1860EA0C401380EA0700
7EEA0780EA0CC0EA08601210EA3030EAF07C0E0D7F8C11>I<EAF83CEA30181310EA3830
EA1820A2EA0C40A2EA0680A3EA0300A21202A212E4A212E812700E137F8C11>I
E /Ft 1 4 df<1218A212DB12FF121812FF12DB1218A208097D890F>3
D E /Fu 60 123 df<EB03FEEB0E03EB1C07EB1806EB3800A35BA33807FFFC3800701CEB
E038A41470EA01C0A314E4A2EA0380A21468143090C7FC5AA2126612E65A127818218199
16>12 D<903803FB80EB0E0FEB1C1FEB181B9038380700A31370140EA23807FFFE380070
0E495AA45CEA01C0A31472A2EA0380A21434141890C8FC5AA2126612E65A127819218199
17>I<903903F07F7090390C18C1F0903818398390393833037091380700E0A21370A291
380E01C0A20007B6FC3900E00E01ED0380141CA3D801C0EB0700A21438A2ED0E40EA0380
A21470ED0680ED0300010090C7FC48136014E0386630C038E47080D8CC63C8FCEA783E24
21819922>15 D<EA1830EA3C78A2EA1C38EA0810A3EA1020EA2040EA4080EA81000D0B7A
9914>34 D<1218123CA2121C1208A31210122012401280060B78990C>39
D<130413181330136013C013801201EA0300A21206120E120C121C1218A212381230A212
70A21260A312E0A35AA51260A31220123012107E0E267B9B10>I<134013601320133013
101318AB1338A21330A21370A2136013E013C0A212011380120313001206A25A5A12105A
5A5A0D267F9B10>I<121812381278123812081210A21220A212401280050B7D830C>44
D<EAFF80A2130009037D880E>I<1230127812F0126005047C830C>I<1308131813301370
EA01F0EA0E70EA00E0A4EA01C0A4EA0380A4EA0700A45AEAFFE00D187C9714>49
D<137CEA0186EA020300041380138312081210A3381107001212EA0C0EC65A13305BEA01
800002C7FC120CEA10011220EA3C06EA67FEEAC1FCEA80F011187D9714>I<133E13C338
0101801202380481C0134138088380120438070300EA00065BEA01F0EA00187FA2130EA2
1260EAE01CA2EA8038EA4030EA20E0EA1F8012187D9714>I<38030180EBFF0013FCEA02
2048C7FCA45AEA0BE0EA0C181208EA001CA412201270485AEA8030EA40705BEA2180001E
C7FC11187C9714>53 D<131EEB6180EA0180EA03031206000EC7FC5A12181238EA39F0EA
7218EA740CEA780E127012F012E0A35BA2EA60385BEA30C0EA1F8011187C9714>I<133E
EBC180EA0100000213C01206A2380E0180380703001386EA03CCEA01F07FEA067C487EEA
181EEA30071260A2EAC006A2EA400CEA6018EA3070EA0FC012187D9714>56
D<137CEA0186EA0703120E000C1380121C1238A3130714005BEA1817EA0C27EA07CEEA00
0E130C131C1318EAE0305BEA80C0EAC380003EC7FC11187C9714>I<1206120F121E120C
1200A81230127812F0126008107C8F0C>I<1420146014E0A2130114F0EB0270A2130413
08A21310A213201340A2EB8038EBFFF8380100381202A25AA25A121838FE01FF181A7E99
1D>65 D<3803FFF83800700E1406140713E0A43801C00E141C143814703803FFE0EB8078
1438141CEA0700A4000E1338A2147014E0381C03C0B51200181A7D991B>I<EB0F82EB70
62EBC0163803801E3807000C120E5A121800381308123000701300A25AA41420A3144012
60148038300100EA1006EA0C18EA03E0171A7A991B>I<0003B5FC380070071403140113
E0A43801C080A313C13803FF001381A3EA0702EB0004A21408120E1418141014304813E0
B5FC181A7D991A>69 D<0003B5FC380070071403140113E0A43801C080A313C13803FF00
1381A3EA070290C7FCA3120EA4121EEAFFC0181A7D9919>I<EB0FC1EB3021EBC0133801
800F38070006120E120C5A00381304123000701300A25AA3EB07FEEB0070A4006013E0A2
7EEA1801380C0640EA03F8181A7A991E>I<3903FF1FF83900700380A39038E00700A438
01C00EA43803FFFCEB801CA348485AA4000E5BA4485B38FF87FC1D1A7D991D>I<EA03FF
EA0070A313E0A4EA01C0A4EA0380A4EA0700A4120EA45AEAFF80101A7D990F>I<EBFFC0
EB0E00A35BA45BA45BA45BA4EA61C012E15B12830047C7FC123C121A7C9914>I<EA03FF
EA0070A35BA4485AA4485AA448C7FC1410A21420120E1460144014C0381C0380B5FC141A
7D9918>76 D<D803F8EB1FC0D80078EB3C00A2155C01B85BA290389C0138A239011C0270
A21404140800025C1410A214200004EB41C0A21481A239080F0380A2130EEA180C4AC7FC
39FE083FE0221A7D9922>I<3903F007F839007800C01580A290389C0100A3138E38010E
0213061307A238020384A3EB01C4000413C8A2EB00E8A24813F01470A21218142012FE1D
1A7D991D>I<EB1F80EB70603801C030380300180006131C000E130C5A0018130E123812
301270A248131CA31438A21430147014E014C03860018038700300EA3806EA1C1CEA07E0
171A7A991D>I<3803FFF83800701C1406140713E0A43801C00EA2141C143838038060EB
FF80EB8000A248C7FCA4120EA45AB47E181A7D991A>I<3803FFF03800701C140E140713
E0A43801C00E141C143814E03803FF80EB80C014601470EA0700A4000E13E0A214E114E2
48136238FF803C181A7D991C>82 D<EB3F10EB60903801807013004813201206A3140012
0713C0EA03F8EA01FEEA007FEB0F8013031301A21220A238600300A21306EA700CEAC818
EA87E0141A7D9916>I<383FFFFC38381C0C00201304124013381280A338007000A45BA4
485AA4485AA41207EAFFF8161A79991B>I<EA0408EA0810EA1020EA2040A2EA4080A2EA
70E012F1A2EA60C00D0B769914>92 D<EA03CCEA0E2EEA181C123812301270EAE038A4EA
C072A3EA60F2EA6134EA1E180F107C8F14>97 D<127E120EA35AA45AA2EA3BC0EA3C3012
78EA7018A3EAE038A4EAC070136013E0EA60C0EA6380EA1E000D1A7C9912>I<EA01E0EA
0618120CEA1838EA3010EA7000126012E0A413081310EA6020EA30C0EA1F000D107C8F12
>I<EB1F801303A3EB0700A4130EA2EA03CEEA0E2EEA181C123812301270485AA4EAC072
A3EA60F2EA6134EA1E18111A7C9914>I<EA01E0EA0E18EA1C08123812701310EAFFE0EA
E000A41308EA60101320EA30C0EA1F000D107C8F12>I<1307EB0980131BEB3B00133813
301370A4EA07FFEA00E0A5485AA5485AA490C7FC5AA21206126612E412CC127011218199
0C>I<13F338038B8038060700120E120C121CEA380EA4EA301CA3EA183C5BEA07B8EA00
38A25B1260EAE0E0EAC1C0007FC7FC11177E8F12>I<EA1F801203A348C7FCA4120EA213
7CEA0F86EA1E07A2121CA2EA380EA35B00701380A21338EB3900EAE019EA600E111A7E99
14>I<1203120712061200A61238124C124E128E129CA2121C1238A212701272A212E212
E41264123808197C980C>I<EA1F801203A3EA0700A4120EA2130E1313EA1C2713431380
EA1F00123CEA3F80EA39C0EA38E0EA70E2A313E4EAE064EA6038101A7E9912>107
D<121F1207A3120EA4121CA41238A41270A412E4A412E81230081A7D990A>I<38307C1E
38598663399E0783801403129CA239380E0700A3140ED8701C1340A2141C158038E0380C
39601807001A107C8F1F>I<EA307CEA5986EA9E07A2129CA2EA380EA35B00701380A213
38EB3900EAE019EA600E11107C8F16>I<EA01F0EA0618EA0C0CEA180E12301270126012
E0A2130C131C13181330EA6060EA30C0EA1F000F107C8F14>I<EA030F380590C0EA09E0
EBC060A3380380E0A4380701C0148013031400EA0E8E137890C7FCA25AA4B4FC1317808F
14>I<EA30F0EA5D18EA9E38EA9C181300A25AA45AA45A12600D107C8F10>114
D<EA03E0EA04301208EA18701360EA1C00EA1F8013C0EA0FE01200136012E0A2EA80C0EA
4180EA3E000C107D8F10>I<1206120EA45AA2EAFFC0EA1C005AA45AA412E1A312E212E4
12380A177C960D>I<EA3806EA4C07EA4E0E128E129CA2EA1C1C1238A3EA7039A3EA3079
EA389AEA0F0C10107C8F15>I<EA3818EA4C1C124EEA8E0C129CA2EA1C081238A2131012
70A21320EA3040EA18C0EA0F000E107C8F12>I<38380C10384C0E38EA4E1C008E131812
9CA2381C38101238A338707020A2144012303818B880380F0F0015107C8F19>I<EA078F
3808D180EA10F3EA20E1EBE000A2EA01C0A4EA0382A212C3EAE784EAC588EA78F011107E
8F12>I<EA3806EA4C07EA4E0E128E129CA2EA1C1C1238A3EA7038A3EA3078EA38F0EA0F
7012001360EA60E0EAE1C0EAC180EA4700123C10177C8F13>I<EA0382EA07C4EA0FFCEA
10081310EA00201340EA0180EA03001204EA08081210EA2018EA7FF0EA43E0EA81C00F10
7E8F10>I E /Fv 93 128 df<B512F0380E00701430141014181408A31400B1EAFFE015
1A7F9918>0 D<1304130EA2131F1317EB2380A2EB41C0A2EB80E0A238010070A200027F
0006133C0004131C000C131E0008130E0018130F00107F00301480002013034814C0007F
B5FCB612E0A21B1A7E9920>I<137F3801C1C038070070000E7F487F003C131E0038130E
0078130F00707F00F0148000F11347EBFFC7A3EB004700F01307A20070140000785B0038
130E003C131E001C131C6C5B6C5B3801C1C0D8007FC7FC191A7E991E>I<B512FC387000
3C0078130C003813046C1306001E1302120E7EEB800012036C7E7F120013601340A25B38
01000212025A481306481304140C48133C387FFFFCB5FC171A7E991C>6
D<EBFE7C380381C6380603CE000E1384001C1380A6B512F0381C0380AE38FF8FF0171A80
9916>11 D<13FEEA038138060180EA0E03381C010090C7FCA5B51280EA1C03AE38FF8FF0
141A809915>I<EBFF80EA0383EA0603120E121CA6B5FCEA1C03AE38FF9FF0141A809915>
I<90387E1F803901C17040390703C0600006EB80E0000E14401500A5B612E0380E0380AE
397F8FE3FC1E1A809920>I<13021304A21308EA07F8EA1C38EA303CEA702EEA6046EAE0
471387A2EAE107A212E2EA6206EA740EEA3C0CEA1C38EA1FE0EA10005AA25A10187F9313
>28 D<90387FFFFC903809C01C150C15040111130615021321A2150001411340A3018113
C090B5FC380101C01540A2000214411501000614021204A200081406150E001C141C39FF
0FFFFC201A7F9923>I<126012F0A61260AA12201200A4126012F0A21260041A7D990B>
33 D<EA60C0EAF1E0EAF9F0EA68D0EA0810A3EA1020A2EA2040EA40800C0B7F9913>I<EB
0C06A3495AA4495AA4495AB612E0A23900C06000A348485AA3B612E0A23903018000A2D8
0603C7FCA5EA0C06A41B217E9920>I<000E130300315B3830800E3860E01C38E05FECEB
40185CA25C5CA238608180D83083C7FCEA3103EA0E0638000C0790381818801540EB3030
9038607020A213C0EA0180A2EA03001206EC30404813184814800008EB07001B1E7E9B20
>37 D<EA01C0EA0320EA0610120EA45B5BA23907807F809038001E0014086D5A120B3811
C020EA31E000605BEB7080EAE078013DC7FC6D1380130E39701F0100383861C3380F807C
191A7E991E>I<126012F012F812681208A31210A212201240050B7D990B>I<1380EA0100
12025A120C120812185AA35AA412E0AA1260A47EA37E1208120C12047E7EEA008009267D
9B0F>I<7E12407E7E12181208120C7EA37EA41380AA1300A41206A35A1208121812105A
5A5A09267E9B0F>I<130CACB61280A2D8000CC7FCAC191A7E951E>43
D<126012F0A212701210A31220A21240A2040B7D830B>I<EAFFC0A20A0280880D>I<1260
12F0A2126004047D830B>I<1304130C1318A31330A31360A313C0A3EA0180A3EA0300A3
1206A35AA35AA35AA35AA35AA20E257E9B13>I<EA07E0EA1C38EA381CEA300CEA700EEA
6006A2EAE007AAEA6006A2EA700EEA300CEA381CEA1C38EA07E010187F9713>I<12035A
B4FC1207B3A2EA7FF80D187D9713>I<EA0F80EA1060EA2030EA4038EA803CEAC01C12E0
1240EA003C1338A21370136013C0EA018013001202EA040412081210EA3008EA3FF8127F
12FF0E187E9713>I<EA07E0EA1838EA201CEA601EEA700EEA201E1200131CA213381370
EA07E0EA0038131C130E130FA212E0A212C0EA400EEA601CEA1838EA07E010187F9713>
I<1318A21338137813F813B8EA01381202A212041208121812101220124012C0B5FCEA00
38A6EA03FF10187F9713>I<EA3018EA3FF013E01380EA2000A5EA2FC0EA3060EA2030EA
00381318131CA2124012E0A2EA8018EA40381330EA30E0EA0F800E187E9713>I<EA01F8
EA0704EA0C06EA180E123013001270126012E0EAE3E0EAE418EAE80CEAF00EEAE0061307
A31260A2EA7006EA300EEA180CEA0C38EA07E010187F9713>I<1240EA7FFF13FEA2EA40
04EA80081310A2EA00201340A21380120113005AA25A1206A2120EA5120410197E9813>
I<EA07E0EA1818EA300CEA20061260A21270EA780CEA3E18EA1F30EA07C0EA03E0EA0CF8
EA307CEA601E130FEAC0071303A3EA6002EA2004EA1818EA07E010187F9713>I<EA07E0
EA1C30EA3018EA700CEA600EEAE006A21307A31260EA700FEA3017EA1827EA07C7EA0007
1306130E130C12701318EA6030EA3060EA0F8010187F9713>I<126012F0A212601200A8
126012F0A2126004107D8F0B>I<126012F0A212601200A8126012F0A212701210A31220
A21240A204177D8F0B>I<B61280A2C9FCA6B61280A2190A7E8D1E>61
D<EA1FC0EA2060EA4030EAC03812E0A21200137013E0EA018013005A1202A6C7FCA41206
120FA212060D1A7E9912>63 D<130CA3131EA2132F1327A2EB4380A3EB81C0A200017F13
00A248B47E38020070A2487FA3487FA2003C131EB4EBFFC01A1A7F991D>65
D<B51280380E00E014701438143CA514781470EB01E0380FFFC0380E00F01478143C141C
141EA4141C143C147814F0B512C0171A7F991B>I<EB3F023801C0C63803002E000E131E
48130E14065A007813021270A200F01300A600701302A21278003813047E14087E000313
303801C0C038003F00171A7E991C>I<B57E380E00E01470808080A280A21580A81500A2
5C140E5CA2147814E0B51280191A7F991D>I<B512F8380E003814181408140C1404A3EB
0100A35BEA0FFFEA0E037FA3EB0002A314061404A2140C143CB512FC171A7F991A>I<B5
12F8380E003814181408140C1404A3EB0100A35BEA0FFFEA0E037FA390C7FCA8EAFFE016
1A7F9919>I<EB3F023801C0C63803002E000E131E48130E14065A007813021270A200F0
90C7FCA5903801FFC03970000E00A2127812387EA27E000313163801C06638003F821A1A
7E991E>I<39FFE1FFC0390E001C00AB380FFFFC380E001CAC39FFE1FFC01A1A7F991D>I<
EAFF80EA1C00B3A6EAFF80091A7E990E>I<EA0FFEEA0070B3124012E0A2EA40E0EA61C0
EA1F000F1A7E9914>I<39FFE01FC0390E000F00140C14085C5C5C495A0102C7FC5B130C
131C132E1347EB8380EA0F03380E01C06D7EA2147080A280141E141F39FFE07FC01A1A7F
991E>I<EAFFE0000EC7FCB01408A3141814101430147014F0B5FC151A7F9918>I<B414FF
000F14F0A2390B800170A23809C002A33808E004A2EB7008A3EB3810A3EB1C20A2EB0E40
A3EB0780A2EB0300121C39FF8307FF201A7F9923>I<00FEEB7FC0000FEB0E001404EA0B
80EA09C0A2EA08E01370A21338131CA2130E1307EB0384A2EB01C4EB00E4A21474143CA2
141C140C121C38FF80041A1A7F991D>I<137F3801C1C038070070000E7F487F003C131E
0038130E0078130F00707F00F01480A80078EB0F00A20038130E003C131E001C131C6C5B
6C5B3801C1C0D8007FC7FC191A7E991E>I<B51280380E01E0EB007014781438143CA414
3814781470EB01E0380FFF80000EC7FCABEAFFE0161A7F991A>I<B5FC380E01C0EB0070
147880A55C1470EB01C0D80FFFC7FC380E0380EB00C0801470A31478A31540143CEC1C80
39FFE00F001A1A7F991C>82 D<EA0FC2EA1836EA200EEA600612C01302A3EAE000127012
7EEA3FE0EA1FF8EA03FCEA007E130E130713031280A3EAC0021306EAE004EAD818EA87E0
101A7E9915>I<007FB5FC38701C0700401301A200C0148000801300A300001400B13803
FFE0191A7F991C>I<39FFE07FC0390E000E001404B200065B12076C5B6C6C5A3800E0C0
013FC7FC1A1A7F991D>I<39FF801FC0391C00070014066C1304A36C5BA26C6C5AA36C6C
5AA26C6C5AA3EB7080A213790139C7FCA2131EA3130CA21A1A7F991D>I<3AFF81FF07F0
3A3C007801C0001CEC0080A36C90389C0100A33907010E02A33903830F04EB8207A2150C
3901C40388A33900E801D0A390387000E0A301305B01201340241A7F9927>I<39FFC0FF
80390F003C0014106C5BEA03806D5A00015BEA00E101F1C7FC137A133E131C131EA21317
EB27801343EB41C0EB81E0EA010048137000021378481338000C7F001E133EB4EB7FC01A
1A7F991D>I<39FF801FE0391E00070014066C13046C130CEB800800035BEA01C06D5A00
001360EB7040EB78801338011DC7FC131F130EAAEBFFC01B1A7F991D>I<B512C038F803
8012E038C00700A2EA800E5BA2485AA25B5BA2485AA2485A38070040A2120EA24813C048
13801301EA70031307B5FC121A7E9917>I<12FEA212C0B3AF12FEA207257D9B0B>I<EA20
40A2EA4080A2EA8100A3EAE1C0EAF1E0A2EA60C00B0B7A9913>I<12FEA21206B3AF12FE
A20725809B0B>I<EA1FC0EA38707FEA101C1200A2EA03FCEA1E1C1238127012E01480A2
133CEA705F381F8F0011107F8F13>97 D<12FC121CA913FCEA1D07381E0380381C01C013
0014E0A6EB01C01480381E0300EA1906EA10F8131A809915>I<EA07F8EA1C1C1238EA70
0813005AA612701304EA3808EA1C18EA07E00E107F8F11>I<133F1307A9EA03E7EA0C17
EA180F487E127012E0A6126012706C5AEA1C373807C7E0131A7F9915>I<EA07C0EA1C30
EA30181270EA600C12E0EAFFFCEAE000A41260EA7004EA3808EA1C18EA07E00E107F8F11
>I<EA01F0EA0718EA0E38EA1C101300A6EAFFC0EA1C00AEEAFF800D1A80990C>I<EA0FCF
3818718038303000EA7038A4EA30306C5AEA2FC00060C7FCA21270EA3FF013FC6C7EEA60
0FEAC003A4EA6006EA381CEA07E011187F8F13>I<12FC121CA9137CEA1D87381E0380A2
121CAB38FF9FF0141A809915>I<1218123CA212181200A612FC121CAE12FF081A80990A>
I<EA0180EA03C0A2EA0180C7FCA6EA0FC01201B21241EAE180EAE300127E0A2182990C>
I<12FC121CA9EB1FC0EB0F00130C5B13205B13E0121DEA1E70EA1C7813387F131E7F1480
38FF9FE0131A809914>I<12FC121CB3A6EAFF80091A80990A>I<38FC7C1F391D8E638039
1E0781C0A2001C1301AB39FF9FE7F81D107F8F20>I<EAFC7CEA1D87381E0380A2121CAB
38FF9FF01410808F15>I<EA07E0EA1C38EA300CEA700EEA6006EAE007A6EA6006EA700E
EA381CEA1C38EA07E010107F8F13>I<EAFCFCEA1D07381E0380381C01C0A2EB00E0A6EB
01C01480381E0300EA1D06EA1CF890C7FCA6B47E1317808F15>I<EA03E1EA0C13EA180B
EA300FEA700712E0A61270A26C5AEA1C37EA07C7EA0007A6EB3FE013177F8F14>I<EAFC
78EA1D9CEA1E1C1308EA1C00ABEAFF800E10808F0F>I<EA1F20EA60E0EA402012C0A2EA
F000127FEA3FC0EA1FE0EA00F0EA8070133012C01320EAF040EA8F800C107F8F0F>I<12
08A41218A21238EAFFC0EA3800A81320A41218EA1C40EA07800B177F960F>I<38FC1F80
EA1C03AB1307120CEA0E0B3803F3F01410808F15>I<38FF0F80383C0700EA1C061304A2
6C5AA26C5AA3EA03A0A2EA01C0A36C5A11107F8F14>I<39FE7F1F8039381C0700003C13
06381C0C04130E380E16081317A238072310149013A33803C1A014E0380180C0A319107F
8F1C>I<38FE3F80383C1E00EA1C086C5AEA0F306C5A6C5A12017F1203EA0270487E1208
EA181CEA381E38FC3FC012107F8F14>I<38FF0F80383C0700EA1C061304A26C5AA26C5A
A3EA03A0A2EA01C0A36C5AA248C7FCA212E112E212E4127811177F8F14>I<EAFFF8EAE0
7012C0EA80E0EA81C0A2EA0380EA0700A2EA0E04121CA2EA380812701338EAFFF80E107F
8F11>I<B512C01201808913>I<EAE1C0A40A047C9913>127 D E
/Fw 56 123 df<12F8A512301270126012E005097D990B>39 D<EAFFE0A30B0380890E>
45 D<12F8A505057D840B>I<EA07E0EA1FF8EA3FFCEA3E7CEA7C3EEA781EEAF81FAEEA78
1EEA7C3EEA3E7CEA3FFCEA1FF8EA07E0101A7E9915>48 D<EA01C01203121F12FFA21267
1207B1EA7FFC12FF127F0E1A7D9915>I<EA07E0EA1FF0EA3FFCEA7FFEEAF87EEAF03F12
60EA201F1200133FA2133E137CA213F8EA01F0EA03E0EA0780EA0F00120E5A5AEA7FFFB5
FCA27E101A7E9915>I<EA0FE0EA3FF8EA7FFC12FFEA707E1240EA003E137EA213FCEA07
F813F013F8EA007C133E133FA412401260EAF87EEAFFFEEA7FFCEA3FF8EA0FE0101A7E99
15>I<13FCA21201A2EA03BC1207133C120FA2121EA2123CA21278A212F0B512C0A43800
3C00A6121A7F9915>I<EA1FFF5AA3003EC7FCA6EA3FF87F7FEA3E1F001C13801200A312
201260127038F83F00EA7FFF6C5A6C5AEA07F0111A7F9915>I<EA01F0EA07F8121FA2EA
3F08EA7C00A2127812F813F0EAFBFCEAFFFEEAFE3EEAFC1F12F8A51278127C133EEA3FFE
EA1FFCEA0FF8EA07E0101A7E9915>I<B5FCA4EA001E133C137C13F8A2EA01F0A2EA03E0
A2120713C0120FA31380121FA7101A7E9915>I<EA0FF0EA3FFCEA7FFEA2EAFC3FEAF81F
A4EA781EEA7FFEEA1FF8A2EA7E7EEA7C3EEAF81FA6EA7C3EEA7FFEEA3FFCEA1FF8EA07E0
101A7E9915>I<EA07E0EA1FF0EA3FFC127FEA7C3E12F8131E131FA5133FEA7C7FEA7FFF
EA3FDFEA0F1F1200131E133EA2EA307CEA3FFCEA7FF8EA3FF0EA0FC0101A7E9915>I<12
F8A51200A712F8A505117D900B>I<EA1FC0EA7FF0EAFFF8EAF07C12601240120013FCEA
01F813F0EA03E0EA07C01380A51300C7FCA3EA0F80A412070E1A7E9913>63
D<13FC487EA2487EA213DFA200071380139F138F000F13C0A2130F381F07E0A2121E383E
03F0EA3FFFA24813F8EA7C01127838F800FCA348137C161A7E991B>65
D<EA7FFEB5128014C038FC0FE0EB03F0A514E0130FB512C0148014E038FC07F01303EB01
F8A51303EB07F0B512E014C06C1300151A7D991B>I<EB7FC03803FFF8120F5A383FC070
EB0010007E1300A35AA8127EA36C1308EBC078381FFFF87E000313F038007F80151A7E99
1A>I<EA7FFFB512E014F038FC07F8EB01FC1300147EA2143FAA143E147EA214FCEB03F8
B512F014E06C1300181A7D991E>I<387FFFC0B5FCA300FCC7FCA7B51280A400FCC7FCA7
B512C0A37E121A7D9918>I<387FFF80B5FCA300FCC7FCA7B5FCA400FCC7FCAA127C111A
7D9917>I<007C137E12FCA9B512FEA438FC007EAB127C171A7D991E>72
D<127C12FCB3A6127C061A7D990C>I<127C12FCB3A3B5FCA37E101A7D9916>76
D<007EEB01FCB41303A3EB800700F7147CEBC00F00F3130EA2EBE01E00F1131CEBF03CA2
00F01338EBF878A2EB7870EB7CF0A2EB3CE0A2EB1FC0A3EB0F80387007001E1A7D9925>
I<007E131EB4FCA21380A2EAF7C0EAF3E0A2EAF1F0A2EAF0F8A2137CA2133EA2131FA2EB
0F9EA2EB07DEEB03FEA21301A2EA7000171A7D991E>I<EBFF80000313E0000F13F8381F
C1FC383F007E003E133E007E133F007C7F00FC1480AA007EEB3F00A2007F5B6C137E381F
C1FC6CB45A6C5BC61380191A7E991E>I<EA7FFEB5128014C038FC0FE0130314F0A614E0
130FB512C01480EBFE0000FCC7FCA9127C141A7D991A>I<EA7FFEB5128014C038FC07E0
EB03F0A6EB07E0B512C01480EBFE00EAFC7E7FA2EB1F80A2EB0FC0A2EB07E0A2EB03F0A2
EA7C01141A7D991A>82 D<EA07F8EA1FFE487E5AEA7C0FEAF80290C7FCA27EB47EEA7FF8
7F6CB4FC120F6C138038007FC0130F1307A2124012F038FC0F80B5FC6C1300EA1FFEEA07
F8121A7E9917>I<007FB5FCB6FCA338007E00B3A3133E181A7F991B>I<00F001F813706C
486C13F0A2007C15E0903803FE0114BE149E003EEC03C0EB079FA2140FD81F0FEB078015
87A2260F0E071300018E138F019E13CF139C0007EB03CEA201DC13DE01F813FE00036D5A
A36C486C5A241A7F9927>87 D<EA0FF0EA3FFC13FEEA381F1220120013FF120FEA3F1F12
7C12F8A3EAFC7FEA7FFFEA3FDFEA1F1F10117F9014>97 D<127812F8A813F8EAFBFE12FF
EAFC1F00F81380130FA7EB1F006C5AEAFFFEEAFBFCEA79F0111A7E9915>I<EA07F8EA1F
FE123FEA7C0E13005AA7EA7C02130EEA3FFE121FEA07F80F117F9012>I<EB0F80A9EA0F
CFEA1FFF5AEA7E1FEA7C0F12F8A7127C131FEA3FFFEA1FEFEA0FCF111A7F9915>I<EA07
F0EA1FFCEA3FFEEA7C1EEA780F12F8A2B5FCA2EAF800A31278EA7C03EA3FFF7EEA03FC10
117F9013>I<EA01FC1207120FEA1F041300A5EA7FE012FFA2EA1F00AD7E0E1A80990D>I<
380FE1C0EA3FFFEA7FFD387C7C00487EA5EA7C7CEA7FFC6C5AEA6FE00060C7FCEA7FFC13
FF6C13804813C0EAF0071303A2EAF807387FFF806C1300EA0FFC12197F9015>I<127812
F8A813FCEAF9FEEAFBFFEAFE1F12FC12F8AB1278101A7E9915>I<127C12FCA51200A412
3C127CAF123C061B7F9A0A>I<127012F0A8137C13F812F1EAF3F0EAF7E0EAFFC01380A3
13C0EAFBE012F113F0EAF0F8137C133C12700E1A7D9914>107 D<127812F8B3A6127805
1A7E990A>I<3978FC1F8039F9FE3FC039FBFF7FE038FE1FC300FC138300F81303AB3878
0F011B117E9020>I<EA78FCEAF9FEEAFBFFEAFE1F12FC12F8AB127810117E9015>I<EA07
F8EA1FFE487E387E1F80EA7C0F38F807C0A7387C0F80EA7E1F383FFF006C5AEA07F81211
7F9015>I<EA78F8EAFBFE12FFEAFC3F38F81F80130FA7EB1F006C5AEAFFFEEAFBFCEAF9
F000F8C7FCA6127811187E9015>I<EA78C012FB12FFA2EAFE005A5AAA12780A117E900E>
114 D<EA1FC0EA3FF0127FEAF0701300A2B4FCEA7FE0EA3FF0121FEA03F8EA007812C012
F0EAFFF0EA7FE0EA1FC00D117F9010>I<121E123EA4EA7FE012FFA2EA3E00AA1320EA3F
F0121FEA0FC00C167F950F>I<EA781F12F8AC137FB5FCEA7F9FEA3F1F10117E9015>I<EA
E007EAF00FA2EA781EA3EA3C3CA3EA1E78A3EA0FF0A3EA07E0A210117F9013>I<39E03E
038038F07F07A33978F70F00EBE78FA3383CE39E383DC3DEA3381FC1DC14FC1381A26CC6
5A19117F901C>I<EAF00EEAF81EEA7C3CEA3E78EA1EF8EA0FF0EA07E013C01203EA07E0
EA0FF0EA1E701378EA3C3CEA781EEAF81FEAF00F10117F9013>I<EAF007EAF80F127813
1E123CA2EA3E3C121EA2EA0F381378EA077013F0120313E01201A213C0A21203EA878012
FF130012FC10187F9013>I<EA3FFC127FA2EA00F8EA01F0A2EA03E0EA07C01380120FEA
1F00123EA25AEAFFFCA30E117F9012>I E /Fx 18 107 df<B512F0A214027D881B>0
D<1202A3EAC218EAF278EA3AE0EA0F80A2EA3AE0EAF278EAC218EA0200A30D0E7E8E12>
3 D<EA0F80EA1FC0EA3060EA6030A2EAC018A4EA6030A2EA3060EA1FC0EA0F800D0E7E8E
12>14 D<EA0F80EA1FC0EA3FE0EA7FF0A2EAFFF8A4EA7FF0A2EA3FE0EA1FC0EA0F800D0E
7E8E12>I<B512FC7EC8FCA6B512FCA2C8FCA6387FFFFCB5FC16127E901B>17
D<143014F0EB01C0EB0700131E1378EA01E0EA0380000EC7FC123C12F0A21238120E6C7E
EA01E0EA0078131C1307EB03C0EB00F014301400A6387FFFE0B512F0141E7D951B>20
D<1406A380A2EC0180EC00C01560B612FCA2C8126015C0EC0180EC0300A21406A31E127E
9023>33 D<13801201A2EA03C0A2EA07E0EA0DB0EA799EEAF18FEA8181EA0180B3101D7F
9612>I<3801FF801207000EC7FC12185A5AA35AA2B51280A200C0C7FCA21260A37E7E12
0E3807FF80120111167D9218>50 D<1303A21306A2130CA21318A21330A21360A213C0A2
EA0180A2EA0300A21206A25AA25AA25AA25AA25A1240101E7B9600>54
D<12C0AC020C7E8D00>I<134013E0A2EA01B0A2EA0318A2EA060CA2487EA2487EA23830
0180A2386000C0A2481360142013137E9218>94 D<124012C0A9B5FC148000C0C7FCAA12
4011177E9616>96 D<137813C0EA0180EA0300AB12065A12F0120C7E7EABEA0180EA00C0
13780D217E9812>102 D<12F0120C7E7EABEA0180EA00C0137813C0EA0180EA0300AB12
065A12F00D217E9812>I<120112031206A3120CA31218A21230A31260A312C0A21260A3
1230A31218A2120CA31206A31203120108227D980E>I<12C0A21260A31230A31218A212
0CA31206A31203A21206A3120CA31218A21230A31260A312C0A208227E980E>I<12C0B3
AF02217C980A>I E /Fy 17 120 df<121C123E127E127F123F121F1207120E121E127C
12F81260080C788518>44 D<1230127812FCA2127812300606778518>46
D<137CEA01FEEA07FF380F8780381E03C0EA3C1DEA387F3870FFE0EA71E313C112E1EAE3
80A638E1C1C0127113E33870FF8038387F00EA3C1C381E00E0EA0F833807FFC000011380
38007E00131C7E9B18>64 D<EA0FF0EA1FFC487EEA3C0FEA180738000380A213FF120712
1FEA7F03127812E0A3EAF007EA780F383FFFF8EA1FFDEA07F015147E9318>97
D<EA01FEEA07FF001F1380EA3E073838030048C7FCA25AA61270EB01C01238EA3E03381F
FF8000071300EA01FC12147D9318>99 D<EB1F80133F131F1303A5EA03E3EA0FFBEA1FFF
EA3C1FEA380FEA7007130312E0A6EA7007A2EA380FEA3C1F381FFFF0380FFBF83803E3F0
151C7E9B18>I<EA01F0EA07FCEA1FFEEA3E0F38380780EA7003A238E001C0A2B5FCA300
E0C7FC1270EB01C01238EA3E07381FFF8000071300EA01F812147D9318>I<3801E1F038
07FFF85A381E1E30381C0E00487EA5EA1C0EEA1E1EEA1FFC5BEA39E00038C7FC7EEA1FFE
EBFFC04813E0387801F038700070481338A4007813F0EA7E03381FFFC06C13803801FC00
151F7F9318>103 D<127E12FE127E120EA5133EEBFF80000F13C013C1EB80E01300120E
AB387FC7FC38FFE7FE387FC7FC171C809B18>I<EA0380EA07C0A3EA0380C7FCA4EA7FC0
12FF127F1201AEB5FCA3101D7C9C18>I<EAFFC0A31201B3A4B51280A3111C7D9B18>108
D<EA01F0EA0FFE487E383E0F80EA3803387001C0A238E000E0A5EAF001007013C0EA7803
383C0780EA3E0F381FFF006C5AEA01F013147E9318>111 D<38FF0FC0EB3FE0EB7FF0EA
07F0EBE060EBC0005BA290C7FCA9EAFFFC7F5B14147E9318>114
D<EA07F7EA3FFF5AEA780FEAE007A3007CC7FCEA7FE0EA1FFCEA03FEEA001F38600780EA
E003A212F038F80F00B5FC13FCEAE7F011147D9318>I<487E1203A4387FFFC0B5FCA238
038000A9144014E0A33801C1C013FF6C1380EB3E0013197F9818>I<387E07E0EAFE0FEA
7E07EA0E00AC1301EA0F033807FFFC6C13FE3801FCFC1714809318>I<38FF07F8138F13
07383800E0A4381C01C0137113F9A213D9EA1DDD000D1380A3138DEA0F8FA23807070015
147F9318>119 D E /Fz 2 104 df<130F1338136013E0EA01C0AFEA0380EA0700121E12
F8121E1207EA0380EA01C0AFEA00E013601338130F102D7DA117>102
D<12F8121E1207EA0380EA01C0AFEA00E013601338130F1338136013E0EA01C0AFEA0380
EA0700121E12F8102D7DA117>I E /FA 24 122 df<137813841201EA03021207A45BA2
5BA2EA03909038A00FFC9038C001E0EC00C000011480EC0100EA02E000041302EA087038
18780438303808EA703CEB1C10EAF00EEB0F20EB07C09038038004387001C0397802E008
3938047018391C183C303907E00FC01E227EA023>38 D<90380FE0109038381C309038E0
02703803C00139078000F048C71270121E15305A1510127C127800F81400A7EC3FFEEC01
F000781300127C123CA27EA27E6C7E3903C001703900E002309038380C1090380FF0001F
217E9F24>71 D<EAFFF0EA0F00B3ABEAFFF00C1F7E9E10>73 D<EB1FE0EB70383801C00E
48487E39070003804814C0001EEB01E048EB00F0A2007C14F8A20078147800F8147CA900
781478007C14F8A2003C14F0003E1301001E14E06CEB03C06C148039038007003801E01E
38007038EB1FE01E217E9F23>79 D<3803F040380C0CC0EA1803EA3001EA6000A212E014
40A36C13007E127CEA7F80EA3FF86CB4FC00071380C613C0EB1FE013031301EB00F01470
7EA46C136014E06C13C038F8018038C60300EA81FC14217E9F19>83
D<007FB512E038780F010060EB006000401420A200C0143000801410A400001400B3497E
3803FFFC1C1F7E9E21>I<3BFFF07FF81FF03B1F000FC007C06C903907800180170015C0
01805C00071502EC09E013C000035DEC19F01410D801E05CA2EC2078D800F05CA2EC403C
01785CA2EC801E017C1460013C144090383D000F133F6D5CA2011E1307010E91C7FCA201
0C7F010413022C207F9E2F>87 D<EA1FE0EA3030EA7818131CEA300E1200A313FEEA078E
EA1E0E1238127800F01310A3131E127838386720380F83C014147E9317>97
D<EA01FCEA0706EA1C0F123813060078C7FC127012F0A61270127800381380A2381C0100
EA0706EA01F811147F9314>99 D<EB01C0130F1301AAEA01F1EA070DEA0C03EA18011238
1278127012F0A61270A21238EA1803120CEA070D3801F1F815207F9F19>I<EA03F0EA0E
1C487E487EA21270EB038012F0A2B5FC00F0C7FCA31270A26C1380A2381C0100EA0706EA
01F811147F9314>I<137CEA01C6EA030F1207EA0E061300A7EAFFF0EA0E00B2EA7FE010
20809F0E>I<14E03803E330EA0E3CEA1C1C38380E00EA780FA5EA380E6C5AEA1E38EA33
E00020C7FCA21230A2EA3FFE381FFF8014C0383001E038600070481330A4006013606C13
C0381C03803803FC00141F7F9417>I<121C12FC121CAA137C1386EA1D03001E1380A212
1CAE38FF8FF014207E9F19>I<1238127CA31238C7FCA6121C12FC121CB1EAFF80091F7F
9E0C>I<121C12FC121CB3ABEAFF8009207F9F0C>108 D<391C3E03E039FCC30C30391D03
9038391E01E01CA2001C13C0AE3AFF8FF8FF8021147E9326>I<EA1C7CEAFC86EA1D0300
1E1380A2121CAE38FF8FF014147E9319>I<EA01F8EA070E381C0380383801C0A2387000
E0A200F013F0A6007013E0A2383801C0A2381C038038070E00EA01F814147F9317>I<EA
1CF0EAFD18EA1E3CA21318EA1C00AEEAFFC00E147E9312>114 D<EA0FC8EA3038EA6018
EAC008A3EAE000127CEA3FE0EA1FF0EA07F8EA003CEA800E130612C0A21304EAE00CEAD8
18EA87E00F147F9312>I<1202A31206A2120EA2123EEAFFF8EA0E00AB1304A5EA070812
03EA01F00E1C7F9B12>I<381C0380EAFC1FEA1C03AE1307120CEA061B3803E3F014147E
9319>I<38FF83F8383E00E0001C13C06C1380A338070100A21383EA0382A2EA01C4A213
E4EA00E8A21370A31320A25BA3EAF080A200F1C7FC1262123C151D7F9318>121
D E /FB 23 121 df<EAFFFEA30F037F8E14>45 D<14101438A3147CA314BEA3EB011FA3
9038020F80A201047F1407A201087F1403A2496C7EA3496C7EA390387FFFFCA29038C000
7E49133EA248C7123F81A20002EC0F80A21206ED07C0001FEC0FE0D8FFE0EBFFFEA2272A
7EA92C>65 D<B7FCA23907E0003F00031407ED03801501A21500A416405CA21600A25CA2
140F90B5FCA2EBE00F1403A2801620A391C7FC1640A416C0A215011503ED07800007143F
B7FCA223297EA828>69 D<D8FFE0913807FF80A20007EEF000D802F0EC0BE0A201781413
A36D1423A36D1443A26D1483A3903907800103A3903803C002A2903801E004A3903800F0
08A2EC7810A3EC3C20A3EC1E40A2EC0F80A30007EB0700D80F804A7ED8FFF891B5128014
0231297EA836>77 D<B6FC15E03907E001F80003EB007C81811680150F16C0A61680151F
1600153E5DEC01F090B512C001E0C8FCB1487EB57EA222297EA828>80
D<EBFE013803FF83380F81E3381E003748131F00387F00787F127000F07FA3807EA26C90
C7FC127E127FEA3FE0EA1FFE380FFFE06C13F86C7FC66C7EEB07FFEB007FEC1F80140FEC
07C0A26C1303A47E1580A26C13076C14006C130E00EE5B38C3C07838C1FFF038803FC01A
2B7DA921>83 D<EA03FCEA0C0738100380383C01C0003E7F6D7E121C1208C7FCA3137FEA
03E0EA0F80EA1E005A127C0078144012F8A31301127C393C027880381E0C7F3907F01E00
1A1A7E991D>97 D<137F3801C0E038070010000E1378001E13F85A1470007C1320007813
0012F8A81278127C003C1308A26C1310000E13206C13603801C18038007E00151A7E991A
>99 D<13FC38038780380701C0000E13E0EA1C00003C13F0A2481378A212F8A2B512F800
F8C7FCA51278A26C1308A26C1310000E13206C13403801C18038007E00151A7E991A>
101 D<140F3901FC308038070743380E03C3001EEBC100486C7EA2007C7FA5003C5BA26C
485A000E5BD81707C7FCEA11FC0030C8FCA47E381FFF806C13F06C7F3818007C48131E00
70130E00607F12E0A40070130EA26C5B6C5B380781E0C6B4C7FC19287E9A1D>103
D<120FB4FCA2121F7EACEB07F0EB1838EB201C497E140F1380A21300B139FFF0FFF0A21C
2A7EA921>I<121E123FA4121EC7FCA9120FB4FCA2121F7EB3A2EAFFF0A20C297EA811>I<
120FB4FCA2121F7EB3B2EAFFF0A20C2A7EA911>108 D<3A0F07F007F03AFF1838183890
39201C201C3A1F400E400E000F010F130F01801380A201001300B13BFFF0FFF0FFF0A22C
1A7E9931>I<380F07F038FF1838EB201C381F400E000F130F1380A21300B139FFF0FFF0
A21C1A7E9921>I<137E3803C3C0380700E0000E1370481338003C133CA248131EA200F8
131FA80078131EA26C133CA2001C13386C13706C13E03803C3C038007E00181A7E991D>
I<380F07E038FF1838EB601E380F800FEC0780010013C0140315E0A2EC01F0A715E01403
A215C0EC07801380EC0F00EB401CEB3078EB0FC090C8FCAAEAFFF0A21C267E9921>I<38
0F0F8038FF11C0EB23E0EA1F43EA0F83EB81C0EB800090C7FCB07FEAFFFCA2131A7E9917
>114 D<3807F080EA1C0DEA3003EA600112E01300A27E6C1300127EEA7FE0EA3FFC6C7E
EA07FF38003F801307388003C0A2130112C0A200E01380130300F01300EACC0EEA83F812
1A7E9917>I<7FA41201A31203A21207120F381FFF80B5FC38078000AD1440A73803C080
12013800E100133E12257FA417>I<000F130FB413FFA2001F131F6C7FB05CA26C132F39
03804F803901C08FF038007F0F1C1A7E9921>I<3AFFF3FF83FEA23A1F803C00F8D80F00
1460EB801C0007011E1340A2D9C02E13C00003012F1380A23A01E04701001581A23900F0
838215C2A290387901C415E4137B90383E00E815F8A2011C1370A2011813300108132027
1A7F992A>119 D<39FFF03FF0A2390FC01F003807801C3803C0183801E0106D5A00005B
EB78C06D5A013DC7FC7F7F80A2EB13C0EB21E0EB61F01340EB80783801007C48133C487F
001F133F39FF807FF8A21D1A7F991F>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 292 42 a FB(Multi-St)o(age)17 b(Programming)i(with)f(Explicit)e
(Annotations)704 157 y FA(W)l(alid)h(T)l(aha)e(&)g(Tim)h(Sheard)454
213 y(Oregon)f(Graduate)g(Institute)h(of)e(Science)j(&)f(T)l(ec)o
(hnology)642 269 y Fz(f)p Fy(walidt,sheard)p Fz(g)p Fy(@cse.og)o(i.edu)
1299 253 y Fx(\003)-76 638 y Fw(Abstract)-76 717 y Fv(W)m(e)g(in)o(tro)
q(duce)i(MetaML,)e(a)f(statically-t)o(yp)r(ed)k(m)o(ulti-stage)e(pro-)
-76 758 y(gramming)22 b(language)h(extending)g(Nielson)g(and)e
(Nielson's)i(t)o(w)o(o)-76 800 y(stage)16 b(notation)h(to)e(an)h
(arbitrary)g(n)o(um)o(b)q(er)g(of)f(stages.)25 b(MetaML)-76
841 y(extends)c(previous)h(w)o(ork)e(b)o(y)h(in)o(tro)q(ducing)i
Fu(four)c Fv(distinct)j(stag-)-76 883 y(ing)13 b(annotations)h(whic)o
(h)e(generalize)i(those)e(published)i(previously)-76
924 y([25,)f(12,)g(7,)f(6])-20 966 y(W)m(e)e(giv)o(e)h(a)g(static)f
(seman)o(tics)i(in)f(whic)o(h)g(t)o(yp)q(e)f(c)o(hec)o(king)i(is)e
(done)-76 1007 y(once)18 b(and)f(for)g(all)i(b)q(efore)e(the)g(\014rst)
h(stage,)g(and)g(a)f(dynamic)h(se-)-76 1049 y(man)o(tics)d(whic)o(h)f
(in)o(tro)q(duces)i(a)d(new)h(concept)g(of)f Fu(cr)n(oss-stage)e(p)n
(er-)-76 1090 y(sistenc)n(e)p Fv(,)e(whic)o(h)j(requires)h(that)e(v)n
(ariables)j(a)o(v)n(ailable)g(in)e(an)o(y)g(stage)-76
1132 y(are)h(also)h(a)o(v)n(ailable)i(in)e(all)g(future)f(stages.)-20
1173 y(W)m(e)k(illustrate)h(that)f(staging)h(is)e(a)h(man)o(ual)h(form)
e(of)g(binding)-76 1215 y(time)11 b(analysis.)19 b(W)m(e)10
b(explain)j(wh)o(y)m(,)e(ev)o(en)g(in)g(the)g(presence)h(of)e(auto-)-76
1256 y(matic)j(binding)h(time)e(analysis,)i(explicit)h(annotations)f
(are)d(useful,)-76 1298 y(esp)q(ecially)16 b(for)d(programs)h(with)f
(more)g(than)h(t)o(w)o(o)f(stages.)-20 1339 y(A)i(thesis)h(of)e(this)i
(pap)q(er)g(is)f(that)g(m)o(ulti-stage)i(languages)g(are)-76
1381 y(useful)j(as)e(programming)j(languages)f(in)g(their)f(o)o(wn)f
(righ)o(t,)j(and)-76 1422 y(should)16 b(supp)q(ort)f(features)g(that)f
(mak)o(e)h(it)f(p)q(ossible)j(for)d(program-)-76 1464
y(mers)9 b(to)g(write)g(staged)g(computations)i(without)f(signi\014can)
o(tly)i(c)o(hang-)-76 1505 y(ing)17 b(their)g(normal)g(programming)i
(st)o(yle.)27 b(T)m(o)15 b(illustrate)k(this)e(w)o(e)-76
1547 y(pro)o(vide)c(a)f(simple)h(three)f(stage)f(example,)i(and)f(an)g
(extended)h(t)o(w)o(o-)-76 1588 y(stage)h(example)g(elab)q(orating)i(a)
d(n)o(um)o(b)q(er)g(of)g(practical)i(issues.)-76 1686
y Fw(1)41 b(Intro)q(duction)-76 1765 y Fv(Multi-stage)14
b(languages)g(ha)o(v)o(e)e(recen)o(tly)h(b)q(een)f(prop)q(osed)i(as)e
(in)o(ter-)-76 1806 y(mediate)g(represen)o(tations)g(for)e(partial)j
(ev)n(aluation)f([12,)e(9,)g(10)q(])g(and)-76 1848 y(run)o(time)j(co)q
(de)f(generation)h([7].)j(These)c(languages)h(generalize)h(the)-76
1889 y(w)o(ell-kno)o(wn)j(t)o(w)o(o-lev)o(el)f(notation)h(of)e(Nielson)
i(&)e(Nielson)i([25])e(to)-76 1931 y(an)e(arbitrary)i(n)o(um)o(b)q(er)f
(of)e(lev)o(els.)-20 1972 y(A)e(ma)r(jor)g(thesis)h(of)f(this)h(pap)q
(er)g(is)g(that)f Fu(multi-stage)f(languages)-76 2014
y(ar)n(e)j(useful)f(not)h(only)f(as)h(interme)n(diate)e(r)n(epr)n
(esentations)o(,)g(but)i(also)-76 2055 y(as)k(pr)n(o)n(gr)n(amming)f
(languages)f(in)h(their)h(own)g(right.)25 b Fv(Multi-stage)p
-76 2085 399 2 v -34 2107 a Ft(\003)-16 2119 y Fs(The)10
b(researc)o(h)h(rep)q(orted)f(in)i(this)g(pap)q(er)f(w)o(as)f(supp)q
(orted)i(b)o(y)g(the)f(USAF)-76 2153 y(Air)19 b(Materiel)g(Command,)i
(con)o(tract)d(#)i(F19628-93-C-00)o(69)o(,)f(and)g(NSF)-76
2186 y(Gran)o(t)13 b(IRI-9625462.)20 b Fr(This)14 b(pap)q(er)h(app)q
(eared)h(in)d Fs(The)g(Pro)q(ceedings)h(of)-76 2219 y(the)9
b(A)o(CM)f(SIGPLAN)g(Symp)q(osium)i(on)f(P)o(artial)g(Ev)n(aluation)h
(and)f(Seman)o(tics)-76 2252 y(Based)i(Program)e(Manipulation.)16
b(pp)11 b(203-217.)i(Amsterdam,)e(The)f(Nether-)-76 2285
y(lands,)18 b(June)d(12-13,)g(1997.)26 b Fr(Cop)o(yrigh)o(t)15
b(1997)g Fs(b)o(y)h(the)f(Asso)q(ciation)g(for)-76 2319
y(Computing)10 b(Mac)o(hinery)m(,)g(Inc.)15 b(P)o(ermission)10
b(to)e(mak)o(e)h(digital)h(or)e(hard)h(copies)-76 2352
y(of)f(part)f(or)g(all)h(of)g(this)h(w)o(ork)e(for)h(p)q(ersonal)f(or)g
(classro)q(om)g(use)h(is)h(gran)o(ted)e(with-)-76 2385
y(out)k(fee)f(pro)o(vided)i(that)f(copies)g(are)f(not)g(made)h(or)f
(distributed)j(for)e(pro\014t)f(or)-76 2418 y(direct)15
b(commercial)g(adv)n(an)o(tage,)h(and)f(that)g(copies)g(b)q(ear)g(this)
g(notice)g(and)-76 2452 y(the)c(full)g(citation)g(on)f(the)h(\014rst)f
(page.)k(Cop)o(yrigh)o(ts,)e(for)e(comp)q(onen)o(ts)g(of)h(this)-76
2485 y(w)o(ork)f(b)o(y)g(others)g(than)g(A)o(CM,)f(m)o(ust)i(b)q(e)e
(honored.)15 b(Abstracting)9 b(with)h(credit)-76 2518
y(is)j(p)q(ermitted.)18 b(T)m(o)11 b(cop)o(y)h(otherwise,)g(to)g
(republish,)i(to)e(p)q(ost)f(on)h(serv)o(ers,)h(or)-76
2551 y(to)f(redistribute)h(to)f(lists,)i(requires)f(prior)f(sp)q
(eci\014c)g(p)q(ermission)i(and/or)d(fee.)-76 2584 y(Request)i(p)q
(ermissions)g(from)f(Publications)h(Departmen)o(t,)g(A)o(CM)e(INC.,)h
(fax)-76 2618 y(+1)f(\(212\))f(869-0481,)f(or)h(\(p)q
(ermission@acm.org\))1020 638 y Fv(programming)15 b(is)f(imp)q(ortan)o
(t)g(whenev)o(er)g(p)q(erformance)g(is)f(imp)q(or-)1020
680 y(tan)o(t.)25 b(But)16 b(there)g(is)g(v)o(ery)g(little)i(language)f
(supp)q(ort)g(for)f(writing)1020 721 y(m)o(ulti-stage)d(programs.)k
(This)c(pap)q(er)f(extends)g(previous)h(w)o(ork)f(on)1020
763 y(m)o(ulti-stage)i(programming)h(with)e(features)f(that)h(are)f(of)
h Fu(pr)n(actic)n(al)1020 804 y(use)g(to)g(r)n(e)n(al)g(pr)n(o)n(gr)n
(ammers)p Fv(.)1076 846 y(W)m(e)c(in)o(tro)q(duce)h(MetaML,)f(a)g
(statically-t)o(yp)q(ed)j(m)o(ulti-stage)e(pro-)1020
887 y(gramming)20 b(language)h(extending)g(Nielson)f(and)g(Nielson's)g
(t)o(w)o(o-)1020 929 y(lev)o(el)d(notation)f(to)f(an)h(arbitrary)h(n)o
(um)o(b)q(er)e(of)g(stages)h(\(similar)h(to)1020 970
y(their)10 b Fq(B)r Fv(-lev)o(el)g(language\).)17 b(MetaML)9
b(is)g(an)h(extension)g(of)f(a)f(Hindley-)1020 1012 y(Milner)20
b(p)q(olymorphical)q(ly)q(-t)o(yp)q(ed)h([22])d(call-b)o(y-v)n(alue)j
Fq(\025)p Fv(-calculus)1020 1053 y([13])c(with)g(supp)q(ort)h(for)f
(sums,)h(pro)q(ducts,)h(recursion,)h(p)q(olymor-)1020
1095 y(phism,)11 b(primitiv)o(e)h(datat)o(yp)q(es)f(and)g(static)f(t)o
(yp)q(e-inference.)18 b(It)9 b(pro-)1020 1136 y(vides)j(the)f(follo)o
(wing)h(extensions)h(not)d(found)i(in)f(previous)h(w)o(ork)f(on)1020
1178 y(m)o(ulti-stage)k(systems:)1076 1257 y Fp(\017)j
Fv(F)m(our)10 b(distinct)i(staging)f(annotations,)h(whic)o(h)e(w)o(e)f
(b)q(eliev)o(e)j(are)1113 1299 y(necessary)20 b(and)f(su\016cien)o(t)g
(for)f(all)i(m)o(ulti-stage)g(program-)1113 1341 y(ming.)32
b(\(Section)19 b(5\))e(These)h(annotations)i(generalize)f(and)1113
1382 y(safely)11 b(com)o(bine)f(those)g(published)j(previously)f([25,)d
(12,)g(7,)g(6].)1113 1424 y(The)k(formal)h(pro)q(of)f(of)g(safet)o(y)g
(is)h(ongoing)h(w)o(ork.)1076 1495 y Fp(\017)j Fv(A)11
b(t)o(yp)q(e)h(system)g(ensuring)h(the)f(w)o(ell-formedness)h(of)e
(accept-)1113 1536 y(able)g(m)o(ulti-stage)h(programs.)k(T)o(yp)q(e)10
b(c)o(hec)o(king)i(is)e(done)h(once)1113 1578 y(and)j(for)f(all)h(b)q
(efore)f(the)h(\014rst)f(stage)g(\(Section)i(10.1\).)1076
1649 y Fp(\017)j Fv(V)m(ariables)12 b(of)f(an)o(y)f(stage)h(are)f(a)o
(v)n(ailable)k(in)d(all)g(future)g(stages.)1113 1691
y(This)17 b(feature,)g(in)g(a)f(language)i(whic)o(h)f(also)g(con)o
(tains)g Fo(run)2000 1675 y Fn(1)1113 1732 y Fv(mak)o(es)d(MetaML's)e
(annotations)j(strictly)g(more)d(expressiv)o(e)1113 1774
y(than)e(the)f(languages)i(of)d(Nielsen)i(&)f(Nielsen)h([25,)f(24],)g
(Da)o(vies)1113 1815 y(&)k(Pfenning)i([7],)e(and)g(Da)o(vies)i([6].)i
(W)m(e)d(also)g(deal)g(with)g(the)1113 1857 y(in)o(teresting)i(tec)o
(hnical)g(problem)f(of)e(ensuring)i(the)f(h)o(ygienic)1113
1898 y(binding)h(of)c(free)h(v)n(ariables)i(\(Section)f(10.2\))f(in)g
(co)q(de)h(expres-)1113 1940 y(sions.)1076 2011 y Fp(\017)18
b Fv(A)h(non-Hindley-Mil)q(ner,)k(second-order)d(t)o(yp)q(e)f(judgemen)
o(t)1113 2053 y(for)c(the)f Fo(run)f Fv(annotation)j(to)f(ensure)g
(that)f(no)h(co)q(de)g(is)g(ev)o(er)1113 2094 y Fo(run)d
Fv(in)i(a)f(con)o(text)g(in)h(whic)o(h)g(it)f(is)h(unde\014ned.)1076
2174 y(As)f(a)f(consequence)j(of)d(the)h(ab)q(o)o(v)o(e)h(prop)q
(erties,)g(MetaML)f(pro-)1020 2216 y(vides)e(a)f(programming)h
(language)h(suitable)f(for)f(expressing)h(staged)1020
2257 y(computations)k(explicitly)m(.)20 b(W)m(e)13 b(b)q(eliev)o(e)h
(that)f(MetaML)g(can)h(ha)o(v)o(e)1020 2299 y(p)q(ositiv)o(e)h
(implications)h(for)c(understanding)k(and)d(comm)o(unicating)1020
2340 y(ideas)e(ab)q(out)f(m)o(ulti-stage)h(programs,)f(partial)h(ev)n
(aluation)h(and)e(the)1020 2382 y(complex)15 b(pro)q(cess)f(of)e
(binding-ti)q(me)k(analysis)f(in)f(m)o(uc)o(h)g(the)f(same)1020
2423 y(w)o(a)o(y)19 b(that)g(the)g(b)q(o)o(xed)i(/)e(un)o(b)q(o)o
(xed\(#\))h(distinction)i(pro)o(vides)f(a)1020 2465 y(language)15
b(for)d(understanding)j(b)q(o)o(xing)f(optimization)q(s)h(as)e(source-)
1020 2506 y(to-source)h(transformations)g([16)q(].)p
1020 2538 V 1063 2562 a Fm(1)1080 2575 y Fs(An)d Fl(ev)q(al)p
Fs(-lik)o(e)h(op)q(erator.)p eop
%%Page: 2 2
2 1 bop -76 -34 a Fw(2)41 b(Why)13 b(Multi-stage)e(Programs?)-76
44 y Fv(The)18 b(concept)h(of)f(a)g(stage)h(arises)g(naturally)h(in)f
(a)f(wide)h(v)n(ariet)o(y)-76 86 y(of)d(situations.)28
b(F)m(or)16 b(a)g(compiled)i(language,)h(there)d(are)g(t)o(w)o(o)f
(dis-)-76 127 y(tinct)d(stages:)k(compile-time,)e(and)e(run-time.)17
b(But)11 b(three)g(distinct)-76 169 y(stages)18 b(app)q(ear)g(in)g(the)
f(con)o(text)h(of)f(program)h(generation:)27 b(gen-)-76
210 y(eration,)14 b(compilation,)i(and)d(execution.)19
b(F)m(or)12 b(example,)i(the)g(Y)m(acc)-76 252 y(parser)c(generator)f
(\014rst)h(reads)f(a)g(grammar)g(and)h(generates)g(C)e(co)q(de;)-76
293 y(second,)17 b(this)g(program)g(is)f(compiled;)j(third,)e(the)f
(user)h(runs)f(the)-76 335 y(ob)r(ject)d(co)q(de.)-20
376 y(Y)m(et)i(despite)i(the)e(n)o(umerous)i(examples)g(of)e(m)o
(ulti-stage)i(soft-)-76 418 y(w)o(are)11 b(systems,)h(almost)g(all)g
(these)g(systems)f(ha)o(v)o(e)h(realized)h(staging)-76
459 y(in)20 b(ad-ho)q(c)f(w)o(a)o(ys.)35 b(Our)19 b(goal)g(is)h(to)f
(pro)o(vide)h(a)f(language)i(with)-76 501 y(w)o(ell-designed)16
b(supp)q(ort)e(for)f(m)o(ulti-staged)j(programming)f(b)o(y)e(us-)-76
542 y(ing)f(explicit)h(staging)f(annotations.)18 b(In)11
b(particular,)i(a)e(m)o(ulti-stage)-76 584 y(programming)k(language)g
(supplies)g(a)e(basis)h(for)f(generation)h(tec)o(h-)-76
625 y(nology)m(.)25 b(Generators)17 b(can)e(pro)o(vide)i(dramatic)g
(impro)o(v)o(emen)o(ts)f(in)-76 667 y(the)d(follo)o(wing)i(areas:)-20
738 y Fk(E\016ciency)l(.)h Fv(Sp)q(eciali)q(zin)q(g)f(a)e(function)i
(on)e(a)g(\014xed)g(argumen)o(t)-76 780 y(can)j(lead)h(to)f(dramatic)h
(e\016ciency)g(gains.)27 b(Program)16 b(generators)-76
821 y(can)c(pro)o(vide)g(the)f(same)h(e\016ciency)g(gains)h(that)e
(partial)i(ev)n(aluation)-76 863 y(do)q(es.)-20 934 y
Fk(Pro)q(ductivit)o(y)j(and)g(reuse.)24 b Fv(When)15
b(a)g(programming)i(task)-76 976 y(or)d(activit)o(y)h(b)q(ecomes)f
(routine,)g(programmers)h(can)f(use)f(program)-76 1017
y(generators)21 b(to)f(encapsulate)i(their)f(kno)o(wledge)h(of)e(the)g
(routine)-76 1059 y(task.)d(This)d(capture)g(of)e(a)h(problem)h(family)
h(rather)e(than)g(a)g(single)-76 1100 y(problem)j(increases)f
(programmer)g(pro)q(ductivit)o(y)m(.)23 b(Program)15
b(gen-)-76 1142 y(erators)g(let)h(exp)q(erts)f(capture)h(their)f(kno)o
(wledge)i(in)e(a)g(clear)h(\(and)-76 1183 y(hence)f(reusable\))h
(notation)f(that)g(can)f(then)h(b)q(e)f(used)h(for)f(syn)o(the-)-76
1225 y(sising)h(the)e(desired)i(soft)o(w)o(are)d(comp)q(onen)o(t)j
([21,)d(17)q(,)g(18].)-20 1296 y Fk(Reliabilit)o(y)g(and)i(qualit)o(y)l
(.)j Fv(The)c(greatest)g(source)g(of)g(errors)-76 1338
y(in)i(co)q(de)f(main)o(tenance)i(is)f(h)o(uman)f(in)o(terv)o(en)o
(tion.)22 b(When)15 b(less)g(h)o(u-)-76 1380 y(man)i(in)o(terv)o(en)o
(tion)i(is)f(needed)g(to)e(mo)q(dify)i(a)f(soft)o(w)o(are)f(pro)q
(duct,)-76 1421 y(there)h(are)g(prop)q(ortionately)j(few)o(er)c(opp)q
(ortunities)k(for)d(error)g(in-)-76 1463 y(sertion)e(and)f(less)h(rew)o
(ork)f(of)f(co)q(de)h(is)h(necessary)m(.)20 b(Automatically)-76
1504 y(generated)d(comp)q(onen)o(ts)g(require)f(little)i(man)o(ual)e
(rew)o(ork)g(after)f(a)-76 1546 y(re-generation.)-20
1617 y(Our)k(language,)k(MetaML,)c(w)o(as)g(designed)i(as)e(basis)i
(for)e(an)-76 1659 y(in)o(tegrated)d(generator)f(system.)20
b(It)14 b(pro)o(vides)i(an)e(approac)o(h)h(radi-)-76
1700 y(cally)g(di\013eren)o(t)f(from,)f(and)g(sup)q(erior)i(to,)d(the)i
(classic)g(\\programs-)-76 1742 y(as-strings")g(view)f(that)f(seems)h
(to)f(predominate)i(in)g(man)o(y)e(ad-ho)q(c)-76 1783
y(soft)o(w)o(are)i(generation)i(systems.)21 b(MetaML)15
b(is)g(tigh)o(tly)h(in)o(tegrated)-76 1825 y(in)e(this)g(sense.)-76
1921 y Fw(3)41 b(Relationship)11 b(to)j(P)o(a)o(rtial)e(Evaluation)-76
2000 y Fv(T)m(o)q(da)o(y)m(,)g(the)f(most)h(sophisticated)i(automatic)f
(staging)g(tec)o(hniques)-76 2041 y(are)i(found)g(in)g(partial)h(ev)n
(aluation)h(systems)e([15].)21 b(P)o(artial)16 b(ev)n(alu-)-76
2083 y(ation)e(optimizes)h(a)e(program)h(using)g(a)f(priori)h
(information)h(ab)q(out)-76 2124 y(some)g(of)e(that)i(program's)g
(inputs.)21 b(The)15 b(goal)g(is)g(to)f(iden)o(tify)i(and)-76
2166 y(p)q(erform)c(as)f(man)o(y)h(computations)i(as)d(p)q(ossible)j
(in)f(a)e(program)h(b)q(e-)-76 2207 y(fore)h(run-time.)-20
2249 y Fu(O\017ine)d Fv(partial)i(ev)n(aluation)h(has)e(t)o(w)o(o)f
(distinct)i(steps,)f Fu(binding-)-76 2290 y(time)18 b(analysis)e
Fv(\(BT)m(A\))h(and)j Fu(sp)n(e)n(cializa)o(tion)o Fv(.)30
b(BT)m(A)18 b(determines)-76 2332 y(whic)o(h)h(computations)h(can)e(b)q
(e)h(p)q(erformed)f(in)h(an)f(earlier)i(stage)-76 2373
y(giv)o(en)c(the)f(names)g(of)f(inputs)j(a)o(v)n(ailable)g(b)q(efore)e
(run-time)h(\(static)-76 2415 y(inputs\).)-20 2456 y(In)11
b(essence,)g(BT)m(A)f(p)q(erforms)h(automatic)h(staging)h(of)d(the)h
(input)-76 2498 y(program.)31 b(After)17 b(BT)m(A,)f(the)i(actual)h(v)n
(alues)f(of)g(the)f(inputs)i(are)-76 2539 y(made)10 b(a)o(v)n(ailable)i
(to)e(the)f(sp)q(ecializer.)19 b(F)m(ollo)o(wing)12 b(the)d
(annotations,)-76 2581 y(the)15 b(sp)q(ecializer)j(either)e(p)q
(erforms)f(a)g(computation,)i(or)e(pro)q(duces)-76 2622
y(text)e(for)g(inclusion)j(in)e(the)f(output)h(\()p Fu(r)n(esidual)p
Fv(\))c(program.)1076 -34 y(The)17 b(relationship)j(b)q(et)o(w)o(een)d
(partial-ev)n(alua)q(tion)j(and)e(m)o(ulti-)1020 7 y(stage)d
(programming)h(is)g(that)e(the)h(in)o(termediate)h(data)f(structure)
1020 49 y(b)q(et)o(w)o(een)e(the)g(t)o(w)o(o)g(steps)g(is)g(a)g
Fu(two-stage)f(annotate)n(d)e(pr)n(o)n(gr)n(am)i Fv([2],)1020
90 y(and)j(that)g(the)g(sp)q(ecializati)q(on)j(phase)d(is)h(\(the)f
(\014rst)f(stage)i(in\))f(the)1020 132 y(execution)g(of)e(the)g(t)o(w)o
(o-stage)g(annotated)h(program)g(pro)q(duced)h(b)o(y)1020
173 y(BT)m(A.)h(Recen)o(tly)m(,)k(Gl)q(\177)-20 b(uc)o(k)18
b(and)g(J\034rgensen)g(prop)q(osed)h Fu(multi-level)1020
215 y(BT)m(A)9 b Fv(and)h(sho)o(w)o(ed)g(that)g(it)g(is)g(an)g
(e\016cien)o(t)g(alternativ)o(e)h(to)f(m)o(ultiple)1020
256 y(sp)q(ecializati)q(on)17 b([9)o(,)c(10)q(].)18 b(Their)c
(underlying)i(annotated)f(language)1020 298 y(is)f(closely)h(related)f
(to)f(MetaML.)1020 396 y Fw(4)41 b(Why)13 b(Explicit)f(Annotations?)
1020 474 y Fv(If)19 b(BT)m(A)h(p)q(erforms)g(staging)i(automatically)m
(,)i(wh)o(y)c(should)i(pro-)1020 516 y(grammers)16 b(stage)g(programs)g
(man)o(ually?)28 b(They)16 b(shouldn't)h Fu(have)1020
557 y Fv(to,)f(but)g(there)g(are)g(sev)o(eral)h(imp)q(ortan)o(t)g
(reasons)g(wh)o(y)f(they)g(ma)o(y)1020 599 y Fu(want)c
Fv(to:)1076 640 y Fk(Pragmatic.)28 b Fv(While)18 b(there)f(are)f(adv)n
(an)o(tages)i(to)e(discussing)1020 682 y(the)d(seman)o(tics)i(of)e
(annotated)i(programs)f(and)g(the)f(tec)o(hniques)i(of)1020
723 y(BT)m(A)g(at)g(the)h(same)g(time,)g(w)o(e)f(feel)h(that)f(the)h
(complexit)o(y)i(of)d(the)1020 765 y(seman)o(tics)d(of)e(annotated)i
(programs)f(w)o(arran)o(ts)g(studying)i(them)d(in)1020
806 y(\(relativ)o(e\))15 b(isolation)g(of)e(other)g(partial)i(ev)n
(aluation)h(issues.)1076 878 y Fk(P)o(edagogical)11 b(to)q(ol.)17
b Fv(It)10 b(has)h(b)q(een)g(observ)o(ed)g(that)g(it)g(is)g(some-)1020
919 y(times)16 b(hard)g(for)f(users)g(to)h(understand)h(the)e(w)o
(orkings)h(of)f(partial)1020 961 y(ev)n(aluation)f(systems)d([14].)16
b(New)10 b(users)i(often)f(lac)o(k)g(a)g(go)q(o)q(d)h(men)o(tal)1020
1002 y(mo)q(del)19 b(of)e(ho)o(w)h(partial)h(ev)n(aluation)i(systems)d
(w)o(ork.)31 b(Although)1020 1044 y(BT)m(A)13 b(is)g(an)h(in)o(v)o(olv)
o(ed)h(pro)q(cess,)f(requiring)h(sp)q(ecial)h(exp)q(ertise,)e(the)1020
1085 y(annotations)21 b(it)d(pro)q(duces)i(are)e(relativ)o(ely)j
(simple)f(and)f(easy)g(to)1020 1127 y(understand.)g(Ho)o(w)o(ev)o(er,)
12 b(new)g(users)h(are)g(often)g(uncertain:)18 b(What)1020
1168 y(is)c(the)g(output)g(of)f(a)h(binding-time)i(analysis?)22
b(What)14 b(are)f(the)h(an-)1020 1210 y(notations?)27
b(Ho)o(w)15 b(are)h(they)g(expressed?)27 b(What)16 b(do)g(they)g
(really)1020 1251 y(mean?)31 b(The)18 b(answ)o(ers)f(to)h(these)g
(questions)h(are)e(crucial)j(to)d(the)1020 1293 y(e\013ectiv)o(e)g(use)
e(of)g(partial)i(ev)n(aluation.)26 b(Our)16 b(observ)n(ation)h(is)f
(that)1020 1334 y(programmers)c(can)f(understand)h(the)f(annotated)h
(output)g(of)e(BT)m(A,)1020 1376 y(without)17 b(actually)g(kno)o(wing)h
(ho)o(w)d(BT)m(A)g(w)o(orks.)25 b(Ha)o(ving)17 b(a)f(pro-)1020
1417 y(gramming)d(language)g(with)f(explicit)i(staging)f(annotations)h
(w)o(ould)1020 1459 y(help)i(users)g(of)f(partial)i(ev)n(aluation)g
(understand)g(more)f(of)e(the)i(is-)1020 1500 y(sues)d(in)o(v)o(olv)o
(ed)i(in)e(staged)g(computation,)h(and,)f(hop)q(efully)m(,)h(reduce)
1020 1542 y(the)h(steep)g(learning)i(curv)o(e)f(curren)o(tly)g(asso)q
(ciated)h(with)e(learning)1020 1583 y(to)h(use)h(a)f(partial)i(ev)n
(aluator)f(e\013ectiv)o(ely)i([15].)26 b(Nielson)18 b(&)d(Niel-)1020
1625 y(son's)9 b(t)o(w)o(o-stage)h(notation)g(is)g(the)f(only)i(widely)
f(accepted)h(notation)1020 1666 y(for)g(expressing)j(staged)e
(computation.)18 b(But)12 b(Nielson)h(&)f(Nielson's)1020
1708 y(notation)17 b(is)e(not)g(widely)i(view)o(ed)f(as)f(a)g
(programming)h(language,)1020 1749 y(p)q(erhaps)d(b)q(ecause)f(o)o(v)o
(er-bars)h(and)f(under-bars)h(do)f(not)f(app)q(ear)i(on)1020
1791 y(the)19 b(standard)g(k)o(eyb)q(oard)h(and)f(no)g(implemen)o
(tation)i(of)e(it)f(is)h(in)1020 1832 y(widespread)c(use.)1076
1904 y Fk(Con)o(trolling)21 b(Ev)n(aluation)i(Order.)41
b Fv(Whenev)o(er)22 b(p)q(erfor-)1020 1945 y(mance)17
b(is)h(an)f(issue,)h(con)o(trol)g(of)f(ev)n(aluation)i(order)e(is)g
(essen)o(tial.)1020 1987 y(BT)m(A)h(optimizes)j(the)e(ev)n(aluation)j
(order,)f(but)e(sometimes)h(it)g(is)1020 2028 y(just)d(easier)h(to)f
(sa)o(y)h(what)f(y)o(ou)g(w)o(an)o(t)g(than)h(to)f(force)g(a)g(BT)m(A)f
(to)1020 2070 y(disco)o(v)o(er)d(it.)k(Automatic)c(analyses)g(lik)o(e)g
(BT)m(A)f(are)f(necessarily)k(in-)1020 2111 y(complete,)i(and)g(can)f
(only)h(appro)o(ximate)h(the)e(kno)o(wledge)h(of)f(the)1020
2153 y(programmer.)h(By)11 b(using)h(explicit)h(annotations)g(the)d
(programmer)1020 2195 y(can)j(exploit)i(his)f(full)h(kno)o(wledge)f(of)
f(the)g(program)h(domain.)1076 2236 y(In)9 b(addition,)j(BT)m(A)c(for)g
(programs)i(with)f(more)g(than)g(t)o(w)o(o)g(stages)1020
2278 y(is)16 b(still)i(imprecise.)26 b(Hand)17 b(annotation)g(ma)o(y)f
(b)q(e)g(the)g(only)h(feasi-)1020 2319 y(ble)g(mec)o(hanism)g(for)f
(staging)h(m)o(ulti-stage)h(programs,)f(and)g(ma)o(y)1020
2361 y(b)q(e)d(the)g(only)h(mec)o(hanism)h(expressiv)o(e)f(enough)g
(for)f(the)g(degree)g(of)1020 2402 y(con)o(trol)g(needed)g(in)g(man)o
(y)g(circumstances.)1076 2474 y Fk(High-Lev)o(el)k(Program)j
(Generation.)30 b Fv(As)17 b(w)o(e)g(will)i(also)1020
2515 y(illustrate)f(in)e(this)h(pap)q(er,)g(staging)g(annotations)g
(also)g(pro)o(vide)g(a)1020 2557 y(p)q(o)o(w)o(erful)12
b(to)q(ol)h(for)e(high-lev)o(el)k(program)d(generation.)18
b(No)12 b(explicit)1020 2598 y(construction)21 b(of)d(parse)h(trees)f
(is)i(needed.)34 b(As)18 b(a)h(consequence,)p eop
%%Page: 3 3
3 2 bop -76 -34 a Fv(generators)12 b(can)g(b)q(e)f(simpler)i(and)f
(more)f(reliable)j(than)d(their)h(hand)-76 7 y(constructed)j(coun)o
(terparts.)k(It)12 b(is)i(also)h(easier)f(to)f(v)o(erify)h(the)f(cor-)
-76 49 y(rectness)g(of)g(b)q(oth)g(the)g(generators)h(and)f(the)g
(programs)h(they)f(gen-)-76 90 y(erate,)h(as)h(the)f(issues)h(of)f
(represen)o(tation)i(are)e(hidden)i(a)o(w)o(a)o(y)e(from)-76
132 y(the)f(programmer.)-76 230 y Fw(5)41 b(MetaML's)12
b(Multi-Stage)g(Programming)g(Annotations)-76 308 y Fv(The)e(t)o(w)o
(o-lev)o(el)g(notation)i(of)d(Nielson)i(&)e(Nielson)j([25])d(features)h
(t)o(w)o(o)-76 350 y(annotations:)31 b Fu(over-b)n(ars)16
b Fv(to)j(mark)g(computations)i(of)d(the)h(\014rst)-76
391 y(stage,)g(and)g Fu(under-b)n(ars)c Fv(to)j(mark)h(those)f(of)g
(the)g(second)h(stage.)-76 433 y(Although)h(quite)f(p)q(o)o(w)o(erful,)
h(this)f(is)g(only)g(a)f(subset)h(of)f(the)g(an-)-76
474 y(notations)i(needed)f(for)f(pragmatic)h(m)o(ulti-stage)h
(programming.)-76 516 y(MetaML)14 b(has)f(four)g(programming)i
(constructs:)-20 595 y Fp(\017)k Fv(Meta-Brac)o(k)o(ets)12
b(\()p Fo(<)p 309 595 12 2 v 18 w(>)p Fv(\))g(are)g(the)g(primary)i
(means)e(for)g(dela)o(y-)18 637 y(ing)i(a)g(computation.)22
b(F)m(or)13 b(example,)j(whereas)e(the)g(expres-)18 678
y(sion)19 b Fo(40+2)d Fv(sp)q(eci\014es)k(a)e(curren)o(t)g(\(or)g
(\014rst\))g(stage)h(compu-)18 720 y(tation,)f Fo(<40+2>)c
Fv(sp)q(eci\014es)k(one)f(for)g(the)g(next)g(\(or)f(second\))18
761 y(stage.)h(A)12 b(binary)j(t)o(yp)q(e)e(constructor)h
Fo(<)p 624 761 V 53 w(,)p 697 761 V 53 w(>)e Fv(is)i(used)f(to)18
803 y(distinguish)18 b(the)c(t)o(yp)q(e)h(of)f(the)h(latter)g
(expression)i(from)d(the)18 844 y(\014rst)i(one.)27 b(F)m(or)16
b(example,)j Fo(7)c Fv(has)i(t)o(yp)q(e)g Fo(int)p Fv(,)e(but)i
Fo(<7>)e Fv(has)18 886 y(t)o(yp)q(e)g Fo(<int,'a>)p Fv(,)d(where)j
(\(as)g(is)h(in)f(ML\))g Fo('a)f Fv(is)i(a)f(free)g(t)o(yp)q(e)18
927 y(v)n(ariable.)k(The)13 b(expression)i Fo(<<\(1,<2+)o(1>\))o(>>)9
b Fv(has)14 b(t)o(yp)q(e:)18 969 y Fo(<<\(int)j(*)i(<int,'c>\),)o('b)o
(>,')o(a>)d Fv(and)21 b(the)f(addition)j(will)18 1010
y(b)q(e)18 b(p)q(erformed)g(in)h(the)f(fourth)h(stage.)32
b(The)18 b(second)h(t)o(yp)q(e)18 1052 y(in)f(the)f(co)q(de)h(t)o(yp)q
(e)f(constructor)h(represen)o(ts)h(the)e(name)g(of)18
1093 y(the)12 b(con)o(text)h(in)g(whic)o(h)h(this)f(co)q(de)g(can)g
(execute.)k(In)c(the)f(ex-)18 1135 y(amples)h(ab)q(o)o(v)o(e)g(the)g
(con)o(text)g(is)g(completely)h(unconstrained)18 1176
y(hence)i(the)f(t)o(yp)q(e)h(v)n(ariables.)27 b(More)16
b(ab)q(out)g(this)h(in)f(section)18 1218 y(10.)-20 1289
y Fp(\017)j Fv(Escap)q(e)9 b(\()q Fo(~)p 177 1289 V 14
w Fv(\))g(can)g(o)q(ccur)g(only)h(inside)h(enclosing)g(meta-brac)o(k)o
(ets.)18 1331 y(It)d(is)i(the)g(mec)o(hanism)g(used)g(to)f(insert)i
(smaller)g(dela)o(y)o(ed)f(com-)18 1372 y(putations)j(in)o(to)e(larger)
i(ones.)j(Escap)q(e)c(allo)o(ws)h(its)e(argumen)o(t)18
1414 y(to)f(escap)q(e)h(the)f(\\freeze")g(imp)q(osed)i(b)o(y)e(a)h
(surrounding)h(meta-)18 1455 y(brac)o(k)o(et)f(and)g(to)g(\\splice")i
(its)e(result)h(in)o(to)f(the)g(dela)o(y)o(ed)h(com-)18
1497 y(putation)i(b)q(eing)h(built.)j(F)m(or)13 b(example:)176
1576 y Fo(let)19 b(val)f(a=<1+4>)f(in)i(<72+)q(~)-6 b(a>)19
b(end)18 1655 y Fv(returns)12 b(the)g(expression)i Fo(<72+\(1+4)o(\)>)m
Fv(.)i(The)c(escap)q(ed)g(com-)18 1696 y(putation)17
b(m)o(ust)e(yield)i(a)e(piece)i(of)e(co)q(de)g(with)h(a)f(t)o(yp)q(e)h
(that)18 1738 y(can)h(b)q(e)g(inserted)i(in)e(the)h(con)o(text)f(where)
g(the)g(escap)q(e)h(ap-)18 1779 y(p)q(ears.)k(The)14
b(t)o(yp)q(e)h(system)g(ensures)g(that)g(this)g(is)h(the)e(case.)18
1821 y(F)m(or)c(example,)i(if)e Fo(x)g Fv(has)h(t)o(yp)q(e)f
Fo(<int,'a>)p Fv(,)e(then)i Fo(<\(x,1\))n(>)g Fv(has)18
1862 y(t)o(yp)q(e)15 b Fo(<\(<int,')o(a>)h(*)k(int\),'b>)11
b Fv(and)k Fo(<\()q(~)-5 b(x,1\))o(>)14 b Fv(has)h(t)o(yp)q(e)18
1904 y Fo(<\(int)i(*)i(int\),'a>)p Fv(.)13 b(Ob)r(jects)d(of)g(t)o(yp)q
(e)g(co)q(de)g(are)g(\014rst)g(class)18 1945 y(citizens,)k(and)g(can)f
(ev)o(en)h(b)q(e)f Fq(\025)p Fv(-abstracted.)18 b(F)m(or)13
b(example:)142 2024 y Fo(val)19 b(add)p 283 2024 V 13
w(72)p 336 2024 V 13 w(later)f(=)h(fn)g(a)g(=>)g(<72+)q(~)-6
b(a>)18 2103 y Fv(declares)16 b(a)g(\014rst)f(class)h(function)h(with)f
(t)o(yp)q(e)g Fo(<int,'a>)g(->)18 2144 y(<int,'a>)o Fv(,)j(and)h(the)g
(expression)i Fo(add)p 615 2144 V 13 w(72)p 668 2144
V 13 w(later)c(<8>)h Fv(re-)18 2186 y(turns)d Fo(<72+8>)m
Fv(.)25 b(F)m(rom)15 b(the)h(language)i(designer's)f(p)q(oin)o(t)f(of)
18 2228 y(view,)h(escap)q(e)g(p)q(oses)g(a)g(v)o(ery)g(in)o(teresting)h
(tec)o(hnical)h(prob-)18 2269 y(lem,)14 b(as)g(not)g(all)i(uses)e(of)g
(escap)q(e)g(are)h(reasonable.)21 b(W)m(e)14 b(dis-)18
2311 y(cuss)f(this)h(issue)g(in)g(Section)g(10.1.)-20
2382 y Fp(\017)19 b Fv(Run)f(\()p Fo(run)p 192 2382 V
27 w Fv(\))f(tak)o(es)h(a)f(co)q(de-v)n(alued)j(argumen)o(t)e(and)g
(runs)18 2423 y(it.)29 b(It)17 b(is)g(the)h(only)g(w)o(a)o(y)f(a)g
(computation)i(\\frozen")f(using)18 2465 y(meta-brac)o(k)o(ets)f(can)h
(b)q(e)f(computed)h(\(or)g(\\forced"\))f(in)h(the)18
2506 y(curren)o(t)d(stage.)24 b(The)15 b(argumen)o(t)g(to)g
Fo(run)f Fv(m)o(ust)h(b)q(e)h(of)e Fq(code)18 2548 y
Fv(t)o(yp)q(e.)19 b(Ha)o(ving)14 b Fo(run)f Fv(in)h(the)g(language)h
(implies)h(in)o(tro)q(ducing)1113 -34 y(a)11 b(kind)g(of)g
(re\015ection)g([30],)f(and)h(allo)o(ws)h(a)e(future-stage)h(com-)1113
7 y(putation)k(to)f(b)q(e)f(p)q(erformed)h(no)o(w.)k(T)m(o)13
b(illustrate,)i(consider)1113 49 y(the)f(expression:)1212
118 y Fo(let)k(val)h(a)g(=)g(<50-10>)e(in)i(2+\(run)e(a\))i(end)1113
187 y Fv(This)14 b(expression)h(has)f(t)o(yp)q(e)g Fq(int)f
Fv(and)h(returns)f(the)h(v)n(alue)g(42)1113 229 y(when)j(computed.)28
b(Although)17 b(run)g(is)g(not)f(an)h(annotation)1113
270 y(used)c(in)g(the)g(result)g(of)f(BT)m(A,)f(it)i(is)f(an)h(essen)o
(tial)h(feature)e(for)1113 312 y(a)h(programmer)g(who)g(w)o(an)o(ts)f
(to)h(use)f(m)o(ulti-stage)j(program-)1113 353 y(ming)f(to)f(con)o
(trol)i(ev)n(aluation)g(order)f(.)1076 420 y Fp(\017)k
Fv(Lift)i(\()p Fo(lift)p 1300 420 V 27 w Fv(\))f(allo)o(ws)h(the)f
(user)h(to)f(con)o(v)o(ert)h(an)o(y)f Fu(gr)n(ound)1113
462 y Fv(v)n(alue)d(\(not)e(con)o(taining)i(a)e(function\))i(in)o(to)f
(co)q(de.)20 b(Con)o(trast)1113 503 y(this)c(with)g(meta-brac)o(k)o
(ets)g(whic)o(h)g(con)o(v)o(erts)g(an)o(y)f Fu(syntactic)1113
545 y(expr)n(ession)e Fv(in)o(to)j(a)f(piece)i(of)e(co)q(de.)24
b(Lift)16 b(ev)n(aluates)g(its)g(ar-)1113 586 y(gumen)o(ts,)d(and)f
(meta-brac)o(k)o(ets)g(do)g(not.)17 b(Lift)12 b(is)g(most)g(often)1113
628 y(used)f(in)g(conjunction)g(with)g(escap)q(e,)f(b)q(ecause)h(only)g
(pieces)g(of)1113 669 y(co)q(de)k(can)f(b)q(e)g(\\spliced-in".)22
b(F)m(or)14 b(example,)h(in)g(the)f(expres-)1113 711
y(sion)f Fo(<1+)q(~)-5 b(\(lift)8 b(2+3)o(\)>)o Fv(,)j(the)g(escap)q(e)
h(forces)f Fo(lift)e(\(2+3\))g Fv(to)1113 752 y(b)q(e)18
b(computed)g(in)g(the)f(\014rst)g(stage.)30 b(The)17
b(addition)i(ev)n(alu-)1113 794 y(ates)e(to)f(the)h(v)n(alue)h(5,)f
(and)g(lift)g(con)o(v)o(erts)g(this)h(result)f(in)o(to)1113
835 y(the)j(piece)h(of)f(co)q(de)g Fo(<5>)o Fv(,)h(whic)o(h)g(is)g
(spliced)g(\(b)q(ecause)g(of)1113 877 y(the)13 b(escap)q(e\))f(bac)o(k)
h(in)o(to)g(the)f(original)j(expression)f(to)e(return)1113
918 y Fo(<1+5>)o Fv(.)21 b(Lift)15 b(can)g(b)q(e)g(used)g(on)g
(structured)h(v)n(alues)g(suc)o(h)f(as)1113 960 y(tuples)j(and)e(lists)
i(as)e(long)h(as)f(they)h(do)f(not)h(con)o(tain)g(func-)1113
1001 y(tions.)h(F)m(or)12 b(example)33 b Fo(lift)18 b([\(2,3\),\(2*1)o
(,4)o(\)])9 b Fv(ev)n(aluates)1113 1043 y(to)j Fo(<[\(2,3\),\(2,)o(4\))
o(]>)p Fv(.)h(F)m(unction)g(v)n(alues)h(cannot)f(b)q(e)f(lifted)1113
1084 y(using)i(lift,)e(as)g(w)o(e)f(cannot)i(deriv)o(e)f(an)g(in)o
(tensional)j(represen-)1113 1126 y(tation)i(for)f(them)g(in)h(general)g
(\(This)f(do)q(es)h(not)f(mean)g(that)1113 1167 y(function)11
b(v)n(alues)g(cannot)f(b)q(e)f(dela)o(y)o(ed)i(using)g(meta-brac)o(k)o
(ets.)1113 1209 y(See)j(Section)g(7.\))1020 1301 y Fw(Precedence)f
(Issues.)38 b Fv(The)11 b(escap)q(e)h(op)q(erator)f(\()q
Fo(~)p 1759 1301 V 15 w Fv(\))f(has)i(the)f(high-)1020
1342 y(est)i(precedence;)g(ev)o(en)h(higher)g(than)f(function)h
(application)q(.)19 b(This)1020 1384 y(allo)o(ws)d(us)e(to)g(write:)20
b Fo(<f)f(~)m(x)g(y>)13 b Fv(rather)i(than)f Fo(<f)19
b(\()q(~)l(x)o(\))h(y>)p Fv(.)f(The)1020 1426 y(lift)10
b(\()p Fo(lift)p 1184 1426 V 28 w Fv(\))f(and)h(run)g(\()p
Fo(run)p 1449 1426 V 28 w Fv(\))g(op)q(erators)g(ha)o(v)o(e)g(the)g(lo)
o(w)o(est)g(prece-)1020 1467 y(dence.)18 b(The)13 b(scop)q(e)g(of)g
(these)g(op)q(erators)h(extends)g(to)f(the)g(righ)o(t)h(as)1020
1509 y(far)9 b(as)f(p)q(ossible.)18 b(This)10 b(mak)o(es)f(it)g(p)q
(ossible)i(to)e(write)g Fo(<f)20 b(~)l(\(lift)d(g)j(y\))1020
1550 y(z>)12 b Fv(rather)h(than)h Fo(<f)20 b(~)l(\(lift)e(\(g)g(y\)\))h
(z>)p Fv(.)1020 1646 y Fw(6)41 b(Hand-Staging:)15 b(A)g(Sho)o(rt)d
(Example)1020 1725 y Fv(Using)18 b(MetaML,)f(the)g(programer)h(can)f
(stage)g(programs)h(b)o(y)g(in-)1020 1766 y(serting)i(the)f(prop)q(er)h
(annotations)i(at)d(the)g(righ)o(t)h(places)g(in)g(the)1020
1808 y(program.)h(The)13 b(programmer)i(uses)g(these)f(annotations)i
(to)e(mo)q(d-)1020 1849 y(ify)g(the)f(default)h(\(strict\))f(ev)n
(aluation)j(order)d(of)g(the)g(program.)1076 1891 y(In)f(our)h(exp)q
(erience,)h(starting)g(with)f(the)f(t)o(yp)q(e)h(of)f(the)h(function)
1020 1932 y(to)k(b)q(e)h(hand-staged)h(mak)o(es)f(the)g(n)o(um)o(b)q
(er)g(of)f(di\013eren)o(t)i(w)o(a)o(ys)e(in)1020 1974
y(whic)o(h)h(it)g(can)g(b)q(e)g(annotated)h(quite)f(tractable.)32
b(This)18 b(leads)h(us)1020 2015 y(to)c(b)q(eliev)o(e)j(that)d(the)h
(lo)q(cation)h(of)f(the)f(annotations)j(in)e(a)f(staged)1020
2057 y(v)o(ersion)e(of)f(a)f(program)i(is)f(signi\014can)o(tly)j
(constrained)f(b)o(y)e(its)g(t)o(yp)q(e.)1020 2098 y(F)m(or)h(example,)
h(consider)h(the)e(function)h Fo(member)d Fv(de\014ned)j(as:)1020
2167 y Fo(\(*)19 b(member)e(:)i(int)g(->)g(int)f(list)g(->)h(bool)f
(*\))1020 2209 y(fun)h(member)e(v)i(l)g(=)1020 2250 y(if)g(\(null)f
(l\))1079 2292 y(then)g(false)1079 2333 y(else)g(if)h(v=\(hd)e(l\))1177
2375 y(then)h(true)1177 2416 y(else)g(member)f(v)j(\(tl)e(l\);)1076
2485 y Fv(The)9 b(function)h Fo(member)c Fv(has)j(t)o(yp)q(e)g
Fo(int)19 b(->)g(List)f(int)g(->)h(bool)1020 2511 y Fn(2)1037
2527 y Fv(.)d(A)11 b(go)q(o)q(d)h(strategy)g(for)f(hand)h(annotating)h
(a)e(program)h(is)g(to)f(\014rst)p 1020 2552 399 2 v
1063 2577 a Fm(2)1080 2589 y Fs(F)m(unction)i(\\)p Fj(=)p
Fs(")e(has)h(t)o(yp)q(e)g Fj(\(int)17 b(*)f(int\))h(->)g(bool)c
Fs(whic)o(h)g(forces)e Fj(v)h Fs(and)g Fj(l)1020 2622
y Fs(to)f(ha)o(v)o(e)g(t)o(yp)q(es)h Fj(int)h Fs(and)e
Fj(List)17 b(int)p Fs(,)c(resp)q(ectiv)o(ely)m(.)p eop
%%Page: 4 4
4 3 bop -76 -34 a Fv(determine)12 b(the)e(target)h(t)o(yp)q(e)f(of)g
(the)h(desired)g(annotated)h(program.)-76 7 y(In)j(the)f
Fo(member)e Fv(example,)k(the)f(list)h(parameter)f Fo(l)f
Fv(is)h(a)o(v)n(ailable)i(in)-76 49 y(the)f(\014rst)h(stage,)f(and)h
(the)f(elemen)o(t)h(searc)o(hed)g(for)f(will)i(b)q(e)e(a)o(v)n(ail-)-76
90 y(able)e(later.)k(So,)12 b(one)i(target)f(t)o(yp)q(e)g(for)f(the)h
(hand-staged)i(function)-76 132 y(is)f Fo(<int,'a>)i(->)j(List)f(int)h
(->)f(<bool,'a>)f Fv(.)-20 173 y(No)o(w)f(w)o(e)f(can)i(b)q(egin)g
(annotating,)i(starting)e(with)f(the)g(whole)-76 215
y(expression,)c(and)e(w)o(orking)g(in)o(w)o(ards)g(un)o(til)h(all)f
(sub-expressions)i(are)-76 256 y(co)o(v)o(ered.)29 b(A)o(t)16
b(eac)o(h)i(step,)f(w)o(e)f(consider)j(what)e(annotations)i(will)-76
298 y(\\\014x")c(the)g(t)o(yp)q(e)f(of)g(the)h(expression)h(so)f(that)f
(the)h(whole)g(function)-76 339 y(has)f(a)f(t)o(yp)q(e)g(closer)h(to)f
(the)g(target)g(t)o(yp)q(e.)-20 381 y(The)g(follo)o(wing)i(function)g
(realizes)f(this)g(t)o(yp)q(e:)-76 444 y Fo(\(*)19 b(member)e(:)j
(<int,'a>)c(->)j(int)f(list)g(->)h(<bool,'a>)d(*\))-76
485 y(fun)j(member)e(v)i(l)g(=)-17 527 y(if)g(\(null)f(l\))42
568 y(then)g(<false>)42 610 y(else)g(<if)g(~v=~\(lift)f(hd)h(l\))218
651 y(then)g(true)218 693 y(else)g(~\(member)f(v)i(\(tl)g(l\)\)>;)-76
755 y Fv(The)d(annotation)j Fo(~)l(\(lift)f(hd)h(l\))14
b Fv(is)j(used)g(rather)f(than)g Fo(hd)j(l)c Fv(in)-76
797 y(order)f(to)g(ensure)h(that)f Fo(hd)f Fv(is)h(p)q(erformed)h
(during)g(the)f(\014rst)g(stage.)-76 838 y(Otherwise,)c(all)h
(selections)g(of)e(the)h(head)f(elemen)o(t)i(of)d(the)i(list)g(w)o
(ould)-76 880 y(ha)o(v)o(e)15 b(b)q(een)h(dela)o(y)o(ed)g(un)o(til)h
(the)e(co)q(de)g(constructed)h(w)o(as)e Fo(run)g Fv(in)h(a)-76
922 y(later)f(stage.)-20 963 y(The)c(meta-brac)o(k)o(ets)h(around)h
(the)e(branc)o(hes)h(of)f(the)h(outermost)-76 1005 y
Fo(if)o Fv(-expression)j(ensure)e(that)g(the)g(return)g(v)n(alue)h(of)e
Fo(member)e Fv(will)k(b)q(e)-76 1046 y(a)19 b(co)q(de)g(t)o(yp)q(e)g
(\()p Fo(<?,?>)p Fv(\).)32 b(The)18 b(\014rst)h(branc)o(h)h(\()p
Fo(false)n Fv(\))e(needs)i(no)-76 1088 y(further)13 b(annotations,)i
(and)e(mak)o(es)g(the)g(return)g(v)n(alue)h(precisely)h(a)-76
1129 y Fo(<bool,'a>)p Fv(.)d(Mo)o(ving)e(in)o(w)o(ards)g(in)g(the)f
(else)g(branc)o(h,)i(the)e(condition)-76 1171 y(of)k(the)g(inner)i
Fo(if)o Fv(-expression)g(\(in)f(particular)i Fo(~)m(v)o
Fv(\))d(forces)g(the)h(t)o(yp)q(e)-76 1212 y(of)f(the)g
Fo(v)f Fv(parameter)i(to)f(ha)o(v)o(e)h(t)o(yp)q(e)f
Fo(<int,'a>)d Fv(as)j(planned.)-20 1254 y(Just)h(lik)o(e)h(the)g
(\014rst)f(branc)o(h)h(of)e(the)i(outer)f Fo(if)o Fv(-statemen)o(t,)g
(the)-76 1295 y(whole)h(of)f(the)g(inner)i Fo(if)o Fv(-statemen)o(t)e
(m)o(ust)g(return)h Fo(bool)p Fv(.)k(So,)14 b(the)-76
1337 y(\014rst)j(branc)o(h)h(\()p Fo(true)n Fv(\))f(is)g(\014ne.)28
b(But)17 b(b)q(ecause)h(the)f(recursiv)o(e)h(call)-76
1378 y(to)i Fo(member)d Fv(has)j(t)o(yp)q(e)f Fo(<bool,'a>)p
Fv(,)f(it)h(m)o(ust)h(b)q(e)g(escap)q(ed.)37 b(In-)-76
1420 y(serting)19 b(this)f(escap)q(e)h(also)f(implies)i(that)e(the)g
(recursion)h(will)g(b)q(e)-76 1461 y(p)q(erformed)12
b(in)g(the)g(\014rst)f(stage,)h(whic)o(h)g(is)g(exactly)h(the)e
(desired)i(b)q(e-)-76 1503 y(ha)o(vior.)22 b(Th)o(us,)15
b(the)f(result)h(of)f(the)g(staged)h Fo(member)d Fv(function)j(is)g(a)
-76 1544 y(recursiv)o(ely-constru)q(cted)h(piece)e(of)e(co)q(de)i(with)
f(t)o(yp)q(e)h Fo(bool)p Fv(.)-20 1586 y(Ev)n(aluating)i
Fo(<)o(fn)j(x)g(=>)h(~)l(\(member)d(<x>)i([1,2,3]\))m(>)12
b Fv(yields:)-76 1644 y Fo(<fn)19 b(d1)f(=>)3 1685 y(if)g(d1)h(\045=)g
(1)61 1727 y(then)g(true)61 1768 y(else)g(if)f(d1)h(\045=)g(2)218
1810 y(then)f(true)218 1851 y(else)g(if)h(d1)g(\045=)g(3)375
1893 y(then)f(true)375 1934 y(else)g(false>)-20 1992
y Fv(The)12 b(p)q(ercen)o(tage)i(sign)f(\()p Fo(\045)p
Fv(\))f(at)g(the)g(b)q(eginning)j(of)d(an)h(iden)o(ti\014er)-76
2034 y(indicates)18 b(that)e(it)f(w)o(as)h(b)q(ound)h(to)e(a)h(v)n
(alue)g(in)h(the)e(en)o(vironmen)o(t)-76 2075 y(in)e(whic)o(h)h(the)e
(co)q(de)h(w)o(as)f(constructed.)18 b(Its)12 b(precise)i(meaning)g
(will)-76 2117 y(b)q(e)f(explained)j(in)e(Sections)h(7)e(and)g(10.2.)
-76 2212 y Fw(7)41 b(The)14 b(Design)e(of)h(MetaML)-76
2290 y Fv(MetaML)19 b(w)o(as)f(designed)i(as)e(a)h(statically-t)o(yp)q
(ed)i(programming)-76 2332 y(language,)15 b(and)e(not)g(as)g(an)g(in)o
(ternal)h(represen)o(tation)h(for)d(a)h(m)o(ulti-)-76
2373 y(stage)k(system.)27 b(Our)17 b(primary)g(goals)h(w)o(ere:)23
b(\014rst,)17 b(it)g(should)h(b)q(e)-76 2415 y(easy)13
b(to)f(write)h(m)o(ulti-staged)i(programs,)e(second)g(it)g(should)h(b)q
(e)f(as)-76 2456 y(\015exible)e(as)f(p)q(ossible,)i(and)d(third)h(it)g
(should)h(ensure)f(that)f(only)h(\\rea-)-76 2498 y(sonable)16
b(things")f(can)g(b)q(e)f(done)g(using)i(the)e(annotations.)21
b(There-)-76 2539 y(fore,)14 b(our)g(design)i(c)o(hoices)f(where)f
(di\013eren)o(t)i(from)e(those)g(of)g(other)-76 2581
y(m)o(ulti-stage)e(systems.)k(In)10 b(particular,)j(w)o(e)c(consider)j
(the)e(follo)o(wing)-76 2622 y(qualit)o(y)15 b(crucial)g(to)e(MetaML:)
1020 -34 y Fw(Cross-stage)7 b(P)o(ersistence:)40 b Fu(A)9
b(variable)f Fq(i)i Fu(b)n(ound)e(in)h(stage)f Fq(n)p
Fu(,)j(wil)r(l)1020 7 y(b)n(e)i(available)e(in)i(stages)f
Fq(n)p Fu(,)h Fq(n)c Fv(+)f(1)14 b Fu(and)f(al)r(l)g(futur)n(e)f
(stages)p Fv(.)1076 90 y(T)m(o)d(the)g(user,)i(this)f(means)g(the)f
(abilit)o(y)j(to)d(stage)h(non-closed)h(ex-)1020 132
y(pressions.)25 b(Non-closed)17 b(expressions,)h(lik)o(e)e
Fq(\025)p Fv(-abstractions)i(with)1020 173 y(free)f(v)n(ariables,)i(m)o
(ust)e(resolv)o(e)i(their)e(free)g(v)n(ariable)i(o)q(ccurrences)1020
215 y(in)13 b(the)f(static)h(en)o(vironmen)o(t)h(where)e(the)h
(meta-brac)o(k)o(eted)g(expres-)1020 256 y(sion)h(o)q(ccurs.)j(One)12
b(can)h(think)h(of)e(a)g(co)q(de)h(v)n(alue)g(as)g(con)o(taining)i(an)
1020 298 y(en)o(vironmen)o(t)e(whic)o(h)g(binds)g(its)f(free)f(v)n
(ariables.)19 b(F)m(or)11 b(example)i(the)1020 339 y(expression,)1253
418 y Fo(let)19 b(val)f(a=1+4)g(in)h(<72+a>)e(end)1020
497 y Fv(returns)c(a)f(v)n(alue)i Fo(<72+\045a>)m Fv(.)j(The)12
b(\045)g(sign)i(indicates)g(that)f(the)f(free)1020 539
y(v)n(ariable)i Fo(a)d Fv(is)i(b)q(ound)g(in)g(the)f(v)n(alue's)h(lo)q
(cal)g(en)o(vironmen)o(t.)19 b(The)11 b(\045)1020 580
y(sign)g(is)g(prin)o(ted)g(b)o(y)f(the)h(displa)o(y)h(mec)o(hanism.)17
b(The)10 b(v)n(ariable)i Fo(a)e Fv(has)1020 622 y(b)q(een)i(b)q(ound)h
(during)h(the)d(\014rst)h(stage)g(to)g(the)f(constan)o(t)i(5.)j(In)c
(fact,)1020 663 y(in)h(MetaML)f Fo(\045a)f Fv(is)i(not)g(a)f(v)n
(ariable,)i(but)e(rather,)g(a)g(new)g Fu(c)n(onstant)p
Fv(,)1020 705 y(and)i(the)f(name)h(\\)p Fo(a)p Fv(")f(is)g(only)i(hin)o
(t)f(to)f(the)g(user)h(ab)q(out)g(where)f(this)1020 746
y(constan)o(t)i(originated.)21 b(When)15 b Fo(\045a)e
Fv(is)h(ev)n(aluated)h(in)g(a)f(later)g(stage,)1020 788
y(it)h(will)h(return)f(5)f(indep)q(enden)o(t)j(of)d(the)g(binding)j
(for)e(the)f(v)n(ariable)1020 829 y Fo(a)h Fv(in)i(the)f(new)g(con)o
(text)g(since)h(it)f(is)h(b)q(ound)g(in)g(the)f(v)n(alue's)g(lo)q(cal)
1020 871 y(en)o(vironmen)o(t.)j(Arbitrary)c(v)n(alues)f(\(including)j
(functions\))d(can)g(b)q(e)1020 912 y(dela)o(y)o(ed)h(using)f(this)g(h)
o(ygienic)h(binding)h(mec)o(hanism.)1076 954 y(Sp)q(ecifying)h(this)f
(b)q(eha)o(vior)g(turns)g(out)f(to)f(b)q(e)h(non-trivial.)25
b(In)1020 995 y(an)15 b(in)o(terpreter)i(for)e(a)g(m)o(ulti-stage)h
(language,)i(this)e(requiremen)o(t)1020 1037 y(manifests)c(itself)h(as)
e(complex)i(v)n(ariable-bind)q(in)q(g)h(rules,)e(the)g(use)f(of)1020
1078 y(closures,)19 b(or)e(capture-free)g(substitutions.)32
b(Our)17 b(seman)o(tics)h(ad-)1020 1120 y(dresses)c(this)g(in)f(a)g
(rather)h(unique)h(w)o(a)o(y)e(\(See)g(Section)h(10.2\).)1076
1161 y(Cross-Stage)e(P)o(ersistence)h(p)q(oses)g(a)e(problem)i(when)f
(staging)i(is)1020 1203 y(used)g(for)f(program)h(generation.)19
b(If)12 b(the)i(\014rst)f(stage)h(is)f(p)q(erformed)1020
1244 y(on)c(one)g(computer,)h(and)g(the)f(second)h(on)f(another,)h(w)o
(e)e(m)o(ust)h(\\p)q(ort")1020 1286 y(the)i(lo)q(cal)i(en)o(vironmen)o
(ts)g(from)e(the)g(\014rst)g(mac)o(hine)h(to)f(the)g(second.)1020
1327 y(Since)k(arbitrary)g(ob)r(jects,)f(suc)o(h)g(as)g(functions)h
(and)f(closures,)h(can)1020 1369 y(b)q(e)k(b)q(ound)i(in)e(these)h(lo)q
(cal)g(en)o(vironmen)o(ts)h(this)f(can)g(b)q(ecome)f(a)1020
1410 y(problem.)24 b(Curren)o(tly)m(,)17 b(MetaML)e(assumes)h(that)f
(the)g(computing)1020 1452 y(en)o(vironmen)o(t)i(do)q(es)f(not)f(c)o
(hange)h(b)q(et)o(w)o(een)f(stages.)24 b(This)15 b(is)h(part)1020
1493 y(of)d(what)g(w)o(e)f(mean)i(b)o(y)f(ha)o(ving)i(an)e(in)o
(tegrated)i(system.)1076 1535 y(Cross-Stage)e(P)o(ersistence)h(can)f(b)
q(e)g(relaxed)h(b)o(y)f(allo)o(wing)h(v)n(ari-)1020 1576
y(ables)k(to)f(b)q(e)h(a)o(v)n(ailable)i(at)d(exactly)h(one)g(stage.)29
b(This)18 b(seems)f(to)1020 1618 y(ha)o(v)o(e)c(b)q(een)g(the)f(case)g
(in)h(all)h(m)o(ulti-stage)g(languages)g(kno)o(wn)f(to)f(us)1020
1659 y(to)k(date)g([25,)f(12)q(,)g(9,)g(10)q(,)g(7,)h(6].)25
b(The)15 b(primary)i(di\016cult)o(y)h(in)f(im-)1020 1701
y(plemen)o(ting)h(p)q(ersistence)f(is)f(the)g(prop)q(er)g(h)o(ygienic)i
(treatmen)o(t)d(of)1020 1742 y(free)10 b(v)n(ariables.)18
b(W)m(e)11 b(will)g(sho)o(w)g(ho)o(w)f(this)h(problem)h(can)f(b)q(e)f
(solv)o(ed,)1020 1784 y(th)o(us)g(allo)o(wing)i(the)d(user)h(to)g
(stage)f(signi\014can)o(tl)q(y)j(more)e(expressions)1020
1825 y(than)k(w)o(as)e(previously)k(p)q(ossible.)1076
1867 y(But)d(ev)o(en)f(in)h(MetaML,)g(it)f(will)i(not)e(b)q(e)h(p)q
(ossible)h(to)f(stage)f(ev-)1020 1908 y(ery)d(expression)i(in)e(the)g
(language.)18 b(In)9 b(particular,)i(w)o(e)d(m)o(ust)h(ensure)1020
1950 y(that)i(the)f(user)h(can)g(only)g(sp)q(ecify)h(computations)g
(that)f(resp)q(ect)g(the)1020 1991 y(follo)o(wing)k(condition:)1020
2085 y Fw(Cross-Stage)k(Safet)o(y:)39 b Fu(A)o(n)19 b(input)f(\014rst)h
(available)f(at)h(stage)f Fq(m)1020 2127 y Fu(c)n(annot)12
b(b)n(e)h(use)n(d)f(at)h(a)g(stage)f Fq(n)i Fu(if)f Fq(m)e(>)f(n)p
Fv(.)1076 2210 y(The)f(problem)i(arises)f(with)f(the)g(use)h(of)e(the)i
(escap)q(e)f(annotation.)1020 2251 y(In)k(particular,)i(consider)g(the)
e(expression)1284 2330 y Fo(fn)19 b(a)g(=>)g(<fn)f(b)i(=>)f(~)m
(\(a+b\))n(>)1020 2409 y Fv(whic)o(h)k(is)g(an)g(\(incorrectly\))i
(staged)e(v)o(ersion)h(of)e(the)h(function)1020 2450
y Fq(\025a:\025b:a)6 b Fv(+)g Fq(b)p Fv(.)17 b(Op)q(erationally)m(,)d
(the)e(annotations)i(require)f(comput-)1020 2492 y(ing)d
Fo(a+b)e Fv(in)i(the)f(\014rst)g(stage,)h(while)g(the)g(v)n(alue)g(of)f
Fo(b)f Fv(will)j(b)q(e)e(a)o(v)n(ailable)1020 2534 y(only)k(in)g(the)g
(second)g(stage!)k(Therefore,)12 b(MetaML's)g(t)o(yp)q(e)h(system)1020
2575 y(w)o(as)g(designed)i(to)d(ensure)i(that)f(\\w)o(ell-t)o(yp)q(ed)i
(programs)e(w)o(on't)g(go)1020 2617 y(wrong",)19 b(where)f(going)h
(wrong)f(no)o(w)g(includes)i(the)e(violation)i(of)p eop
%%Page: 5 5
5 4 bop -76 -34 a Fv(the)13 b(cross-stage)g(safet)o(y)g(condition,)i
(as)d(w)o(ell)i(as)f(the)f(standard)i(no-)-76 7 y(tions)f(of)f(\\going)
i(wrong")e([22])g(in)h(statically-t)o(yp)q(ed)i(languages.)k(A)-76
49 y(formal)14 b(pro)q(of)f(of)g(this)h(prop)q(ert)o(y)g(is)f(ongoing)i
(w)o(ork.)-20 90 y(In)f(our)g(exp)q(erience)h(with)g(the)e(language,)j
(ha)o(ving)f(a)f(t)o(yp)q(e)g(sys-)-76 132 y(tem)g(to)g(screen-out)g
(programs)h(con)o(taining)i(this)e(kind)g(of)f(error)g(is)-76
173 y(a)f(signi\014can)o(t)j(aid)e(in)g(hand-staging)h(programs.)-76
271 y Fw(8)41 b(Isomo)o(rphism)12 b(fo)o(r)h(Co)q(de)h(T)m(yp)q(es)-76
349 y Fv(Recall)d(the)e(t)o(yp)q(es)h(of)f(the)h(staged)g
Fo(member)c Fv(function:)17 b Fo(<int,'a>)f(->)-76 391
y(List)i(int)h(->)g(<bool,'a)o(>)p Fv(,)c(and)k(the)f(t)o(yp)q(e)g(of)f
(the)h(term)f Fo(<fn)i(x)-76 432 y(=>)39 b(\(member)17
b(<x>)h([1,2,3]\)>)13 b Fv(whic)o(h)18 b(is:)26 b Fo(<int)18
b(->)h(bool,'a>)-76 474 y Fv(.)26 b(This)17 b(suggests)g(that)g(a)f
(function)h(from)f(co)q(de)h(to)f(co)q(de)g(can)h(b)q(e)-76
515 y(turned)i(in)o(to)f(the)g(co)q(de)h(of)e(a)h(function.)32
b(This)19 b(is)f(imp)q(ortan)o(t)h(to)-76 557 y(users)c(b)q(ecause)h
Fo(<alpha,'a>)g(->)j(<beta,'a>)11 b Fv(is)16 b(a)e(function)j(and)-76
598 y(cannot)f(b)q(e)g(prin)o(ted)h(or)f(observ)o(ed,)h(while)f
Fo(<alpha)i(->)h(beta,'a>)-76 640 y Fv(is)f(a)g(represen)o(tation)h(of)
e(a)h(function,)h(and)f(can)g(b)q(e)g(prin)o(ted)h(and)-76
681 y(observ)o(ed.)24 b(W)m(e)15 b(can)h(de\014ne)g(t)o(w)o(o)e
(functions)j(to)d(con)o(v)o(ert)i(b)q(et)o(w)o(een)-76
723 y(these)e(t)o(w)o(o)e(t)o(yp)q(es:)-76 801 y Fo(\(*)39
b(back:)17 b(<'A,'c>)g(->)i(<'B,'c>)37 b(->)18 b(<\('A)g(->)h('B\),'c>)
e(*\))-76 842 y(fun)i(back)f(f)h(=)g(<fn)g(x)g(=>)g(~\(f)f(<x>\)>;)-76
925 y(\(*)39 b(forth:)17 b(<\('A)h(->)h('B\),'c>)e(->)i(\(<'A,'c>)d(->)
j(<'B,'c>\))d(*\))-76 967 y(fun)j(forth)e(f)j(x)f(=)g(<~f)f(~x>;)-76
1045 y Fv(Here)9 b(w)o(e)f(use)i(capitalized)i(t)o(yp)q(e)d(v)n
(ariables)i(to)e(distinguis)q(h)j(the)d(t)o(yp)q(e)-76
1086 y(in)14 b(the)f(co)q(de)h(from)e(the)i(con)o(text)f(the)g(co)q(de)
h(m)o(ust)f(ev)n(aluate)h(in.)-20 1128 y(The)i(con)o(v)o(ersion)i(is)f
(not)f(b)q(et)o(w)o(een)g(syn)o(tactic)i(forms,)e(but)g(se-)-76
1169 y(man)o(tic)h(v)n(alues.)25 b(F)m(or)16 b(example,)h(the)e(co)q
(de)h(pro)q(duced)h(b)o(y)f(an)g(ap-)-76 1211 y(plication)g(of)c
Fo(back)f Fv(is)i(in)h(a)e(language)j(extended)f(with)f(a)f(new)h(con-)
-76 1253 y(struct)g(that)g(allo)o(ws)i(us)e(to)g(em)o(b)q(ed)g(an)o(y)h
(v)n(alue)g(in)o(to)f(syn)o(tax,)h(with-)-76 1294 y(out)19
b(needing)g(to)f(kno)o(w)h(ab)q(out)g(its)f(in)o(ten)o(tional)j
(represen)o(tation.)-76 1336 y(Th)o(us,)h(w)o(e)e(are)g(really)i(not)e
(con)o(v)o(erting)i(functions)g(in)o(to)f(source)-76
1377 y(co)q(de,)11 b(but)f(rather,)g(returning)h(syn)o(tax)g(that)f
(denotes)g(this)h(function)-76 1419 y(under)k(our)g(seman)o(tics.)22
b(Under)14 b(this)i(pro)o(viso)f(\(and)g(disregarding)-76
1460 y(termination)e(issues\))e(the)g(comp)q(osition)h(of)e(these)h(t)o
(w)o(o)f(functions)i(is)-76 1502 y(iden)o(tit)o(y)k(under)f(MetaML's)f
(seman)o(tics)h(\(see)f(Section)h(10\).)20 b(They)-76
1543 y(de\014ne)g(an)e(isomorphism)j(b)q(et)o(w)o(een)e(v)n(alues)h(of)
e(t)o(yp)q(e)h Fo(<A,'c>)e(->)-76 1585 y(<B,'c>)11 b
Fv(and)i Fo(<A)19 b(->)g(B,'c>)p Fv(.)c([3].)-20 1626
y(The)i Fo(back)f Fv(and)i Fo(forth)d Fv(functions)k(are)e(similar)j
(to)d(t)o(w)o(o-lev)o(el)-76 1668 y Fq(\021)q Fv(-expansion)g([5].)j
(In)15 b(MetaML,)f(ho)o(w)o(ev)o(er,)g Fo(back)f Fv(and)i
Fo(forth)d Fv(are)-76 1709 y(not)17 b(only)g(meta-lev)o(el)h(concepts)f
(or)g(optimizations,)i(but)e(rather,)-76 1751 y(\014rst)c(class)g
(functions)h(in)f(the)g(language,)h(and)f(the)g(user)g(can)g(apply)-76
1792 y(them)g(directly)i(to)e(v)n(alues)h(of)f(the)g(appropriate)i(t)o
(yp)q(e.)-20 1834 y(This)21 b(isomorphism)h(can)f(also)g(b)q(e)f(view)o
(ed)h(as)f(a)g(formaliza-)-76 1875 y(tion)i(of)e(the)h(in)o(tuitiv)o(e)
j(equiv)n(alence)f(of)e(a)g(sym)o(b)q(olic)i(ev)n(aluator)-76
1917 y([23])15 b Fo(<A,'c>)i(->)i(<B,'c>)12 b Fv(and)k(the)f(syn)o
(tactic)h(represen)o(tation)h(of)-76 1958 y(a)h(function)g
Fo(<A)h(->)g(B,'c>)p Fv(.)28 b(It)17 b(seems)g(that)h(this)g
(isomorphism,)-76 2000 y(whic)o(h)e(MetaML)g(has)g(allo)o(w)o(ed)h(us)f
(to)f(mak)o(e)h(concrete,)h(is)f(at)f(the)-76 2041 y(heart)i(of)f
(concise)i(reduction)h(systems,)e(suc)o(h)h(as)e(Dan)o(vy's)i(t)o(yp)q
(e-)-76 2083 y(directed)c(partial)h(ev)n(aluator)g([4])d(and)i(its)f
(extensions)i([27].)i(Under)-76 2124 y(MetaML's)d(seman)o(tics,)h(w)o
(e)e(can)h(switc)o(h)h(b)q(et)o(w)o(een)f(the)f(t)o(w)o(o)h(t)o(yp)q
(es)-76 2166 y(without)d(needing)g(to)e(w)o(orry)h(ab)q(out)g
(substitution)i(or)d(v)n(ariable)j(cap-)-76 2207 y(ture.)-20
2249 y(This)i(has)f(profound)h(implications)i(for)c(the)h(writing)h(of)
f(staged)-76 2290 y(functions.)22 b(In)15 b(our)f(exp)q(erience)i
(annotating)h(a)d(function)i(to)e(ha)o(v)o(e)-76 2332
y(t)o(yp)q(e)i Fo(<A,'c>)h(->)i(<B,'c>)13 b Fv(requires)k(less)g
(annotations)h(than)e(an-)-76 2373 y(notating)f(it)f(to)f(ha)o(v)o(e)h
(t)o(yp)q(e)f Fo(<A)19 b(->)g(B,'c>)11 b Fv(and)j(is)g(often)f(easier)h
(to)-76 2415 y(think)h(ab)q(out.)k(Because)14 b(w)o(e)f(are)g(more)h
(used)g(to)f(reasoning)i(ab)q(out)-76 2456 y(functions,)20
b(this)e(leads)h(us)f(to)f(a)o(v)o(oid)i(creating)g(functions)g(of)e
(the)-76 2498 y(latter)d(kind)g(except)g(when)f(w)o(e)g(need)g(to)g
(insp)q(ect)i(the)e(co)q(de.)-20 2539 y(The)e(t)o(yp)q(e)h(of)f
Fo(back)e Fv(is)j(one)f(of)g(the)h(axioms)g(of)f(the)g(logic)i(system)
-76 2581 y(motiv)n(ating)18 b(the)e(t)o(yp)q(e)h(system)f(of)g(Da)o
(vies)h([6].)26 b(MetaML's)16 b(t)o(yp)q(e)-76 2622 y(system)j(w)o(as)f
(motiv)n(ated)i(purely)g(b)o(y)f(op)q(erational)i(reasons.)34
b(A)o(t)1020 -34 y(the)14 b(same)h(time,)f(it)h(is)g(imp)q(ortan)o(t)g
(for)f(the)g(programmer)h(to)g(ha)o(v)o(e)1020 7 y(b)q(oth)e(co)q
(ercions,)h(thereb)o(y)f(b)q(eing)h(able)f(to)f(switc)o(h)h(bac)o(k)g
(and)g(forth)1020 49 y(b)q(et)o(w)o(een)g(the)g(t)o(w)o(o)g(isomorphic)
i(t)o(yp)q(es)f(as)f(the)g(need)h(arises.)1076 90 y(This)19
b(b)q(ecomes)f(ev)o(en)h(more)e(imp)q(ortan)o(t)j(when)e(writing)h
(pro-)1020 132 y(grams)13 b(with)h(more)f(than)h(t)o(w)o(o)e(stages.)18
b(Consider)c(the)f(function:)1020 203 y Fo(fun)19 b(back2)e(f)i(=)h
(<fn)e(x)h(=>)g(<fn)g(y)g(=>)g(~~\(f)f(<x>)g(<<y>>\)>>;)1020
245 y(back2)g(:)h(\(<A,'d>)e(->)i(<<B,'e>,')o(d>)d(->)j(<<C,'e>,')o
(d>\))1314 286 y(->)g(<A)g(->)g(<B)g(->)f(C,'e>,'d>)1020
358 y Fv(This)h(allo)o(ws)h(us)f(to)g(write)g(a)f(program)i(whic)o(h)f
(tak)o(es)g(a)g Fo(<a,'d>)1020 399 y Fv(and)i(a)g Fo(<<b,'e>,'d)o(>)c
Fv(as)k(argumen)o(ts)h(and)f(whic)o(h)h(pro)q(duces)g(a)1020
441 y Fo(<<c,'e>,'d)o(>)11 b Fv(and)16 b(stage)f(it)g(in)o(to)h(a)f
(three-stage)g(function.)24 b(Our)1020 482 y(exp)q(erience)c(is)f(that)
g(suc)o(h)g(functions)g(ha)o(v)o(e)g(considerably)j(few)o(er)1020
524 y(annotations,)e(and)e(are)f(easier)h(to)f(think)h(ab)q(out.)30
b(W)m(e)18 b(illustrate)1020 565 y(this)c(in)g(the)f(next)g(section.)
1020 663 y Fw(9)41 b(A)14 b(Multi-Stage)d(Example)1020
741 y Fv(When)h(information)h(arriv)o(es)e(in)h(m)o(ultiple)h(phases)f
(it)f(is)g(p)q(ossible)i(to)1020 783 y(tak)o(e)g(adv)n(an)o(tage)h(of)e
(this)h(fact)g(to)f(get)h(b)q(etter)g(p)q(erformance.)k(Con-)1020
824 y(sider)d(a)g(generic)h(function)f(for)f(computing)j(the)d(inner)i
(pro)q(duct)f(of)1020 866 y(t)o(w)o(o)g(v)o(ectors.)22
b(In)14 b(the)h(\014rst)f(stage)h(the)g(arriv)n(al)h(of)e(the)h(size)g
(of)f(the)1020 907 y(v)o(ectors)e(o\013ers)g(an)f(opp)q(ortunit)o(y)j
(to)d(sp)q(ecialize)j(the)e(inner)g(pro)q(duct)1020 949
y(function)h(on)e(that)g(size,)h(remo)o(ving)h(the)e(o)o(v)o(erhead)h
(of)f(lo)q(oping)j(o)o(v)o(er)1020 990 y(the)c(b)q(o)q(dy)h(of)f(the)g
(computation)i Fq(n)f Fv(times.)16 b(The)10 b(arriv)n(al)i(of)e(the)g
(\014rst)1020 1032 y(v)o(ector)h(a\013ords)h(a)f(second)h(opp)q
(ortunit)o(y)h(for)d(sp)q(ecializa)q(tion)q(.)19 b(If)10
b(the)1020 1073 y(inner)j(pro)q(duct)g(of)f(that)g(v)o(ector)g(is)g(to)
g(b)q(e)g(tak)o(en)h(man)o(y)f(times)h(with)1020 1115
y(other)e(v)o(ectors)g(it)g(can)g(b)q(e)g(sp)q(ecialized)j(b)o(y)d
(remo)o(ving)h(the)f(o)o(v)o(erhead)1020 1157 y(of)f(lo)q(oking)j(up)d
(the)h(elemen)o(ts)g(of)f(the)g(\014rst)h(v)o(ector)f(eac)o(h)h(time.)
16 b(This)1020 1198 y(is)f(exactly)h(the)e(case)h(when)g(computing)h
(the)e(m)o(ultiplic)q(atio)q(n)j(of)d(2)1020 1240 y(matrixes.)29
b(F)m(or)16 b(eac)o(h)h(ro)o(w)g(in)g(the)g(\014rst)g(matrix,)h(the)f
(dot)g(pro)q(d-)1020 1281 y(uct)12 b(of)g(that)g(ro)o(w)g(will)i(b)q(e)
e(tak)o(en)h(for)f(eac)o(h)g(column)h(of)f(the)g(second.)1020
1323 y(This)18 b(example)h(has)f(app)q(eared)h(in)g(sev)o(eral)g(other)
f(w)o(orks)f([9,)g(20)q(])1020 1364 y(and)g(w)o(e)g(giv)o(e)g(our)g(v)o
(ersion)h(b)q(elo)o(w.)29 b(W)m(e)17 b(giv)o(e)g(three)g(v)o(ersions)h
(of)1020 1406 y(the)f(inner)h(pro)q(duct)h(function.)30
b(One)17 b(\()p Fo(iprod)p Fv(\))e(with)i(no)h(staging)1020
1447 y(annotations,)c(the)e(second)h(\()p Fo(iprod2)p
Fv(\))c(with)k(t)o(w)o(o)e(lev)o(els)j(of)d(annota-)1020
1489 y(tions,)i(and)g(the)f(third)h(\()p Fo(iprod3)p
Fv(\))c(with)k(t)o(w)o(o)e(lev)o(els)j(of)e(annotations)1020
1530 y(but)17 b(constructed)h(with)g(the)f Fo(back2)e
Fv(function.)29 b(In)17 b(MetaML)h(w)o(e)1020 1572 y(quote)c
(relational)j(op)q(erators)e(in)o(v)o(olving)i Fo(<)c
Fv(and)h Fo(>)g Fv(b)q(ecause)g(of)g(the)1020 1613 y(p)q(ossible)h
(confusion)g(with)f(meta-brac)o(k)o(ets.)1020 1685 y
Fo(\(*)19 b(iprod)f(:)h(int)f(->)h(Vector)e(->)i(Vector)f(->)g(int)h
(*\))1020 1726 y(fun)g(iprod)e(n)i(v)h(w)f(=)1059 1768
y(if)g(n)39 b('>')f(0)1118 1809 y(then)18 b(\(\(nth)g(v)h(n\))g(*)g
(\(nth)f(w)h(n\)\))g(+)g(\(iprod)e(\(n-1\))h(v)h(w\))1118
1851 y(else)f(0;)1020 1934 y(\(*)h(iprod2)e(:)i(int)g(->)g(<Vector)e
(->)h(<Vector)f(->)i(int>>)f(*\))1020 1975 y(fun)h(iprod2)e(n)i(=)g
(<fn)g(v)g(=>)g(<fn)f(w)h(=>)1059 2017 y(~~\(if)f(n)39
b('>')f(0)1157 2058 y(then)18 b(<<)h(\(~\(lift)e(nth)i(v)g(n\))g(*)g
(\(nth)f(w)h(n\)\))g(+)1314 2100 y(\(~\(~\(iprod)o(2)e(\(n-1\)\))g(v\))
i(w\))1255 2141 y(>>)1157 2183 y(else)f(<<0>>\))g(>>;)1020
2266 y(\(*)h(p3)g(:)g(int)f(->)h(<Vector>)e(->)i(<<Vector>)o(>)d(->)j
(<<int>>)e(*\))1020 2307 y(fun)i(p3)f(n)i(v)f(w)g(=)1020
2349 y(if)g(n)39 b('>')f(0)1079 2390 y(then)18 b(<<)h(\(~\(lift)e(nth)h
(~v)h(n\))g(*)g(\(nth)f(~~w)h(n\)\))f(+)1236 2432 y(~~\(p3)f(\(n-1\))h
(v)h(w\))g(>>)1079 2473 y(else)f(<<0>>;)1020 2556 y(fun)h(iprod3)e(n)i
(=)g(back2)f(\(p3)g(n\);)p eop
%%Page: 6 6
6 5 bop -76 -34 a Fv(Notice)10 b(that)g(the)g(staged)g(v)o(ersions)i
(are)d(remark)n(ably)j(similar)f(to)f(the)-76 7 y(unstaged)17
b(v)o(ersion,)g(and)f(that)f(the)g(v)o(ersion)i(written)f(with)f
Fo(back2)-76 49 y Fv(has)h(few)o(er)e(annotations.)25
b(The)15 b(t)o(yp)q(e)h(inference)g(mec)o(hanism)g(w)o(as)-76
90 y(a)d(great)g(help)i(in)e(placing)j(the)d(annotations)i(correctly)m
(.)-20 132 y(An)9 b(imp)q(ortan)o(t)h(feature)f(of)g(MetaML)g(is)g(the)
g(visualizati)q(on)j(help)-76 173 y(that)e(the)f(system)h(a\013ords.)17
b(By)10 b(\\testing")g Fo(iprod2)d Fv(on)j(some)g(inputs)-76
215 y(w)o(e)j(can)g(\\see")h(what)f(the)g(results)h(are)f(immediately)m
(.)-76 286 y Fo(val)19 b(f1)f(=)i(iprod3)d(3;)-76 328
y(f1)i(:)g(<Vector)e(->)i(<Vector)e(->)i(int>>)e(=)-76
369 y(<fn)i(d1)f(=>)3 411 y(<fn)g(d5)h(=>)61 452 y(\(~\(lift)e(\045nth)
h(d1)h(3\))g(*)g(\(\045nth)f(d5)h(3\)\))f(+)61 494 y(\(~\(lift)f
(\045nth)h(d1)h(2\))g(*)g(\(\045nth)f(d5)h(2\)\))f(+)61
535 y(\(~\(lift)f(\045nth)h(d1)h(1\))g(*)g(\(\045nth)f(d5)h(1\)\))f(+)
61 577 y(0)i(>>)-76 648 y Fv(When)g(this)f(piece)h(of)e(co)q(de)i(is)f
Fo(run)e Fv(it)i(will)h(return)g(a)e(function,)-76 690
y(whic)o(h)12 b(when)f(applied)i(to)e(a)f(v)o(ector)h(builds)i(another)
f(piece)g(of)e(co)q(de.)-76 731 y(This)17 b(buildin)q(g)i(pro)q(cess)e
(includes)i(lo)q(oking)g(up)e(eac)o(h)g(elemen)o(t)g(in)-76
773 y(the)h(\014rst)f(v)o(ector)h(and)g(splicing)i(in)e(the)f(actual)i
(v)n(alue)f(using)h(the)-76 814 y Fo(lift)10 b Fv(op)q(erator.)18
b(Using)13 b(lift)g(is)f(esp)q(ecially)j(v)n(aluable)g(if)d(w)o(e)g
(wish)g(to)-76 856 y(insp)q(ect)h(the)f(result)h(of)e(the)h(next)g
(phase.)17 b(T)m(o)12 b(do)g(that)g(w)o(e)f(ev)n(aluate)-76
897 y(the)i(co)q(de)h(b)o(y)f(running)i(it,)e(and)h(apply)h(the)e
(result)h(to)f(a)g(v)o(ector.)-76 969 y Fo(val)19 b(f2)f(=)i(\(run)e
(f1\))g([1,0,4];)-76 1010 y(f2:)h(<Vector)e(->)h(int>)g(=)-76
1052 y(<fn)h(d1)f(=>)h(\(4)g(*)g(\(\045nth)f(d1)h(3\)\))f(+)120
1093 y(\(0)h(*)g(\(\045nth)f(d1)h(2\)\))f(+)120 1135
y(\(1)h(*)g(\(\045nth)f(d1)h(1\)\))f(+)i(0)f(>)-76 1206
y Fv(Note)14 b(ho)o(w)g(the)h(actual)g(v)n(alues)h(of)e(the)g(\014rst)g
(arra)o(y)h(app)q(ear)g(in)g(the)-76 1248 y(co)q(de,)d(and)f(ho)o(w)g
(the)f(access)i(function)g Fo(nth)d Fv(app)q(ears)j(as)f(a)f(constan)o
(t)-76 1289 y(expression)15 b(applied)h(to)d(the)g(second)h(v)o(ector)f
Fo(d1)p Fv(.)-20 1331 y(While)f(this)f(co)q(de)f(is)h(go)q(o)q(d,)g(it)
f(do)q(es)g(not)g(tak)o(e)g(full)h(adv)n(an)o(tage)g(of)-76
1372 y(all)h(the)e(information)i(kno)o(wn)f(in)g(the)f(second)h(stage.)
16 b(In)10 b(particular,)-76 1414 y(note)16 b(that)h(w)o(e)e(generate)i
(co)q(de)f(for)g(the)g(third)h(stage)f(whic)o(h)h(ma)o(y)-76
1455 y(con)o(tain)e(m)o(ultiplicati)q(on)i(b)o(y)d Fo(0)e
Fv(or)i Fo(1)p Fv(.)j(These)d(m)o(ultiplicati)q(ons)j(can)-76
1497 y(b)q(e)e(optimized.)24 b(T)m(o)15 b(do)g(this)g(w)o(e)f(write)h
(a)g(second)h(stage)f(function)-76 1538 y Fo(add)g Fv(whic)o(h)i(giv)o
(en)g(an)g(index)g(in)o(to)g(a)f(v)o(ector)g Fo(i)p Fv(,)g(an)h(actual)
g(v)n(alue)-76 1580 y(from)12 b(the)g(\014rst)g(v)o(ector)g
Fo(x)p Fv(,)f(and)h(a)g(piece)h(of)f(co)q(de)g(whic)o(h)h(names)f(the)
-76 1621 y(second)k(v)o(ector)f Fo(y)p Fv(,)f(constructs)h(a)g(piece)h
(of)e(co)q(de)h(whic)o(h)h(adds)f(the)-76 1663 y(result)c(of)f(the)g
Fo(x)g Fv(and)g Fo(y)g Fv(m)o(ultiplicati)q(on)j(to)d(the)h(co)q(de)f
(v)n(alued)i(fourth)-76 1704 y(argumen)o(t)i Fo(e)p Fv(.)i(When)e(x)f
(is)h Fo(0)e Fv(or)h Fo(1)g Fv(sp)q(ecial)i(cases)e(are)g(p)q(ossible.)
-76 1776 y Fo(\(*)19 b(add)f(:)i(int)e(->)h(int)f(->)h(<Vector>)e(->)i
(<int>)e(*\))-76 1817 y(fun)i(add)f(i)h(x)h(y)f(e)g(=)-37
1859 y(if)g(x=0)22 1900 y(then)f(e)-37 1942 y(else)g(if)h(x=1)22
1983 y(then)f(<\(nth)g(~y)h(~\(lift)e(i\)\))i(+)g(~e>)-37
2025 y(else)f(<\(~\(lift)f(x\))i(*)g(\(nth)f(~y)h(~\(lift)e(i\)\)\))h
(+)i(~e>;)-76 2096 y Fv(This)e(sp)q(ecialized)j(function)d(is)g(no)o(w)
f(used)h(to)f(build)j(the)d(second)-76 2138 y(stage)d(computation:)-76
2209 y Fo(\(*)19 b(p3)g(:)g(int)g(->)f(<Vector>)f(->)i(<<Vector>)o(>)d
(->)j(<<int>>)e(*\))-76 2250 y(fun)i(p3)f(n)i(v)f(w)g(=)-76
2292 y(if)g(n)g(=)g(1)-17 2333 y(then)f(<<)h(~\(add)f(n)h(\(nth)f(~v)h
(n\))g(~w)f(<0>\))g(>>)-17 2375 y(else)g(<<)h(~\(add)f(n)h(\(nth)f(~v)h
(n\))g(~w)179 2416 y(<)g(~~\(p3)f(\(n-1\))g(v)h(w\))g(>\))g(>>;)-76
2500 y(fun)g(iprod3)e(n)i(=)g(back2)f(\(p3)h(n\);)-76
2571 y Fv(No)o(w)11 b(let)h(us)g(observ)o(e)g(the)g(result)g(of)f(the)h
(\014rst)g(stage)g(computation.)1020 -34 y Fo(val)19
b(f3)f(=)i(iprod3)d(3;)1020 7 y(f3:)i(<Vector)d(->)j(<Vector)e(->)i
(int>>)f(=)1020 49 y(<fn)h(d1)f(=>)1099 90 y(<fn)g(d5)h(=>)1177
132 y(~\(\045add)e(3)i(\(\045nth)f(d1)h(3\))g(<d5>)1314
173 y(<)g(~\(\045add)f(2)h(\(\045nth)f(d1)h(2\))f(<d5>)1491
215 y(<)h(~\(\045add)e(1)j(\(\045nth)d(d1)i(1\))g(<d5>)1648
256 y(<0>\)>\)>\))36 b(>>)1020 328 y Fv(This)10 b(co)q(de)g(is)g
(linear)i(in)e(the)f(size)i(of)e(the)h(v)o(ector;)g(if)g(w)o(e)f(had)h
(actually)1020 369 y(inlined)k(the)e(calls)g(to)g Fo(add)e
Fv(it)h(w)o(ould)h(b)q(e)g(exp)q(onen)o(tial.)19 b(This)12
b(is)g(wh)o(y)1020 411 y(b)q(eing)19 b(able)f(to)g(ha)o(v)o(e)g(free)f
(v)n(ariables)j(\(suc)o(h)e(as)f Fo(add)p Fv(\))f(in)j(co)q(de)f(is)
1020 452 y(indisp)q(ensab)q(le.)26 b(No)o(w)15 b(let)g(us)g(observ)o(e)
h(the)f(result)h(of)f(the)g(second)1020 494 y(stage)e(computation:)1020
565 y Fo(val)19 b(f4)f(=)i(\(eval)d(f3\))i([1,0,4];)1020
607 y(f4:)g(<Vector)d(->)j(int>)f(=)1020 648 y(<fn)h(d1)f(=>)h(\(4)g(*)
g(\(\045nth)f(d1)h(3\)\))f(+)h(\(\045nth)f(d1)h(1\))g(+)g(0>)1020
720 y Fv(Note)d(that)h(no)o(w)f(only)h(the)g(m)o(ultiplicati)q(on)q(s)i
(that)d(con)o(tribute)i(to)1020 761 y(the)e(answ)o(er)h(are)f(eviden)o
(t)i(in)f(the)f(third)h(stage)g(program.)27 b(If)16 b(the)1020
803 y(v)o(ector)d(is)f(sparse)h(then)g(this)g(sort)f(of)g(optimization)
k(can)c(ha)o(v)o(e)h(dra-)1020 844 y(matic)h(e\013ects.)1020
942 y Fw(10)40 b(Semantics)13 b(of)g Fq(\025)1358 926
y Fi(M)1020 1020 y Fv(Figure)k(1)e(presen)o(ts)i(the)e(static)i(and)f
(dynamic)h(seman)o(tics)g(of)e(the)1020 1062 y(meta-lam)o(b)q(da)10
b(calculus,)i Fq(\025)1423 1046 y Fi(M)1461 1062 y Fv(.)j(This)10
b(calculus)h(is)e(a)g(mini-MetaML,)1020 1103 y(whic)o(h)16
b(illustrates)i(the)d(relev)n(an)o(t)h(features)g(of)f(the)g(staging)h
(anno-)1020 1145 y(tations)e(on)g(the)f(seman)o(tics)h(of)f(MetaML.)
1076 1186 y Fq(\025)1098 1171 y Fi(M)1153 1186 y Fv(is)18
b(a)f(call)i(b)o(y)e(v)n(alue)i(lam)o(b)q(da)f(calculus)i(whic)o(h)e
(supp)q(orts)1020 1228 y(in)o(tegers,)f(functions,)h(and)e(co)q(de)g
(\()p Fo(int)29 b Fp(j)h Fq(t)15 b Fp(!)h Fq(t)30 b Fp(j)g(h)p
Fq(t)p Fp(i)1881 1212 y Fh(t)1925 1228 y Fp(j)g Fq(\013)p
Fv(\).)1020 1269 y(The)17 b(syn)o(tax)i(of)e(terms)g(includes)j(in)o
(teger)e(constan)o(ts,)h(v)n(ariables,)1020 1311 y(application)q(s,)e
(abstractions)g(\()p Fq(i)26 b Fp(j)g Fq(x)g Fp(j)g Fq(e)13
b(e)26 b Fp(j)g Fq(\025)7 b(x)1803 1295 y Fh(t)1823 1311
y Fq(:)f(e)p Fv(\))14 b(and)h(the)1020 1352 y(four)k(staging)h
(annotations:)32 b(meta)19 b(brac)o(k)o(ets,)h(escap)q(e)g(and)g(run)
1020 1394 y(\()p Fo(<)p Fq(e)p Fo(>)31 b Fp(j)h Fo(~)t
Fq(e)g Fp(j)g Fo(run)15 b Fq(e)p Fv(\).)26 b(In)17 b(addition,)i(the)d
(constan)o(t)h(op)q(erator)1020 1435 y(\()p Fp(")22 b
Fq(v)q Fv(\))16 b(allo)o(ws)i(us)e(to)g(injects)h(a)f(v)n(alue)h(in)o
(to)g(a)f(term,)h(and)f(is)h(cru-)1020 1477 y(cial)c(to)e(the)h
(conciseness)h(of)e(our)h(implemen)o(tation)i(of)e(Cross-Stage)1020
1518 y(P)o(ersistence.)23 b(It)14 b(is)h(these)g(constan)o(ts)h(that)f
(w)o(e)f(prin)o(t)h(out)g(as)g(a)f(\045)1020 1560 y(follo)o(w)o(ed)g(b)
o(y)f(a)g(name.)k(Note)12 b(that)h(users)g(do)g(not)g(write)g(programs)
1020 1602 y(with)h(the)f(constan)o(t)h(op)q(erator;)g(it)g(is)g(only)g
(in)o(tro)q(duced)h(during)g(re-)1020 1643 y(duction.)k(Ev)o(ery)13
b(shift)g(in)h(stage)f(from)f(a)h(lo)o(w)o(er)g(stage)g(to)g(a)g
(higher)1020 1685 y(stage)h(enric)o(hes)h(the)e(syn)o(tax)i(passed)f
(to)g(the)f(higher)i(stage)f(with)g(a)1020 1726 y(new)h(set)g(of)g
(constan)o(ts;)h(the)g(v)n(alues)g(of)f(the)g(previous)i(stage)e(that)
1020 1768 y(could)f(still)h(b)q(e)f(referenced)f(in)h(the)f(future.)
1076 1809 y(Finally)m(,)i(w)o(e)d(note)h(that)g(the)g
Fo(lift)e Fv(annotation)k(of)d(MetaML)i(is)1020 1851
y(do)q(es)f(not)g(app)q(ear)h(explicitly)i(in)e(the)f(seman)o(tics)h
(of)e Fq(\025)1817 1835 y Fi(M)1855 1851 y Fv(.)17 b(Instead,)1020
1892 y(the)c Fo(lift)e Fv(can)j(b)q(e)f(de\014ned)h(within)h
Fq(\025)1574 1876 y Fi(M)1612 1892 y Fv(for)e(eac)o(h)g(t)o(yp)q(e.)
1020 1986 y Fw(10.1)40 b(Static)13 b(Semantics)1020 2052
y Fv(The)g(static)i(seman)o(tics)f(is)g(expressed)h(as)f(a)f(set)g(of)g
(inference)i(rules)1020 2093 y(that)h(determine)h(if)e(a)h(term)f(is)i
(w)o(ell-formed,)f(and)h(determine)g(its)1020 2154 y(t)o(yp)q(e.)26
b(The)16 b(judgemen)o(t)h(\006)f(\001)1503 2119 y Fh(n)1501
2154 y Fp(`)22 b Fq(x)g Fv(:)g Fq(\034)1640 2158 y Fn(1)1657
2154 y Fq(;)6 b(\034)1691 2158 y Fn(2)1724 2154 y Fv(is)17
b(read)f Fu(under)f(the)1020 2195 y(c)n(ontext)h(stack)g
Fv(\006)p Fu(,)j(the)e(typ)n(e)g(envir)n(onment)e Fv(\001)p
Fu(,)k(the)e(term)i Fq(x)e Fu(has)1020 2237 y(typ)n(e)12
b Fq(\034)1117 2241 y Fn(1)1147 2237 y Fu(at)h(level)e
Fq(n)i Fu(and)f(may)h(exe)n(cute)e(in)h(the)g(c)n(ontext)f(with)i
Fv(name)1020 2278 y Fq(\034)1037 2282 y Fn(2)1054 2278
y Fv(.)1076 2320 y(The)d(in)o(tuition)j(b)q(ehind)f(con)o(texts,)f(is)g
(that)g(an)o(y)f(expression)j(can)1020 2361 y(only)f(execute)f(in)g(a)f
(con)o(text)h(whic)o(h)g(con)o(tains)h(bindings)h(for)e(its)f(free)1020
2403 y(v)n(ariables.)33 b(The)18 b(t)o(yp)q(e)g(inference)h(algorithm)h
(assigns)f(the)f(same)1020 2444 y(con)o(text)c(name)f(to)g(expressions)
i(that)e(m)o(ust)g(execute)h(in)g(the)f(same)1020 2486
y(con)o(text.)1076 2527 y(The)d(t)o(yp)q(e)h(assignmen)o(t)h(\001)e
(maps)g(v)n(ariable)j(to)d(t)o(yp)q(es)h(and)f(lev)o(els)1020
2569 y(and)16 b(con)o(text)h(names.)25 b(Ev)o(ery)16
b(v)n(ariable)i(is)e(b)q(ound)h(at)f(some)g(par-)1020
2610 y(ticular)i(lev)o(el,)g(namely)m(,)g(the)e(lev)o(el)h(of)f(the)g
(abstraction)i(in)f(whic)o(h)p eop
%%Page: 7 7
7 6 bop -76 -34 a Fv(it)20 b(is)f(b)q(ound)i(\()p Fg(Abs)d
Fv(rule\).)35 b(The)19 b(role)h(of)f Fq(n)g Fv(in)g(the)g(judgemen)o(t)
-76 28 y(\006)12 b(\001)16 -6 y Fh(n)14 28 y Fp(`)19
b Fq(x)f Fv(:)g Fq(\033)d Fv(is)g(to)f(k)o(eep)g(trac)o(k)g(of)f(the)h
(lev)o(el)i(of)d(the)h(expression)-76 70 y(b)q(eing)i(t)o(yp)q(ed.)k
(The)14 b Fu(level)e Fv(of)i(a)f(sub)q(expression)k(is)e(the)f(n)o(um)o
(b)q(er)g(of)-76 111 y(uncancelled)j(surrounding)g(brac)o(k)o(ets.)k
(One)14 b(surrounding)i(escap)q(e)-76 153 y(cancels)i(one)e
(surrounding)j(brac)o(k)o(et.)26 b(Hence,)17 b Fq(n)f
Fv(is)h(incremen)o(ted)-76 194 y(for)10 b(an)g(expression)i(inside)f
(meta-brac)o(k)o(ets)g(\()p Fg(Brac)o(k)o(et)p Fv(\),)e(and)h(decre-)
-76 236 y(men)o(ted)17 b(for)f(one)h(inside)i(an)e(escap)q(e)g(\()p
Fg(Escap)q(e)p Fv(\).)26 b(Note)16 b(that)h(the)-76 277
y(rule)e Fg(Escap)q(e)f Fv(do)q(es)h(not)f(allo)o(w)i(escap)q(e)f(to)f
(app)q(ear)i(at)e(lev)o(el)i(0.)21 b(In)-76 319 y(other)16
b(w)o(ords,)h(escap)q(e)f(m)o(ust)g(app)q(ear)h(inside)h(uncancelled)g
(meta-)-76 360 y(brac)o(k)o(ets.)-20 402 y(There)e(are)f(three)h(main)g
(kinds)h(of)e(errors)h(related)g(to)g(staging)-76 443
y(annotations)f(that)f(can)f(o)q(ccur)h(at)e(run)o(time:)-20
508 y Fp(\017)19 b Fv(A)12 b(v)n(ariable)j(is)f(used)g(in)f(a)g(stage)h
(b)q(efore)f(it)g(is)h(a)o(v)n(ailable,)i(or)-20 576
y Fp(\017)j Fv(Run)g(or)g(escap)q(e)h(are)f(passed)h(v)n(alues)g(ha)o
(ving)h(a)e(non-)p Fq(code)18 617 y Fv(t)o(yp)q(e,)13
b(or)-20 685 y Fp(\017)19 b Fv(Run)f(is)f(passed)i(a)e(co)q(de-t)o(yp)q
(e)h(v)n(alue)h(with)e(free)g(v)n(ariables.)18 727 y(This)g(manifests)h
(itself)f(in)h(the)e(t)o(yp)q(e,)i(where)f(the)f(name)h(of)18
768 y(the)c(con)o(text)g(is)h(constrained.)-20 832 y(The)9
b(\014rst)g(kind)h(of)f(error)g(is)g(c)o(hec)o(k)o(ed)h(b)o(y)f(the)g
Fg(V)m(ar)e Fv(rules.)17 b(Ha)o(ving)-76 874 y(no)f(rule)h(for)f
Fq(m)f(>)h(n)g Fv(enforces)g(Cross-Stage)h(P)o(ersistence:)24
b(V)m(ari-)-76 915 y(ables)17 b(a)o(v)n(ailable)h(in)e(the)g(curren)o
(t)g(stage)g(\()p Fq(m)p Fv(\))f(can)h(b)q(e)f(used)i(in)f(all)-76
957 y(future)h(stages)g(\()p Fq(n)p Fv(\).)27 b(The)16
b(second)h(kind)h(of)e(error)h(is)g(c)o(hec)o(k)o(ed)g(b)o(y)-76
998 y(the)h Fg(Run)f(n)g Fv(and)h Fg(Esc)g(n+1)e Fv(rules.)31
b(Detecting)19 b(the)e(third)i(kind)-76 1040 y(of)d(error)g(is)g(an)g
(imp)q(ortan)o(t)h(con)o(tribution)i(of)c(this)i(pap)q(er,)g(and)g(is)
-76 1081 y(accomplished)g(b)o(y)d(the)h(free)e(v)n(ariable)j(c)o(hec)o
(k)f(in)g(the)f(rule)h Fg(Run)f(n)p Fv(:)-76 1123 y Fu(Only)g(c)n(o)n
(de)f(whose)h(c)n(ontext)f(is)h(c)n(ompletely)e(unc)n(onstr)n(ain)o(e)n
(d)f(my)k(b)n(e)-76 1164 y(run)p Fv(.)-20 1206 y(F)m(or)9
b(the)h(standard)h(part)e(of)g(the)h(language,)i Fq(code)c
Fv(\(no)o(w)h(denoted)-76 1248 y(b)o(y)19 b Fp(h)p 0
1248 12 2 v 18 w(i)f Fv(for)g(conciseness\))j(is)e(a)f(normal)i(t)o(yp)
q(e)f(constructor)g(that)-76 1289 y(needs)12 b(no)g(sp)q(ecial)h
(treatmen)o(t)f(and)g(the)f(lev)o(el)i Fq(n)e Fv(is)h(nev)o(er)g(c)o
(hanged.)-76 1331 y(Similar)17 b(t)o(yp)q(e)d(systems)h(ha)o(v)o(e)g(b)
q(een)f(iden)o(ti\014ed)j(and)e(used)g(b)o(y)f(Go-)-76
1372 y(mard)g(and)f(Jones)g([11)q(],)f(Da)o(vies)i(&)f(Pfenning)h([6])f
(and)g(Da)o(vies)i([7].)-20 1414 y(An)c(imp)q(ortan)o(t)i(di\013erence)
g(b)q(et)o(w)o(een)e(these)g(t)o(yp)q(e)h(systems)g(and)-76
1455 y(the)k(one)g(in)h(Figure)g(1)f(is)g(that)g(in)h(all)g(previous)h
(statically-t)o(yp)q(ed)-76 1497 y(m)o(ulti-stage)h(languages)g([25,)e
(7,)g(6],)g(only)i(the)e(follo)o(wing)j Fu(mono-)-76
1538 y(lithic)11 b Fv(t)o(yp)q(e)j(rule)g(is)f(used)h(for)f(v)n
(ariables:)1 1648 y Fg(V)m(ar)f(\(Monolithic\))p Ff(:)367
1608 y Fv(\(\001)f Fq(x)p Fv(\))f(=)h Fq(\034)534 1592
y Fh(m)p 349 1622 234 2 v 383 1685 a Fv(\001)434 1651
y Fh(n)432 1685 y Fp(`)18 b Fq(x)10 b Fv(:)g Fq(\034)635
1648 y Fv(when)k Fq(m)c Fv(=)h Fq(n)-76 1757 y Fv(Whereas)k(w)o(e)e
(allo)o(w)i(the)f(more)g(general)h(condition)h Fq(m)c
Fp(\024)g Fq(n)p Fv(.)19 b(This)-76 1799 y(means)10 b(an)o(y)g
(generated)g(expressions)i(ma)o(y)d(as)h(w)o(ell)g(b)q(e)f(ev)n
(aluated)i(in)-76 1840 y(the)h(empt)o(y)f(en)o(vironmen)o(t)j(since)e
(all)h(w)o(ell-t)o(yp)q(ed)g(terms)e(are)h(closed)-76
1882 y(terms)h(and)h(cannot)g(reference)f(an)o(y)h(free)f(v)n
(ariables.)19 b(F)m(or)13 b(example)-76 1923 y(the)g(expression:)160
1994 y Fo(val)19 b(lift)p 321 1994 12 2 v 12 w(like)f(=)i(fn)e(x)i(=>)e
(<x>)-76 2065 y Fv(is)f(accepted,)h(b)q(ecause)f(inside)h(the)e
(meta-brac)o(k)o(ets,)i Fq(n)e Fv(=)g(1,)h(and)-76 2107
y(\(\001)c Fo(x)p Fv(\))g(=)g Fq(\013)100 2091 y Fn(0)117
2107 y Fv(.)21 b(This)15 b(expression)h(is)f(not)g(accepted)h(b)o(y)e
(the)h(mono-)-76 2148 y(lithic)h(v)n(ariable)f(rule.)k(Note)14
b(that)f(while)i(the)f(whole)g(function)h(has)-76 2190
y(t)o(yp)q(e)c Fq(\013)f Fp(!)h(h)p Fq(\013)p Fp(i)e
Fv(it)h(do)q(es)h(not)f(pro)o(vide)i(us)e(with)g(the)g(functionali)q(t)
o(y)i(of)-76 2231 y(lift,)f(b)q(ecause)f(the)g(result)g(of)f(applying)j
Fo(lift)p 572 2231 V 13 w(like)7 b Fv(to)i(an)o(y)h(v)n(alue)h(al-)-76
2273 y(w)o(a)o(ys)h(returns)g Fo(<)o(\045x>)o Fv(,)f(and)i(not)e(a)h
(literal)h(expression)h(denoting)f(the)-76 2314 y(v)n(alue.)29
b(But)17 b(this)g(example)h(demonstrates)g(that)f(meta-brac)o(k)o(ets)
-76 2356 y(can)c(b)q(e)g(used)h(to)e(\\lift")i(an)o(y)f(v)n(alue,)h
(including)i(functions.)i(This)c(is)-76 2397 y(explained)i(in)e(the)f
(dynamic)i(seman)o(tics.)-20 2439 y(The)e(t)o(yp)q(e)h(system)f
(rejects)g(the)g(expression)188 2510 y Fo(fn)19 b(a)g(=>)g(<fn)g(b)g
(=>)g(~)m(\(a+b\))n(>)-76 2581 y Fv(b)q(ecause,)i(inside)f(the)e(escap)
q(e,)i Fq(n)g Fv(=)g(0,)f(and)g(\(\000)g Fo(b)p Fv(\))g(=)h
Fq(\013)816 2565 y Fn(1)833 2581 y Fv(,)f(but)-76 2622
y(1)11 b Fq(>)g Fv(0.)1020 -34 y Fw(10.2)40 b(Dynamic)13
b(Semantics)1020 31 y Fv(The)h(dynamic)h(seman)o(tics)g(pro)o(vides)g
(meaning)g(to)f(terms.)k(V)m(alues)1020 73 y(are)12 b(a)f(subset)i(of)e
(terms,)h(and)g(w)o(e)f(denote)i(them)e(with)i(a)e(small)i(dia-)1020
114 y(mond)h(sup)q(erscript)h(\()p Fq(i)1353 98 y Fi(\005)1393
114 y Fp(j)34 b(f)p Fq(\025)7 b(x)1508 98 y Fh(t)1528
114 y Fq(:)f(e)p Fp(g)1582 98 y Fi(\005)1622 114 y Fp(j)34
b(h)p Fq(e)p Fp(i)1715 98 y Fi(\005)1733 114 y Fv(\).)17
b(The)c(seman)o(tics)1020 156 y(giv)o(en)i(in)f(Figure)h(1,)f(when)g
(applied)i(to)e(w)o(ell-t)o(yp)q(ed)h(terms,)e(main-)1020
197 y(tains)h(the)f(in)o(v)n(arian)o(t)i(that)f(no)f(free)g(v)n
(ariables)i(ev)o(er)e(o)q(ccur)h(in)g(co)q(de)1020 239
y(v)n(alues)g(whic)o(h)g(will)h(later)e(b)q(e)h Fo(run)p
Fv(.)1076 280 y(The)g(dynamic)i(seman)o(tics)f(is)f(brok)o(en)h(in)o
(to)g(t)o(w)o(o)f(sets)g(of)f(rules,)1020 322 y(reduction)18
b(and)f(rebuilding)q(.)29 b(Reduction)18 b(\(\000)k Fp(`)h
Fq(e)g(,)-6 b Fp(!)22 b Fq(v)q Fv(\))16 b(maps)1020 382
y(terms)f(to)g(v)n(alues)h(and)f(rebuildi)q(ng)j(\(\000)i
Fp(`)g Fq(e)1694 356 y Fh(n)p Fn(+1)1702 382 y Fq(,)-6
b Fp(!)27 b Fq(e)p Fv(\))15 b(maps)g(terms)1020 423 y(to)d(terms)f(and)
h(is)h(indexed)g(b)o(y)f(a)f(lev)o(el)j Fq(n)6 b Fv(+)g(1.)15
b(Rebuildi)q(ng)g(\\recon-)1020 465 y(structs")f(terms)f(under)g(the)h
(en)o(vironmen)o(t)h(\000.)1076 506 y(The)i(en)o(vironmen)o(t)h(\000)e
(binds)i(a)f(v)n(ariable)h(to)f(a)f(v)n(alue.)29 b(Bind-)1020
548 y(ings)12 b(in)f(en)o(vironmen)o(ts)i(come)e(in)h(t)o(w)o(o)e
(\015a)o(v)o(ors:)17 b(real)11 b(\(Real)q(\()p Fq(v)q
Fv(\)\))f(and)1020 589 y(sym)o(b)q(olic)j(\(Sym)q(\()p
Fq(x)p Fv(\))1318 573 y Fh(t)1331 589 y Fv(\).)j(The)11
b(extension)h(of)f(the)g(en)o(vironmen)o(t)i(with)1020
631 y(real)i(v)n(alues)h(o)q(ccurs)g(only)f(in)h(the)e(rule)i
Fg(App)e(0)p Fv(.)22 b(Suc)o(h)15 b(v)n(alues)h(are)1020
672 y(returned)e(under)g(reduction)g(\()p Fg(V)m(ar)e(0)p
Fv(\),)h(or)g(injected)h(in)o(to)f(constan)o(t)1020 714
y(terms)g(\()p Fg(R)-5 b(V)m(ar)13 b(n+1)p Fv(\))g(under)g(rebuildi)q
(ng.)1076 755 y(Sev)o(eral)h(things)h(ab)q(out)f(rebuilding)i(should)f
(b)q(e)e(noted:)1065 827 y(1.)18 b(Rebuildi)q(ng)k(replaces)e(all)f
(kno)o(wn)h(v)n(ariables)g(with)f(a)g(con-)1113 868 y(stan)o(t)12
b(expression)g(\()p Fp(")18 b Fq(v)q Fv(\))10 b(where)h(the)g
Fq(v)h Fv(comes)f(from)f(Real\()p Fq(v)q Fv(\))1113 910
y(bindings)16 b(in)e(\000)f(\()p Fg(R)-5 b(V)m(ar)13
b(n+1)p Fv(\).)1065 981 y(2.)18 b(Rebuildi)q(ng)25 b(renames)d(all)h(b)
q(ound)g(v)n(ariables.)45 b(Sym)o(b)q(olic)1113 1023
y(Sym)q(\()p Fq(x)1224 1007 y Fi(0)1235 1023 y Fv(\))1250
1007 y Fh(t)1276 1023 y Fv(bindings)16 b(o)q(ccur)d(in)h(rules)f
Fg(Abs)g(0)g Fv(and)g Fg(Abs)g(n+1)1113 1064 y Fv(where)k(a)f(term)g
(is)g(rebuilt,)j(and)d(new)g(names)h(m)o(ust)f(b)q(e)h(in-)1113
1106 y(tro)q(duced)i(to)e(a)o(v)o(oid)i(p)q(oten)o(tial)h(v)n(ariable)f
(capture.)31 b(These)1113 1147 y(new)12 b(names)f(are)h(pro)r(jected)g
(from)f(the)g(en)o(vironmen)o(t)i(in)f(rule)1113 1189
y Fg(SV)m(ar)g(n+1)p Fv(.)1065 1260 y(3.)18 b(Rebuildi)q(ng)12
b(executes)d(escap)q(ed)h(expressions)h(to)e(obtain)h(co)q(de)1113
1301 y(to)g(\\splice")i(in)o(to)f(the)f(con)o(text)g(where)g(the)g
(escap)q(ed)h(term)e(o)q(c-)1113 1343 y(curs)14 b(\()p
Fg(Escap)q(e)e(1)p Fv(\).)1076 1414 y(Without)21 b(the)e(staging)h
(annotations,)i(rebuildin)q(g)g(is)d(simply)1020 1456
y(capture-free)12 b(substitution)j(of)c(the)h(sym)o(b)q(olic)i(v)n
(ariables)g(b)q(ound)f(in)1020 1497 y(\000.)j(Rebuildin)q(g)e(is)e
(initiated)h(in)f(t)o(w)o(o)f(places,)h(in)g(rule)g Fg(Abs)f(0)g
Fv(where)1020 1539 y(it)j(is)g(used)g(for)f(capture-free)g
(substitution,)j(and)e(in)g(rule)g Fg(Brac)o(k)o(et)1020
1580 y(0)g Fv(where)g(it)h(is)f(applied)j(to)d(terms)g(inside)i
(dynamic)g(brac)o(k)o(ets)e(and)1020 1622 y(it)e(describ)q(es)h(ho)o(w)
f(the)g(dela)o(y)o(ed)h(computations)g(inside)h(a)d(dynamic)1020
1663 y(v)n(alue)j(are)f(constructed.)1076 1705 y(The)j(t)o(yp)q(e)h
(system)f(ensures)h(that)f(in)h(rule)g Fg(Abs)f(0)p Fv(,)h(there)f(are)
1020 1746 y(no)d(em)o(b)q(edded)h(escap)q(es)g(at)e(lev)o(el)i(1)f
(that)g(will)h(b)q(e)f(encoun)o(tered)h(b)o(y)1020 1788
y(the)19 b(rebuildin)q(g)j(pro)q(cess,)f(so)e(rebuildin)q(g)j(actually)
f(implemen)o(ts)1020 1829 y(capture-free)14 b(substitution)h(as)e(adv)o
(ertised.)1076 1871 y(The)j(rules)h Fg(Escap)q(e)e(1)p
Fv(,)i Fg(Run)f(0)p Fv(,)g(and)h Fg(Brac)o(k)o(et)e(0)h
Fv(are)g(at)g(the)1020 1912 y(heart)d(of)g(the)g(dynamic)i(seman)o
(tics.)1076 1954 y(In)10 b(the)g(rebuildin)q(g)i(rule)f
Fg(Escap)q(e)f(1)p Fv(,)g(an)g(escap)q(ed)h(expression)h(at)1020
1996 y(lev)o(el)i(1)e(indicates)i(a)e(computation)i(m)o(ust)e(pro)q
(duce)h(a)f(co)q(de)h(v)n(alued)1020 2037 y(result)h(\()p
Fp(h)p Fq(e)1175 2041 y Fn(2)1192 2037 y Fp(i)1207 2021
y Fi(\005)1225 2037 y Fv(\),)e(and)i(rebuilding)i(returns)e(the)f(term)
g Fq(e)1828 2041 y Fn(2)1845 2037 y Fv(.)1076 2079 y(The)e(reduction)h
(rule)g Fg(Brac)o(k)o(et)e(0)h Fv(describ)q(es)h(ho)o(w)f(a)g(co)q(de)g
(v)n(alue)1020 2120 y(is)16 b(constructed)g(from)g(a)f(meta-brac)o(k)o
(eted)h(term)f Fo(<)p Fq(e)1802 2124 y Fn(1)1819 2120
y Fo(>)p Fv(.)23 b(The)15 b(em-)1020 2162 y(b)q(edded)c(expression)g
(is)f(rebuilt)h(at)e(lev)o(el)h(1,)g(and)g(the)f(returned)h(term)1020
2203 y(is)k(injected)g(in)o(to)g(the)f(domain)h(of)f(v)n(alues.)1076
2245 y(The)i(reduction)i(rule)f Fg(Run)g(0)f Fv(describ)q(es)i(ho)o(w)e
(a)g(co)q(de)h(v)n(alued)1020 2286 y(term)9 b(is)h(executed.)17
b(The)9 b(term)g(is)h(reduced)g(to)g(a)f(co)q(de)h(v)n(alued)h(term,)
1020 2328 y(and)j(the)g(em)o(b)q(edded)g(term)g(is)g(then)f(reduced)i
(in)f(the)g(empt)o(y)f(en)o(vi-)1020 2369 y(ronmen)o(t)h(to)e(pro)q
(duce)i(the)g(answ)o(er.)j(The)12 b(empt)o(y)i(en)o(vironmen)o(t)h(is)
1020 2411 y(su\016cien)o(t)g(b)q(ecause)g(all)g(free)f(v)n(ariables)i
(in)f(the)f(original)i(co)q(de)f(v)n(al-)1020 2452 y(ued)e(term)f(ha)o
(v)o(e)h(b)q(een)h(replaced)g(b)o(y)e(constan)o(t)i(expressions)h(\()p
Fp(")i Fq(v)q Fv(\).)p eop
%%Page: 8 8
8 7 bop -76 -74 2183 2 v -77 2568 2 2643 v 791 -43 a
Fk(Domains)14 b(and)g(Relations)64 31 y Ff(lev)o(els)238
b Fe(n)46 b Fx(!)37 b Ff(0)20 b Fx(j)f Ff(1)g Fx(j)h
Fe(n)8 b Ff(+)g(1)19 b Fx(j)h Fe(n)8 b Ff(+)g(2)20 b
Fx(j)25 b Fe(:)5 b(:)h(:)64 69 y Ff(in)o(tegers)201 b
Fe(i)55 b Fx(!)37 b Fe(:)6 b(:)g(:)25 b Fx(j)i(\000)8
b Ff(2)20 b Fx(j)27 b(\000)8 b Ff(1)19 b Fx(j)h Ff(0)f
Fx(j)h Ff(1)f Fx(j)g Ff(2)g Fx(j)26 b Fe(:)5 b(:)h(:)64
106 y Ff(t)o(yp)q(es)239 b Fe(\034)51 b Fx(!)37 b Fd(int)19
b Fx(j)g Fe(\034)13 b Fx(!)e Fe(\034)23 b Fx(j)c(h)6
b Fe(\034)j Fx(i)829 94 y Fh(\034)868 106 y Fx(j)19 b
Fe(\013)64 144 y Ff(terms)234 b Fe(e)51 b Fx(!)37 b Fe(i)20
b Fx(j)f Fe(x)h Fx(j)f Fe(e)10 b(e)20 b Fx(j)g Fe(\025)5
b(x)793 132 y Fh(\034)818 144 y Fe(:)h(e)20 b Fx(j)f
Fd(<)p Fe(e)p Fd(>)h Fx(j)f Fd(~)r Fe(e)h Fx(j)g Fd(run)8
b Fe(e)20 b Fx(j)30 b(")15 b Fe(v)64 182 y Ff(v)n(alues)227
b Fe(v)50 b Fx(!)37 b Fe(i)537 170 y Fi(\005)575 182
y Fx(j)19 b(f)p Fe(\025)5 b(x)668 170 y Fh(t)688 182
y Fe(:)h(e)p Fx(g)738 170 y Fi(\005)775 182 y Fx(j)20
b(h)p Fe(e)p Fx(i)849 170 y Fi(\005)64 220 y Ff(bindings)190
b Fe(b)52 b Fx(!)37 b Ff(Real)o(\()p Fe(v)q Ff(\))20
b Fx(j)f Ff(Sym)o(\()p Fe(x)p Ff(\))805 208 y Fh(t)64
257 y Ff(en)o(vironmen)n(ts)114 b(\000)45 b Fx(!)37 b(\017)20
b(j)f Ff(\000)p Fe(;)6 b(x)j Fx(7!)h Fe(b)145 b Fg(where)19
b Ff(\(\000)p Fe(;)6 b(x)j Fx(7!)h Fe(b)p Ff(\))p Fe(y)117
b Fx(\021)20 b Ff(if)10 b Fe(x)f Ff(=)i Fe(y)g Ff(then)e
Fe(b)g Ff(else)g(\000)h Fe(y)64 295 y Ff(t)o(yp)q(e)g(en)o(vironmen)o
(ts)34 b(\001)k Fx(!)f(\016)20 b(j)f Ff(\001)p Fe(;)6
b(x)k Fx(7!)g Ff(\()p Fe(\034)r(;)5 b(\013)p Ff(\))795
280 y Fh(n)865 295 y Fg(where)19 b Ff(\(\001)p Fe(;)6
b(x)j Fx(7!)i Ff(\()p Fe(\034)r(;)t(\013)p Ff(\))1208
280 y Fh(n)1229 295 y Ff(\))p Fe(y)21 b Fx(\021)f Ff(if)9
b Fe(x)h Ff(=)g Fe(y)i Ff(then)c(\()p Fe(\034)r(;)d(\013)p
Ff(\))1616 283 y Fh(n)1647 295 y Ff(else)k(\001)h Fe(y)64
332 y Ff(con)o(text)f(stac)o(ks)103 b(\006)42 b Fx(!)37
b Ff([)6 b(])19 b Fx(j)h Fe(\013)p Ff(;)5 b(\006)65 390
y(reduction)34 b(\000)16 b Fx(`)f Fe(e)h(,)-6 b Fx(!)16
b Fe(v)166 b Ff(rebuilding)34 b Fc(at)13 b(level)h(n)57
b Ff(\000)16 b Fx(`)f Fe(e)1101 365 y Fh(n)1091 390 y
Fe(,)-6 b Fx(!)16 b Fe(e)158 b Ff(term)10 b(t)o(yping)36
b Fc(at)13 b(level)h(n)37 b Ff(\006)10 b(\001)1802 358
y Fh(n)1800 390 y Fx(`)16 b Fe(e)g Ff(:)f Fe(\034)r(;)5
b(\034)855 540 y Fk(Static)14 b(Seman)o(tics)-34 652
y Fg(In)o(t)g(n)p Ff(:)34 b(\006)11 b(\001)182 621 y
Fh(n)181 652 y Fx(`)k Fe(i)h Ff(:)f Fd(int)o Fe(;)6 b(\013)243
b Fg(V)m(ar)13 b Ff(=)p Fg(0)p Ff(:)814 616 y(\001)d
Fe(x)g Ff(=)g(\()p Fe(\034)r(;)5 b(\013)990 621 y Fn(1)1007
616 y Ff(\))1021 605 y Fn(0)p 777 629 329 2 v 815 689
a Ff(\006)10 b(\001)896 657 y Fh(n)895 689 y Fx(`)15
b Fe(x)h Ff(:)f Fe(\034)r(;)6 b(\013)1050 694 y Fn(2)1359
652 y Fg(V)m(ar)13 b Fx(\024)p Fg(n)p Ff(:)1569 616 y(\001)d
Fe(x)g Ff(=)g(\()p Fe(\034)r(;)5 b(\013)p Ff(\))1759
605 y Fh(i)1801 616 y Fe(i)10 b Fx(6)p Ff(=)g(0)e Fx(^)f
Fe(i)j Fx(\024)g Fe(n)p 1532 629 504 2 v 1666 689 a Ff(\006)g(\001)1748
657 y Fh(n)1746 689 y Fx(`)16 b Fe(x)f Ff(:)h Fe(\034)r(;)5
b(\013)-34 813 y Fg(Br)14 b(n)p Ff(:)131 789 y(\()p Fe(\013)168
794 y Fn(2)184 789 y Ff(;)6 b(\006\))k(\001)298 758 y
Fh(n)p Fn(+1)316 789 y Fx(`)34 b Fe(e)16 b Ff(:)f Fe(\034)r(;)5
b(\013)485 794 y Fn(1)p 93 802 447 2 v 135 861 a Ff(\006)10
b(\001)217 830 y Fh(n)215 861 y Fx(`)16 b Fd(<)o Fe(e)p
Fd(>)g Ff(:)f Fx(h)6 b Fe(\034)j Fx(i)404 849 y Fh(\013)424
854 y Fm(1)442 861 y Fe(;)d(\013)481 866 y Fn(2)606 813
y Fg(Abs)13 b(n)p Ff(:)794 786 y(\006)e(\001)p Fe(;)6
b(x)j Fx(7!)h Ff(\()p Fe(\034)979 791 y Fn(1)996 786
y Fe(;)c(\013)p Ff(\))1049 775 y Fh(n)1090 755 y(n)1089
786 y Fx(`)15 b Fe(e)h Ff(:)g Fe(\034)1200 791 y Fn(2)1217
786 y Fe(;)5 b(\013)p 757 799 536 2 v 807 858 a Ff(\006)10
b(\001)889 827 y Fh(n)888 858 y Fx(`)15 b Fe(\025)5 b(x)971
847 y Fh(\034)985 852 y Fm(1)1010 858 y Fe(:)g(e)16 b
Ff(:)g Fe(\034)1099 863 y Fn(1)1126 858 y Fx(!)10 b Fe(\034)1187
863 y Fn(2)1204 858 y Fe(;)5 b(\013)1385 813 y Fg(Esc)14
b(n+1)p Ff(:)1630 784 y(\006)c(\001)1712 752 y Fh(n)1710
784 y Fx(`)16 b Fe(e)g Ff(:)f Fx(h)6 b Fe(\034)j Fx(i)1864
772 y Fh(\013)1884 777 y Fm(1)1902 784 y Fe(;)d(\013)1941
789 y Fn(2)p 1579 796 430 2 v 1598 861 a Ff(\()p Fe(\013)1635
866 y Fn(2)1652 861 y Ff(;)f(\006\))10 b(\001)1765 830
y Fh(n)p Fn(+1)1784 861 y Fx(`)33 b Fd(~)r Fe(e)16 b
Ff(:)g Fe(\034)r(;)5 b(\013)1973 866 y Fn(1)-34 1011
y Fg(Run)14 b(n)p Ff(:)161 946 y Fe(\013)184 951 y Fn(2)210
946 y Fx(62)c Fe(F)5 b(V)i Ff(\(\001)p Fe(;)f(\034)t
Ff(\))161 1003 y(\006)k(\001)242 972 y Fh(n)241 1003
y Fx(`)15 b Fe(e)h Ff(:)g Fx(h)5 b Fe(\034)10 b Fx(i)395
992 y Fh(\013)415 997 y Fm(2)433 1003 y Fe(;)c(\013)472
1008 y Fn(1)p 123 1016 403 2 v 169 1075 a Ff(\006)k(\001)251
1044 y Fh(n)249 1075 y Fx(`)16 b Fd(run)8 b Fe(e)16 b
Ff(:)g Fe(\034)r(;)5 b(\013)463 1080 y Fn(1)606 1011
y Fg(App)13 b(n)p Ff(:)801 956 y(\006)d(\001)882 925
y Fh(n)881 956 y Fx(`)15 b Fe(e)934 961 y Fn(1)968 956
y Ff(:)g Fe(\034)1009 961 y Fn(1)1036 956 y Fx(!)10 b
Fe(\034)r(;)5 b(\013)801 1013 y Ff(\006)10 b(\001)882
982 y Fh(n)881 1013 y Fx(`)15 b Fe(e)934 1018 y Fn(2)968
1013 y Ff(:)g Fe(\034)1009 1018 y Fn(1)1026 1013 y Fe(;)6
b(\013)p 763 1026 411 2 v 823 1085 a Ff(\006)k(\001)905
1054 y Fh(n)903 1085 y Fx(`)16 b Fe(e)957 1090 y Fn(1)984
1085 y Fe(e)1000 1090 y Fn(2)1033 1085 y Ff(:)g Fe(\034)r(;)5
b(\013)1367 1011 y Fg(Con)14 b(n:)p Ff(:)1551 975 y Fe(?)p
Fs(Nev)o(er)c(app)q(ears)h(in)h(source)f(terms)p 1532
987 495 2 v 1665 1047 a Ff(\006)g(\001)1747 1015 y Fh(n)1746
1047 y Fx(`)k(")g Fe(v)i Ff(:)f Fe(?)825 1194 y Fk(Dynamic)e(Seman)o
(tics)89 1287 y Fg(In)o(t)f(0)p Ff(:)35 b(\000)16 b Fx(`)f
Fe(i)h(,)-6 b Fx(!)16 b Fe(i)390 1276 y Fi(\005)841 1287
y Fg(In)o(t)d(n+1)p Ff(:)35 b(\000)16 b Fx(`)f Fe(i)1129
1263 y Fh(n)p Fn(+1)1139 1287 y Fe(,)-6 b Fx(!)25 b Fe(i)89
1407 y Fg(Abs)13 b(0)p Ff(:)256 1390 y(\000)p Fe(;)6
b(x)j Fx(7!)h Ff(Sym)o(\()p Fe(x)470 1378 y Fi(0)481
1390 y Ff(\))495 1378 y Fh(\034)533 1390 y Fx(`)16 b
Fe(e)615 1365 y Fn(1)603 1390 y Fe(,)-6 b Fx(!)16 b Fe(e)674
1395 y Fn(1)p 237 1403 473 2 v 256 1442 a Ff(\000)g Fx(`)f
Fe(\025)6 b(x)378 1430 y Fh(\034)403 1442 y Fe(:)g(e)16
b(,)-6 b Fx(!)15 b(f)p Fe(\025)6 b(x)570 1430 y Fi(0)581
1426 y Fh(\034)606 1442 y Fe(:)g(e)638 1447 y Fn(1)655
1442 y Fx(g)673 1430 y Fi(\005)841 1407 y Fg(Abs)13 b(n+1)p
Ff(:)1062 1380 y(\000)p Fe(;)6 b(x)k Fx(7!)g Ff(Sym)n(\()p
Fe(x)1276 1369 y Fi(0)1287 1380 y Ff(\))1301 1369 y Fh(\034)1340
1380 y Fx(`)15 b Fe(e)1393 1385 y Fn(1)1426 1356 y Fh(n)p
Fn(+1)1436 1380 y Fe(,)-6 b Fx(!)25 b Fe(e)1516 1385
y Fn(2)p 1044 1393 509 2 v 1089 1451 a Ff(\000)16 b Fx(`)f
Fe(\025)6 b(x)1211 1439 y Fh(\034)1236 1451 y Fe(:)g(e)1268
1456 y Fn(1)1301 1427 y Fh(n)p Fn(+1)1310 1451 y Fe(,)-6
b Fx(!)25 b Fe(\025)6 b(x)1421 1439 y Fi(0)1432 1436
y Fh(\034)1457 1451 y Fe(:)g(e)1489 1456 y Fn(2)89 1590
y Fg(App)12 b(0)p Ff(:)281 1526 y(\000)k Fx(`)f Fe(e)372
1531 y Fn(1)405 1526 y Fe(,)-6 b Fx(!)16 b(f)p Fe(\025)5
b(x)524 1514 y Fh(\034)550 1526 y Fe(:)g(e)q Fx(g)600
1514 y Fi(\005)281 1563 y Ff(\000)16 b Fx(`)f Fe(e)372
1568 y Fn(2)405 1563 y Fe(,)-6 b Fx(!)16 b Fe(v)477 1568
y Fn(2)281 1600 y Fx(\017)p Fe(;)5 b(x)10 b Fx(7!)g Ff(Real)o(\()p
Fe(v)489 1605 y Fn(2)506 1600 y Ff(\))20 b Fx(`)15 b
Fe(e)h(,)-6 b Fx(!)16 b Fe(v)p 244 1613 476 2 v 361 1652
a Ff(\000)g Fx(`)f Fe(e)452 1657 y Fn(1)480 1652 y Fe(e)496
1657 y Fn(2)529 1652 y Fe(,)-6 b Fx(!)16 b Fe(v)841 1590
y Fg(App)c(n+1)p Ff(:)1069 1563 y(\000)j Fx(`)h Fe(e)1160
1568 y Fn(1)1193 1539 y Fh(n)p Fn(+1)1202 1563 y Fe(,)-6
b Fx(!)25 b Fe(e)1282 1568 y Fn(3)1349 1563 y Ff(\000)16
b Fx(`)f Fe(e)1440 1568 y Fn(2)1473 1539 y Fh(n)p Fn(+1)1483
1563 y Fe(,)-6 b Fx(!)25 b Fe(e)1563 1568 y Fn(4)p 1050
1576 550 2 v 1165 1634 a Ff(\000)16 b Fx(`)f Fe(e)1256
1639 y Fn(1)1284 1634 y Fe(e)1300 1639 y Fn(2)1333 1609
y Fh(n)p Fn(+1)1342 1634 y Fe(,)-6 b Fx(!)26 b Fe(e)1423
1639 y Fn(3)1450 1634 y Fe(e)1466 1639 y Fn(4)89 1763
y Fg(V)m(ar)12 b(0)p Ff(:)250 1736 y(\000)e Fe(x)g Ff(=)g(Real)o(\()p
Fe(v)q Ff(\))p 232 1749 252 2 v 265 1788 a(\000)16 b
Fx(`)f Fe(x)h(,)-6 b Fx(!)16 b Fe(v)830 1763 y Fg(SV)m(ar)c(n+1)p
Ff(:)1068 1727 y(\000)e Fe(x)g Ff(=)g(Sym)n(\()p Fe(x)1268
1715 y Fi(0)1279 1727 y Ff(\))1293 1715 y Fh(\034)p 1049
1740 282 2 v 1083 1798 a Ff(\000)15 b Fx(`)h Fe(x)1193
1773 y Fh(n)p Fn(+1)1202 1798 y Fe(,)-6 b Fx(!)26 b Fe(x)1287
1786 y Fi(0)1398 1763 y Fg(R)-5 b(V)m(ar)13 b(n+1)p Ff(:)1650
1727 y(\000)d Fe(x)g Ff(=)g(Real)o(\()p Fe(v)q Ff(\))p
1621 1740 273 2 v 1639 1798 a(\000)16 b Fx(`)f Fe(x)1750
1773 y Fh(n)p Fn(+1)1759 1798 y Fe(,)-6 b Fx(!)25 b(")16
b Fe(v)841 1908 y Fg(EV)m(ar)c(n+1)p Ff(:)1143 1872 y
Fe(x)h(=)-22 b Fx(2)10 b Ff(\000)p 1065 1885 242 2 v
1083 1943 a(\000)16 b Fx(`)f Fe(x)1194 1919 y Fh(n)p
Fn(+1)1203 1943 y Fe(,)-6 b Fx(!)25 b Fe(x)89 2060 y
Fg(Brac)o(k)o(et)13 b(0)p Ff(:)364 2043 y(\000)j Fx(`)f
Fe(e)455 2048 y Fn(1)500 2018 y(1)488 2043 y Fe(,)-6
b Fx(!)16 b Fe(e)559 2048 y Fn(2)p 305 2055 331 2 v 324
2095 a Ff(\000)g Fx(`)f Fd(<)o Fe(e)432 2100 y Fn(1)450
2095 y Fd(>)g Fe(,)-6 b Fx(!)16 b(h)p Fe(e)568 2100 y
Fn(2)586 2095 y Fx(i)600 2083 y Fi(\005)841 2060 y Fg(Brac)o(k)o(et)d
(n+1)p Ff(:)1156 2036 y(\000)j Fx(`)f Fe(e)1247 2041
y Fn(1)1280 2012 y Fh(n)p Fn(+1)1290 2036 y Fe(,)-6 b
Fx(!)25 b Fe(e)1370 2041 y Fn(2)p 1111 2049 321 2 v 1130
2101 a Ff(\000)16 b Fx(`)f Fd(<)p Fe(e)1239 2106 y Fn(1)1256
2101 y Fd(>)1300 2077 y Fh(n)1290 2101 y Fe(,)-6 b Fx(!)16
b Fd(<)o Fe(e)1378 2106 y Fn(2)1396 2101 y Fd(>)89 2221
y Fg(Escap)q(e)c(1)p Ff(:)310 2185 y(\000)j Fx(`)g Fe(e)400
2190 y Fn(1)434 2185 y Fe(,)-6 b Fx(!)16 b(h)p Fe(e)519
2190 y Fn(2)536 2185 y Fx(i)550 2173 y Fi(\005)p 291
2198 296 2 v 322 2256 a Ff(\000)g Fx(`)f Fd(~)r Fe(e)433
2261 y Fn(1)479 2231 y(1)467 2256 y Fe(,)-6 b Fx(!)16
b Fe(e)538 2261 y Fn(2)841 2221 y Fg(Escap)q(e)d(n+2)p
Ff(:)1146 2194 y(\000)j Fx(`)f Fe(e)1237 2199 y Fn(1)1270
2170 y Fh(n)p Fn(+1)1279 2194 y Fe(,)-6 b Fx(!)26 b Fe(e)1360
2199 y Fn(2)p 1097 2207 329 2 v 1116 2265 a Ff(\000)16
b Fx(`)f Fd(~)r Fe(e)1227 2270 y Fn(1)1260 2240 y Fh(n)p
Fn(+2)1270 2265 y Fe(,)-6 b Fx(!)44 b Fd(~)s Fe(e)1390
2270 y Fn(2)89 2385 y Fg(Run)13 b(0)p Ff(:)262 2358 y(\000)j
Fx(`)f Fe(e)h(,)-6 b Fx(!)16 b(h)p Fe(e)454 2363 y Fn(1)471
2358 y Fx(i)485 2346 y Fi(\005)542 2358 y Fx(\017)k(`)15
b Fe(e)633 2363 y Fn(1)666 2358 y Fe(,)-6 b Fx(!)16 b
Fe(v)738 2363 y Fn(1)p 243 2371 531 2 v 379 2410 a Ff(\000)g
Fx(`)f Fd(run)9 b Fe(e)16 b(,)-6 b Fx(!)16 b Fe(v)621
2415 y Fn(1)841 2385 y Fg(Run)d(n+1)p Ff(:)1131 2358
y(\000)j Fx(`)f Fe(e)1222 2363 y Fn(1)1256 2334 y Fh(n)p
Fn(+1)1265 2358 y Fe(,)-6 b Fx(!)25 b Fe(e)1345 2363
y Fn(2)p 1050 2371 395 2 v 1069 2428 a Ff(\000)15 b Fx(`)g
Fd(run)9 b Fe(e)1222 2433 y Fn(1)1256 2404 y Fh(n)p Fn(+1)1265
2428 y Fe(,)-6 b Fx(!)25 b Fd(run)9 b Fe(e)1408 2433
y Fn(2)89 2522 y Fg(Constan)o(t)k(0)p Ff(:)35 b(\000)16
b Fx(`)f(")g Fe(v)i(,)-6 b Fx(!)16 b Fe(v)298 b Fg(Constan)o(t)13
b(n+1)p Ff(:)35 b(\000)15 b Fx(`)g(")h Fe(v)1278 2497
y Fh(n)p Fn(+1)1287 2522 y Fe(,)-6 b Fx(!)25 b(")16 b
Fe(v)p 2106 2568 2 2643 v -76 2570 2183 2 v 682 2649
a Fv(Figure)e(1:)j Fk(The)d(Seman)o(tics)g(of)h Fq(\025)1221
2633 y Fi(M)p eop
%%Page: 9 9
9 8 bop -76 -34 a Fw(11)40 b(Optimizations)-76 44 y(11.1)g(Safe)13
b(Beta)h(Reduction)-76 110 y Fv(T)m(o)g(write)h(m)o(ulti-stage)h
(programs)f(e\013ectiv)o(ely)m(,)h(one)f(needs)g(to)f(ob-)-76
151 y(serv)o(e)k(the)g(programs)h(pro)q(duced,)i(and)d(these)h
(programs)f(should)-76 193 y(b)q(e)g(as)g(simple)h(as)f(p)q(ossible.)34
b(F)m(or)17 b(this)i(reason,)g(our)f(implemen-)-76 234
y(tation)d(p)q(erforms)g(automatic)g Fu(safe-b)n(eta)d(r)n(e)n(duction)
g Fv(on)i(constan)o(ts)-76 276 y(and)f(v)n(ariables.)19
b(A)12 b(b)q(eta)g(reduction)i(is)f(safe)f(if)g(it)h(do)q(es)g(not)f(c)
o(hange)-76 317 y(ev)n(aluation)17 b(order,)d(or)h(e\013ect)f
(termination)i(prop)q(erties.)22 b(There)15 b(is)-76
359 y(one)c(safe)f(case)g(whic)o(h)h(is)g(particularly)j(easy)c(to)g
(recognize,)i(namely)m(,)-76 400 y(Plotkin's)23 b Fq(\014)116
404 y Fh(v)154 400 y Fv(rule)f([26].)39 b(Whenev)o(er)22
b(an)f(application)j(is)d(con-)-76 442 y(structed)16
b(where)f(the)g(function)i(part)e(is)h(an)f(explicit)j(lam)o(b)q(da)e
(ab-)-76 483 y(straction,)d(and)e(the)h(argumen)o(t)g(part)f(is)h(a)f
(v)n(alue,)h(then)g(that)f(appli-)-76 525 y(cation)k(can)g(b)q(e)f(sym)
o(b)q(olicall)q(y)j(b)q(eta)d(reduced.)21 b(In)14 b(order)g(to)g(a)o(v)
o(oid)-76 566 y(duplicatin)q(g)j(co)q(de)d(w)o(e)f(restrict)i(our)f
(optimization)q(s)i(to)e(constan)o(ts)-76 608 y(or)i(v)n(ariables)i
(\(while)f(Plotkin's)g Fq(\014)440 612 y Fh(v)474 608
y Fv(rule)f(also)h(allo)o(ws)g(the)f(v)n(alues)-76 649
y(to)d(b)q(e)g(lam)o(b)q(da)i(expressions\).)k(F)m(or)13
b(example)h(in:)-76 721 y Fo(val)19 b(g)g(=)g(<fn)g(x)g(=>)g(x)g(*)g
(5>;)-76 762 y(val)g(h)g(=)g(<fn)g(x)g(=>)g(\(~g)f(x\))h(-)g(2>;)-76
834 y Fv(The)9 b(v)n(ariable)i(h)e(ev)n(aluates)h(to:)15
b Fo(<fn)j(d1)h(=>)g(\(d1)f(*)h(5\))g(-)g(2>)8 b Fv(rather)-76
875 y(than)14 b Fo(<fn)k(d1)h(=>)g(\(\(fn)f(d2)h(=>)g(d2)f(*)i(5\))f
(d1\))f(-)h(2>)p Fv(.)-20 917 y(W)m(e)h(realize)g(of)f(course)h(that)g
(this)g(migh)o(t)g(mak)o(e)g(it)f(hard)h(to)-76 958 y(understand)h
Fu(why)e Fv(a)g(particular)j(program)e(w)o(as)f(generated.)37
b(In)-76 1000 y(our)13 b(exp)q(erience,)h(the)f(resulting)h(smaller,)g
(simpler)g(programs,)f(are)-76 1041 y(easier)h(to)f(understand)i(and)f
(mak)o(e)f(this)h(tradeo\013)g(w)o(orth)o(while.)-76
1135 y Fw(11.2)40 b(Nested)14 b(Escap)q(es)-76 1201 y
Fv(When)e(w)o(e)f(\014rst)g(wrote)g(programs)h(with)g(more)f(than)g(t)o
(w)o(o)g(lev)o(els)i(w)o(e)-76 1242 y(observ)o(ed)18
b(that)f(our)f(programs)i(to)q(ok)f(a)f(long)i(time)f(to)f(run.)28
b(W)m(e)-76 1284 y(traced)14 b(this)h(to)e(rule)i Fg(Escap)q(e)e(n+2)g
Fv(of)h(our)g(seman)o(tics.)20 b(Consider)-76 1325 y(the)9
b(case)g(where)g(a)g(deeply)i(brac)o(k)o(eted)e(term)g
Fq(e)g Fv(at)f(lev)o(el)j Fq(n)e Fv(is)g(escap)q(ed)-76
1367 y(all)15 b(the)e(w)o(a)o(y)h(to)f(lev)o(el)i(0.)j(In)c(order)f(to)
h(execute)g(this)g(term)f(\(whic)o(h)-76 1408 y(escap)q(es)h(to)f(lev)o
(el)i(0\))e(it)h(m)o(ust)f(b)q(e)g(rebuilt)i Fq(n)f Fv(times.)k
(Consider)c(the)-76 1450 y(reduction)19 b(sequence)f(sk)o(etc)o(hed)g
(b)q(elo)o(w)g(for)f(the)h(term)f Fo(run)h(\(run)-76
1491 y(<<)i(~)m(~)l(e)f(>>\))p Fv(,)10 b(where)h Fo(e)g
Fv(is)h(b)q(ound)g(in)g(\000)f(to)g Fo(<5>)p Fv(,)f(of)g(whic)o(h)i(w)o
(e)f(sho)o(w)-76 1533 y(only)j(the)g(innermost)g Fo(run)p
Fv(.)140 1611 y Fq(e)j(,)-6 b Fp(!)17 b(h)p Fo(<)o Fv(5)p
Fo(>)p Fp(i)323 1595 y Fi(\005)p 26 1625 429 2 v 152
1685 a Fo(~)t Fq(e)225 1659 y Fn(1)211 1685 y Fq(,)-6
b Fp(!)17 b Fo(<)p Fv(5)p Fo(>)p 26 1699 V 128 1760 a(~)t(~)t
Fq(e)225 1734 y Fn(2)211 1760 y Fq(,)-6 b Fp(!)17 b Fo(~)t(<)p
Fv(5)p Fo(>)p 26 1774 V 89 1834 a(<)o(~)t(~)5 b Fq(e)p
Fo(>)225 1808 y Fn(1)211 1834 y Fq(,)-6 b Fp(!)17 b Fo(<~)t(<)o
Fv(5)p Fo(>>)p 26 1848 V 45 1891 a(<<)o(~)5 b(~)t Fq(e)p
Fo(>)o(>)17 b Fq(,)-6 b Fp(!)17 b(h)p Fo(<)o(~)t(<)p
Fv(5)p Fo(>>)o Fp(i)418 1876 y Fi(\005)609 1702 y Fv(5)659
1676 y Fn(1)645 1702 y Fq(,)-6 b Fp(!)17 b Fv(5)p 515
1716 304 2 v 565 1760 a Fo(<)p Fv(5)p Fo(>)g Fq(,)-6
b Fp(!)17 b(h)p Fv(5)p Fp(i)750 1744 y Fi(\005)p 515
1774 V 577 1834 a Fo(~)5 b(<)o Fv(5)p Fo(>)691 1808 y
Fn(1)677 1834 y Fq(,)-6 b Fp(!)17 b Fv(5)p 515 1848 V
534 1891 a Fo(<)o(~)5 b(<)o Fv(5)p Fo(>>)17 b Fq(,)-6
b Fp(!)16 b(h)p Fv(5)p Fp(i)781 1876 y Fi(\005)p 8 1906
830 2 v 243 1949 a Fo(run)10 b(<)o(<~)t(~)t Fq(e)p Fo(>>)17
b Fq(,)-6 b Fp(!)16 b(h)p Fv(5)p Fp(i)583 1933 y Fi(\005)-76
2029 y Fv(F)m(or)h(t)o(w)o(o)g(lev)o(els)i(the)e(term)g(is)h(rebuilt)h
(2)e(times.)30 b(F)m(or)17 b(three)h(lev-)-76 2070 y(els)h(the)f(term)h
(is)f(rebuilt)i(3)f(times.)33 b(A)18 b(simple)i(re\014nemen)o(t)f(can)
-76 2112 y(prev)o(en)o(t)d(this)g(from)e(happ)q(ening.)26
b(W)m(e)15 b(c)o(hange)h(the)f(rebuildin)q(g)i(of)-76
2153 y(escap)q(ed)f(expressions)i(at)d(lev)o(els)i(greater)e(than)h(1)f
(b)o(y)h(adding)h(the)-76 2195 y(rule)d Fg(Escap)q(e)f(Opt)f(n+2)g
Fv(in)i(addition)i(to)d(the)g(rule)h Fg(Escap)q(e)e(n+2)p
Fv(.)73 2319 y Fg(Escap)q(e)g(Opt)h(n+2)p Ff(:)435 2289
y Fv(\000)k Fp(`)h Fq(e)535 2293 y Fn(1)569 2263 y Fh(n)p
Fn(+1)576 2289 y Fq(,)-6 b Fp(!)25 b Fo(<)o Fq(e)681
2293 y Fn(2)698 2289 y Fo(>)p 413 2303 327 2 v 432 2363
a Fv(\000)17 b Fp(`)g Fo(~)5 b Fq(e)556 2367 y Fn(1)590
2337 y Fh(n)p Fn(+2)597 2363 y Fq(,)-6 b Fp(!)46 b Fq(e)704
2367 y Fn(2)102 2531 y Fg(Escap)q(e)12 b(n+2)p Ff(:)413
2501 y Fv(\000)17 b Fp(`)h Fq(e)513 2505 y Fn(1)547 2475
y Fh(n)p Fn(+1)555 2501 y Fq(,)-6 b Fp(!)24 b Fq(e)640
2505 y Fn(2)p 360 2515 351 2 v 378 2575 a Fv(\000)18
b Fp(`)f Fo(~)t Fq(e)502 2579 y Fn(1)537 2549 y Fh(n)p
Fn(+2)544 2575 y Fq(,)-6 b Fp(!)46 b Fo(~)t Fq(e)675
2579 y Fn(2)1020 -34 y Fv(Th)o(us)19 b(a)f(long)i(sequence)f(of)g
(escap)q(es)g(surrounded)h(b)o(y)f(an)g(equal)1020 7
y(n)o(um)o(b)q(er)13 b(of)f(brac)o(k)o(ets)i(gets)e(rebuilt)i(exactly)g
(one.)j(This)c(optimiza-)1020 49 y(tion)g(is)f(safe)g(since)h(there)f
(are)f(no)i(v)n(ariables)h(in)e(a)g(rebuilt)h(term.)k(So)1020
90 y(rebuilding)f(it)d(more)f(than)i(once)e(p)q(erforms)h(no)g(useful)h
(w)o(ork.)i(This)1020 132 y(correctness)h(of)g(this)g(optimization)i
(follo)o(ws)f(from)e(the)h(fact)f(that)1020 173 y(under)f(our)g(seman)o
(tics)g(inside)h(nesting)g(brac)o(k)o(ets)f Fo(~)t(<)p
Fq(e)p Fo(>)e Fv(is)i(alw)o(a)o(ys)1020 215 y(equal)f(to)f
Fq(e)p Fv(.)1020 311 y Fw(12)40 b(Discussion)12 b(and)h(Related)g(W)o
(o)o(rks)1020 389 y Fv(A)20 b(summary)g(of)g(the)g(distinguis)q(hi)q
(ng)j(c)o(haracteristics)f(of)e(other)1020 431 y(w)o(ork)15
b(on)g(m)o(ulti-stage)h(languages)h(is)e(sho)o(wn)g(in)g(\014gure)h(2.)
21 b(In)15 b(the)1020 472 y(\014gure)e(w)o(e)e(list)i(whether)g(or)f
(not)g(that)g(w)o(ork)g(con)o(tains)h(the)f(prop)q(er-)1020
514 y(ties)i(w)o(e)e(b)q(eliev)o(e)j(to)e(b)q(e)g(imp)q(ortan)o(t.)19
b(Those)13 b(prop)q(erties)i(are:)1076 580 y Fp(\017)j
Fv(Staging:)31 b(Staging)21 b(can)f(b)q(e)f(expressed)h(in)g(all)h
(these)e(lan-)1113 622 y(guages,)12 b(in)f(the)g(sense)g(that)g(co)q
(de)g(represen)o(ting)h(expressions)1113 663 y(can)f(b)q(e)g
(expressed,)g(and)g(that)g(applications)i(can)e(b)q(e)f(dela)o(y)o(ed)
1113 705 y(to)h(future)g(stages.)17 b(In)11 b(this)h(ro)o(w,)e(\\2")i
(means)f(t)o(w)o(o)g(stages)g(are)1113 746 y(supp)q(orted,)j(and)e
(\\+")g(means)g(arbitrary)h(n)o(um)o(b)q(er)f(of)g(stages)1113
788 y(is)i(supp)q(orted.)1076 854 y Fp(\017)k Fv(Strong)13
b(T)o(yping:)k(In)12 b(a)g(single)h(stage)f(language,)i(strong)e(t)o
(yp-)1113 896 y(ing)e(ensures)g(that)f(a)g(w)o(ell-t)o(yp)q(ed)h
(program)f(\\cannot)h(go)f(wrong")1113 937 y(b)o(y)j(applying)i
(functions)e(to)f(argumen)o(ts)h(of)f(the)g(wrong)g(t)o(yp)q(e.)1113
979 y(In)17 b(addition,)k(m)o(ulti-stage)d(programs)g(can)f(go)h(wrong)
f(if)g(a)1113 1020 y(computation)k(attempts)f(to)f(use)g(a)g(v)n
(ariable)i(b)q(efore)e(it)h(is)1113 1062 y(a)o(v)n(ailable)q(.)h(A)13
b(strongly)i(t)o(yp)q(ed)f(m)o(ulti-stage)h(language)h(pro-)1113
1103 y(tects)d(against)i(b)q(oth)f(kinds)g(of)f(errors.)1076
1169 y Fp(\017)18 b Fv(Monolithi)q(c)k(V)m(ariables:)31
b(Whether)21 b(a)e(v)n(ariable)j(from)d(one)1113 1211
y(stage)14 b(can)f(b)q(e)h(used)g(in)g(all)g(reasonable)h(w)o(a)o(ys)e
(at)h(that)f(same)1113 1252 y(stage.)20 b(In)14 b(the)g(example,)i
Fo(f)d Fv(is)h(applied)j(to)c Fo(<x>)o Fv(,)h(and)g(hence)1113
1294 y Fo(f)f Fv(is)g(acting)i(as)e(a)g(\\co)q(de)h(transformer".)1076
1360 y Fp(\017)k Fo(run)e Fv(or)g Fq(ev)q(al)i Fv(function:)25
b(The)17 b(languages)h(also)g(come)f(with)1113 1402 y(di\013eren)o(t)k
(set)e(of)f(m)o(ulti-stage)j(programming)f(constructs.)1113
1443 y(In)c(particular,)i(not)e(all)h(the)f(language)h(allo)o(w)g
(re\015ection)g(in)1113 1485 y(the)12 b(form)f(of)g(a)g
Fo(run)f Fv(or)h Fq(ev)q(al)i Fv(function.)k(Most)12
b(notably)m(,)h(ev)o(en)1113 1526 y(in)j(the)g(most)f(recen)o(t)h(w)o
(ork)f(of)g(Da)o(vies,)h(it)g(w)o(as)f(not)h(kno)o(wn)1113
1568 y(ho)o(w)d Fq(ev)q(al)i Fv(could)f(b)q(e)f(included)j(in)e(the)f
(language)i([6].)1076 1634 y Fp(\017)j Fv(Cross-Stage)c(P)o
(ersistence:)k(This)c(is)f(the)g(most)g(distinguish)q(-)1113
1675 y(ing)h(feature)g(of)e(MetaML,)h(and)h(has)g(b)q(een)f(discussed)i
(in)f(de-)1113 1717 y(tail)i(in)f(this)f(pap)q(er.)21
b(T)m(o)14 b(our)g(kno)o(wledge,)i(this)e(feature)h(has)1113
1758 y(not)10 b(b)q(een)f(prop)q(osed)h(or)f(incorp)q(orated)i(in)o(to)
f(an)o(y)f(m)o(ulti-stage)1113 1800 y(programming)15
b(language.)k(In)13 b(essence,)g(cross-stage)g(p)q(ersis-)1113
1841 y(tence)j(means)g(that)f(the)h(programmer)g(can)f(use)h(a)f(v)n
(ariable)1113 1883 y(b)q(ound)i(in)g(an)o(y)f(stage)f(in)i(an)e
(expression)j(executed)e(in)h(an)o(y)1113 1925 y(future)g(stage.)29
b(Alternativ)o(ely)m(,)19 b(it)f(allo)o(ws)g(us)f(to)f(stage)h(ex-)1113
1966 y(pressions)d(con)o(taining)h(free)d(v)n(ariables,)i(as)e(long)h
(as)g(the)f(t)o(yp)q(e)1113 2008 y(system)19 b(is)h(satis\014ed)g(that)
f(these)g(v)n(ariables)i(are)d(a)o(v)n(ailable)1113 2049
y(b)q(efore)c(this)g(expression)h(is)e(ev)n(aluated.)1076
2115 y Fp(\017)18 b Fv(Cross-Platform)f(P)o(ortabilit)o(y:)24
b(The)15 b(abilit)o(y)j(to)d(prin)o(t)i(gen-)1113 2157
y(erated)11 b(co)q(de)g(as)g(text.)16 b(This)11 b(allo)o(ws)h(co)q(de)f
(generated)g(on)g(one)1113 2198 y(mac)o(hine)i(to)e(b)q(e)h(compiled)i
(and)e(run)f(on)h(other)g(mac)o(hines.)18 b(If)1113 2240
y(co)q(de)11 b(em)o(b)q(eds)g(its)f(o)o(wn)g(\\lo)q(cal)i(en)o
(vironmen)o(t")g(this)f(b)q(ecomes)1113 2281 y(considerably)18
b(more)c(di\016cult.)23 b(The)15 b(loss)g(of)f(this)i(abilit)o(y)h(is)
1113 2323 y(the)d(price)g(paid)g(for)f(cross)g(stage)g(p)q(ersistence.)
1076 2390 y(In)i(what)g(follo)o(ws)i(is)e(an)h(historical)i(p)q(ersp)q
(ectiv)o(e)f(of)e(the)g(w)o(ork)1020 2431 y(highligh)o(ted)i(in)c(the)g
(table:)1076 2498 y Fp(\017)18 b Fv(NN:)10 b(Nielson)i(and)e(Nielson)i
(pioneered)h(the)d(in)o(v)o(estigation)j(of)1113 2539
y(staged)18 b(languages)h(with)f(their)g(t)o(w)o(o-lev)o(el)g
(functional)h(lan-)1113 2581 y(guage)j([25,)f(24].)40
b(They)21 b(presen)o(ted)h(rules)g(for)e(the)h(w)o(ell-)1113
2622 y(formedness)16 b(of)e(the)h(binding-time)q(s)i(of)e(expressions)h
(in)g(the)p eop
%%Page: 10 10
10 9 bop -63 -33 1980 2 v -64 13 2 46 v -41 0 a Fk(F)l(acilit)o(y)p
365 13 V 286 w(Example)p 665 13 V 132 w Fv(NN)13 b([25])p
840 13 V 44 w(GA)g([11])p 1016 13 V 45 w(GB)g([9])p 1172
13 V 44 w(Th)g([31])p 1338 13 V 45 w(HG)f([12])p 1515
13 V 45 w Fq(\025)1560 -15 y Fb(2)1596 0 y Fv([7])p 1658
13 V 44 w Fq(\025)1703 -15 y Fi(\015)1749 0 y Fv([6])p
1811 13 V 44 w Fq(\025)1856 -15 y Fi(M)p 1916 13 V -63
15 1980 2 v -64 56 2 42 v -41 44 a Fv(Staging)p 365 56
V 305 w Fo(<)p Fq(\025)p Fo(x.x)o(>)p 665 56 V 235 w
Fv(2)p 840 56 V 156 w(2)p 1016 56 V 142 w(+)p 1172 56
V 136 w(2)p 1338 56 V 147 w(+)p 1515 56 V 130 w(+)p 1658
56 V 119 w(+)p 1811 56 V 99 w(+)p 1916 56 V -63 58 1980
2 v -64 99 2 42 v -41 87 a(Strong)i(T)o(yping)p 365 99
V 665 99 V 538 w(Y)p 840 99 V 151 w(1)p 1016 99 V 143
w(N)p 1172 99 V 132 w(N)p 1338 99 V 142 w(N)p 1515 99
V 131 w(Y)p 1658 99 V 119 w(Y)p 1811 99 V 100 w(Y)p 1916
99 V -63 101 1980 2 v -64 142 2 42 v -41 130 a(Monolithi)q(c)h(V)m
(ariables)p 365 142 V 84 w Fo(<)p Fq(\025)p Fo(x.)q(~)l(\(f)j(<x>)o
(\)>)p 665 142 V 95 w Fv(Y)p 840 142 V 147 w(Y)p 1016
142 V 137 w(Y)p 1172 142 V 132 w(Y)p 1338 142 V 142 w(Y)p
1515 142 V 131 w(N)p 1658 142 V 119 w(Y)p 1811 142 V
100 w(Y)p 1916 142 V -63 144 1980 2 v -64 186 2 42 v
-41 173 a(Re\015ection)p 365 186 V 264 w Fo(run)h(or)g
Fq(ev)q(al)p 665 186 V 144 w Fv(N)p 840 186 V 147 w(N)p
1016 186 V 137 w(N)p 1172 186 V 132 w(Y)p 1338 186 V
142 w(N)p 1515 186 V 131 w(Y)p 1658 186 V 119 w(N)p 1811
186 V 100 w(Y)p 1916 186 V -63 187 1980 2 v -64 229 2
42 v -41 216 a(X-Stage)14 b(P)o(ersistance)p 365 229
V 96 w Fq(\025)p Fo(f.<)p Fq(\025)p Fo(x.f)k(x>)p 665
229 V 129 w Fv(N)p 840 229 V 147 w(N)p 1016 229 V 137
w(N)p 1172 229 V 132 w(N)p 1338 229 V 142 w(N)p 1515
229 V 131 w(N)p 1658 229 V 119 w(N)p 1811 229 V 100 w(Y)p
1916 229 V -63 230 1980 2 v -64 272 2 42 v -41 260 a(X-Platform)c(P)o
(ortabilit)o(y)p 365 272 V 665 272 V 398 w(Y)p 840 272
V 147 w(Y)p 1016 272 V 137 w(Y)p 1172 272 V 132 w(Y)p
1338 272 V 142 w(Y)p 1515 272 V 131 w(Y)p 1658 272 V
119 w(Y)p 1811 272 V 100 w(N)p 1916 272 V -63 274 1980
2 v 684 345 a(Figure)g(2:)j(Comparativ)o(e)d(feature)f(set)18
469 y(language,)23 b(from)e(whic)o(h)g(MetaML's)f(t)o(yp)q(e)h(rules)h
(are)e(de-)18 510 y(riv)o(ed.)g(They)13 b(also)i(sk)o(etc)o(hed)g
(guidelines)i(for)c(a)h(m)o(ulti-stage)18 552 y(\(\\)p
Fq(B)r Fv(-lev)o(el"\))d(language.)18 b(The)10 b(t)o(w)o(o-lev)o(el)g
(language)i(is)f(widely)18 593 y(used)j(to)g(describ)q(e)h
(binding-time)i(annotations)f(in)e(the)g(par-)18 635
y(tial)g(ev)n(aluation)h(literature.)-20 706 y Fp(\017)k
Fv(GA:)g(Gomard)h(and)g(Jones)g(use)g(a)g(statically-t)o(yp)q(ed)j(t)o
(w)o(o-)18 748 y(stage)17 b(language)j(for)d(partial)i(ev)n(aluation)h
(of)d(the)h(un)o(t)o(yp)q(ed)18 789 y Fq(\025)p Fv(-calculus)e([11].)i
(The)c(language)i(allo)o(ws)f(the)f(treatmen)o(t)f(of)18
831 y(expressions)g(con)o(taining)h(monolithic)g(free)c(v)n(ariables.)
19 b(They)18 872 y(use)d(a)g(\\const")g(construct)h(only)g(for)f
(constan)o(ts)g(of)g(ground)18 914 y(t)o(yp)q(e.)h(Our)11
b(treatmen)o(t)i(of)e(v)n(ariables)k(in)d(the)g(formal)h(seman-)18
955 y(tics)g(is)h(inspired)h(b)o(y)e(their)h(w)o(ork.)-20
1027 y Fp(\017)19 b Fv(GB:)12 b(Gl)q(\177)-20 b(uc)o(k)13
b(and)g(J\034rgensen)g([9])f(presen)o(t)h(the)g(no)o(v)o(el)g(idea)g
(of)18 1068 y(m)o(ulti-lev)o(el)h(BT)m(A,)d(as)i(a)f(v)o(ery)g
(e\016cien)o(t)h(and)f(e\013ectiv)o(e)i(alter-)18 1110
y(nate)i(to)g(m)o(ultiple)j(self-applicatio)q(n.)29 b(An)17
b(un)o(t)o(yp)q(ed)g(m)o(ulti-)18 1151 y(lev)o(el)c(language)g(based)f
(on)g(Sc)o(heme)g(is)h(used)f(for)f(the)h(presen-)18
1193 y(tation.)17 b(Our)c(study)g(of)f(MetaML)g(is)h(at)f(a)g(more)h
(basic)g(lev)o(el:)18 1234 y(MetaML)d(is)h(an)g(abstract)g(calculus.)19
b(It)10 b(is)h(also)g(notable)h(that)18 1276 y(all)j(in)o(termediate)h
(results)g(in)f(GJ)f(are)g(prin)o(table,)j(i.e.,)d(ha)o(v)o(e)18
1317 y(an)d(in)o(tensional)k(represen)o(tation.)k(In)11
b(MetaML,)g(cross-stage)18 1359 y(p)q(ersistence)j(allo)o(ws)f(us)g(to)
f(ha)o(v)o(e)h(in)o(termediate)i(results)e(\(b)q(e-)18
1400 y(t)o(w)o(een)h(stages\))g(that)h(con)o(tain)h(constan)o(ts)f(for)
f(whic)o(h)h(no)g(in-)18 1442 y(ten)o(tional)d(represen)o(tation)g(is)f
(a)o(v)n(ailable.)19 b(While)12 b(this)f(is)g(v)o(ery)18
1483 y(con)o(v)o(enien)o(t)k(for)e(run-time)h(co)q(de)g(generation,)h
(it)e(mak)o(es)h(the)18 1525 y(prop)q(er)e(sp)q(eci\014cation)i(of)c
(MetaML)i(more)f(di\016cult.)18 b(F)m(or)11 b(ex-)18
1566 y(ample,)19 b(w)o(e)f(can't)g(use)g([9]'s)f(\\Generic)i(Co)q(de)f
(Generation)18 1608 y(functions")d(to)e(de\014ne)i(the)e(language.)21
b(A)13 b(second)i(pap)q(er)f(b)o(y)18 1649 y(Gl)q(\177)-20
b(uc)o(k)12 b(and)h(J\034rgensen)f([10])f(demonstrates)i(the)f
(impressiv)o(e)18 1691 y(e\016ciency)h(of)e(MBT)m(A,)g(and)i(the)f(use)
g(of)f(constrain)o(ts-solvi)q(ng)18 1732 y(metho)q(ds)i(to)g(p)q
(erform)g(the)g(analysis.)19 b(The)12 b(MBT)m(A)h(is)g(t)o(yp)q(e-)18
1774 y(based,)g(but)h(underlying)i(language)f(is)e(dynamicall)q(y)j(t)o
(yp)q(ed.)-20 1845 y Fp(\017)j Fv(Th:)h(Thiemann)c([31])f(studies)h(a)f
(t)o(w)o(o-lev)o(el)h(language)h(with)18 1887 y Fo(eval)n
Fv(,)d Fo(apply)n Fv(,)f(and)i Fo(call/cc)m Fv(,)f(in)h(the)f(con)o
(text)h(of)e(studying)18 1928 y(the)18 b(partial)i(ev)n(aluation)h(of)d
(a)g(greater)h(subset)g(of)f(sc)o(heme)18 1970 y(than)10
b(w)o(as)g(done)g(previously)m(.)19 b(A)9 b(BT)m(A)g(based)i(on)f
(constrain)o(t-)18 2011 y(solving)i(is)f(presen)o(ted.)17
b(Although)11 b(the)g(problems)g(with)g Fo(eval)18 2053
y Fv(and)e Fo(call/cc)d Fv(are)j(highlighted,)j(and)e(unlik)o(e)h(with)
e(MetaML,)18 2094 y(there)i(is)g(no)g(explicit)i(notion)g(of)d
(partially)k(static)d(t)o(yp)q(es,)h(and)18 2136 y(so,)17
b(the)g(complexit)o(y)j(of)c(in)o(tro)q(ducing)k Fo(eval)15
b Fv(in)o(to)j(a)f(m)o(ulti-)18 2177 y(stage)10 b(language)h(do)q(es)g
(not)f(manifest)g(itself.)17 b(Thiemann)11 b(also)18
2219 y(deals)f(with)f(the)h(issue)g(of)f(v)n(ariable-arit)o(y)j
(functions,)f(whic)o(h)f(is)18 2260 y(a)f(practical)i(problem)g(when)f
(dealing)i(with)e Fo(eval)e Fv(in)i(Sc)o(heme.)-20 2332
y Fp(\017)19 b Fv(HG:)12 b(Hatcli\013)i(&)e(Gl)q(\177)-20
b(uc)o(k)14 b(studied)g(a)f(m)o(ulti-stage)h(\015o)o(w-c)o(hart)18
2373 y(language)c(called)h(S-Graph-n,)f(and)g(thoroughly)h(in)o(v)o
(estigated)18 2415 y(the)18 b(issues)i(in)o(v)o(olv)o(ed)h(in)e(the)g
(implemen)o(tation)j(of)c(suc)o(h)h(a)18 2456 y(language)12
b([12].)k(The)10 b(syn)o(tax)i(of)e(S-Graph-n)i(explicitly)i(cap-)18
2498 y(tures)i(all)g(the)g(information)i(necessary)f(for)e(sp)q
(ecifying)j(the)18 2539 y(staging)13 b(of)f(a)g(computation:)18
b(eac)o(h)12 b(construct)h(is)g(annotated)18 2581 y(with)g(a)h(n)o(um)o
(b)q(er)g(indicating)j(the)c(stage)h(during)h(whic)o(h)g(it)f(is)18
2622 y(to)i(b)q(e)g(executed,)i(and)f(all)g(v)n(ariables)i(are)d
(annotated)i(with)1113 469 y(a)c(n)o(um)o(b)q(er)h(indicating)i(the)d
(stage)h(of)e(their)i(a)o(v)n(ailabil)q(i)q(t)o(y)m(.)22
b(S-)1113 510 y(Graph-n)c(is)g(not)f(statically)j(t)o(yp)q(ed,)e(and)g
(the)f(syn)o(tax)g(and)1113 552 y(formal)22 b(seman)o(tics)g(of)f(the)g
(language)i(are)e(quite)g(sizable.)1113 593 y(Programming)15
b(in)e(S-Graph-n)g(requires)h(the)e(user)h(to)f(anno-)1113
635 y(tate)k(ev)o(ery)h(construct)g(and)f(v)n(ariable)i(with)f(stage)f
(annota-)1113 676 y(tions,)e(and)f(ensuring)h(the)e(consistency)i(of)e
(the)h(annotations)1113 718 y(is)k(the)f(user's)h(resp)q(onsibili)q(t)o
(y)m(.)29 b(In)16 b(their)h(w)o(ork,)g(Hatcli\013)g(&)1113
759 y(Gl)q(\177)-20 b(uc)o(k)14 b(iden)o(ti\014ed)g Fu(language-in)o
(de)o(p)n(en)o(den)o(c)n(e)8 b Fv(of)k(the)g(in)o(ternal)1113
801 y(represen)o(tation)k(of)e(\\co)q(de")h(as)f(an)g(imp)q(ortan)o(t)i
(c)o(haracteris-)1113 842 y(tic)e(of)f(an)o(y)g(m)o(ulti-stage)i
(language.)1076 914 y Fp(\017)j Fq(\025)1135 898 y Fb(2)1159
914 y Fv(:)j(Da)o(vies)c(&)e(Pfenning)i(presen)o(ted)g(the)e(\014rst)h
(statically-)1113 955 y(t)o(yp)q(ed)i(m)o(ulti-stage)g(language)h
(Mini-ML)1742 939 y Fb(2)1781 955 y Fv([6].)27 b(The)17
b(t)o(yp)q(e)1113 997 y(system)11 b(is)g(motiv)n(ated)g(b)o(y)f
(constructiv)o(e)i(mo)q(dal)f(logic,)h(and)f(a)1113 1038
y(formal)f(pro)q(of)f(is)g(presen)o(ted)h(for)f(the)f(equiv)n(alence)k
(of)c(binding-)1113 1080 y(time)17 b(correctness)f(and)g(mo)q(dal)h
(correctness.)26 b(In)16 b(con)o(trast,)1113 1121 y(the)e(MetaML)g(t)o
(yp)q(e-system)g(w)o(as)f(motiv)n(ated)i(primarily)h(b)o(y)1113
1163 y(op)q(erational)j(considerations)q(.)29 b(Despite)18
b(the)e(di\013eren)o(t)i(ori-)1113 1204 y(gins,)11 b(the)e(languages)i
(ha)o(v)o(e)e(a)g(lot)g(in)g(common:)16 b(meta-brac)o(k)o(ets,)1113
1246 y(escap)q(e,)22 b(and)e(run)f(roughly)i(corresp)q(ond)g(to)e(b)q
(o)o(x,)i(un)o(b)q(o)o(x,)1113 1287 y(and)e(ev)n(al)f(resp)q(ectiv)o
(ely)m(.)33 b(Mini-ML)1660 1271 y Fb(2)1683 1287 y Fv('s)17
b Fa(2)g Fv(t)o(yp)q(e)h(construc-)1113 1329 y(tor)12
b(is)h(also)g(similar)h(to)e Fq(code)p Fv(.)j(In)o(terestingly)m(,)f
(in)f(Mini-ML)1983 1313 y Fb(2)2006 1329 y Fv(,)1113
1370 y(ev)n(al)g(is)f(de\014ned)h(in)f(terms)f(of)g(un)o(b)q(o)o(x,)i
(whereas)f(in)g(MetaML,)1113 1412 y(neither)k(run)e(or)g(escap)q(e)h
(can)f(b)q(e)h(de\014ned)g(in)g(terms)f(of)g(eac)o(h)1113
1453 y(other.)k(Also,)13 b(while)h(Mini-ML)1575 1438
y Fb(2)1611 1453 y Fv(can)f(sim)o(ulate)h(p)q(ersistence)1113
1495 y(for)20 b(co)q(de)g(v)n(alues,)j(a)d(stage-zero)g(function,)i
(for)e(example,)1113 1536 y(cannot)15 b(b)q(e)f(made)g(p)q(ersisten)o
(t.)21 b(Finally)m(,)16 b(Mini-ML)1878 1521 y Fb(2)1915
1536 y Fv(allo)o(ws)1113 1578 y(expressing)k(functions)f(lik)o(e)g
Fo(back)d Fv(are)i(not)g(expressible)i(in)1113 1619 y(the)14
b(language.)1076 1691 y Fp(\017)k Fq(\025)1135 1675 y
Fi(\015)1168 1691 y Fv(:)g(The)c(m)o(ulti-stage)h(language)h(Mini-ML)
1788 1675 y Fi(\015)1834 1691 y Fv([6)o(])d(is)i(moti-)1113
1732 y(v)n(ated)h(b)o(y)f(a)g(linear-time)i(constructiv)o(e)g(mo)q(dal)
f(logic.)24 b(The)1113 1774 y(language)19 b(allo)o(ws)f(staged)f
(expressions)i(to)e(con)o(tain)h(mono-)1113 1815 y(lithic)13
b(free)d(v)n(ariables.)19 b(The)10 b(t)o(w)o(o)g(constructs)i(of)e
(Mini-ML)1973 1799 y Fi(\015)2006 1815 y Fv(;)1113 1857
y(next)15 b(and)g(prev,)h(corresp)q(ond)g(quite)f(closely)h(to)f
(MetaML's)1113 1898 y(meta-brac)o(k)o(ets)k(and)g(escap)q(e.)32
b(The)18 b(t)o(yp)q(e)g(constructor)h Fp(\015)1113 1940
y Fv(also)j(corresp)q(onds)h(\(roughly\))f(to)f Fq(code)p
Fv(.)39 b(Unfortunately)m(,)1113 1981 y Fo(eval)12 b
Fv(is)h(no)h(longer)g(expressible)i(in)d(the)g(language.)1076
2061 y(Sheard)d(has)f(also)h(in)o(v)o(estigated)h(ric)o(her)f(t)o(yp)q
(e)f(systems)g(for)g(m)o(ulti-)1020 2103 y(staged)i(programming.)17
b(Sheard)11 b(and)g(Nelson)g(in)o(v)o(estigated)h(a)e(t)o(w)o(o-)1020
2144 y(stage)15 b(language)i(for)d(the)h(purp)q(ose)h(of)e(program)h
(generation)i([28].)1020 2186 y(The)9 b(base)g(language)i(w)o(as)d
(statically)k(t)o(yp)q(ed,)e(and)f(dep)q(enden)o(t)h(t)o(yp)q(es)1020
2227 y(w)o(ere)f(used)g(to)g(generate)h(a)f(wider)h(class)g(of)f
(programs)h(than)f(is)h(p)q(ossi-)1020 2269 y(ble)i(b)o(y)f(MetaML)h
(restricted)g(to)f(t)o(w)o(o)f(stages.)17 b(Sheard)12
b(and)g(Shields)1020 2310 y([29])d(in)o(v)o(estigate)i(a)e(dynamic)i(t)
o(yp)q(e)e(systems)h(for)f(m)o(ulti-staged)i(pro-)1020
2352 y(grams)j(where)g(some)g(t)o(yp)q(e)g(obligations)j(of)d(staged)g
(computations)1020 2393 y(can)f(b)q(e)h(put)f(o\013)h(till)g(run-time.)
1076 2435 y(The)9 b(t)o(yp)q(e)h(rule)g(for)f Fo(run)f
Fv(presen)o(ted)i(in)g(this)g(pap)q(er)g(is)g(motiv)n(ated)1020
2476 y(b)o(y)j(the)h(t)o(yp)q(e)f(system)g(for)g Fo(runST)e
Fv([19].)p eop
%%Page: 11 11
11 10 bop -76 -34 a Fw(13)40 b(Conclusion)-76 44 y Fv(W)m(e)11
b(ha)o(v)o(e)g(describ)q(ed)i(an)e Fq(n)p Fv(-stage)g(m)o(ulti-stage)h
(programming)g(lan-)-76 86 y(guage)17 b(whic)o(h)g(w)o(e)e(call)j
(MetaML.)e(MetaML)g(w)o(as)g(designed)i(as)e(a)-76 127
y(programming)i(language.)26 b(Our)16 b(primary)h(purp)q(ose)g(w)o(as)e
(to)h(sup-)-76 169 y(p)q(ort)h(the)f(writing)i(of)e(m)o(ulti-stage)i
(programs.)28 b(Because)17 b(of)f(this)-76 210 y(our)11
b(design)i(c)o(hoices)f(where)f(di\013eren)o(t)i(from)e(those)g(of)g
(other)g(m)o(ulti-)-76 252 y(stage)g(systems.)17 b(W)m(e)11
b(\014nd)h(the)f(follo)o(wing)i(features)e(essen)o(tial)i(when)-76
293 y(writing)i(m)o(ulti-stage)f(programs.)-20 370 y
Fp(\017)19 b Fk(Cross)h(stage)h(p)q(ersistence.)30 b
Fv(The)17 b(abilit)o(y)i(to)e(use)h(v)n(ari-)18 412 y(ables)d(from)f
(an)o(y)h(past)g(stage)g(is)g(crucial)h(to)f(writing)h(staged)18
453 y(programs)11 b(in)h(the)e(manner)i(to)e(whic)o(h)i(programmers)g
(are)e(ac-)18 495 y(customed.)18 b(Cross)13 b(stage)h(p)q(ersistence)h
(pro)o(vides)g(a)e(solution)18 536 y(to)j(h)o(ygienic)j(macros)e(in)h
(a)e(t)o(yp)q(ed)i(language,)h(i.e.)28 b(macros)18 578
y(whic)o(h)11 b(bind)i(iden)o(ti\014ers)g(in)e(the)h(en)o(vironmen)o(t)
g(of)f(de\014nition,)18 619 y(whic)o(h)i(are)h(\\captured")g(in)g(the)f
(en)o(vironmen)o(t)i(of)e(use.)-20 690 y Fp(\017)19 b
Fk(Multi-stage)12 b(a)o(w)o(are)i(t)o(yp)q(e)g(system.)k
Fv(The)12 b(t)o(yp)q(e)g(c)o(hec)o(k)o(er)18 731 y(rep)q(orts)17
b(phase)h(errors)g(as)f(w)o(ell)h(as)g(t)o(yp)q(e)f(errors)h(is)f
(crucial)18 773 y(when)f(debugging)i(m)o(ulti-stage)f(programs,)g(th)o
(us)f(ensuring)18 814 y(Cross-Stage)d(Safet)o(y)m(.)-20
884 y Fp(\017)19 b Fk(Displa)o(y)d(of)i(co)q(de.)25 b
Fv(When)16 b(debugging,)j(it)d(is)g(imp)q(ortan)o(t)18
926 y(for)f(users)i(to)f(observ)o(e)h(the)f(co)q(de)h(pro)q(duced)h(b)o
(y)e(their)h(pro-)18 967 y(grams.)e(This)10 b(implies)h(a)e(displa)o(y)
i(mec)o(hanism)f(\(prett)o(y-prin)o(ter\))18 1009 y(for)i(v)n(alues)j
(of)d(t)o(yp)q(e)i(co)q(de.)-20 1079 y Fp(\017)19 b Fk(Displa)o(y)d(of)
i(Constan)o(ts.)25 b Fv(Constan)o(ts)17 b(originating)h(from)18
1121 y(p)q(ersisten)o(t)e(v)n(ariables)i(are)d(hard)i(to)e(iden)o(tify)
m(.)25 b(The)16 b(\045)f(tags)18 1162 y(pro)o(vide)22
b(an)f(appro)o(ximation)j(of)c(where)h(these)g(constan)o(ts)18
1204 y(came)14 b(from.)20 b(While)c(p)q(oten)o(tially)h(misleading)g
(they)e(are)f(of-)18 1245 y(ten)f(quite)h(useful.)-20
1316 y Fp(\017)19 b Fk(The)9 b(Isomorphism)g(b)q(et)o(w)o(een)h
Fo(<A,'c>)17 b(->)i(<B,'c>)7 b Fk(and)18 1357 y Fo(<A)18
b(->)h(B,'c>)p Fv(.)29 b(The)17 b(isomorphism)k(\(whic)o(h)d(can)g
(only)h(b)q(e)18 1399 y(expressed)13 b(b)q(ecause)g(of)f(cross-stage)h
(p)q(ersistence\),)h(reduces,)18 1440 y(sometimes)9 b(drastically)m(,)j
(the)d(n)o(um)o(b)q(er)h(of)e(annotations)j(needed)18
1482 y(to)h(stage)i(m)o(ulti-stage)h(programs.)-20 1552
y Fp(\017)k Fk(Lift.)29 b Fv(The)17 b(lift)i(annotation)g(mak)o(es)f
(it)g(p)q(ossible)i(to)d(force)18 1594 y(computation)h(in)g(a)f(early)h
(stage)f(and)g(lift)h(this)f(v)n(alue)h(in)o(to)18 1635
y(a)c(program)g(to)g(b)q(e)h(incorp)q(orated)h(at)e(a)g(later)h(stage.)
20 b(While)18 1677 y(nev)o(er)13 b(necessary)h(\(b)q(ecause)g(of)f
(cross-stage)h(p)q(ersistence\))h(it)18 1718 y(helps)f(pro)q(duce)h(co)
q(de)f(whic)o(h)g(is)g(easier)h(to)e(understand,)i(b)q(e-)18
1760 y(cause)e(constan)o(ts)h(b)q(ecome)g(explicit.)-20
1830 y Fp(\017)19 b Fk(Safe)j(b)q(eta)g(reduction.)35
b Fv(Safe)20 b(b)q(eta)g(reduction)h(of)e(the)18 1871
y(application)13 b(of)c(explicit)j(abstractions)g(to)e(explicit)i(v)n
(ariables)18 1913 y(reduces)h(the)h(clutter)f(in)h(generated)g(co)q
(de.)-20 1990 y(T)m(o)f(further)h(illustrate)j(this)d(w)o(e)g(pro)o
(vide)h(an)f(extended)h(exam-)-76 2031 y(ple)k(in)g(App)q(endix)h(A)e
(whic)o(h)h(stages)f(a)g(term)g(rewriting)i(system)-76
2073 y(in)c(whic)o(h)f(the)g(the)g(rewriting)h(rules)f(b)q(ecome)h(kno)
o(wn)f(in)g(the)g(\014rst)-76 2114 y(stage)f(and)h(the)f(terms)g(to)g
(b)q(e)g(rewritten)g(b)q(ecome)h(kno)o(wn)f(only)h(in)-76
2156 y(later)f(stages.)-76 2253 y Fw(14)40 b(F)o(uture)14
b(W)o(o)o(rk)-76 2332 y Fv(W)m(e)9 b(ha)o(v)o(e)h(built)g(an)g
(implemen)o(tation)i(whic)o(h)d(w)o(as)g(used)h(to)e(program)-76
2373 y(the)15 b(examples)g(in)h(this)f(pap)q(er.)21 b(Curren)o(tly)m(,)
16 b(the)e(implemen)o(tation)-76 2415 y(supp)q(orts)i(p)q(olymorphic)i
(t)o(yp)q(e-inference)e(so)f(that)g(t)o(yp)q(e)g(informa-)-76
2456 y(tion)h(on)e(b)q(ound)i(v)n(ariables)h(is)e(not)g(necessary)m(.)
22 b(W)m(e)14 b(are)h(curren)o(tly)-76 2498 y(extending)g(this)e
(implemen)o(tation)j(to)c(include)j(all)f(the)f(features)f(in)-76
2539 y(core-ML.)-20 2581 y(W)m(e)17 b(are)g(also)h(activ)o(ely)h
(pursuing)g(a)d(sub)r(ject)i(reduction)g(the-)-76 2622
y(orem)e(for)g Fq(\025)107 2607 y Fi(M)145 2622 y Fv(.)27
b(The)16 b(m)o(ulti-lev)o(el)j(syn)o(tax)e(mak)o(es)g(the)f(syn)o
(tactic)1020 -34 y(approac)o(hes)c(to)f(t)o(yp)q(e)g(soundness)i([32])d
(di\016cult)j(to)e(apply)m(,)h(b)q(ecause)1020 7 y(reduction)20
b(con)o(texts)f(ma)o(y)f(app)q(ear)h(inside)h(lam)o(b)q(da)g
(expressions)1020 49 y(at)e(lev)o(els)h(greater)f(than)g(zero.)31
b(W)m(e)17 b(ha)o(v)o(e)h(also)h(found)f(that)g(the)1020
90 y(non-Hindley-Mi)q(lne)q(r)e(t)o(yp)q(e)e(judgemen)o(t)h(for)e(the)h
Fo(run)e Fv(annotation)1020 132 y(complicates)j(matters)e(considerably)
n(.)1020 228 y Fw(References)1039 306 y Fv([1])18 b(C.)j(Consel)h(and)h
(O.)d(Dan)o(vy)m(.)43 b(F)m(or)22 b(a)f(b)q(etter)h(supp)q(ort)g(of)
1098 348 y(static)i(data)g(\015o)o(w.)46 b(In)23 b(J.)f(Hughes,)k
(editor,)g Fu(F)m(unctional)1098 389 y(Pr)n(o)n(gr)n(amming)20
b(L)n(anguages)e(and)i(Computer)g(A)o(r)n(chite)n(ctur)n(e,)1098
431 y(Cambridge,)10 b(Massachusetts,)e(A)o(ugust)g(1991)h(\(L)n(e)n
(ctur)n(e)g(Notes)1098 472 y(in)18 b(Computer)g(Scienc)n(e,)e(vol.)i
(523\))p Fv(,)f(pages)i(496{519.)g(New)1098 514 y(Y)m(ork:)13
b(A)o(CM,)f(Berlin:)j(Springer-V)m(erlag,)g(1991.)1039
580 y([2])j(Charles)g(Consel)f(and)g(Olivier)h(Dan)o(vy)m(.)28
b(T)m(utorial)18 b(notes)f(on)1098 622 y(partial)12 b(ev)n(aluation.)h
(In)d Fu(A)o(CM)h(Symp)n(osium)d(on)i(Principles)e(of)1098
663 y(Pr)n(o)n(gr)n(amming)j(L)n(anguages)p Fv(,)c(pages)k(493{501,)h
(Jan)o(uary)f(1993.)1039 730 y([3])18 b(Rob)q(erto)g(Di)f(Cosmo.)28
b Fu(Isomorphisms)15 b(of)i(T)m(yp)n(es:)23 b(fr)n(om)17
b Fq(\025)p Fu(-)1098 772 y(c)n(alculus)e(to)h(information)f(r)n
(etrieval)g(and)h(language)e(design)p Fv(.)1098 813 y(Progress)f(in)g
(Theoretical)h(Computer)f(Science.)g(Birkh\177)-19 b(auser,)1098
855 y(1995.)1039 921 y([4])18 b(Olivier)j(Dan)o(vy)m(.)35
b(T)o(yp)q(e-directed)21 b(partial)f(ev)n(aluation.)37
b(In)1098 963 y Fu(A)o(CM)18 b(Symp)n(osium)c(on)i(Principles)f(of)h
(Pr)n(o)n(gr)n(amming)f(L)n(an-)1098 1004 y(guages)p
Fv(,)21 b(pages)h(242{257,)j(Florida,)g(Jan)o(uary)d(1996.)g(New)1098
1046 y(Y)m(ork:)13 b(A)o(CM.)1039 1113 y([5])18 b(Olivier)24
b(Dan)o(vy)m(,)h(Karoline)f(Malmkjaer,)h(and)d(Jens)g(P)o(als-)1098
1154 y(b)q(erg.)28 b(The)17 b(essence)g(of)f(eta-expansion)j(in)f
(partial)g(ev)n(alua-)1098 1196 y(tion.)g Fu(LISP)13
b(and)g(Symb)n(olic)f(Computation)p Fv(,)e(1\(19\),)j(1995.)1039
1262 y([6])18 b(Ro)o(w)o(an)d(Da)o(vies.)21 b(A)14 b(temp)q(oral-logic)
i(approac)o(h)g(to)e(binding-)1098 1309 y(time)f(analysis.)19
b(In)12 b Fu(Pr)n(o)n(c)n(e)n(e)n(dings,)f(11)1648 1293
y Fn(th)1691 1309 y Fu(A)o(nnual)g(IEEE)i(Sym-)1098 1350
y(p)n(osium)h(on)g(L)n(o)n(gic)g(in)g(Computer)g(Scienc)n(e)p
Fv(,)e(pages)j(184{195,)1098 1392 y(New)j(Brunswic)o(k,)i(New)d(Jersey)
m(,)i(27{30)f(July)h(1996.)f(IEEE)1098 1434 y(Computer)c(So)q(ciet)o(y)
g(Press.)1039 1500 y([7])k(Ro)o(w)o(an)11 b(Da)o(vies)g(and)g(F)m(rank)
f(Pfenning.)j(A)d(mo)q(dal)h(analysis)h(of)1098 1542
y(staged)i(computation.)19 b(In)12 b Fu(23r)n(d)h(A)o(nnual)e(A)o(CM)j
(Symp)n(osium)1098 1583 y(on)i(Principles)f(of)h(Pr)n(o)n(gr)n(amming)g
(L)n(anguages)e(\(POPL'96\))p Fv(,)1098 1625 y(St.P)o(etersburg)g(Beac)
o(h,)g(Florida,)g(Jan)o(uary)g(1996.)1039 1691 y([8])k(Nac)o(h)o(um)13
b(Dersho)o(witz.)j(Computing)e(with)f(rewrite)f(systems.)1098
1733 y Fu(Information)g(and)g(Contr)n(ol)p Fv(,)g(65:122{157,)i(1985.)
1039 1800 y([9])k(Rob)q(ert)h(Gl)q(\177)-20 b(uc)o(k)19
b(and)f(Jesp)q(er)g(J\034rgensen.)32 b(E\016cien)o(t)19
b(m)o(ulti-)1098 1841 y(lev)o(el)e(generating)f(extensions)h(for)e
(program)g(sp)q(ecializa)q(tion)q(.)1098 1883 y(In)21
b Fu(Pr)n(o)n(gr)n(amming)e(L)n(anguages,)g(Implementation)o(s,)g(L)n
(o)n(gics)1098 1924 y(and)10 b(Pr)n(o)n(gr)n(ams)g(\(PLILP'95\))p
Fv(,)e(v)o(olume)j(982)f(of)f Fu(L)n(e)n(ctur)n(e)g(Notes)1098
1966 y(in)14 b(Computer)e(Scienc)n(e)p Fv(.)e(Springer-V)m(erlag,)15
b(1995.)1020 2032 y([10])j(Rob)q(ert)13 b(Gl)q(\177)-20
b(uc)o(k)13 b(and)g(Jesp)q(er)f(J\034rgensen.)k(F)m(ast)c(binding-time)
1098 2074 y(analysis)18 b(for)d(m)o(ulti-lev)o(el)i(sp)q(ecializa)q
(tion)q(.)25 b(In)15 b Fu(PSI-96:)20 b(A)o(n-)1098 2115
y(dr)n(ei)10 b(Ershov)e(Se)n(c)n(ond)g(International)e(Memorial)k
(Confer)n(enc)n(e,)1098 2157 y(Persp)n(e)n(ctives)e(of)h(System)g
(Informatics)p Fv(,)e(v)o(olume)k(1181)e(of)g Fu(L)n(e)n(c-)1098
2198 y(tur)n(e)i(Notes)f(in)h(Computer)f(Scienc)n(e)p
Fv(.)e(Springer-V)m(erlag,)13 b(1996.)1020 2265 y([11])18
b(Carsten)10 b(K.)e(Gomard)h(and)h(Neil)g(D.)e(Jones.)j(A)d(partial)j
(ev)n(alua-)1098 2307 y(tor)h(for)f(un)o(t)o(yp)q(ed)i(lam)o(b)q(da)g
(calculus.)j Fu(Journal)11 b(of)g(F)m(unctional)1098
2348 y(Pr)n(o)n(gr)n(amming)p Fv(,)h(1\(1\):21{69,)h(1991.)1020
2415 y([12])18 b(John)e(Hatcli\013)g(and)g(Rob)q(ert)g(Gl)q(\177)-20
b(uc)o(k.)24 b(Reasoning)17 b(ab)q(out)f(hi-)1098 2456
y(erarc)o(hies)k(of)f(online)h(sp)q(ecializati)q(on)i(systems.)34
b(In)18 b(Olivier)1098 2498 y(Dan)o(vy)m(,)k(Rob)q(ert)e(Gl)q(\177)-20
b(uc)o(k,)21 b(and)f(P)o(eter)f(Thiemann,)j(editors,)1098
2539 y Fu(Partial)d(Evaluation)p Fv(,)e(v)o(olume)k(1110)f(of)f
Fu(L)n(e)n(ctur)n(e)f(Notes)g(in)1098 2581 y(Computer)26
b(Scienc)n(e)p Fv(,)i(pages)f(161{182.)h(Springer-V)m(erlag,)1098
2622 y(1996.)p eop
%%Page: 12 12
12 11 bop -76 -34 a Fv([13])19 b(J.)11 b(Roger)i(Hindley)h(and)g
(Jonathan)f(P)m(.)f(Seldin.)18 b Fu(Intr)n(o)n(duction)3
7 y(to)c(Cobminators)f(and)h Fq(\025)p Fu(-Calculus)p
Fv(.)20 b(Num)o(b)q(er)15 b(1)g(in)g(London)3 49 y(Mathematical)i(So)q
(ciet)o(y)g(Studen)o(t)f(T)m(exts.)f(Cam)o(bridge)i(Uni-)3
90 y(v)o(ersit)o(y)d(Press,)f(1986.)-76 162 y([14])19
b(Neil)c(D.)e(Jones.)20 b(Mix)15 b(ten)f(y)o(ears)h(later.)20
b(In)14 b Fu(Partial)f(Evalua-)3 203 y(tion)e(and)g(Semantics-Base)n(d)
e(Pr)n(o)n(gr)n(am)k(Manipulation)o(,)d(New)3 245 y(Haven,)18
b(Conne)n(cticut)e(\(Sigplan)g(Notic)n(es,)i(vol.)g(26,)h(no.)f(9,)3
286 y(Septemb)n(er)13 b(1991\))p Fv(,)g(pages)j(24{38.)g(New)e(Y)m
(ork:)h(A)o(CM,)f(New)3 328 y(Y)m(ork:)e(A)o(CM,)g(June)h(1995.)-76
399 y([15])19 b(Neil)d(D.)f(Jones,)h(Carsten)g(K)f(Gomard,)i(and)f(P)o
(eter)f(Sestoft.)3 441 y Fu(Partial)9 b(Evaluation)e(and)i(A)o
(utomatic)f(Pr)n(o)n(gr)n(am)i(Gener)n(ation)p Fv(.)3
482 y(Pren)o(tice-Hall,)k(1993.)-76 553 y([16])19 b(Simon)11
b(L.)e(P)o(eyton)h(Jones)g(and)h(John)f(Launc)o(h)o(bury)m(.)j(Un)o(b)q
(o)o(xed)3 595 y(v)n(alues)18 b(as)f(\014rst)g(class)h(citizens)g(in)g
(a)f(non-strict)h(functional)3 636 y(language.)31 b(In)17
b Fu(F)m(unctional)d(Pr)n(o)n(gr)n(amming)j(and)f(Computer)3
678 y(A)o(r)n(chite)n(ctur)n(e)p Fv(,)9 b(Septem)o(b)q(er)14
b(91.)-76 749 y([17])19 b(Ric)o(hard)i(B.)f(Kieburtz,)j(F)m(rancoise)f
(Bellegarde,)i(Jef)19 b(Bell,)3 791 y(James)e(Ho)q(ok,)h(Je\013rey)g
(Lewis,)g(Dino)h(Oliv)n(a,)g(Tim)e(Sheard,)3 832 y(Lisa)11
b(W)m(alton,)h(and)f(T)m(ong)f(Zhou.)k(Calculating)f(soft)o(w)o(are)d
(gen-)3 874 y(erators)15 b(from)f(solution)j(sp)q(eci\014cations)q(.)25
b(In)14 b Fu(T)m(APSOFT'95)p Fv(,)3 915 y(v)o(olume)i(915)f(of)g
Fu(LNCS)p Fv(,)f(pages)i(546{560.)g(Springer-V)m(erlag,)3
957 y(1995.)-76 1028 y([18])j(Ric)o(hard)i(B.)f(Kieburtz,)j(Laura)e
(McKinney)m(,)i(Je\013rey)d(Bell,)3 1070 y(James)e(Ho)q(ok,)h(Alex)g
(Koto)o(v,)g(Je\013rey)f(Lewis,)i(Dino)f(Oliv)n(a,)3
1111 y(Tim)c(Sheard,)i(Ira)e(Smith,)i(and)f(Lisa)h(W)m(alton.)25
b(A)16 b(soft)o(w)o(are)3 1153 y(engineering)g(exp)q(erimen)o(t)f(in)f
(soft)o(w)o(are)f(comp)q(onen)o(t)i(genera-)3 1194 y(tion.)h(In)c
Fu(18th)g(Internationa)o(l)e(Confer)n(enc)n(e)h(in)h(Softwar)n(e)g(En-)
3 1236 y(gine)n(ering)p Fv(,)d(Marc)o(h)14 b(1996.)-76
1307 y([19])19 b(John)13 b(Launc)o(h)o(bury)h(and)g(Amr)e(Sabry)m(.)17
b(Monadic)e(state:)i(Ax-)3 1349 y(iomatization)23 b(and)e(t)o(yp)q(e)g
(safet)o(y)m(.)38 b(In)21 b Fu(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)h(the)3
1390 y(Internation)o(al)12 b(Confer)n(enc)n(e)i(on)g(F)m(unctional)f
(Pr)n(o)n(gr)n(amming)p Fv(,)3 1432 y(Amsterdam,)g(June)g(1997.)-76
1503 y([20])19 b(Mark)12 b(Leone)h(and)g(P)o(eter)f(Lee.)k(Deferred)d
(compilation:)19 b(The)3 1545 y(automation)13 b(of)e(run-time)i(co)q
(de)f(generation.)17 b(T)m(ec)o(hnical)c(Re-)3 1586 y(p)q(ort)c
(CMU-CS-93-225,)g(Carnegie)h(Mellon)h(Univ)o(ersit)o(y)m(,)g(Dec.)3
1628 y(1993.)-76 1699 y([21])19 b(Mic)o(hael)c(Lo)o(wry)m(,)d(Andrew)i
(Philp)q(ot,)h(Thomas)e(Pressburger,)3 1741 y(and)k(Ian)g(Underw)o(o)q
(o)q(d.)28 b(Amphion:)e(Automatic)18 b(program-)3 1782
y(ming)d(for)f(scien)o(ti\014c)i(subroutine)g(libraries.)23
b Fu(NASA)13 b(Scienc)n(e)3 1824 y(Information)e(Systems)h(Newsletter)p
Fv(,)e(31:22{25,)k(1994.)-76 1895 y([22])19 b(Robin)c(Milner.)21
b(A)14 b(theory)g(of)g(t)o(yp)q(e)g(p)q(olymorphi)q(sm)i(in)f(pro-)3
1937 y(gramming.)j Fu(Journal)12 b(of)i(Computer)f(and)f(System)h
(Scienc)n(es)p Fv(,)3 1978 y(17:348{375,)g(1978.)-76
2050 y([23])19 b(T)m(orb)q(en)g(\035.)e(Mogensen.)35
b(E\016cien)o(t)20 b(self-in)o(terpretation)h(in)3 2091
y(lam)o(b)q(da)e(calculus.)33 b Fu(F)m(unctional)14 b(Pr)n(o)n(gr)n
(amming)p Fv(,)k(2\(3\):345{)3 2133 y(364,)13 b(July)g(1992.)-76
2204 y([24])19 b(F.)12 b(Nielson.)17 b(Correctness)c(of)g(co)q(de)g
(generation)h(from)e(a)h(t)o(w)o(o-)3 2245 y(lev)o(el)e(meta-language.)
i(In)d(B.)f(Robinet)j(and)e(R.)g(Wilhelm,)i(ed-)3 2287
y(itors,)i Fu(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)i(the)g(Eur)n(op)n(e)n
(an)e(Symp)n(osium)h(on)h(Pr)n(o-)3 2328 y(gr)n(amming)e(\(ESOP)h(86\))
p Fv(,)d(v)o(olume)k(213)e(of)g Fu(LNCS)p Fv(,)g(pages)h(30{)3
2370 y(40,)f(Saarbr)q(\177)-20 b(uc)o(k)o(en,)15 b(FR)o(G,)e(Marc)o(h)g
(1986.)h(Springer.)-76 2441 y([25])19 b(F.)e(Nielson)i(and)g(H.)e(R.)g
(Nielson.)33 b Fu(Two-L)n(evel)17 b(F)m(unctional)3 2483
y(L)n(anguages)p Fv(.)i(Num)o(b)q(er)c(34)g(in)h(Cam)o(bridge)g(T)m
(racts)f(in)g(Theo-)3 2524 y(retical)e(Computer)f(Science.)h(Cam)o
(bridge)g(Univ)o(ersit)o(y)h(Press,)3 2566 y(1992.)1020
-34 y([26])k(G.)h(D.)g(Plotkin.)37 b(Call-b)o(y-name,)22
b(call-b)o(y-v)n(alue-)f(and)f(the)1098 7 y(lam)o(b)q(da-calcul)q(us.)d
Fu(The)n(or)n(etic)n(al)9 b(Computer)i(Scienc)n(e)p Fv(,)e(1:125{)1098
49 y(159,)14 b(1975.)1020 119 y([27])k(Tim)g(Sheard.)32
b(A)17 b(t)o(yp)q(e-directed,)j(on-line)g(partial)f(ev)n(alua-)1098
161 y(tor)c(for)g(a)g(p)q(olymorphic)j(language.)25 b(In)16
b Fu(Pr)n(o)n(c)n(e)n(e)n(dings)c(of)j(the)1098 202 y(Symp)n(osium)9
b(on)h(Partial)f(Evaluation)e(and)i(Semantics-Base)n(d)1098
244 y(Pr)n(o)n(gr)n(am)14 b(Manipulation)o Fv(,)c(Amsterdam,)j(June)g
(1997.)1020 314 y([28])18 b(Tim)e(Sheard)h(and)g(Neal)f(Nelson.)26
b(T)o(yp)q(e)16 b(safe)g(abstractions)1098 356 y(using)g(program)f
(generators.)21 b(T)m(ec)o(hnical)15 b(Rep)q(ort)g(OGI-TR-)1098
397 y(95-013,)c(Oregon)g(Graduate)f(Institute)h(of)f(Science)h(and)g(T)
m(ec)o(h-)1098 439 y(nology)m(,)k(1995.)1020 509 y([29])j(Mark)f
(Shields,)j(Tim)d(Sheard,)h(and)f(Simon)h(P)o(eyton)f(Jones.)1098
551 y(Dynamic)c(t)o(yping)g(through)g(staged)f(t)o(yp)q(e)f(inference.)
k(In)d Fu(Pr)n(o-)1098 592 y(c)n(e)n(e)n(dings)18 b(of)i(the)f(25th)g
(A)o(CM)i(SIGPLAN-SIG)o(A)o(CT)d(Sym-)1098 634 y(p)n(osium)e(on)h
(Principles)d(of)j(Pr)n(o)n(gr)n(amming)f(L)n(anguages)p
Fv(,)e(jan)1098 675 y(1998.)k(\(to)13 b(app)q(ear\).)1020
746 y([30])18 b(Brian)e(C.)d(Smith.)21 b Fu(R)n(e\015e)n(ction)12
b(and)i(Semantics)e(in)i(a)g(Pr)n(o)n(c)n(e-)1098 787
y(dur)n(al)d(L)n(anguage)p Fv(.)h(PhD)g(thesis,)g(Massac)o(h)o(usetts)h
(Institute)f(of)1098 829 y(T)m(ec)o(hnology)m(,)j(Jan)o(uary)e(1982.)
1020 899 y([31])18 b(P)o(eter)j(Thiemann.)40 b(T)m(o)o(w)o(ards)20
b(partial)i(ev)n(aluation)h(of)d(full)1098 941 y(Sc)o(heme.)12
b(In)d(Gregor)h(Kiczales,)h(editor,)f Fu(R)n(e\015e)n(ction)e(96)p
Fv(,)g(pages)1098 982 y(95{106,)14 b(San)g(F)m(rancisco,)g(CA,)e(USA,)g
(April)i(1996.)1020 1053 y([32])k(W)m(righ)o(t)j(and)e(F)m(elleisen.)38
b(A)19 b(syn)o(tactic)h(approac)o(h)h(to)e(t)o(yp)q(e)1098
1094 y(soundness.)14 b Fu(Information)8 b(and)i(Computation)f
(\(formerly)g(In-)1098 1136 y(formation)j(and)h(Contr)n(ol\))p
Fv(,)e(115,)i(1994.)1020 1233 y Fw(A)42 b(T)m(erm)14
b(Rewriting:)j(An)d(Extended)g(Example)1020 1312 y Fv(In)e(this)i
(section)f(w)o(e)f(pro)o(vide)i(an)f(extended)g(example)h(whic)o(h)f
(illus-)1020 1353 y(trates)g(m)o(ulti-stage)i(programming.)1076
1395 y(Dersho)o(witz)i([8])f(de\014nes)h(a)f Fu(term-r)n(ewriting)f
(system)g Fv(as)h(a)g(set)1020 1436 y(of)d(directed)i(rules.)20
b(Eac)o(h)14 b(rule)g(is)g(made)g(of)g(a)f(left-hand)i(side)f(and)1020
1478 y(a)i(righ)o(t-hand)i(side.)26 b(A)16 b(rule)h(ma)o(y)f(b)q(e)g
(applied)i(to)e(a)g(term)f Fq(t)h Fv(if)g(a)1020 1519
y(subterm)9 b Fq(s)g Fv(of)f Fq(t)h Fv(matc)o(hes)g(the)g(left-hand)h
(under)f(some)g(substitution)1020 1561 y Fq(\033)q Fv(.)23
b(A)14 b(rule)i(is)f(applied)j(b)o(y)d(replacing)i Fq(s)e
Fv(with)g Fq(t)1733 1545 y Fi(0)1744 1561 y Fv(,)g(where)g
Fq(t)1897 1545 y Fi(0)1922 1561 y Fv(is)h(the)1020 1602
y(result)e(of)e(applying)j(the)e(substitution)i Fq(\033)f
Fv(to)e(the)h(righ)o(t-hand)h(side.)1020 1644 y(W)m(e)c(sa)o(y)f
Fu(\\)p Fq(t)h Fu(r)n(ewrites)g(\(in)f(one)h(step\))e(to)i
Fq(t)1608 1628 y Fi(0)1619 1644 y Fu(")p Fv(,)f(and)h(write)g
Fq(t)h Fp(\))g Fq(t)1913 1628 y Fi(0)1924 1644 y Fv(.)k(The)1020
1685 y(c)o(hoice)f(of)e(whic)o(h)i(rule)f(to)g(apply)h(is)f(made)g
(non-deterministi)q(cal)q(l)q(y)m(.)1020 1727 y(As)g(an)g(example,)h
(here)g(are)f(the)g(rules)h(for)f(a)g(Monoid)h([8]:)1243
1805 y Fq(r)1260 1809 y Fn(1)1288 1805 y Fv(:)134 b Fq(x)8
b Fv(+)h(0)25 b Fp(!)g Fq(x)1243 1846 y(r)1260 1850 y
Fn(2)1288 1846 y Fv(:)134 b(0)9 b(+)f Fq(x)25 b Fp(!)g
Fq(x)1243 1888 y(r)1260 1892 y Fn(3)1288 1888 y Fv(:)37
b Fq(x)8 b Fv(+)h(\()p Fq(y)g Fv(+)g Fq(z)r Fv(\))24
b Fp(!)h Fv(\()p Fq(x)8 b Fv(+)g Fq(y)q Fv(\))h(+)f Fq(z)1076
1965 y Fv(V)m(ariables)18 b Fq(x)p Fv(,)f Fq(y)q Fv(,)g(and)h
Fq(z)g Fv(in)f(the)g(rules)h(can)f(eac)o(h)g(matc)o(h)g(an)o(y)1020
2007 y(term.)j(If)14 b(a)g(v)n(ariable)i(o)q(ccurs)f(more)f(than)h
(once)f(on)h(the)f(left-hand)1020 2048 y(side)j(of)e(a)h(rule,)h(all)g
(o)q(ccurrences)g(m)o(ust)f(matc)o(h)g(iden)o(tical)i(terms.)1020
2090 y(W)m(e)e(call)g(this)g(the)g Fu(c)n(omp)n(atibility)c(c)n
(ondition)p Fv(.)21 b(These)16 b(rules)g(allo)o(w)1020
2132 y(us)d(to)g(ha)o(v)o(e)h(deriv)n(ations)h(suc)o(h)f(as:)1284
2200 y(\()p Fq(a)9 b Fv(+)f Fq(b)p Fv(\))h(+)g(\(0)f(+)h(\()p
Fq(d)f Fv(+)h Fq(e)p Fv(\)\))p 1445 2216 211 2 v 1234
2247 a Fp(\))25 b Fv(b)o(y)13 b Fq(r)1367 2251 y Fn(2)1385
2247 y Fq(;)6 b(\033)12 b Fv(=)e([\()p Fq(d)e Fv(+)h
Fq(e)p Fv(\))p Fq(=x)p Fv(])1284 2288 y(\()p Fq(a)g Fv(+)f
Fq(b)p Fv(\))h(+)g(\()p Fq(d)f Fv(+)g Fq(e)p Fv(\))p
1284 2304 276 2 v 1234 2335 a Fp(\))25 b Fv(b)o(y)13
b Fq(r)1367 2339 y Fn(3)1385 2335 y Fq(;)6 b(\033)12
b Fv(=)e([\()p Fq(a)f Fv(+)f Fq(b)p Fv(\))p Fq(=x;)f(d=y)q(;)f(e=z)r
Fv(])1284 2376 y(\(\()p Fq(a)j Fv(+)f Fq(b)p Fv(\))h(+)g
Fq(d)p Fv(\))f(+)g Fq(e)1020 2456 y Fv(where)k(the)g(subterm)h(b)q
(eing)g(rewritten)g(\()p Fq(s)p Fv(\))e(has)i(b)q(een)f(underlined)q(.)
1076 2498 y(Generally)m(,)20 b(the)d(rules)i(do)e(not)h(c)o(hange)g(o)o
(v)o(er)f(the)h(life)g(of)f(the)1020 2539 y(system.)22
b(A)o(t)14 b(the)h(same)g(time,)g(the)g(basic)h(form)e(of)h(the)g(matc)
o(hing)1020 2581 y(function)i(is)g(a)e(sim)o(ultaneous)k(tra)o(v)o
(ersal)e(of)f(a)f(sub)r(ject)i(term)e(and)1020 2622 y(the)i(left-hand)h
(side)g(of)e(the)h(rule)h(it)f(is)g(b)q(eing)i(matc)o(hed)e(against.)p
eop
%%Page: 13 13
13 12 bop -76 -34 a Fv(This)14 b(o\013ers)g(an)g(opp)q(ortunit)o(y)i
(for)d(staging:)19 b(W)m(e)13 b(can)h(\\sp)q(ecialize")-76
7 y(matc)o(hing)j(o)o(v)o(er)f(the)g(rules)h(in)g(a)f(\014rst)g(stage,)
g(and)h(eliminate)h(the)-76 49 y(o)o(v)o(erhead)f(of)e(tra)o(v)o
(ersing)i(the)e(left-hand)i(side)g(of)e(the)g(rules.)26
b(Not)-76 90 y(only)20 b(that,)h(but)e(as)g(w)o(e)f(will)j(see,)f(w)o
(e)e(can)i(also)g(remo)o(v)o(e)f(a)g(sig-)-76 132 y(ni\014can)o(t)c
(amoun)o(t)e(of)g(administrativ)o(e)j(computations)f(in)o(v)o(olv)o(ed)
g(in)-76 173 y(constructing)k(and)e(applying)j(the)d(substitution)i
Fq(\033)q Fv(.)28 b(One)17 b(w)o(ould)-76 215 y(exp)q(ect)e(that)g
(this)g(w)o(ould)h(signi\014can)o(tly)i(sp)q(eed)d(up)g(the)g
(rewriting)-76 256 y(system.)-20 298 y(T)m(erms)e(can)g(b)q(e)g
(implemen)o(ted)i(using)g(the)e(follo)o(wing)i(MetaML)-76
339 y(t)o(yp)q(e:)-76 410 y Fo(datatype)i('a)i(T)g(=)g(Const)f(of)h
(int)199 451 y(|)g(Var)f(of)h(string)199 493 y(|)g(Op)g(of)g(\('a)f(*)h
(string)f(*)h('a\);)-20 563 y Fv(The)14 b(declaration)i(in)o(tro)q
(duces)f(a)f(t)o(yp)q(e)f(constructor)i Fo(T)e Fv(param-)-76
604 y(eterized)i(b)o(y)f(another)g(t)o(yp)q(e,)g Fo('a)o
Fv(.)k(The)c(constructors)g(of)f(this)i(t)o(yp)q(e)-76
646 y(are)g Fo(Const)n Fv(,)f Fo(Var)f Fv(and)j Fo(Op)d
Fv(represen)o(ting)k(one)d(lev)o(el)i(of)f(an)g(in)o(teger,)-76
687 y(v)n(ariable,)20 b(or)c(in\014x)j(binary)f(term,)f(resp)q(ectiv)o
(ely)m(.)30 b(The)17 b(follo)o(wing)-76 729 y(de\014nitions)f(will)f
(also)f(b)q(e)f(used:)-76 799 y Fo(datatype)k(Term)h(=)h(In)g(of)g
(\(term)e(T\);)-76 841 y(datatype)g('a)i(Maybe)e(=)i(Nothing)e(of)i
(unit)f(|)h(Just)g(of)f('a;)-76 882 y(type)g(Sub)h(=)g(\(\(string)d(*)k
(term\))d(List\))h(Maybe;)-76 924 y(type)g(Rule)g(=)i(\(Term)d(*)i
(Term\);)-76 1007 y(fun)g(const)e(x)j(=)f(In)g(\(Const)e(x\);)-76
1048 y(fun)i(var)f(x)h(=)h(In)e(\(Var)g(x\);)-76 1090
y(fun)h(op)f(x)39 b(=)20 b(In)e(\(Op)h(x\);)-76 1131
y(fun)g(out)f(\(In)h(x\))f(=)i(x;)-20 1202 y Fv(where)9
b Fo(Term)e Fv(ties)i(the)g(recursiv)o(e)h(knot)g(in)f
Fo(T)f Fv(to)h(represen)o(t)h(terms,)-76 1243 y(and)h
Fo(Sub)e Fv(is)i(the)f(t)o(yp)q(e)h(of)f(substitutions,)j(resp)q(ectiv)
o(ely)m(.)18 b(The)10 b Fo(Maybe)-76 1285 y Fv(t)o(yp)q(e)g(pro)o
(vides)h(a)f(mec)o(hanism)h(to)e(write)h(functions)h(that)f(can)g(fail)
g(to)-76 1326 y(return)i(a)f(meaningful)j(v)n(alue)f(b)o(y)f(returning)
h Fo(Nothing)k(\(\))10 b Fv(instead.)-76 1368 y(Since)17
b(pattern)e(matc)o(hing)i(ma)o(y)e(fail)i(the)e(substitution)j(t)o(yp)q
(e)d(is)h(a)-76 1409 y Fo(Maybe)10 b Fv(t)o(yp)q(e.)17
b(W)m(e)c(represen)o(t)g(rules)g(as)g(an)f(ordered)h(pair)h(of)e
(terms.)-76 1451 y(Th)o(us,)19 b Fq(r)55 1455 y Fn(1)89
1451 y Fv(w)o(ould)g(b)q(e)f Fo(\(op\(var)e("x","+",int)g("0"\),var)g
("x"\))o Fv(.)-76 1492 y(The)c(function)h Fo(out)19 b(:)39
b(Term)18 b(->)h(Term)f(T)11 b Fv(remo)o(v)o(es)i(a)f(term)f(from)-76
1534 y(the)i(recursiv)o(e)i(t)o(yp)q(e)e(to)g(the)g(1)g(lev)o(el)i(t)o
(yp)q(e.)-20 1575 y(T)m(o)e(simplify)m(,)h(w)o(e)f(fo)q(cus)g(on)h
Fo(match)n Fv(,)e(a)h(function)i(that)e(matc)o(hes)-76
1617 y(a)g(rule)g(with)h(the)e(whole)i(sub)r(ject)f(term,)f(that)h(is,)
g(the)g(sp)q(ecial)i(case)-76 1658 y(when)j Fq(s)h Fv(=)g
Fq(t)p Fv(.)31 b(W)m(e)18 b(assume)h(that)f(a)g(separate)h(help)q(er)g
(function)-76 1700 y(applies)c Fo(match)c Fv(to)i(all)i(subterms)e(of)g
(the)g(sub)r(ject)h(term.)-20 1741 y(No)o(w,)c(let)g(us)g(consider)i
(what)e(the)g(result)h(of)e(sp)q(ecializi)q(ng)k Fo(match)-76
1783 y Fv(o)o(v)o(er)g(a)f(rule)h(should)h(lo)q(ok)g(lik)o(e.)k(If)11
b(w)o(e)h(tak)o(e)h Fq(r)595 1787 y Fn(1)623 1783 y Fv(:)21
b Fq(x)7 b Fv(+)g(0)k Fp(!)g Fq(x)g Fv(as)i(an)-76 1824
y(example,)h(then)g(an)f(go)q(o)q(d)h(result)g(should)h(ha)o(v)o(e)e(a)
g(form)g(close)h(to:)-76 1895 y Fo(fun)19 b(rewriteR1)d(term)i(=)-76
1936 y(case)g(\(out)g(term\))g(of)-37 1978 y(Op)h(\(t1,s,t2\))d(=>)42
2019 y(if)j(streq\(s,")o(+")o(\))42 2061 y(then)f(\(case)g(\(out)g
(t2\))g(of)199 2102 y(Const)f(n)j(=>)f(if)f(n=0)h(then)f(t1)h(else)f
(term)160 2144 y(|)h(_)g(=>)g(term\))42 2185 y(else)f(term)-76
2227 y(|)h(_)h(=>)e(term;)-76 2297 y Fv(Here)11 b(there)h(is)g(no)f(in)
o(terpretiv)o(e)j(o)o(v)o(erhead)e(of)f(tra)o(v)o(ersing)i(the)f(rule,)
-76 2339 y(and)17 b(the)f(substitution)j(op)q(eration)f(has)e(also)i(b)
q(een)e(computed)h(in)-76 2380 y(the)f(\014rst)f(stage.)24
b(In)16 b(the)f(rest)g(of)g(this)h(section,)h(w)o(e)e(will)i(see)e(ho)o
(w)-76 2422 y(far)e(to)o(w)o(ards)g(this)h(goal)g(w)o(e)f(can)g(go)g
(using)i(MetaML.)-76 2515 y Fw(A.1)42 b(An)14 b(Implementation)f(of)g
Fo(match)-76 2581 y Fv(Figure)e(3)f(presen)o(ts)g(the)g(complete)h(co)q
(de)f(for)g Fo(match)n Fv(,)f(together)i(with)-76 2622
y(a)g(staged)h(v)o(ersion.)18 b(Note)11 b(that)g(if)g(w)o(e)g(erase)g
(the)g(annotations)i(from)1020 -34 y(the)19 b(staged)g(v)o(ersion,)i(w)
o(e)e(get)f(the)h(source)g(v)o(ersion)i(bac)o(k.)34 b(The)1020
7 y(source)13 b Fo(match)e Fv(function)j(tak)o(es)f(a)f(pattern)i(term)
e Fo(pat)o Fv(,)g(a)h(substitu-)1020 49 y(tion)e Fo(msigma)n
Fv(,)f(a)h(term)f Fo(term)o Fv(,)g(and)h(returns)g(a)g(substitution.)18
b(Recall)1020 90 y(that)12 b(a)g(substitution)j(is)e(a)f(ma)o(yb)q(e)g
(t)o(yp)q(e)h(and)g(ma)o(y)f(b)q(e)g Fo(Nothing\(\))p
Fv(.)1076 132 y(Hence,)h(the)f(t)o(yp)q(e)h(of)g(the)g
Fo(match)d Fv(function)k(is)f(\002)e Fp(!)g Fv(\006)f
Fp(!)h Fv(\002)g Fp(!)1020 173 y Fv(\006,)h(where)h(\002)e
Fp(\021)f Fo(Term)o Fv(,)i(and)i(\006)c Fp(\021)h Fo(Sub)o
Fv(.)1076 215 y(If)19 b Fo(match)e Fv(is)j(passed)g(an)f(in)o(v)n(alid)
j(substitution)g Fo(Nothing)17 b(\(\))1020 256 y Fv(the)j(outer)g
Fo(case)o Fv(-statemen)o(t)g(propagates)h(the)f(failure.)39
b(Other-)1020 298 y(wise,)18 b(if)f(the)g(pattern)h(term)f(is)g(a)g(v)n
(ariable,)j(the)d(substitution)j(is)1020 339 y(extended)11
b(appropriately)h(after)d(c)o(hec)o(king)i(the)f(compatibili)q(t)o(y)i
(con-)1020 381 y(dition.)19 b(Similarly)m(,)c(if)d(the)g(pattern)h
(term)f(is)g(an)h(op)q(erator,)g(it)f(m)o(ust)1020 422
y(b)q(e)k(c)o(hec)o(k)o(ed)h(that)f(the)g(sub)r(ject)h(term)f(is)g
(also)h(an)g(op)q(erator)g(with)1020 464 y(the)c(same)g(op)q(eration,)i
(and)f(then)f(the)g(righ)o(t-)h(and)g(left-hand-sides)1020
505 y(of)c(the)h(pattern)f(and)h(the)g(sub)r(ject)g(term)f(are)g
(recursiv)o(ely)j(matc)o(hed,)1020 547 y(extending)f(the)e
(substitution.)19 b(If)10 b(the)g(pattern)g(term)g(is)h(an)f(in)o
(teger,)1020 588 y(then)h(the)g(sub)r(ject)h(term)e(m)o(ust)h(also)h(b)
q(e)f(an)g(in)o(teger)h(with)f(the)g(same)1020 630 y(v)n(alue.)22
b(In)14 b(this)h(case)f(the)g(original)j(substitution)g(is)e(returned.)
21 b(In)1020 671 y(all)c(other)g(cases,)g Fo(match)d
Fv(returns)i Fo(Nothing)h(\(\))o Fv(,)g(indicating)i(that)1020
713 y Fo(match)11 b Fv(has)i(failed.)1076 750 y(The)g(staged)h
Fo(match)d Fv(function)j(has)f(t)o(yp)q(e)h(\002)c Fp(!)p
Fq(<)h Fv(\006)p Fq(;)6 b Fo('a)k Fq(>)p Fp(!)1020 788
y Fv([4])19 b Fq(<)h Fv(\002)p Fq(;)6 b Fo('a)19 b Fq(>)p
Fp(!)p Fq(<)h Fv(\006)p Fq(;)6 b Fo('a)19 b Fq(>)p Fv(.)33
b(The)19 b(t)o(yp)q(e)g(indicates)h(that)f(the)1020 825
y(pattern)f(term)g(is)g(insp)q(ected)i(only)f(in)f(the)g(\014rst)g
(stage,)h(and)f(the)1020 862 y(result)e(is)g(a)f(sp)q(ecialized)j
(function)e(that)g(can)f(b)q(e)g(run)h(in)g(a)f(future)1020
900 y(stage.)23 b(W)m(e)15 b(can)g(also)h(de\014ne)f(and)h(annotate)g
Fo(rewrite)c Fv(using)k(the)1020 937 y(help)q(er)e(function)h
Fo(wrapper)10 b Fv(as)j(follo)o(ws:)1020 1004 y Fd(\(*)35
b(wrapper)15 b(:)i(Rule)f(->)h(<Term>)f(->)h(<Term>)33
b(*\))1020 1042 y(fun)17 b(wrapper)e(\(lhs,rhs\))f(term)i(=)1020
1079 y(let)h(val)f(ms)35 b(=)17 b(match)f(lhs)g(<Just)g([]>)h(term)1020
1116 y(in)1055 1154 y(<)h(case)e(\(~ms\))g(of)1126 1191
y(Nothing)f(\(\))i(=>)g(~term)1091 1228 y(|)g(Just)f(\(sigma\))f(=>)
1179 1266 y(subst)h(sigma)g(rhs)g(>)h(end)g(;)1020 1341
y(\(*)35 b(rewrite)15 b(:)i(Rule)f(->)h(<Term)f(->)h(Term>)33
b(*\))1020 1378 y(fun)17 b(rewrite)e(rule)h(=)h(<fn)g(x)g(=>)g
(~\(wrapper)d(rule)j(<x>\)>;)1076 1449 y Fv(In)9 b(Figure)h(4)f(the)g
(co)q(de)h(generated)g(for)e Fq(r)1654 1453 y Fn(1)1682
1449 y Fv(:)21 b Fq(x)p Fv(+0)12 b Fp(!)f Fq(x)d Fv(app)q(ears.)1020
1491 y(The)k(tra)o(v)o(ersal)i(of)e(the)h(pattern)g(term)f(has)h(b)q
(een)h(p)q(erformed.)j(Y)m(et,)1020 1532 y(compared)e(with)g(the)f(co)q
(de)h(w)o(e)e(deriv)o(ed)j(b)o(y)e(hand,)h(there)g(are)f(to)q(o)1020
1574 y(man)o(y)j(nested)h Fo(case)n Fv(-statemen)o(ts,)g(and)f(the)g
(calls)h(to)f Fo(subst)d Fv(and)1020 1615 y Fo(compatible)9
b Fv(ha)o(v)o(e)14 b(not)f(b)q(een)g(p)q(erformed.)1076
1657 y(Careful)e(insp)q(ection)i(sho)o(ws)e(that)g(it)g(should,)h(in)g
(fact,)e(b)q(e)h(p)q(ossi-)1020 1698 y(ble)f(to)e(reduce)i(the)f
(nested)g Fo(case)o Fv(-statemen)o(ts)g(b)o(y)g(meaning-preserving)1020
1740 y(transformations.)17 b(If)9 b(the)f(outer)i Fo(case)n
Fv(-statemen)o(ts)f(could)h(b)q(e)f(\\pushed")1020 1781
y(through)i(the)f(inner)i(ones,)f(then)f(w)o(e)g(w)o(ould)h(b)q(e)f
(able)h(to)f(simplify)j(all)1020 1823 y(the)h(v)n(alues)h(at)e(the)h
(lea)o(v)o(es)h(of)e(the)h(inner)h Fo(if)o Fv(-statemen)o(ts.)k(In)14
b(par-)1020 1864 y(ticular,)i(in)f(ev)o(ery)f(case)g(where)h(w)o(e)e
(return)i Fo(Nothing)i(\(\))o Fv(,)d(the)g(un-)1020 1906
y(c)o(hanged)f(term)f Fo(t1)e Fv(w)o(ould)j(b)q(e)f(returned,)g(and)h
(where)e Fo(Just)19 b(\()p Fq(\033)q Fo(\))11 b Fv(is)1020
1947 y(returned)i(then)g(the)f(substitution)j Fo(subst)i
Fq(\033)d Fv(could)f(b)q(e)f(p)q(erformed)1020 1989 y(on)h
Fo(rhs)o Fv(.)1076 2030 y(Giv)o(en)f(that)f(w)o(e)g(w)o(ere)f(able)i
(to)f(write)g(the)g(function)i Fo(rewriteR1)1020 2072
y Fv(b)o(y)i(hand,)h(it)f(should)h(b)q(e)f(clear)g(that)g(v)n(alues)h
(of)f Fo(Maybe)n Fv(-t)o(yp)q(e)f(need)1020 2113 y(not)g(app)q(ear)h
(in)g(the)f(generated)h(co)q(de.)21 b(Unfortunately)m(,)15
b(this)g(can-)1020 2155 y(not)i(b)q(e)g(ac)o(hiev)o(ed)i(b)o(y)e(using)
h(only)g(the)f(staging)i(annotations)g(on)1020 2196 y(the)13
b(curren)o(t)h(program.)1076 2238 y(In)h(particular,)j(the)d(test)g(of)
g(the)h(compatibilit)o(y)j(condition)e(in)1020 2279 y
Fo(match)8 b Fv(cannot)i(b)q(e)g(p)q(erformed)h(at)e(generation)j(time)
e(since)h(the)f(sub-)1020 2321 y(ject)f(term)h(is)g(unkno)o(wn.)17
b(A)o(t)10 b(the)f(same)h(time,)h(this)g(call)g(determines)1020
2363 y(whether)17 b Fo(Nothing)c Fv(or)k Fo(Just)e Fv(is)i(returned.)28
b(This)17 b(implies)i Fo(match)1020 2404 y Fv(m)o(ust)d(return)h(a)f(v)
n(alue)i(of)d(t)o(yp)q(e)i Fq(<)f Fo(Maybe)n Fq(\013;)6
b Fo('a)15 b Fq(>)p Fv(.)26 b(This)17 b(means)1020 2446
y(the)c(generated)h(co)q(de)g(will)g(con)o(tain)h(v)n(alues)f(of)f
Fo(Maybe)e Fv(t)o(yp)q(e.)1076 2487 y(Similarly)n(,)19
b(threading)g Fo(msigma)13 b Fv(through)18 b(the)f(recursiv)o(e)h
(calls)1020 2529 y(to)h Fo(match)d Fv(stops)j(us)g(from)f(b)q(eing)i
(able)g(to)e(reduce)h(the)g(calls)h(to)1020 2570 y Fo(compatible)14
b Fv(and)19 b Fo(subst)d Fv(at)j(generation)h(time:)28
b(The)18 b(result)h(of)1020 2612 y(b)q(oth)h(of)g(these)g(functions)h
(dep)q(ends)h(on)e(the)g(substitution)i(list,)p eop
%%Page: 14 14
14 13 bop -76 -74 2010 2 v -77 926 2 1001 v -53 -45 a
Fd(\(*)17 b(Source)e(match:)g(Term)i(->)g(Sub)f(->)h(Term)f(->)h(Sub)g
(*\))-53 30 y(fun)f(match)g(pat)h(msigma)e(term)h(=)-53
67 y(case)g(\(msigma\))f(of)0 104 y(Nothing)g(\(\))i(=>)f(Nothing)g
(\(\))-36 142 y(|)i(Just)e(\(sigma\))f(=>)-53 179 y(\(case)g(\(out)i
(pat\))f(of)17 216 y(Var)h(u)g(=>)52 254 y(if)g(compatible)d(u)k(sigma)
e(term)105 291 y(then)h(Just)f(\(cons\(\(u,t)o(er)o(m\),)o(sig)o(ma\))o
(\))88 328 y(else)g(Nothing)f(\(\))-18 366 y(|)i(Op)g(\(t11,s1,t1)o
(2\))d(=>)52 403 y(\(case)i(\(out)g(term\))g(of)123 441
y(Op)h(\(t21,s2,t2)o(2\))d(=>)88 478 y(\(if)i(streq\(s2,\()e(s1\)\))158
515 y(then)i(\(match)g(t11)299 553 y(\(match)g(t12)g(msigma)g(t22\))352
590 y(t21\))158 627 y(else)g(Nothing)g(\(\)\))88 665
y(|)h(_)g(=>)g(Nothing)e(\(\)\))-18 702 y(|)i(Const)f(n)h(=>)52
739 y(\(case)f(\(out)g(term\))g(of)105 777 y(Const)g(u)h(=>)g(if)g(u=n)
317 814 y(then)f(msigma)317 852 y(else)g(Nothing)f(\(\))70
889 y(|)i(_)h(=>)f(Nothing)e(\(\)\)\);)p 868 926 V 891
-45 a(\(*)i(Annotated)e(match:)g(Term)h(->)h(<Sub>)f(->)h(<Term>)f(->)h
(<Sub>)e(*\))891 30 y(fun)i(match)f(pat)g(msigma)g(term)g(=)891
67 y(<case)g(~msigma)f(of)962 104 y(Nothing)g(\(\))i(=>)g(Nothing)e
(\(\))927 142 y(|)i(Just)f(\(sigma\))f(=>)909 179 y(~\(case)h(\(out)g
(pat\))g(of)997 216 y(Var)h(u)g(=>)1033 254 y(<if)f(compatible)e(u)j
(sigma)f(~term)1103 291 y(then)g(Just)h(\(cons\(\(u,)o(~te)o(rm\))o(,s)
o(igm)o(a\)\))1103 328 y(else)f(Nothing)f(\(\)>)962 366
y(|)i(Op)g(\(t11,s1,t12)o(\))e(=>)1033 403 y(<case)g(\(out)i(~term\))e
(of)1103 441 y(Op)i(\(t21,s2,t2)o(2\))d(=>)1068 478 y(\(if)i
(streq\(s2,)f(~\(lift)g(s1\)\))1138 515 y(then)i(~\(match)e(t11)1297
553 y(\(match)h(t12)g(msigma)g(<t22>\))1350 590 y(<t21>\))1138
627 y(else)h(Nothing)e(\(\)\))1068 665 y(|)i(_)g(=>)g(Nothing)e(\(\)>)
962 702 y(|)i(Const)f(n)h(=>)1033 739 y(<case)e(\(out)i(~term\))e(of)
1085 777 y(Const)h(u)i(=>)f(if)f(u=)h(~\(lift)f(n\))1297
814 y(then)g(~msigma)1297 852 y(else)g(Nothing)g(\(\))1050
889 y(|)h(_)h(=>)f(Nothing)e(\(\)>\)>;)p 1933 926 V -76
928 2010 2 v 427 1000 a Fv(Figure)f(3:)j(Normal)d(and)g(Annotated)g(v)o
(ersions)g(of)f(the)g(function)h Fo(match)p Fv(.)p -76
1054 2183 2 v -77 1681 2 627 v -53 1083 a Fd(<\(fn)i(t1)h(=>)35
1121 y(\(case)f(\(case)f(\045out)i(t1)g(of)194 1158 y(Op\(tl,op1)o(,tr)
o(\))e(=>)246 1195 y(if)i(\045streq)f(\(op1,"+"\))299
1233 y(then)h(\(case)e(\(case)h(\045out)h(tr)f(of)546
1270 y(Const)g(n)i(=>)599 1307 y(if)f(\045=)g(\(n,0\))f(then)g
(Just\(nil\))f(else)h(Nothing)f(\(\))529 1345 y(|)i(Var)g(s)g(=>)g
(Nothing)e(\(\))529 1382 y(|)i(Op)g(s)g(=>)g(Nothing)e(\(\)\))i(of)441
1419 y(Nothing)e(\(\))i(=>)g(Nothing)e(\(\))423 1457
y(|)i(Just)f(s)i(=>)f(if)g(\045compatib)o(le)d("x")j(s)g(tl)g(then)f
(Just)g(\(\045cons)g(\(\("x",tl\),)o(s\)\))e(else)i(Nothing)f(\(\)\))
299 1494 y(else)i(Nothing)e(\(\))176 1531 y(|)i(Const)f(n)h(=>)g
(Nothing)e(\(\))176 1569 y(|)i(Var)g(s)g(=>)g(Nothing)e(\(\)\))i(of)88
1606 y(Nothing)e(\(\))i(=>)g(t1)70 1644 y(|)g(Just)g(s)g(=>)g
(\045subst)e(s)j(In)e(Var)h("x"\)\)>)p 2106 1681 V -76
1683 2183 2 v 370 1754 a Fv(Figure)d(4:)j(Co)q(de)c(generated)h(from)f
(rule)h Fq(r)997 1758 y Fn(1)1025 1754 y Fv(=)21 b Fq(x)8
b Fv(+)h(0)i Fp(!)g Fq(x)h Fv(b)o(y)i(function)g Fo(match)p
Fv(.)-76 1878 y(but)f(b)q(ecause)g(w)o(e)f(are)g(forced)g(to)g
(annotate)i Fo(msigma)9 b Fv(to)j(ha)o(v)o(e)h(t)o(yp)q(e:)-76
1919 y Fq(<)p Fo(\(\(string)k(*)i(Term\)List)o(\)Ma)o(yb)o(e)p
Fq(;)s Fo('a)10 b Fq(>)j Fv(and)g(not)-76 1961 y Fo(\(\(string)k(*)i
Fq(<)p Fo(Term)p Fq(;)t Fo('a)10 b Fq(>)p Fo(\)List\)Mayb)o(e)m
Fv(,)17 b(these)g(t)o(w)o(o)g(functions)-76 2002 y(cannot)d(\\access")g
(the)f(list)h(at)f(generation)i(time.)-20 2044 y(That)f(our)g(\014rst)g
(attempt)g(at)f(staging)i(our)f(example)h(w)o(as)f(only)-76
2085 y(partly)e(successful,)g(should)g(not)f(b)q(e)f(to)q(o)h
(surprising.)19 b(Users)10 b(of)g(par-)-76 2127 y(tial)18
b(ev)n(aluation)h(systems)f(restructure)f(their)h(programs)f(to)g(help)
-76 2168 y(BT)m(A)12 b(succeed)h(all)h(the)f(time.)k(Just)12
b(b)q(ecause)i(binding-time)i(anno-)-76 2210 y(tations)g(are)e(placed)i
(man)o(ually)h(shouldn't)f(exempt)f(us)g(from)f(this)-76
2251 y(requiremen)o(t.)32 b(Because)19 b(w)o(e)e(can)h(touc)o(h,)h
(see,)f(and)h(exp)q(erimen)o(t)-76 2293 y(with)12 b(b)q(oth)g(the)g
(explicit)h(annotations)h(and)e(the)g(co)q(de)g(returned,)g(it)-76
2334 y(helps)21 b(us)e(understand)i(and)f(reason)g(ab)q(out)g(what)f
(is)h(going)g(on.)-76 2376 y(Using)h(the)f(t)o(yp)q(e)g(system)g(to)f
(\014lter)i(out)f(ob)o(viously)i(incorrectly)-76 2417
y(phased)c(programs)f(w)o(as)e(also)j(extremely)f(useful.)27
b(The)16 b(strength)-76 2459 y(of)c(MetaML)h(is)g(the)g(men)o(tal)g(mo)
q(del)h(it)f(pro)o(vides)h(to)e(reason)h(ab)q(out)-76
2500 y(what)g(is)h(going)g(on.)1020 1878 y Fw(A.2)42
b(Continuation-P)o(assi)o(ng)10 b(St)o(yle)1020 1943
y Fv(Our)k(solution)i(needs)f(to)f(propagate)h(the)f(con)o(text)h(\(p)q
(erforming)g(a)1020 1985 y(substitution)20 b(o)o(v)o(er)d(the)g(righ)o
(t-hand)i(side)f(of)e(the)h(rule\))h(in)o(to)g(the)1020
2026 y(lea)o(v)o(es)d(of)f(the)g(nested)g(case)h(expressions.)22
b(This)14 b(suggests)h(rewrit-)1020 2068 y(ing)d(the)g(source)g
(program)g(in)g(con)o(tin)o(uation-passi)q(ng)j(st)o(yle)d(\(CPS\).)
1020 2109 y(This)h(has)g(b)q(een)g(found)h(to)e(b)q(e)h(quite)g(useful)
h(in)f(partial)i(ev)n(aluation)1020 2151 y(systems)f([1)o(].)1076
2188 y(Figure)h(5)f(sho)o(ws)h(b)q(oth)f(a)g(source)h(v)o(ersion)h(of)d
Fo(match)f Fv(using)k(an)1020 2226 y(explicit)21 b(con)o(tin)o(uation)h
(and)e(an)f(annotated)h(t)o(w)o(o)e(stage)i(v)o(ersion)1020
2263 y(of)e(the)h(same)f(function.)35 b(The)18 b(function)i(tak)o(es)e
(a)h(pattern)g Fo(pat)o Fv(,)1020 2300 y(a)d(con)o(tin)o(uation)i
Fo(k)p Fv(,)d(a)h(substitution)i Fo(msigma)n Fv(,)e(and)g(a)g(term)f
Fo(term)o Fv(.)1020 2338 y(This)g(function)g(actually)h(has)e(a)g
(rather)g(p)q(olymorphic)j(t)o(yp)q(e)d(since)1020 2375
y(nothing)e(constrains)h(the)e(v)n(alue)g(returned)h(b)o(y)f(the)g(con)
o(tin)o(uation)i Fo(k)p Fv(.)1020 2412 y(In)i(the)f(\014gure)i(w)o(e)e
(ha)o(v)o(e)h(constrained)i(the)e(con)o(tin)o(uation)i(to)e(ha)o(v)o(e)
1020 2450 y(t)o(yp)q(e)h(substitution)j(to)d(term.)26
b(The)16 b(con)o(tin)o(uation)j(should)f(apply)1020 2487
y(the)12 b(substitution)j(to)c(the)h(righ)o(t-hand)i(side)f(of)e(the)h
(rule,)h(or)f(return)1020 2524 y(the)f(term)f(unc)o(hanged)j(if)e(the)f
(substitution)k(is)d(a)f(failure.)18 b(Th)o(us)11 b(the)1020
2562 y(wrapp)q(er)j(function)g(could)g(b)q(e)g(written:)1020
2622 y Fd(fun)j(wrapper)e(\(lhs,rhs\))f(term)i(=)p eop
%%Page: 15 15
15 14 bop -76 -74 2010 2 v -77 1076 2 1150 v -53 -45
a Fd(\(*)17 b(Source)e(*\))-53 -8 y(type)h(Cont)g(=)h(Sub)g(->)g(Term)
-53 104 y(\(*)34 b(match)16 b(:)h(Term)f(->)h(Cont)g(->)g(Sub)f(->)h
(Term)f(->)h(Term)f(*\))-53 142 y(fun)g(match)g(pat)h(k)g(msigma)e
(term)i(=)-53 179 y(case)f(\(msigma\))f(of)0 216 y(Nothing)g(\(\))i(=>)
f(k)i(\(Nothing\(\))o(\))-36 254 y(|)g(Just)e(\(sigma\))f(=>)-53
291 y(\(case)g(\(out)i(pat\))f(of)17 328 y(Var)h(u)g(=>)52
366 y(if)g(compatible)d(u)k(sigma)e(term)105 403 y(then)h(k)g(\(Just)f
(\(cons\(\(u,)o(ter)o(m\),)o(sig)o(ma\))o(\)\))88 441
y(else)g(k)h(\(Nothing)e(\(\)\))-18 478 y(|)i(Op)g(\(t11,s1,t1)o(2\))d
(=>)52 515 y(\(case)i(\(out)g(term\))g(of)123 553 y(Op)h(\(t21,s2,t2)o
(2\))d(=>)88 590 y(\(if)i(streq\(s2,s1)o(\))158 627 y(then)g(\(match)g
(t11)299 665 y(\(fn)h(s)g(=>)g(match)f(t12)h(k)g(s)g(t22\))352
702 y(msigma)388 739 y(t21\))158 777 y(else)f(k)i(\(Nothing)d(\(\)\)\))
88 814 y(|)i(_)g(=>)g(k\(Nothing)e(\(\)\)\))-18 852 y(|)i(Const)f(n)h
(=>)52 889 y(\(case)f(\(out)g(term\))g(of)105 926 y(Const)g(u)h(=>)g
(if)g(u=n)317 964 y(then)f(k)i(msigma)317 1001 y(else)e(k)i(\(Nothing)c
(\(\)\))70 1038 y(|)j(_)h(=>)f(k\(Nothing)d(\(\)\)\)\);)p
868 1076 V 891 -45 a(\(*)j(Annotated)e(*\))891 -8 y(type)i(Sub')f(=)h
(\(\(string)e(*)i(<Term>\))e(List\))h(Maybe;)891 30 y(type)h(Cont')e(=)
j(Sub')e(->)h(<Term>)891 104 y(\(*)g(match)f(:)h(Term)g(->)g(Cont')e
(->)i(Sub')g(->)g(<Term>)e(->)i(<Term>)e(*\))891 142
y(fun)i(match)f(pat)g(k)i(msigma)d(term)h(=)891 179 y(case)h
(\(msigma\))d(of)944 216 y(Nothing)h(\(\))i(=>)g(k)h(\(Nothing\()o
(\)\))909 254 y(|)f(Just)g(\(sigma\))e(=>)891 291 y(\(case)h(\(out)g
(pat\))h(of)962 328 y(Var)g(u)g(=>)980 366 y(<if)f(~\(compatibl)o(e')e
(u)j(sigma)f(term\))1050 403 y(then)g(~\(k)h(\(Just)f(\(cons\(\(u,t)o
(erm)o(\),)o(sig)o(ma\))o(\)\)\))1050 441 y(else)g(~\(k)h(\(Nothing)e
(\(\)\)\)>)927 478 y(|)i(Op)g(\(t11,s1,t1)o(2\))d(=>)997
515 y(<case)i(\(out)g(~term\))g(of)1068 553 y(Op)h(\(t21,s2,t2)o(2\))d
(=>)1033 590 y(\(if)i(streq\(~\(lif)o(t)e(s1\),s2\))1103
627 y(then)i(~\(match)f(t11)1244 665 y(\(fn)i(s)g(=>)g(match)f(t12)g(k)
i(s)f(<t22>\))1297 702 y(msigma)1332 739 y(<t21>\))1103
777 y(else)f(~\(k)h(\(Nothing)e(\(\)\)\)\))1033 814 y(|)i(_)g(=>)g
(~\(k\(Nothin)o(g)e(\(\)\)\)>)927 852 y(|)i(Const)f(n)h(=>)997
889 y(<case)f(\(out)g(~term\))g(of)1050 926 y(Const)g(u)h(=>)g(if)g(u=)
g(~\(lift)f(n\))1262 964 y(then)g(~\(k)h(msigma\))1262
1001 y(else)f(~\(k)h(\(Nothing)d(\(\)\)\))1015 1038 y(|)j(_)g(=>)g
(~\(k\(Nothing)d(\(\)\)\)>\);)p 1933 1076 V -76 1077
2010 2 v 414 1149 a Fv(Figure)g(5:)j(Normal)c(and)h(Annotated)g(v)o
(ersions)g(of)f(the)g(CPS)g(st)o(yle)h Fo(match)p Fv(.)-41
1272 y Fd(match)i(lhs)30 1310 y(\(fn)h(Nothing)e(\(\))i(=>)g(term)f(|)h
(Just)f(s)i(=>)e(subst)g(rhs)h(s\))101 1347 y(\(Just)e([]\))171
1385 y(term;)-20 1451 y Fv(The)c(annotated)h(v)o(ersion)g(is)f(again)h
(remark)n(ably)h(similar)f(to)f(the)-76 1489 y(original)19
b(except)d(for)f(the)h(annotations.)27 b(The)16 b(only)h(di\013erence)h
(is)-76 1526 y(that)13 b(w)o(e)f(needed)h(to)g(write)g(a)f(staged)h(v)o
(ersion)h(of)f(the)f Fo(compatible)-76 1563 y Fv(function,)18
b(since)f(in)g(the)g(staged)f(v)o(ersion)i(a)e(substitution)j(\()p
Fo(Sub')p Fv(\))-76 1601 y(maps)12 b(a)f(string)h(to)g(a)f(piece)h(of)f
(co)q(de)h(with)f(t)o(yp)q(e)h(term,)f(rather)h(than)-76
1638 y(a)18 b(term.)30 b(W)m(e)18 b(call)h(this)f(function)h
Fo(compatibl)o(e')p Fv(.)27 b(It)17 b(returns)h(a)-76
1675 y(piece)c(of)f(co)q(de)g(with)h(t)o(yp)q(e)f Fo(bool)p
Fv(.)-76 1742 y Fd(fun)k(compatible)o(')d(u)k(sigma)e(term)g(=)-76
1779 y(case)g(find)h(u)g(sigma)f(of)-41 1817 y(Nothing\(\))f(=>)i
(<true>)-76 1854 y(|)g(Just)g(w)g(=>)g(<termeq)e(~w)i(~term>;)-20
1921 y Fv(Finally)m(,)12 b(the)e(co)q(de)f(generator)h(can)g(b)q(e)g
(constructed)g(b)o(y)g(supply-)-76 1958 y(ing)g(a)g(suitable)h
(substitution)h(con)o(tin)o(uation.)19 b(This)10 b(function)g(needs)-76
1995 y(a)15 b(annotated)i(substitution)h(function)e(whic)o(h)g(returns)
g(a)f(piece)h(of)-76 2033 y(co)q(de)c(with)g(t)o(yp)q(e)g(term)f
(rather)h(than)g(a)f(term,)g(and)h(is)g(giv)o(en)h(b)q(elo)o(w:)-76
2099 y Fd(fun)k(subst')e(\(In)i(t\))g(sig)f(=)-76 2137
y(case)g(\(t\))h(of)-41 2174 y(Var)g(v)g(=>)30 2211 y(\(case)f(find)g
(v)h(sig)g(of)83 2249 y(Nothing)e(_)i(=>)g(<In)g(\(Var)f(~\(lift)g
(v\)\)>)48 2286 y(|)h(Just)f(w)h(=>)g(w\))-76 2323 y(|)g(Op)g
(\(t1,s,t2\))e(=>)30 2361 y(<In)i(\(Op)f(\(~\(subst')f(t1)i(sig\),)189
2398 y(~\(lift)e(s\),)189 2436 y(~\(subst')g(t2)i(sig\)\)\))e(>)-76
2473 y(|)i(Const)f(i)i(=>)f(<In)f(\(Const)g(~\(lift)f(i\)\)>;)-76
2548 y(fun)i(wrapper)e(\(lhs,rhs\))f(term)j(=)-41 2585
y(match)f(lhs)30 2622 y(\(fn)h(Nothing)e(\(\))i(=>)g(term)f(|)h(Just)f
(s)i(=>)e(subst')g(rhs)h(s\))1196 1272 y(\(Just)f([]\))1267
1310 y(term;)1076 1377 y Fv(When)e(this)g(function)g(is)f(used)h(to)f
(generate)g(co)q(de)h(for)e(the)h(rule)1020 1414 y Fq(r)1037
1418 y Fn(1)1065 1414 y Fv(=)22 b Fq(x)8 b Fv(+)g(0)j
Fp(!)g Fq(x)i Fv(the)g(follo)o(wing)i(is)f(generated:)1020
1482 y Fd(<fn)j(t)g(=>)1091 1519 y(\(case)e(\045out)i(t)g(of)1144
1556 y(Op\(tl,s,t)o(r\))d(=>)1179 1594 y(if)j(\045streq)e(\("+",s\))
1232 1631 y(then)h(\(case)g(\045out)g(tr)h(of)1373 1668
y(Const)f(n)h(=>)g(if)g(\045=)g(\(n,0\))f(then)g(tl)h(else)f(t)1338
1706 y(|)h(Var)f(s)i(=>)f(t)1338 1743 y(|)g(Op)g(z)g(=>)g(t\))1232
1781 y(else)f(t)1108 1818 y(|)i(Const)d(n)j(=>)f(t)1108
1855 y(|)h(Var)e(z)h(=>)g(t\)>)1076 1927 y Fv(In)10 b(addition)j(to)d
(b)q(eing)h(compact)g(and)f(free)g(of)g(reducible)i(nested)1020
1968 y Fo(case)o Fv(-statemen)o(ts)i(or)h(calls)h(to)e
Fo(subst)e Fv(or)i Fo(compatible)m Fv(,)g(this)h(out-)1020
2010 y(put)f(is)f(virtually)j(iden)o(tical)g(to)d(the)h(idealized)i(co)
q(de)d(w)o(e)g(presen)o(ted)1020 2051 y(for)i Fo(rewriteR1)l
Fv(.)23 b(W)m(e)15 b(ha)o(v)o(e)h(observ)o(ed)g(that)f(the)g(co)q(de)h
(generated)1020 2093 y(for)d(a)g(v)n(ariet)o(y)h(of)f(other)g(rules)h
(is)g(equally)h(as)e(compact.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
