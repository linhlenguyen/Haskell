%!PS-Adobe-3.0
%%Title: Type Classes and Functional Dependencies
%%Creator: Windows NT 4.0
%%CreationDate: 15:17 1/8/2001
%%Pages: (atend)
%%BoundingBox: 12 13 601 779
%%LanguageLevel: 2
%%DocumentNeededFonts: (atend)
%%DocumentSuppliedFonts: (atend)
%%EndComments
%%BeginProlog

%%BeginResource: procset NTPSOct95
/NTPSOct95 100 dict dup begin/bd{bind def}bind def/ld{load def}bd/ed{exch def}
bd/a{currentpoint}bd/c/curveto ld/d/dup ld/e/eofill ld/f/fill ld/tr/translate
ld/gr/grestore ld/gs/gsave ld/j/setlinejoin ld/L/lineto ld/M/moveto ld/n
/newpath ld/cp/closepath ld/rm/rmoveto ld/sl/setlinewidth ld/sd/setdash ld/g
/setgray ld/r/setrgbcolor ld/s/stroke ld/t/show ld/aw/awidthshow ld/im
/imagemask ld/MS{moveto show}bd/SF{findfont exch scalefont setfont}bd/SM{cmtx
setmatrix}bd/MF{findfont exch makefont setfont}bd/CM{/cmtx matrix currentmatrix
def}bd/B{M exch dup 0 rlt exch 0 exch rlt neg 0 rlt}bd/CB{B cp eoclip}bd/EA{1
index 0/G0 put 4 string 1 1 4 -1 roll{3 copy neg exch cvs dup 0 71 put cvn 3 -1
roll exch put}for pop}bd/rlt/rlineto ld/L2?/languagelevel where{pop
languagelevel 2 ge}{false}ifelse def end def 
%%EndResource
%%EndProlog
%%BeginSetup
[{0
/languagelevel where{pop languagelevel 2 ge}{false}ifelse
{1 dict dup/JobTimeout 4 -1 roll put setuserparams}
{statusdict/setjobtimeout get exec}ifelse
}stopped cleartomark
[{240
/languagelevel where{pop languagelevel 2 ge}{false}ifelse
{1 dict dup/WaitTimeout 4 -1 roll put setuserparams}
{statusdict/waittimeout 3 -1 roll put}ifelse
}stopped cleartomark
/#copies 1 def
[{
%%BeginFeature: *ColorModel RGB

	<</ProcessColorModel /DeviceRGB>> setpagedevice
%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *PageSize Letter

	<</DeferredMediaSelection true>> setpagedevice
    2 dict dup /PageSize [612 792] put dup /ImagingBBox null put setpagedevice
%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartText Vivid

	globaldict /ColorSmartColorMatching known
	{ true ColorSmartColorMatching } if
	globaldict /ColorSmartColorMatching known
	{ Vivid ColorSmartTextAdjustment } if   

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartGraf Vivid

	globaldict /ColorSmartColorMatching known
	{ Vivid ColorSmartGraphicsAdjustment } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartImag MatchScreen

	globaldict /ColorSmartColorMatching known
	{ MatchScreen ColorSmartImageAdjustment } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartTextHalftone Detail

	globaldict /ColorSmartColorMatching known
	{ Detail ColorSmartTextHalftone } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartGrafHalftone Smooth

	globaldict /ColorSmartColorMatching known
	{ Smooth ColorSmartGraphicsHalftone } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmartImagHalftone Smooth

	globaldict /ColorSmartColorMatching known
	{ Smooth ColorSmartImageHalftone } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *HPColorSmart Auto

	globaldict /ColorSmartColorMatching known
	{ Vivid ColorSmartTextAdjustment } if
	globaldict /ColorSmartColorMatching known
	{ Vivid ColorSmartGraphicsAdjustment } if
	globaldict /ColorSmartColorMatching known
	{ MatchScreen ColorSmartImageAdjustment } if
	globaldict /ColorSmartColorMatching known
	{ Detail ColorSmartTextHalftone } if
	globaldict /ColorSmartColorMatching known
	{ Smooth ColorSmartGraphicsHalftone } if
	globaldict /ColorSmartColorMatching known
	{ Smooth ColorSmartImageHalftone } if
	/setscreen { pop pop pop } def
	/setcolorscreen { pop pop pop pop pop pop pop pop pop pop pop pop } def
	globaldict /ColorSmartColorMatching known
	{true ColorSmartColorMatching } if

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *OutputBin Upper
1 dict dup /OutputFaceUp false put setpagedevice
%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *MediaType Plain

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *Resolution 300dpi

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *VMOption 36Meg

%%EndFeature
} stopped cleartomark
[{
%%BeginFeature: *Option1 False

%%EndFeature
} stopped cleartomark
%%EndSetup
NTPSOct95 begin
%%Page: 1 1
NTPSOct95 /PageSV save put
12.281 779.02 translate 72 300 div dup neg scale
0 0 transform .25 add round .25 sub exch .25 add round .25 sub exch itransform translate
%%IncludeFont: Times-Roman
[50 0 0 -50 0 0]/Times-Roman MF
n
854 57 174 0 B
1 g
f
0 g
(Type Classes and Functional Dependencies)174 45 MS
n
110 57 2047 0 B
1 g
f
0 g
(Page )2047 45 MS
n
25 57 2157 0 B
1 g
f
0 g
(1)2157 45 MS
n
67 57 2182 0 B
1 g
f
0 g
( of )2182 45 MS
n
25 57 2249 0 B
1 g
f
0 g
(5)2249 45 MS
n
755 57 174 3121 B
1 g
f
0 g
(http://www.cse.ogi.edu/~mpj/fds.html)174 3166 MS
n
178 57 2096 3121 B
1 g
f
0 g
(1/8/2001)2096 3166 MS
n
2099 2748 174 171 B
1 g
f
%%IncludeFont: Times-Bold
[100 0 0 -100 0 0]/Times-Bold MF
0 g
(Type Classes and Functional Dependencies )205 389 MS
[50 0 0 -50 0 0]/Times-Roman MF
0.5 0 0.5 r
(Mark P Jones)205 515 MS
1 sl
n
205 521 M
477 521 L
s
0 g
(Oregon Graduate Institute)205 572 MS
(September 10, 1999)205 629 MS
(\(Misc typos fixed: October 6, 1999, with thanks to Stephen Eldridge and Martin Erwig for bringing )205 686 MS
(them to my attention!\))205 743 MS
([The new feature described here has been implemented in the September 1999 release of Hugs 98, and )205 859 MS
(the text of this note is included in the user manual for that release.])205 916 MS
[75 0 0 -75 0 0]/Times-Bold MF
(Introduction)205 1056 MS
[50 0 0 -50 0 0]/Times-Roman MF
(Multiple parameter type classes seem to have many potentially interesting applications. However, )205 1176 MS
(some practical attempts to use them have failed as a result of frustrating ambiguity problems. This )205 1233 MS
(occurs because the mechanisms that are used to resolve overloading are not aggressive enough. Or, to )205 1290 MS
(put it another way, the type relations that are defined by a collection of class and instance declarations )205 1347 MS
(are often too general for practical applications, where programmers might expect stronger )205 1404 MS
(dependencies between parameters. In the rest of this section we will describe these problems in more )205 1461 MS
(detail. We will also describe the mechanisms introduced in the September 1999 release of Hugs that )205 1518 MS
(allow programmers to declare explicit dependencies between parameters, avoiding these difficulties in )205 1575 MS
(many cases, and making multiple parameter classes more useful for some important practical )205 1632 MS
(applications. )205 1689 MS
[56 0 0 -56 0 0]/Times-Bold MF
(1. Ambiguity problems)205 1811 MS
[50 0 0 -50 0 0]/Times-Roman MF
(During the past ten years, many Haskell users have looked into the possibility of building a library for )205 1927 MS
(collection types, using a multiple parameter type class that looks something like the following: )205 1984 MS
%%IncludeFont: Courier
[42 0 0 -42 0 0]/Courier MF
/IsChar{exch/CharStrings get exch known}bd/MapCh{3 -1 roll/Encoding get 3 1
roll put}bd/MapDegree{dup 16#b0 exch/degree IsChar{/degree}{/ring}ifelse MapCh}
bd/MapBB{dup 16#a6 exch/brokenbar IsChar{/brokenbar}{/bar}ifelse MapCh}bd
/reencode{findfont begin currentdict dup length dict begin{1 index/FID ne{def}
{pop pop}ifelse}forall/FontName exch def dup length 0 ne{/Encoding Encoding 256
array copy def 0 exch{dup type/nametype eq{Encoding 2 index 2 index put pop 1
add}{exch pop}ifelse}forall}if pop currentdict dup end end/FontName get exch
definefont dup MapDegree MapBB}bd/LATENC[0/grave/acute/circumflex/tilde/macron
/breve/dotaccent/dieresis/ring/cedilla/hungarumlaut/ogonek/caron/dotlessi/fi/fl
/Lslash/lslash/Zcaron/zcaron/minus/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space/exclam/quotedbl
/numbersign/dollar/percent/ampersand/quotesingle/parenleft/parenright/asterisk
/plus/comma/hyphen/period/slash/zero/one/two/three/four/five/six/seven/eight
/nine/colon/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M
/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/asciicircum
/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft
/bar/braceright/asciitilde/.notdef/.notdef/.notdef/quotesinglbase/florin
/quotedblbase/ellipsis/dagger/daggerdbl/circumflex/perthousand/Scaron
/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft/quoteright
/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark/scaron
/guilsinglright/oe/.notdef/.notdef/Ydieresis/.notdef/exclamdown/cent/sterling
/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine/guillemotleft
/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute
/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex
/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute
/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute
/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis
/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
LATENC /_Courier /Courier reencode
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240class\240Collects\240e\240ce\240where)205 2088 MS
(\240\240\240\240\240\240\240empty\240\240::\240ce)205 2133 MS
(\240\240\240\240\240\240\240insert\240::\240e\240->\240ce\240->\240ce)205 2178 MS
(\240\240\240\240\240\240\240member\240::\240e\240->\240ce\240->\240Bool)205 2223 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The type variable )205 2339 MS
[42 0 0 -42 0 0]/_Courier MF
(e)561 2339 MS
[50 0 0 -50 0 0]/Times-Roman MF
( used here represents the element type, while )586 2339 MS
[42 0 0 -42 0 0]/_Courier MF
(ce)1487 2339 MS
[50 0 0 -50 0 0]/Times-Roman MF
( is the type of the container itself. )1537 2339 MS
(Within this framework, we might want to define instances of this class for lists or characteristic )205 2396 MS
(functions \(both of which can be used to represent collections of any equality type\), bit sets \(which can )205 2453 MS
(be used to represent collections of characters\), or hash tables \(which can be used to represent any )205 2510 MS
(collection whose elements have a hash function\). Omitting standard implementation details, this would )205 2567 MS
(lead to the following declarations:)205 2624 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240instance\240Eq\240e\240=>\240Collects\240e\240[e]\240where\240...)205 2728 MS
(\240\240\240instance\240Eq\240e\240=>\240Collects\240e\240\(e\240->\240Bool\)\240where\240...)205 2773 MS
(\240\240\240instance\240Collects\240Char\240BitSet\240where\240...)205 2818 MS
(\240\240\240instance\240\(Hashable\240e,\240Collects\240a\240ce\))205 2863 MS
(\240\240\240\240\240\240\240\240\240\240\240\240\240\240=>\240Collects\240e\240\(Array\240Int\240ce\)\240where\240...)205 2908 MS
0.5 g
n
2242 225 M
205 225 L
s
n
205 225 M
205 230 L
s
0 g
n
205 230 M
2242 230 L
s
n
2242 230 M
2242 225 L
s
showpage
%%Page: 2 2
12.281 779.02 translate 72 300 div dup neg scale
0 0 transform .25 add round .25 sub exch .25 add round .25 sub exch itransform translate
[50 0 0 -50 0 0]/Times-Roman MF
(Type Classes and Functional Dependencies)174 45 MS
(Page )2047 45 MS
(2)2157 45 MS
( of )2182 45 MS
(5)2249 45 MS
(http://www.cse.ogi.edu/~mpj/fds.html)174 3166 MS
(1/8/2001)2096 3166 MS
n
2099 2739 174 171 B
1 g
f
0 g
(All this looks quite promising; we have a class and a range of interesting implementations. )205 275 MS
(Unfortunately, there are some serious problems with the class declaration. First, the )205 332 MS
[42 0 0 -42 0 0]/Courier MF
(empty)1875 332 MS
[50 0 0 -50 0 0]/Times-Roman MF
( function )2000 332 MS
(has an ambiguous type:)205 389 MS
[42 0 0 -42 0 0]/Courier MF
/IsChar{exch/CharStrings get exch known}bd/MapCh{3 -1 roll/Encoding get 3 1
roll put}bd/MapDegree{dup 16#b0 exch/degree IsChar{/degree}{/ring}ifelse MapCh}
bd/MapBB{dup 16#a6 exch/brokenbar IsChar{/brokenbar}{/bar}ifelse MapCh}bd
/reencode{findfont begin currentdict dup length dict begin{1 index/FID ne{def}
{pop pop}ifelse}forall/FontName exch def dup length 0 ne{/Encoding Encoding 256
array copy def 0 exch{dup type/nametype eq{Encoding 2 index 2 index put pop 1
add}{exch pop}ifelse}forall}if pop currentdict dup end end/FontName get exch
definefont dup MapDegree MapBB}bd/LATENC[0/grave/acute/circumflex/tilde/macron
/breve/dotaccent/dieresis/ring/cedilla/hungarumlaut/ogonek/caron/dotlessi/fi/fl
/Lslash/lslash/Zcaron/zcaron/minus/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space/exclam/quotedbl
/numbersign/dollar/percent/ampersand/quotesingle/parenleft/parenright/asterisk
/plus/comma/hyphen/period/slash/zero/one/two/three/four/five/six/seven/eight
/nine/colon/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M
/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/asciicircum
/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft
/bar/braceright/asciitilde/.notdef/.notdef/.notdef/quotesinglbase/florin
/quotedblbase/ellipsis/dagger/daggerdbl/circumflex/perthousand/Scaron
/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft/quoteright
/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark/scaron
/guilsinglright/oe/.notdef/.notdef/Ydieresis/.notdef/exclamdown/cent/sterling
/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine/guillemotleft
/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute
/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex
/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute
/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute
/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis
/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
LATENC /_Courier /Courier reencode
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240empty\240::\240Collects\240e\240ce\240=>\240ce)205 493 MS
[50 0 0 -50 0 0]/Times-Roman MF
(By `ambiguous' we mean that there is a type variable )205 609 MS
[42 0 0 -42 0 0]/_Courier MF
(e)1262 609 MS
[50 0 0 -50 0 0]/Times-Roman MF
( that appears on the left of the )1287 609 MS
[42 0 0 -42 0 0]/_Courier MF
(=>)1896 609 MS
[50 0 0 -50 0 0]/Times-Roman MF
( symbol, but )1946 609 MS
(not on the right. The problem with this is that, according to the theoretical foundations of Haskell )205 666 MS
(overloading, we cannot guarantee a well-defined semantics for any term with an ambiguous type. For )205 723 MS
(this reason, Hugs rejects any attempt to define or use such terms:)205 780 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240ERROR:\240Ambiguous\240type\240signature\240in\240class\240declaration)205 884 MS
(\240\240\240***\240ambiguous\240type\240:\240Collects\240a\240b\240=>\240b)205 929 MS
(\240\240\240***\240assigned\240to\240\240\240\240:\240empty)205 974 MS
[50 0 0 -50 0 0]/Times-Roman MF
(We can sidestep this specific problem by removing the )205 1090 MS
[42 0 0 -42 0 0]/_Courier MF
(empty)1294 1090 MS
[50 0 0 -50 0 0]/Times-Roman MF
( member from the class declaration. )1419 1090 MS
(However, although the remaining members, )205 1147 MS
[42 0 0 -42 0 0]/_Courier MF
(insert)1086 1147 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )1236 1147 MS
[42 0 0 -42 0 0]/_Courier MF
(member)1333 1147 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, do not have ambiguous types, we )1483 1147 MS
(still run into problems when we try to use them. For example, consider the following two functions:)205 1204 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240x\240y\240=\240insert\240x\240.\240insert\240y)205 1308 MS
(\240\240\240g\240\240\240\240\240=\240f\240True\240'a')205 1353 MS
[50 0 0 -50 0 0]/Times-Roman MF
(for which Hugs infers the following types:)205 1469 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240::\240\(Collects\240a\240c,\240Collects\240b\240c\)\240=>\240a\240->\240b\240->\240c\240->\240c)205 1573 MS
(\240\240\240g\240::\240\(Collects\240Bool\240c,\240Collects\240Char\240c\)\240=>\240c\240->\240c)205 1618 MS
[50 0 0 -50 0 0]/Times-Roman MF
(Notice that the type for )205 1734 MS
[42 0 0 -42 0 0]/_Courier MF
(f)683 1734 MS
[50 0 0 -50 0 0]/Times-Roman MF
( allows the two parameters )708 1734 MS
[42 0 0 -42 0 0]/_Courier MF
(x)1256 1734 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )1281 1734 MS
[42 0 0 -42 0 0]/_Courier MF
(y)1378 1734 MS
[50 0 0 -50 0 0]/Times-Roman MF
( to be assigned different types, even )1403 1734 MS
(though it attempts to insert each of the two values, one after the other, into the same collection. If )205 1791 MS
(we're trying to model collections that contain only one type of value, then this is )205 1848 MS
(clearly an inaccurate )1804 1848 MS
(type. Worse still, the definition for )205 1905 MS
[42 0 0 -42 0 0]/_Courier MF
(g)900 1905 MS
[50 0 0 -50 0 0]/Times-Roman MF
( is accepted, without causing a type error. As a result, the error in )925 1905 MS
(this code will not be flagged at the point where it appears. Instead, it will show up only when we try to )205 1962 MS
(use )205 2019 MS
[42 0 0 -42 0 0]/_Courier MF
(g)284 2019 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, which might even be in a different module.)309 2019 MS
[56 0 0 -56 0 0]/Times-Bold MF
(2. An attempt to use constructor classes)205 2141 MS
[50 0 0 -50 0 0]/Times-Roman MF
(Faced with the problems described above, some Haskell programmers might be tempted to use )205 2257 MS
(something like the following version of the class declaration:)205 2314 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240class\240Collects\240e\240c\240where)205 2418 MS
(\240\240\240\240\240\240empty\240\240::\240c\240e)205 2463 MS
(\240\240\240\240\240\240insert\240::\240e\240->\240c\240e\240->\240c\240e)205 2508 MS
(\240\240\240\240\240\240member\240::\240e\240->\240c\240e\240->\240Bool)205 2553 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The key difference here is that we abstract over the type constructor )205 2669 MS
[42 0 0 -42 0 0]/_Courier MF
(c)1573 2669 MS
[50 0 0 -50 0 0]/Times-Roman MF
( that is used to form the )1598 2669 MS
(collection type )205 2726 MS
[42 0 0 -42 0 0]/_Courier MF
(c\240e)509 2726 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, and not over that collection type itself, represented by )584 2726 MS
[42 0 0 -42 0 0]/_Courier MF
(ce)1691 2726 MS
[50 0 0 -50 0 0]/Times-Roman MF
( in the original class )1741 2726 MS
(declaration. This avoids the immediate problems that we mentioned above:)205 2783 MS
NTPSOct95 /FontSV save put
%%BeginFont: Wingdings029
10 dict dup begin
/FontType 3 def
/FontMatrix [1 29 div 0 0 1 29 div 0 0] def
/FontBBox [0 -26 39 6] def
/Encoding 256 array def
0 1 255 {Encoding exch /.notdef put} for
/BuildGlyph {0 begin
exch /CD get exch get /CI exch def
CI 0 get 0 CI 1 4 getinterval aload pop setcachedevice
CI 5 get CI 6 get true
[1 0 0 -1 0 0] dup 4 CI 7 get put dup 5 CI 8 get put
CI 9 get imagemask end}def
/BuildGlyph load 0 5 dict put
/BuildChar {1 index /Encoding get exch get
1 index /BuildGlyph get exec} bind def
/CD 227 dict def
CD /.notdef[.24 0 0 0 0 1 1 0 0 {<>}]put
Encoding 122 /c122 put CD /c122 [22 2 19 19 2 17 17 -2 19
<~"5j.ip]*PX!'gG_J,]LurrE*!JH,Y"s8RWLs+(.LJ:IS!J,]L5rW#1^!"\i)"5j.~>]put
end
/Wingdings029 exch definefont pop
%%EndFont
[29.004 0 0 -29.004 0 0]/Wingdings029 MF
(z)280 2899 MS
[42 0 0 -42 0 0]/_Courier MF
(empty)330 2899 MS
[50 0 0 -50 0 0]/Times-Roman MF
( has type )455 2899 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects\240e\240c\240=>\240c\240e)644 2899 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, which is not ambiguous.)1119 2899 MS
showpage
%%Page: 3 3
12.281 779.02 translate 72 300 div dup neg scale
0 0 transform .25 add round .25 sub exch .25 add round .25 sub exch itransform translate
[50 0 0 -50 0 0]/Times-Roman MF
(Type Classes and Functional Dependencies)174 45 MS
(Page )2047 45 MS
(3)2157 45 MS
( of )2182 45 MS
(5)2249 45 MS
(http://www.cse.ogi.edu/~mpj/fds.html)174 3166 MS
(1/8/2001)2096 3166 MS
n
2099 2833 174 171 B
1 g
f
[29.004 0 0 -29.004 0 0]/Wingdings029 MF
0 g
(z)280 275 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The function )330 275 MS
[42 0 0 -42 0 0]/Courier MF
(f)596 275 MS
[50 0 0 -50 0 0]/Times-Roman MF
( from the previous section has a more accurate type:)621 275 MS
[42 0 0 -42 0 0]/Courier MF
/IsChar{exch/CharStrings get exch known}bd/MapCh{3 -1 roll/Encoding get 3 1
roll put}bd/MapDegree{dup 16#b0 exch/degree IsChar{/degree}{/ring}ifelse MapCh}
bd/MapBB{dup 16#a6 exch/brokenbar IsChar{/brokenbar}{/bar}ifelse MapCh}bd
/reencode{findfont begin currentdict dup length dict begin{1 index/FID ne{def}
{pop pop}ifelse}forall/FontName exch def dup length 0 ne{/Encoding Encoding 256
array copy def 0 exch{dup type/nametype eq{Encoding 2 index 2 index put pop 1
add}{exch pop}ifelse}forall}if pop currentdict dup end end/FontName get exch
definefont dup MapDegree MapBB}bd/LATENC[0/grave/acute/circumflex/tilde/macron
/breve/dotaccent/dieresis/ring/cedilla/hungarumlaut/ogonek/caron/dotlessi/fi/fl
/Lslash/lslash/Zcaron/zcaron/minus/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space/exclam/quotedbl
/numbersign/dollar/percent/ampersand/quotesingle/parenleft/parenright/asterisk
/plus/comma/hyphen/period/slash/zero/one/two/three/four/five/six/seven/eight
/nine/colon/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M
/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/asciicircum
/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft
/bar/braceright/asciitilde/.notdef/.notdef/.notdef/quotesinglbase/florin
/quotedblbase/ellipsis/dagger/daggerdbl/circumflex/perthousand/Scaron
/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft/quoteright
/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark/scaron
/guilsinglright/oe/.notdef/.notdef/Ydieresis/.notdef/exclamdown/cent/sterling
/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine/guillemotleft
/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute
/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex
/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute
/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute
/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis
/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
LATENC /_Courier /Courier reencode
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240::\240\(Collects\240e\240c\)\240=>\240e\240->\240e\240->\240c\240e\240->\240c\240e)330 379 MS
[29.004 0 0 -29.004 0 0]/Wingdings029 MF
(z)280 495 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The function )330 495 MS
[42 0 0 -42 0 0]/_Courier MF
(g)596 495 MS
[50 0 0 -50 0 0]/Times-Roman MF
( from the previous section is now rejected with a type error as we would hope )621 495 MS
(because the type of )330 552 MS
[42 0 0 -42 0 0]/_Courier MF
(f)725 552 MS
[50 0 0 -50 0 0]/Times-Roman MF
( does not allow the two arguments to have different types.)750 552 MS
(This, then, is an example of a multiple parameter class that does actually work quite well in practice, )205 668 MS
(without ambiguity problems. )205 725 MS
(There is, however, a catch. This version of the )205 841 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)1138 841 MS
[50 0 0 -50 0 0]/Times-Roman MF
( class is nowhere near as general as the )1338 841 MS
(original class seemed to be: only one of the four instances in )205 898 MS
0.5 0 0.5 r
(Section 1)1410 898 MS
1 sl
n
1410 904 M
1597 904 L
s
0 g
( can be used with this version of )1597 898 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)205 955 MS
[50 0 0 -50 0 0]/Times-Roman MF
( because only one of them---the instance for lists---has a collection type that can be written )405 955 MS
(in the form )205 1012 MS
[42 0 0 -42 0 0]/_Courier MF
(c\240e)436 1012 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, for some type constructor )511 1012 MS
[42 0 0 -42 0 0]/_Courier MF
(c)1064 1012 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, and element type )1089 1012 MS
[42 0 0 -42 0 0]/_Courier MF
(e)1464 1012 MS
[50 0 0 -50 0 0]/Times-Roman MF
(. )1489 1012 MS
[56 0 0 -56 0 0]/Times-Bold MF
(3. Adding dependencies)205 1134 MS
[50 0 0 -50 0 0]/Times-Roman MF
(To get a more useful version of the )205 1250 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)916 1250 MS
[50 0 0 -50 0 0]/Times-Roman MF
( class, Hugs provides a mechanism that allows )1116 1250 MS
(programmers to specify dependencies between the parameters of a multiple parameter class. [For )205 1307 MS
(readers with an interest in theoretical foundations and previous work: The use of dependency )205 1364 MS
(information can be seen both as a generalization of the proposal for `parametric type classes' that was )205 1421 MS
(put forward by Chen, Hudak, and Odersky, or as a special case of the later framework for )205 1478 MS
%%IncludeFont: Times-Italic
[50 0 0 -50 0 0]/Times-Italic MF
(improvement)205 1535 MS
[50 0 0 -50 0 0]/Times-Roman MF
( of qualified types. The underlying ideas are also discussed in a more theoretical and )465 1535 MS
(abstract setting in a forthcoming manuscript, where they are identified as one point in a general design )205 1592 MS
(space for systems of implicit parameterization.])205 1649 MS
(To start with an abstract example, consider a declaration such as:)205 1765 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240class\240C\240a\240b\240where\240...)205 1869 MS
[50 0 0 -50 0 0]/Times-Roman MF
(which tells us simply that )205 1985 MS
[42 0 0 -42 0 0]/_Courier MF
(C)716 1985 MS
[50 0 0 -50 0 0]/Times-Roman MF
( can be thought of as a binary relation on types \(or type constructors, )741 1985 MS
(depending on the kinds of )205 2042 MS
[42 0 0 -42 0 0]/_Courier MF
(a)731 2042 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )756 2042 MS
[42 0 0 -42 0 0]/_Courier MF
(b)853 2042 MS
[50 0 0 -50 0 0]/Times-Roman MF
(\). Extra clauses can be included in the definition of classes to add )878 2042 MS
(information about dependencies between parameters, as in the following examples:)205 2099 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240class\240D\240a\240b\240|\240a\240->\240b\240where\240...)205 2203 MS
(\240\240\240class\240E\240a\240b\240|\240a\240->\240b,\240b\240->\240a\240where\240...)205 2248 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The notation )205 2364 MS
[42 0 0 -42 0 0]/_Courier MF
(a\240->\240b)472 2364 MS
[50 0 0 -50 0 0]/Times-Roman MF
( used here between the )622 2364 MS
[42 0 0 -42 0 0]/_Courier MF
(|)1089 2364 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )1114 2364 MS
[42 0 0 -42 0 0]/_Courier MF
(where)1211 2364 MS
[50 0 0 -50 0 0]/Times-Roman MF
( symbols---not to be confused with a function )1336 2364 MS
(type---indicates that the )205 2421 MS
[42 0 0 -42 0 0]/_Courier MF
(a)690 2421 MS
[50 0 0 -50 0 0]/Times-Roman MF
( parameter uniquely determines the )715 2421 MS
[42 0 0 -42 0 0]/_Courier MF
(b)1423 2421 MS
[50 0 0 -50 0 0]/Times-Roman MF
( parameter, and might be read as ")1448 2421 MS
[42 0 0 -42 0 0]/_Courier MF
(a)2128 2421 MS
[50 0 0 -50 0 0]/Times-Roman MF
( )2153 2421 MS
(determines )205 2478 MS
[42 0 0 -42 0 0]/_Courier MF
(b)433 2478 MS
[50 0 0 -50 0 0]/Times-Roman MF
(." Thus )458 2478 MS
[42 0 0 -42 0 0]/_Courier MF
(D)616 2478 MS
[50 0 0 -50 0 0]/Times-Roman MF
( is not just a relation, but actually a \(partial\) function. Similarly, from the two )641 2478 MS
(dependencies that are included in the definition of )205 2535 MS
[42 0 0 -42 0 0]/_Courier MF
(E)1202 2535 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, we can see that )1227 2535 MS
[42 0 0 -42 0 0]/_Courier MF
(E)1570 2535 MS
[50 0 0 -50 0 0]/Times-Roman MF
( represents a \(partial\) one-one )1595 2535 MS
(mapping between types.)205 2592 MS
(More generally, dependencies take the form )205 2708 MS
[42 0 0 -42 0 0]/_Courier MF
(x1\240...\240xn\240->\240y1\240...\240ym)1088 2708 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, where )1638 2708 MS
[42 0 0 -42 0 0]/_Courier MF
(x1)1798 2708 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, ..., )1848 2708 MS
[42 0 0 -42 0 0]/_Courier MF
(xn)1939 2708 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, and )1989 2708 MS
[42 0 0 -42 0 0]/_Courier MF
(y1)2099 2708 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, ..., )2149 2708 MS
[42 0 0 -42 0 0]/_Courier MF
(yn)205 2765 MS
[50 0 0 -50 0 0]/Times-Roman MF
( are type variables with )255 2765 MS
[42 0 0 -42 0 0]/_Courier MF
(n)727 2765 MS
[50 0 0 -50 0 0]/Times-Roman MF
(>0 and )752 2765 MS
[42 0 0 -42 0 0]/_Courier MF
(m)902 2765 MS
[50 0 0 -50 0 0]/Times-Roman MF
(>=0, meaning that the )927 2765 MS
[42 0 0 -42 0 0]/_Courier MF
(y)1376 2765 MS
[50 0 0 -50 0 0]/Times-Roman MF
( parameters are uniquely determined by )1401 2765 MS
(the )205 2822 MS
[42 0 0 -42 0 0]/_Courier MF
(x)279 2822 MS
[50 0 0 -50 0 0]/Times-Roman MF
( parameters. Spaces can be used as separators if more than one variable appears on any single )304 2822 MS
(side of a dependency, as in )205 2879 MS
[42 0 0 -42 0 0]/_Courier MF
(t\240->\240a\240b)748 2879 MS
[50 0 0 -50 0 0]/Times-Roman MF
(. Note that a class may be annotated with multiple dependencies )948 2879 MS
(using commas as separators, as in the definition of )205 2936 MS
[42 0 0 -42 0 0]/_Courier MF
(E)1214 2936 MS
[50 0 0 -50 0 0]/Times-Roman MF
( above. Some dependencies that we can write in )1239 2936 MS
(this notation are redundant, and will be rejected by Hugs because they don't serve any useful purpose, )205 2993 MS
showpage
%%Page: 4 4
12.281 779.02 translate 72 300 div dup neg scale
0 0 transform .25 add round .25 sub exch .25 add round .25 sub exch itransform translate
[50 0 0 -50 0 0]/Times-Roman MF
(Type Classes and Functional Dependencies)174 45 MS
(Page )2047 45 MS
(4)2157 45 MS
( of )2182 45 MS
(5)2249 45 MS
(http://www.cse.ogi.edu/~mpj/fds.html)174 3166 MS
(1/8/2001)2096 3166 MS
n
2099 2832 174 171 B
1 g
f
0 g
(and may instead indicate an error in the program. Examples of dependencies like this include )205 216 MS
[42 0 0 -42 0 0]/Courier MF
/IsChar{exch/CharStrings get exch known}bd/MapCh{3 -1 roll/Encoding get 3 1
roll put}bd/MapDegree{dup 16#b0 exch/degree IsChar{/degree}{/ring}ifelse MapCh}
bd/MapBB{dup 16#a6 exch/brokenbar IsChar{/brokenbar}{/bar}ifelse MapCh}bd
/reencode{findfont begin currentdict dup length dict begin{1 index/FID ne{def}
{pop pop}ifelse}forall/FontName exch def dup length 0 ne{/Encoding Encoding 256
array copy def 0 exch{dup type/nametype eq{Encoding 2 index 2 index put pop 1
add}{exch pop}ifelse}forall}if pop currentdict dup end end/FontName get exch
definefont dup MapDegree MapBB}bd/LATENC[0/grave/acute/circumflex/tilde/macron
/breve/dotaccent/dieresis/ring/cedilla/hungarumlaut/ogonek/caron/dotlessi/fi/fl
/Lslash/lslash/Zcaron/zcaron/minus/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space/exclam/quotedbl
/numbersign/dollar/percent/ampersand/quotesingle/parenleft/parenright/asterisk
/plus/comma/hyphen/period/slash/zero/one/two/three/four/five/six/seven/eight
/nine/colon/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M
/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/asciicircum
/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft
/bar/braceright/asciitilde/.notdef/.notdef/.notdef/quotesinglbase/florin
/quotedblbase/ellipsis/dagger/daggerdbl/circumflex/perthousand/Scaron
/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft/quoteright
/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark/scaron
/guilsinglright/oe/.notdef/.notdef/Ydieresis/.notdef/exclamdown/cent/sterling
/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine/guillemotleft
/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute
/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex
/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute
/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute
/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis
/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
LATENC /_Courier /Courier reencode
[42 0 0 -42 0 0]/_Courier MF
(a\240->\240a)2050 216 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, )2200 216 MS
[42 0 0 -42 0 0]/_Courier MF
(a\240->\240a\240a)205 273 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, )405 273 MS
[42 0 0 -42 0 0]/_Courier MF
(a\240->)431 273 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, etc. There can also be some redundancy if multiple dependencies are given, as in )531 273 MS
[42 0 0 -42 0 0]/_Courier MF
(a-)2162 273 MS
(>b,\240b->c,\240a->c)205 330 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, and in which some subset implies the remaining dependencies. Examples like this )555 330 MS
(are not treated as errors. Note that dependencies appear only in class declarations, and not in any )205 387 MS
(other part of the language. In particular, the syntax for instance declarations, class constraints, and )205 444 MS
(types is completely unchanged.)205 501 MS
(By including dependencies in a class declaration, we provide a mechanism for the programmer to )205 617 MS
(specify each multiple parameter class more precisely. The compiler, on the other hand, is responsible )205 674 MS
(for ensuring that the set of instances that are in scope at any given point in the program is consistent )205 731 MS
(with any declared dependencies. For example, the following pair of instance declarations cannot )205 788 MS
(appear together in the same scope because they violate the dependency for )205 845 MS
[42 0 0 -42 0 0]/_Courier MF
(D)1697 845 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, even though either one )1722 845 MS
(on its own would be acceptable:)205 902 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240instance\240D\240Bool\240Int\240where\240...)205 1006 MS
(\240\240\240instance\240D\240Bool\240Char\240where\240...)205 1051 MS
[50 0 0 -50 0 0]/Times-Roman MF
(Note also that the following declaration is not allowed, even by itself:)205 1167 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240instance\240D\240[a]\240b\240where\240...)205 1271 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The problem here is that this instance would allow one particular choice of )205 1387 MS
[42 0 0 -42 0 0]/_Courier MF
([a])1698 1387 MS
[50 0 0 -50 0 0]/Times-Roman MF
( to be associated with )1773 1387 MS
(more than one choice for )205 1444 MS
[42 0 0 -42 0 0]/_Courier MF
(b)715 1444 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, which contradicts the dependency specified in the definition of )740 1444 MS
[42 0 0 -42 0 0]/_Courier MF
(D)2014 1444 MS
[50 0 0 -50 0 0]/Times-Roman MF
(. More )2039 1444 MS
(generally, this means that, in any instance of the form:)205 1501 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240instance\240D\240t\240s\240where\240...)205 1605 MS
[50 0 0 -50 0 0]/Times-Roman MF
(for some particular types )205 1721 MS
[42 0 0 -42 0 0]/_Courier MF
(t)712 1721 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )737 1721 MS
[42 0 0 -42 0 0]/_Courier MF
(s)834 1721 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, the only variables that can appear in )859 1721 MS
[42 0 0 -42 0 0]/_Courier MF
(s)1609 1721 MS
[50 0 0 -50 0 0]/Times-Roman MF
( are the ones that appear in )1634 1721 MS
[42 0 0 -42 0 0]/_Courier MF
(t)2183 1721 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, )2208 1721 MS
(and hence, if the type )205 1778 MS
[42 0 0 -42 0 0]/_Courier MF
(t)641 1778 MS
[50 0 0 -50 0 0]/Times-Roman MF
( is known, then )666 1778 MS
[42 0 0 -42 0 0]/_Courier MF
(s)982 1778 MS
[50 0 0 -50 0 0]/Times-Roman MF
( will be uniquely determined.)1007 1778 MS
(The benefit of including dependency information is that it allows us to define more general multiple )205 1894 MS
(parameter classes, without ambiguity problems, and with the benefit of more accurate types. To )205 1951 MS
(illustrate this, we return to the collection class example, and annotate the original definition from )205 2008 MS
0.5 0 0.5 r
(Section 1)205 2065 MS
1 sl
n
205 2071 M
392 2071 L
s
0 g
( with a simple dependency:)392 2065 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240class\240Collects\240e\240ce\240|\240ce\240->\240e\240where)205 2169 MS
(\240\240\240\240\240\240empty\240\240::\240ce)205 2214 MS
(\240\240\240\240\240\240insert\240::\240e\240->\240ce\240->\240ce)205 2259 MS
(\240\240\240\240\240\240member\240::\240e\240->\240ce\240->\240Bool)205 2304 MS
[50 0 0 -50 0 0]/Times-Roman MF
(The dependency )205 2420 MS
[42 0 0 -42 0 0]/_Courier MF
(ce\240->\240e)542 2420 MS
[50 0 0 -50 0 0]/Times-Roman MF
( here specifies that the type )717 2420 MS
[42 0 0 -42 0 0]/_Courier MF
(e)1270 2420 MS
[50 0 0 -50 0 0]/Times-Roman MF
( of elements is uniquely determined by the type )1295 2420 MS
(of the collection )205 2477 MS
[42 0 0 -42 0 0]/_Courier MF
(ce)539 2477 MS
[50 0 0 -50 0 0]/Times-Roman MF
(. Note that both parameters of )589 2477 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)1203 2477 MS
[50 0 0 -50 0 0]/Times-Roman MF
( are of kind )1403 2477 MS
[42 0 0 -42 0 0]/_Courier MF
(*)1643 2477 MS
[50 0 0 -50 0 0]/Times-Roman MF
(; there are no constructor )1668 2477 MS
(classes here. Note too that all of the instances of )205 2534 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)1178 2534 MS
[50 0 0 -50 0 0]/Times-Roman MF
( that we gave in )1378 2534 MS
0.5 0 0.5 r
(Section 1)1706 2534 MS
n
1706 2540 M
1893 2540 L
s
0 g
( can be used )1893 2534 MS
(together with this new definition.)205 2591 MS
(What about the ambiguity problems that we encountered with the original definition? The )205 2707 MS
[42 0 0 -42 0 0]/_Courier MF
(empty)1992 2707 MS
[50 0 0 -50 0 0]/Times-Roman MF
( )2117 2707 MS
(function still has type )205 2764 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects\240e\240ce\240=>\240ce)640 2764 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, but it is no longer necessary to regard that as an )1115 2764 MS
(ambiguous type: Although the variable )205 2821 MS
[42 0 0 -42 0 0]/_Courier MF
(e)986 2821 MS
[50 0 0 -50 0 0]/Times-Roman MF
( does not appear on the right of the )1011 2821 MS
[42 0 0 -42 0 0]/_Courier MF
(=>)1724 2821 MS
[50 0 0 -50 0 0]/Times-Roman MF
( symbol, the )1774 2821 MS
(dependency for class )205 2878 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)630 2878 MS
[50 0 0 -50 0 0]/Times-Roman MF
( tells us that it is uniquely determined by )830 2878 MS
[42 0 0 -42 0 0]/_Courier MF
(ce)1641 2878 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, which )1691 2878 MS
[50 0 0 -50 0 0]/Times-Italic MF
(does)1848 2878 MS
[50 0 0 -50 0 0]/Times-Roman MF
( appear on the )1939 2878 MS
(right of the )205 2935 MS
[42 0 0 -42 0 0]/_Courier MF
(=>)439 2935 MS
[50 0 0 -50 0 0]/Times-Roman MF
( symbol. Hence the context in which )489 2935 MS
[42 0 0 -42 0 0]/_Courier MF
(empty)1223 2935 MS
[50 0 0 -50 0 0]/Times-Roman MF
( is used can still give enough information to )1348 2935 MS
(determine types for both )205 2992 MS
[42 0 0 -42 0 0]/_Courier MF
(ce)704 2992 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )754 2992 MS
[42 0 0 -42 0 0]/_Courier MF
(e)851 2992 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, without ambiguity. More generally, we need only regard a type as )876 2992 MS
showpage
%%Page: 5 5
12.281 779.02 translate 72 300 div dup neg scale
0 0 transform .25 add round .25 sub exch .25 add round .25 sub exch itransform translate
[50 0 0 -50 0 0]/Times-Roman MF
(Type Classes and Functional Dependencies)174 45 MS
(Page )2047 45 MS
(5)2157 45 MS
( of )2182 45 MS
(5)2249 45 MS
(http://www.cse.ogi.edu/~mpj/fds.html)174 3166 MS
(1/8/2001)2096 3166 MS
n
2099 1473 174 171 B
1 g
f
0 g
(ambiguous if it contains a variable on the left of the )205 216 MS
[42 0 0 -42 0 0]/Courier MF
(=>)1235 216 MS
[50 0 0 -50 0 0]/Times-Roman MF
( that is not uniquely determined \(either directly )1285 216 MS
(or indirectly\) by the variables on the right.)205 273 MS
(Dependencies also help to produce more accurate types for user defined functions, and hence to )205 389 MS
(provide earlier detection of errors, and less cluttered types for programmers to work with. Recall the )205 446 MS
(previous definition for a function )205 503 MS
[42 0 0 -42 0 0]/Courier MF
(f)870 503 MS
[50 0 0 -50 0 0]/Times-Roman MF
(:)895 503 MS
[42 0 0 -42 0 0]/Courier MF
/IsChar{exch/CharStrings get exch known}bd/MapCh{3 -1 roll/Encoding get 3 1
roll put}bd/MapDegree{dup 16#b0 exch/degree IsChar{/degree}{/ring}ifelse MapCh}
bd/MapBB{dup 16#a6 exch/brokenbar IsChar{/brokenbar}{/bar}ifelse MapCh}bd
/reencode{findfont begin currentdict dup length dict begin{1 index/FID ne{def}
{pop pop}ifelse}forall/FontName exch def dup length 0 ne{/Encoding Encoding 256
array copy def 0 exch{dup type/nametype eq{Encoding 2 index 2 index put pop 1
add}{exch pop}ifelse}forall}if pop currentdict dup end end/FontName get exch
definefont dup MapDegree MapBB}bd/LATENC[0/grave/acute/circumflex/tilde/macron
/breve/dotaccent/dieresis/ring/cedilla/hungarumlaut/ogonek/caron/dotlessi/fi/fl
/Lslash/lslash/Zcaron/zcaron/minus/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/space/exclam/quotedbl
/numbersign/dollar/percent/ampersand/quotesingle/parenleft/parenright/asterisk
/plus/comma/hyphen/period/slash/zero/one/two/three/four/five/six/seven/eight
/nine/colon/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M
/N/O/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/asciicircum
/underscore/grave/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y/z/braceleft
/bar/braceright/asciitilde/.notdef/.notdef/.notdef/quotesinglbase/florin
/quotedblbase/ellipsis/dagger/daggerdbl/circumflex/perthousand/Scaron
/guilsinglleft/OE/.notdef/.notdef/.notdef/.notdef/quoteleft/quoteright
/quotedblleft/quotedblright/bullet/endash/emdash/tilde/trademark/scaron
/guilsinglright/oe/.notdef/.notdef/Ydieresis/.notdef/exclamdown/cent/sterling
/currency/yen/brokenbar/section/dieresis/copyright/ordfeminine/guillemotleft
/logicalnot/hyphen/registered/macron/degree/plusminus/twosuperior/threesuperior
/acute/mu/paragraph/periodcentered/cedilla/onesuperior/ordmasculine
/guillemotright/onequarter/onehalf/threequarters/questiondown/Agrave/Aacute
/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex
/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute
/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex
/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis
/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute
/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis
/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
LATENC /_Courier /Courier reencode
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240x\240y\240=\240insert\240x\240y\240=\240insert\240x\240.\240insert\240y)205 607 MS
[50 0 0 -50 0 0]/Times-Roman MF
(for which we originally obtained a type:)205 723 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240::\240\(Collects\240a\240c,\240Collects\240b\240c\)\240=>\240a\240->\240b\240->\240c\240->\240c)205 827 MS
[50 0 0 -50 0 0]/Times-Roman MF
(Given the dependency information that we have for )205 943 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)1236 943 MS
[50 0 0 -50 0 0]/Times-Roman MF
(, however, we can deduce that )1436 943 MS
[42 0 0 -42 0 0]/_Courier MF
(a)2054 943 MS
[50 0 0 -50 0 0]/Times-Roman MF
( and )2079 943 MS
[42 0 0 -42 0 0]/_Courier MF
(b)2176 943 MS
[50 0 0 -50 0 0]/Times-Roman MF
( )2201 943 MS
(must be equal because they both appear as the second parameter in a )205 1000 MS
[42 0 0 -42 0 0]/_Courier MF
(Collects)1581 1000 MS
[50 0 0 -50 0 0]/Times-Roman MF
( constraint with the )1781 1000 MS
(same first parameter )205 1057 MS
[42 0 0 -42 0 0]/_Courier MF
(c)621 1057 MS
[50 0 0 -50 0 0]/Times-Roman MF
(. Hence we can infer a shorter and more accurate type for )646 1057 MS
[42 0 0 -42 0 0]/_Courier MF
(f)1802 1057 MS
[50 0 0 -50 0 0]/Times-Roman MF
(:)1827 1057 MS
[42 0 0 -42 0 0]/_Courier MF
(\240\240\240f\240::\240\(Collects\240a\240c\)\240=>\240a\240->\240a\240->\240c\240->\240c)205 1161 MS
[50 0 0 -50 0 0]/Times-Roman MF
(In a similar way, the earlier definition of )205 1277 MS
[42 0 0 -42 0 0]/_Courier MF
(g)1010 1277 MS
[50 0 0 -50 0 0]/Times-Roman MF
( will now be flagged as a type error.)1035 1277 MS
(Although we have given only a few examples here, it should be clear that the addition of dependency )205 1393 MS
(information can help to make multiple parameter classes more useful in practice, avoiding ambiguity )205 1450 MS
(problems, and allowing more general sets of instance declarations.)205 1507 MS
1 sl
0.5 g
n
2242 1585 M
205 1585 L
s
n
205 1585 M
205 1590 L
s
0 g
n
205 1590 M
2242 1590 L
s
n
2242 1590 M
2242 1585 L
s
showpage
FontSV restore
PageSV restore
%%Trailer
%%DocumentNeededFonts:
%%+ Courier
%%+ Times-Bold
%%+ Times-Italic
%%+ Times-Roman
%%DocumentSuppliedFonts:
%%+ Wingdings029
end
%%Pages: 5
%%EOF
%-12345X@PJL EOJ 
%-12345X
